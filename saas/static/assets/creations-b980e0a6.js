import{s as n}from"./supabaseClient-84cb7855.js";import"./preload-helper-8235fac6.js";console.log("ğŸš€ FRIDAY: Service crÃ©ations - SUPABASE ONLY MODE");function i(){const r=localStorage.getItem("friday_supabase_user");if(r)return JSON.parse(r).id;const e=localStorage.getItem("userEmail");return e?"friday-user-"+btoa(e).slice(0,10):"friday-anonymous-"+Date.now()}async function R({type:r,title:e,data:o}){console.log("ğŸ’¾ FRIDAY: Sauvegarde crÃ©ation en base Supabase",{type:r,title:e});const t=i();try{const a={user_id:t,type:r,title:e,data:{...o,created_via:"friday_web",user_email:localStorage.getItem("userEmail")||"anonymous",timestamp:new Date().toISOString()}};console.log("ğŸ“¤ Envoi vers Supabase:",a);const{data:c,error:s}=await n.from("creations").insert([a]).select().single();if(s)throw console.error("âŒ ERREUR Supabase lors de la crÃ©ation:",s),console.error("ğŸ” FRIDAY: DÃ©tails erreur Supabase:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),console.error("ğŸ“„ FRIDAY: DonnÃ©es envoyÃ©es:",a),new Error(`Erreur base de donnÃ©es: ${s.message}`);return console.log("âœ… CrÃ©ation sauvegardÃ©e en base:",c),c}catch(a){throw console.error("âŒ ERREUR CRITIQUE lors de la sauvegarde:",a),a}}async function l(){console.log("ğŸ“¥ FRIDAY: RÃ©cupÃ©ration crÃ©ations depuis Supabase");const r=i();try{const{data:e,error:o}=await n.from("creations").select("*").eq("user_id",r).order("created_at",{ascending:!1});if(o)throw console.error("âŒ ERREUR Supabase lors de la rÃ©cupÃ©ration:",o),new Error(`Erreur base de donnÃ©es: ${o.message}`);return console.log(`âœ… ${(e==null?void 0:e.length)||0} crÃ©ations rÃ©cupÃ©rÃ©es de la base`),e||[]}catch(e){throw console.error("âŒ ERREUR CRITIQUE lors de la rÃ©cupÃ©ration:",e),e}}const g=l;async function p(r){console.log("ğŸ—‘ï¸ FRIDAY: Suppression crÃ©ation de Supabase, ID:",r);try{const{error:e}=await n.from("creations").delete().eq("id",r);if(e)throw console.error("âŒ ERREUR Supabase lors de la suppression:",e),new Error(`Erreur base de donnÃ©es: ${e.message}`);return console.log("âœ… CrÃ©ation supprimÃ©e de la base"),!0}catch(e){throw console.error("âŒ ERREUR CRITIQUE lors de la suppression:",e),e}}async function E(r,e){console.log("ğŸ“ FRIDAY: Mise Ã  jour crÃ©ation en base, ID:",r);try{const{data:o,error:t}=await n.from("creations").update({...e,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(t)throw console.error("âŒ ERREUR Supabase lors de la mise Ã  jour:",t),new Error(`Erreur base de donnÃ©es: ${t.message}`);return console.log("âœ… CrÃ©ation mise Ã  jour en base:",o),o}catch(o){throw console.error("âŒ ERREUR CRITIQUE lors de la mise Ã  jour:",o),o}}async function m(r){console.log("ğŸ” FRIDAY: RÃ©cupÃ©ration crÃ©ation spÃ©cifique, ID:",r);try{const{data:e,error:o}=await n.from("creations").select("*").eq("id",r).single();if(o)throw console.error("âŒ ERREUR Supabase lors de la rÃ©cupÃ©ration:",o),new Error(`Erreur base de donnÃ©es: ${o.message}`);return console.log("âœ… CrÃ©ation rÃ©cupÃ©rÃ©e:",e),e}catch(e){throw console.error("âŒ ERREUR CRITIQUE lors de la rÃ©cupÃ©ration:",e),e}}async function b(){console.log("ğŸ§ª FRIDAY: Test de connexion Supabase...");try{const{data:r,error:e,count:o}=await n.from("creations").select("*",{count:"exact",head:!0});return e?(console.error("âŒ Connexion Supabase Ã©chouÃ©e:",e),{success:!1,error:e.message}):(console.log("âœ… Connexion Supabase rÃ©ussie - CrÃ©ations en base:",o),{success:!0,count:o})}catch(r){return console.error("âŒ Test connexion Ã©chouÃ©:",r),{success:!1,error:r.message}}}console.log("âœ… FRIDAY: Service crÃ©ations initialisÃ© - Mode Supabase uniquement");export{R as addCreation,p as deleteCreation,m as getCreation,l as getCreations,g as getUserCreations,b as testSupabaseConnection,E as updateCreation};
