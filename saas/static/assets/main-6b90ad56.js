var _E=Object.defineProperty;var SE=(e,t,n)=>t in e?_E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kt=(e,t,n)=>(SE(e,typeof t!="symbol"?t+"":t,n),n);import{_ as ed}from"./preload-helper-8235fac6.js";function kE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var p$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jE(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var J_={exports:{}},Qp={},Y_={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th=Symbol.for("react.element"),NE=Symbol.for("react.portal"),AE=Symbol.for("react.fragment"),EE=Symbol.for("react.strict_mode"),CE=Symbol.for("react.profiler"),PE=Symbol.for("react.provider"),LE=Symbol.for("react.context"),TE=Symbol.for("react.forward_ref"),RE=Symbol.for("react.suspense"),IE=Symbol.for("react.memo"),OE=Symbol.for("react.lazy"),d5=Symbol.iterator;function FE(e){return e===null||typeof e!="object"?null:(e=d5&&e[d5]||e["@@iterator"],typeof e=="function"?e:null)}var Z_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X_=Object.assign,Q_={};function Vc(e,t,n){this.props=e,this.context=t,this.refs=Q_,this.updater=n||Z_}Vc.prototype.isReactComponent={};Vc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eS(){}eS.prototype=Vc.prototype;function xv(e,t,n){this.props=e,this.context=t,this.refs=Q_,this.updater=n||Z_}var _v=xv.prototype=new eS;_v.constructor=xv;X_(_v,Vc.prototype);_v.isPureReactComponent=!0;var h5=Array.isArray,tS=Object.prototype.hasOwnProperty,Sv={current:null},nS={key:!0,ref:!0,__self:!0,__source:!0};function rS(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)tS.call(t,r)&&!nS.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:th,type:e,key:s,ref:o,props:i,_owner:Sv.current}}function DE(e,t){return{$$typeof:th,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kv(e){return typeof e=="object"&&e!==null&&e.$$typeof===th}function ME(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var f5=/\/+/g;function a0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ME(""+e.key):t.toString(36)}function Ff(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case th:case NE:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+a0(o,0):r,h5(i)?(n="",e!=null&&(n=e.replace(f5,"$&/")+"/"),Ff(i,t,n,"",function(c){return c})):i!=null&&(kv(i)&&(i=DE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(f5,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",h5(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+a0(s,a);o+=Ff(s,t,n,l,i)}else if(l=FE(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+a0(s,a++),o+=Ff(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Hh(e,t,n){if(e==null)return e;var r=[],i=0;return Ff(e,r,"","",function(s){return t.call(n,s,i++)}),r}function BE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zr={current:null},Df={transition:null},UE={ReactCurrentDispatcher:zr,ReactCurrentBatchConfig:Df,ReactCurrentOwner:Sv};function iS(){throw Error("act(...) is not supported in production builds of React.")}Ct.Children={map:Hh,forEach:function(e,t,n){Hh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hh(e,function(){t++}),t},toArray:function(e){return Hh(e,function(t){return t})||[]},only:function(e){if(!kv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ct.Component=Vc;Ct.Fragment=AE;Ct.Profiler=CE;Ct.PureComponent=xv;Ct.StrictMode=EE;Ct.Suspense=RE;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;Ct.act=iS;Ct.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=X_({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Sv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)tS.call(t,l)&&!nS.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:th,type:e.type,key:i,ref:s,props:r,_owner:o}};Ct.createContext=function(e){return e={$$typeof:LE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:PE,_context:e},e.Consumer=e};Ct.createElement=rS;Ct.createFactory=function(e){var t=rS.bind(null,e);return t.type=e,t};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(e){return{$$typeof:TE,render:e}};Ct.isValidElement=kv;Ct.lazy=function(e){return{$$typeof:OE,_payload:{_status:-1,_result:e},_init:BE}};Ct.memo=function(e,t){return{$$typeof:IE,type:e,compare:t===void 0?null:t}};Ct.startTransition=function(e){var t=Df.transition;Df.transition={};try{e()}finally{Df.transition=t}};Ct.unstable_act=iS;Ct.useCallback=function(e,t){return zr.current.useCallback(e,t)};Ct.useContext=function(e){return zr.current.useContext(e)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(e){return zr.current.useDeferredValue(e)};Ct.useEffect=function(e,t){return zr.current.useEffect(e,t)};Ct.useId=function(){return zr.current.useId()};Ct.useImperativeHandle=function(e,t,n){return zr.current.useImperativeHandle(e,t,n)};Ct.useInsertionEffect=function(e,t){return zr.current.useInsertionEffect(e,t)};Ct.useLayoutEffect=function(e,t){return zr.current.useLayoutEffect(e,t)};Ct.useMemo=function(e,t){return zr.current.useMemo(e,t)};Ct.useReducer=function(e,t,n){return zr.current.useReducer(e,t,n)};Ct.useRef=function(e){return zr.current.useRef(e)};Ct.useState=function(e){return zr.current.useState(e)};Ct.useSyncExternalStore=function(e,t,n){return zr.current.useSyncExternalStore(e,t,n)};Ct.useTransition=function(){return zr.current.useTransition()};Ct.version="18.3.1";Y_.exports=Ct;var R=Y_.exports;const Xt=bv(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=R,zE=Symbol.for("react.element"),qE=Symbol.for("react.fragment"),VE=Object.prototype.hasOwnProperty,HE=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WE={key:!0,ref:!0,__self:!0,__source:!0};function sS(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)VE.call(t,r)&&!WE.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:zE,type:e,key:s,ref:o,props:i,_owner:HE.current}}Qp.Fragment=qE;Qp.jsx=sS;Qp.jsxs=sS;J_.exports=Qp;var u=J_.exports,Pg={},oS={exports:{}},Li={},aS={exports:{}},lS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,ie){var te=J.length;J.push(ie);e:for(;0<te;){var se=te-1>>>1,A=J[se];if(0<i(A,ie))J[se]=ie,J[te]=A,te=se;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ie=J[0],te=J.pop();if(te!==ie){J[0]=te;e:for(var se=0,A=J.length,z=A>>>1;se<z;){var B=2*(se+1)-1,X=J[B],ee=B+1,oe=J[ee];if(0>i(X,te))ee<A&&0>i(oe,X)?(J[se]=oe,J[ee]=te,se=ee):(J[se]=X,J[B]=te,se=B);else if(ee<A&&0>i(oe,te))J[se]=oe,J[ee]=te,se=ee;else break e}}return ie}function i(J,ie){var te=J.sortIndex-ie.sortIndex;return te!==0?te:J.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,g=3,f=!1,w=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(J){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=J)r(c),ie.sortIndex=ie.expirationTime,t(l,ie);else break;ie=n(c)}}function N(J){if(S=!1,_(J),!w)if(n(l)!==null)w=!0,de(O);else{var ie=n(c);ie!==null&&ce(N,ie.startTime-J)}}function O(J,ie){w=!1,S&&(S=!1,v(F),F=-1),f=!0;var te=g;try{for(_(ie),p=n(l);p!==null&&(!(p.expirationTime>ie)||J&&!P());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var A=se(p.expirationTime<=ie);ie=e.unstable_now(),typeof A=="function"?p.callback=A:p===n(l)&&r(l),_(ie)}else r(l);p=n(l)}if(p!==null)var z=!0;else{var B=n(c);B!==null&&ce(N,B.startTime-ie),z=!1}return z}finally{p=null,g=te,f=!1}}var U=!1,q=null,F=-1,M=5,G=-1;function P(){return!(e.unstable_now()-G<M)}function L(){if(q!==null){var J=e.unstable_now();G=J;var ie=!0;try{ie=q(!0,J)}finally{ie?Y():(U=!1,q=null)}}else U=!1}var Y;if(typeof x=="function")Y=function(){x(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ae=V.port2;V.port1.onmessage=L,Y=function(){ae.postMessage(null)}}else Y=function(){k(L,0)};function de(J){q=J,U||(U=!0,Y())}function ce(J,ie){F=k(function(){J(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){w||f||(w=!0,de(O))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(J){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var te=g;g=ie;try{return J()}finally{g=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,ie){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var te=g;g=J;try{return ie()}finally{g=te}},e.unstable_scheduleCallback=function(J,ie,te){var se=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?se+te:se):te=se,J){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=te+A,J={id:d++,callback:ie,priorityLevel:J,startTime:te,expirationTime:A,sortIndex:-1},te>se?(J.sortIndex=te,t(c,J),n(l)===null&&J===n(c)&&(S?(v(F),F=-1):S=!0,ce(N,te-se))):(J.sortIndex=A,t(l,J),w||f||(w=!0,de(O))),J},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(J){var ie=g;return function(){var te=g;g=ie;try{return J.apply(this,arguments)}finally{g=te}}}})(lS);aS.exports=lS;var GE=aS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE=R,Ci=GE;function Ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cS=new Set,xd={};function _l(e,t){Cc(e,t),Cc(e+"Capture",t)}function Cc(e,t){for(xd[e]=t,e=0;e<t.length;e++)cS.add(t[e])}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lg=Object.prototype.hasOwnProperty,JE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p5={},m5={};function YE(e){return Lg.call(m5,e)?!0:Lg.call(p5,e)?!1:JE.test(e)?m5[e]=!0:(p5[e]=!0,!1)}function ZE(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XE(e,t,n,r){if(t===null||typeof t>"u"||ZE(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yr[e]=new qr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yr[t]=new qr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yr[e]=new qr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yr[e]=new qr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yr[e]=new qr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yr[e]=new qr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yr[e]=new qr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yr[e]=new qr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yr[e]=new qr(e,5,!1,e.toLowerCase(),null,!1,!1)});var jv=/[\-:]([a-z])/g;function Nv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jv,Nv);yr[t]=new qr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jv,Nv);yr[t]=new qr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jv,Nv);yr[t]=new qr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yr[e]=new qr(e,1,!1,e.toLowerCase(),null,!1,!1)});yr.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yr[e]=new qr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Av(e,t,n,r){var i=yr.hasOwnProperty(t)?yr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XE(t,n,i,r)&&(n=null),r||i===null?YE(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xo=KE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wh=Symbol.for("react.element"),Xl=Symbol.for("react.portal"),Ql=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),Tg=Symbol.for("react.profiler"),uS=Symbol.for("react.provider"),dS=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),Rg=Symbol.for("react.suspense"),Ig=Symbol.for("react.suspense_list"),Pv=Symbol.for("react.memo"),Wo=Symbol.for("react.lazy"),hS=Symbol.for("react.offscreen"),g5=Symbol.iterator;function Eu(e){return e===null||typeof e!="object"?null:(e=g5&&e[g5]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,l0;function Vu(e){if(l0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);l0=t&&t[1]||""}return`
`+l0+e}var c0=!1;function u0(e,t){if(!e||c0)return"";c0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{c0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vu(e):""}function QE(e){switch(e.tag){case 5:return Vu(e.type);case 16:return Vu("Lazy");case 13:return Vu("Suspense");case 19:return Vu("SuspenseList");case 0:case 2:case 15:return e=u0(e.type,!1),e;case 11:return e=u0(e.type.render,!1),e;case 1:return e=u0(e.type,!0),e;default:return""}}function Og(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ql:return"Fragment";case Xl:return"Portal";case Tg:return"Profiler";case Ev:return"StrictMode";case Rg:return"Suspense";case Ig:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dS:return(e.displayName||"Context")+".Consumer";case uS:return(e._context.displayName||"Context")+".Provider";case Cv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pv:return t=e.displayName||null,t!==null?t:Og(e.type)||"Memo";case Wo:t=e._payload,e=e._init;try{return Og(e(t))}catch{}}return null}function eC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Og(t);case 8:return t===Ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tC(e){var t=fS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gh(e){e._valueTracker||(e._valueTracker=tC(e))}function pS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=fS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function cp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fg(e,t){var n=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function v5(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mS(e,t){t=t.checked,t!=null&&Av(e,"checked",t,!1)}function Dg(e,t){mS(e,t);var n=fa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mg(e,t.type,fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function y5(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mg(e,t,n){(t!=="number"||cp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Hu=Array.isArray;function vc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Bg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function w5(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ce(92));if(Hu(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fa(n)}}function gS(e,t){var n=fa(t.value),r=fa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function b5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ug(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kh,yS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kh=Kh||document.createElement("div"),Kh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _d(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nC=["Webkit","ms","Moz","O"];Object.keys(td).forEach(function(e){nC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),td[t]=td[e]})});function wS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||td.hasOwnProperty(e)&&td[e]?(""+t).trim():t+"px"}function bS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var rC=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(e,t){if(t){if(rC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ce(62))}}function zg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qg=null;function Lv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vg=null,yc=null,wc=null;function x5(e){if(e=ih(e)){if(typeof Vg!="function")throw Error(Ce(280));var t=e.stateNode;t&&(t=im(t),Vg(e.stateNode,e.type,t))}}function xS(e){yc?wc?wc.push(e):wc=[e]:yc=e}function _S(){if(yc){var e=yc,t=wc;if(wc=yc=null,x5(e),t)for(e=0;e<t.length;e++)x5(t[e])}}function SS(e,t){return e(t)}function kS(){}var d0=!1;function jS(e,t,n){if(d0)return e(t,n);d0=!0;try{return SS(e,t,n)}finally{d0=!1,(yc!==null||wc!==null)&&(kS(),_S())}}function Sd(e,t){var n=e.stateNode;if(n===null)return null;var r=im(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ce(231,t,typeof n));return n}var Hg=!1;if(mo)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){Hg=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{Hg=!1}function iC(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var nd=!1,up=null,dp=!1,Wg=null,sC={onError:function(e){nd=!0,up=e}};function oC(e,t,n,r,i,s,o,a,l){nd=!1,up=null,iC.apply(sC,arguments)}function aC(e,t,n,r,i,s,o,a,l){if(oC.apply(this,arguments),nd){if(nd){var c=up;nd=!1,up=null}else throw Error(Ce(198));dp||(dp=!0,Wg=c)}}function Sl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function NS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _5(e){if(Sl(e)!==e)throw Error(Ce(188))}function lC(e){var t=e.alternate;if(!t){if(t=Sl(e),t===null)throw Error(Ce(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return _5(i),e;if(s===r)return _5(i),t;s=s.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?e:t}function AS(e){return e=lC(e),e!==null?ES(e):null}function ES(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ES(e);if(t!==null)return t;e=e.sibling}return null}var CS=Ci.unstable_scheduleCallback,S5=Ci.unstable_cancelCallback,cC=Ci.unstable_shouldYield,uC=Ci.unstable_requestPaint,Mn=Ci.unstable_now,dC=Ci.unstable_getCurrentPriorityLevel,Tv=Ci.unstable_ImmediatePriority,PS=Ci.unstable_UserBlockingPriority,hp=Ci.unstable_NormalPriority,hC=Ci.unstable_LowPriority,LS=Ci.unstable_IdlePriority,em=null,Os=null;function fC(e){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(em,e,void 0,(e.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:gC,pC=Math.log,mC=Math.LN2;function gC(e){return e>>>=0,e===0?32:31-(pC(e)/mC|0)|0}var Jh=64,Yh=4194304;function Wu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fp(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Wu(a):(s&=o,s!==0&&(r=Wu(s)))}else o=n&~i,o!==0?r=Wu(o):s!==0&&(r=Wu(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ms(t),i=1<<n,r|=e[n],t&=~i;return r}function vC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ms(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=vC(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Gg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TS(){var e=Jh;return Jh<<=1,!(Jh&4194240)&&(Jh=64),e}function h0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function nh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ms(t),e[t]=n}function wC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ms(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Rv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ms(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Yt=0;function RS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var IS,Iv,OS,FS,DS,Kg=!1,Zh=[],na=null,ra=null,ia=null,kd=new Map,jd=new Map,Ko=[],bC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k5(e,t){switch(e){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":ra=null;break;case"mouseover":case"mouseout":ia=null;break;case"pointerover":case"pointerout":kd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jd.delete(t.pointerId)}}function Pu(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ih(t),t!==null&&Iv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xC(e,t,n,r,i){switch(t){case"focusin":return na=Pu(na,e,t,n,r,i),!0;case"dragenter":return ra=Pu(ra,e,t,n,r,i),!0;case"mouseover":return ia=Pu(ia,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return kd.set(s,Pu(kd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jd.set(s,Pu(jd.get(s)||null,e,t,n,r,i)),!0}return!1}function MS(e){var t=nl(e.target);if(t!==null){var n=Sl(t);if(n!==null){if(t=n.tag,t===13){if(t=NS(n),t!==null){e.blockedOn=t,DS(e.priority,function(){OS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);qg=r,n.target.dispatchEvent(r),qg=null}else return t=ih(n),t!==null&&Iv(t),e.blockedOn=n,!1;t.shift()}return!0}function j5(e,t,n){Mf(e)&&n.delete(t)}function _C(){Kg=!1,na!==null&&Mf(na)&&(na=null),ra!==null&&Mf(ra)&&(ra=null),ia!==null&&Mf(ia)&&(ia=null),kd.forEach(j5),jd.forEach(j5)}function Lu(e,t){e.blockedOn===t&&(e.blockedOn=null,Kg||(Kg=!0,Ci.unstable_scheduleCallback(Ci.unstable_NormalPriority,_C)))}function Nd(e){function t(i){return Lu(i,e)}if(0<Zh.length){Lu(Zh[0],e);for(var n=1;n<Zh.length;n++){var r=Zh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(na!==null&&Lu(na,e),ra!==null&&Lu(ra,e),ia!==null&&Lu(ia,e),kd.forEach(t),jd.forEach(t),n=0;n<Ko.length;n++)r=Ko[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ko.length&&(n=Ko[0],n.blockedOn===null);)MS(n),n.blockedOn===null&&Ko.shift()}var bc=xo.ReactCurrentBatchConfig,pp=!0;function SC(e,t,n,r){var i=Yt,s=bc.transition;bc.transition=null;try{Yt=1,Ov(e,t,n,r)}finally{Yt=i,bc.transition=s}}function kC(e,t,n,r){var i=Yt,s=bc.transition;bc.transition=null;try{Yt=4,Ov(e,t,n,r)}finally{Yt=i,bc.transition=s}}function Ov(e,t,n,r){if(pp){var i=Jg(e,t,n,r);if(i===null)_0(e,t,r,mp,n),k5(e,r);else if(xC(i,e,t,n,r))r.stopPropagation();else if(k5(e,r),t&4&&-1<bC.indexOf(e)){for(;i!==null;){var s=ih(i);if(s!==null&&IS(s),s=Jg(e,t,n,r),s===null&&_0(e,t,r,mp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _0(e,t,r,null,n)}}var mp=null;function Jg(e,t,n,r){if(mp=null,e=Lv(r),e=nl(e),e!==null)if(t=Sl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=NS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mp=e,null}function BS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dC()){case Tv:return 1;case PS:return 4;case hp:case hC:return 16;case LS:return 536870912;default:return 16}default:return 16}}var Xo=null,Fv=null,Bf=null;function US(){if(Bf)return Bf;var e,t=Fv,n=t.length,r,i="value"in Xo?Xo.value:Xo.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Bf=i.slice(e,1<r?1-r:void 0)}function Uf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xh(){return!0}function N5(){return!1}function Ti(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xh:N5,this.isPropagationStopped=N5,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xh)},persist:function(){},isPersistent:Xh}),t}var Hc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dv=Ti(Hc),rh=kn({},Hc,{view:0,detail:0}),jC=Ti(rh),f0,p0,Tu,tm=kn({},rh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tu&&(Tu&&e.type==="mousemove"?(f0=e.screenX-Tu.screenX,p0=e.screenY-Tu.screenY):p0=f0=0,Tu=e),f0)},movementY:function(e){return"movementY"in e?e.movementY:p0}}),A5=Ti(tm),NC=kn({},tm,{dataTransfer:0}),AC=Ti(NC),EC=kn({},rh,{relatedTarget:0}),m0=Ti(EC),CC=kn({},Hc,{animationName:0,elapsedTime:0,pseudoElement:0}),PC=Ti(CC),LC=kn({},Hc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TC=Ti(LC),RC=kn({},Hc,{data:0}),E5=Ti(RC),IC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=FC[e])?!!t[e]:!1}function Mv(){return DC}var MC=kn({},rh,{key:function(e){if(e.key){var t=IC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(e){return e.type==="keypress"?Uf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),BC=Ti(MC),UC=kn({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C5=Ti(UC),$C=kn({},rh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),zC=Ti($C),qC=kn({},Hc,{propertyName:0,elapsedTime:0,pseudoElement:0}),VC=Ti(qC),HC=kn({},tm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WC=Ti(HC),GC=[9,13,27,32],Bv=mo&&"CompositionEvent"in window,rd=null;mo&&"documentMode"in document&&(rd=document.documentMode);var KC=mo&&"TextEvent"in window&&!rd,$S=mo&&(!Bv||rd&&8<rd&&11>=rd),P5=String.fromCharCode(32),L5=!1;function zS(e,t){switch(e){case"keyup":return GC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ec=!1;function JC(e,t){switch(e){case"compositionend":return qS(t);case"keypress":return t.which!==32?null:(L5=!0,P5);case"textInput":return e=t.data,e===P5&&L5?null:e;default:return null}}function YC(e,t){if(ec)return e==="compositionend"||!Bv&&zS(e,t)?(e=US(),Bf=Fv=Xo=null,ec=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $S&&t.locale!=="ko"?null:t.data;default:return null}}var ZC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZC[e.type]:t==="textarea"}function VS(e,t,n,r){xS(r),t=gp(t,"onChange"),0<t.length&&(n=new Dv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var id=null,Ad=null;function XC(e){t3(e,0)}function nm(e){var t=rc(e);if(pS(t))return e}function QC(e,t){if(e==="change")return t}var HS=!1;if(mo){var g0;if(mo){var v0="oninput"in document;if(!v0){var R5=document.createElement("div");R5.setAttribute("oninput","return;"),v0=typeof R5.oninput=="function"}g0=v0}else g0=!1;HS=g0&&(!document.documentMode||9<document.documentMode)}function I5(){id&&(id.detachEvent("onpropertychange",WS),Ad=id=null)}function WS(e){if(e.propertyName==="value"&&nm(Ad)){var t=[];VS(t,Ad,e,Lv(e)),jS(XC,t)}}function e6(e,t,n){e==="focusin"?(I5(),id=t,Ad=n,id.attachEvent("onpropertychange",WS)):e==="focusout"&&I5()}function t6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nm(Ad)}function n6(e,t){if(e==="click")return nm(t)}function r6(e,t){if(e==="input"||e==="change")return nm(t)}function i6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vs=typeof Object.is=="function"?Object.is:i6;function Ed(e,t){if(vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lg.call(t,i)||!vs(e[i],t[i]))return!1}return!0}function O5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function F5(e,t){var n=O5(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=O5(n)}}function GS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?GS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KS(){for(var e=window,t=cp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=cp(e.document)}return t}function Uv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function s6(e){var t=KS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&GS(n.ownerDocument.documentElement,n)){if(r!==null&&Uv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=F5(n,s);var o=F5(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var o6=mo&&"documentMode"in document&&11>=document.documentMode,tc=null,Yg=null,sd=null,Zg=!1;function D5(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zg||tc==null||tc!==cp(r)||(r=tc,"selectionStart"in r&&Uv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sd&&Ed(sd,r)||(sd=r,r=gp(Yg,"onSelect"),0<r.length&&(t=new Dv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=tc)))}function Qh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nc={animationend:Qh("Animation","AnimationEnd"),animationiteration:Qh("Animation","AnimationIteration"),animationstart:Qh("Animation","AnimationStart"),transitionend:Qh("Transition","TransitionEnd")},y0={},JS={};mo&&(JS=document.createElement("div").style,"AnimationEvent"in window||(delete nc.animationend.animation,delete nc.animationiteration.animation,delete nc.animationstart.animation),"TransitionEvent"in window||delete nc.transitionend.transition);function rm(e){if(y0[e])return y0[e];if(!nc[e])return e;var t=nc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in JS)return y0[e]=t[n];return e}var YS=rm("animationend"),ZS=rm("animationiteration"),XS=rm("animationstart"),QS=rm("transitionend"),e3=new Map,M5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ya(e,t){e3.set(e,t),_l(t,[e])}for(var w0=0;w0<M5.length;w0++){var b0=M5[w0],a6=b0.toLowerCase(),l6=b0[0].toUpperCase()+b0.slice(1);ya(a6,"on"+l6)}ya(YS,"onAnimationEnd");ya(ZS,"onAnimationIteration");ya(XS,"onAnimationStart");ya("dblclick","onDoubleClick");ya("focusin","onFocus");ya("focusout","onBlur");ya(QS,"onTransitionEnd");Cc("onMouseEnter",["mouseout","mouseover"]);Cc("onMouseLeave",["mouseout","mouseover"]);Cc("onPointerEnter",["pointerout","pointerover"]);Cc("onPointerLeave",["pointerout","pointerover"]);_l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_l("onBeforeInput",["compositionend","keypress","textInput","paste"]);_l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gu));function B5(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,aC(r,t,void 0,e),e.currentTarget=null}function t3(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;B5(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;B5(i,a,c),s=l}}}if(dp)throw e=Wg,dp=!1,Wg=null,e}function dn(e,t){var n=t[n1];n===void 0&&(n=t[n1]=new Set);var r=e+"__bubble";n.has(r)||(n3(t,e,2,!1),n.add(r))}function x0(e,t,n){var r=0;t&&(r|=4),n3(n,e,r,t)}var ef="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[ef]){e[ef]=!0,cS.forEach(function(n){n!=="selectionchange"&&(c6.has(n)||x0(n,!1,e),x0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ef]||(t[ef]=!0,x0("selectionchange",!1,t))}}function n3(e,t,n,r){switch(BS(t)){case 1:var i=SC;break;case 4:i=kC;break;default:i=Ov}n=i.bind(null,t,n,e),i=void 0,!Hg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function _0(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=nl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}jS(function(){var c=s,d=Lv(n),p=[];e:{var g=e3.get(e);if(g!==void 0){var f=Dv,w=e;switch(e){case"keypress":if(Uf(n)===0)break e;case"keydown":case"keyup":f=BC;break;case"focusin":w="focus",f=m0;break;case"focusout":w="blur",f=m0;break;case"beforeblur":case"afterblur":f=m0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=A5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=AC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=zC;break;case YS:case ZS:case XS:f=PC;break;case QS:f=VC;break;case"scroll":f=jC;break;case"wheel":f=WC;break;case"copy":case"cut":case"paste":f=TC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=C5}var S=(t&4)!==0,k=!S&&e==="scroll",v=S?g!==null?g+"Capture":null:g;S=[];for(var x=c,_;x!==null;){_=x;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,v!==null&&(N=Sd(x,v),N!=null&&S.push(Pd(x,N,_)))),k)break;x=x.return}0<S.length&&(g=new f(g,w,null,n,d),p.push({event:g,listeners:S}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",g&&n!==qg&&(w=n.relatedTarget||n.fromElement)&&(nl(w)||w[go]))break e;if((f||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,f?(w=n.relatedTarget||n.toElement,f=c,w=w?nl(w):null,w!==null&&(k=Sl(w),w!==k||w.tag!==5&&w.tag!==6)&&(w=null)):(f=null,w=c),f!==w)){if(S=A5,N="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(S=C5,N="onPointerLeave",v="onPointerEnter",x="pointer"),k=f==null?g:rc(f),_=w==null?g:rc(w),g=new S(N,x+"leave",f,n,d),g.target=k,g.relatedTarget=_,N=null,nl(d)===c&&(S=new S(v,x+"enter",w,n,d),S.target=_,S.relatedTarget=k,N=S),k=N,f&&w)t:{for(S=f,v=w,x=0,_=S;_;_=Dl(_))x++;for(_=0,N=v;N;N=Dl(N))_++;for(;0<x-_;)S=Dl(S),x--;for(;0<_-x;)v=Dl(v),_--;for(;x--;){if(S===v||v!==null&&S===v.alternate)break t;S=Dl(S),v=Dl(v)}S=null}else S=null;f!==null&&U5(p,g,f,S,!1),w!==null&&k!==null&&U5(p,k,w,S,!0)}}e:{if(g=c?rc(c):window,f=g.nodeName&&g.nodeName.toLowerCase(),f==="select"||f==="input"&&g.type==="file")var O=QC;else if(T5(g))if(HS)O=r6;else{O=t6;var U=e6}else(f=g.nodeName)&&f.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=n6);if(O&&(O=O(e,c))){VS(p,O,n,d);break e}U&&U(e,g,c),e==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Mg(g,"number",g.value)}switch(U=c?rc(c):window,e){case"focusin":(T5(U)||U.contentEditable==="true")&&(tc=U,Yg=c,sd=null);break;case"focusout":sd=Yg=tc=null;break;case"mousedown":Zg=!0;break;case"contextmenu":case"mouseup":case"dragend":Zg=!1,D5(p,n,d);break;case"selectionchange":if(o6)break;case"keydown":case"keyup":D5(p,n,d)}var q;if(Bv)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else ec?zS(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&($S&&n.locale!=="ko"&&(ec||F!=="onCompositionStart"?F==="onCompositionEnd"&&ec&&(q=US()):(Xo=d,Fv="value"in Xo?Xo.value:Xo.textContent,ec=!0)),U=gp(c,F),0<U.length&&(F=new E5(F,e,null,n,d),p.push({event:F,listeners:U}),q?F.data=q:(q=qS(n),q!==null&&(F.data=q)))),(q=KC?JC(e,n):YC(e,n))&&(c=gp(c,"onBeforeInput"),0<c.length&&(d=new E5("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=q))}t3(p,t)})}function Pd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gp(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sd(e,n),s!=null&&r.unshift(Pd(e,s,i)),s=Sd(e,t),s!=null&&r.push(Pd(e,s,i))),e=e.return}return r}function Dl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function U5(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Sd(n,s),l!=null&&o.unshift(Pd(n,l,a))):i||(l=Sd(n,s),l!=null&&o.push(Pd(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var u6=/\r\n?/g,d6=/\u0000|\uFFFD/g;function $5(e){return(typeof e=="string"?e:""+e).replace(u6,`
`).replace(d6,"")}function tf(e,t,n){if(t=$5(t),$5(e)!==t&&n)throw Error(Ce(425))}function vp(){}var Xg=null,Qg=null;function e1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var t1=typeof setTimeout=="function"?setTimeout:void 0,h6=typeof clearTimeout=="function"?clearTimeout:void 0,z5=typeof Promise=="function"?Promise:void 0,f6=typeof queueMicrotask=="function"?queueMicrotask:typeof z5<"u"?function(e){return z5.resolve(null).then(e).catch(p6)}:t1;function p6(e){setTimeout(function(){throw e})}function S0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Nd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nd(t)}function sa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function q5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),Ts="__reactFiber$"+Wc,Ld="__reactProps$"+Wc,go="__reactContainer$"+Wc,n1="__reactEvents$"+Wc,m6="__reactListeners$"+Wc,g6="__reactHandles$"+Wc;function nl(e){var t=e[Ts];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[Ts]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=q5(e);e!==null;){if(n=e[Ts])return n;e=q5(e)}return t}e=n,n=e.parentNode}return null}function ih(e){return e=e[Ts]||e[go],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ce(33))}function im(e){return e[Ld]||null}var r1=[],ic=-1;function wa(e){return{current:e}}function fn(e){0>ic||(e.current=r1[ic],r1[ic]=null,ic--)}function ln(e,t){ic++,r1[ic]=e.current,e.current=t}var pa={},Tr=wa(pa),Qr=wa(!1),pl=pa;function Pc(e,t){var n=e.type.contextTypes;if(!n)return pa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ei(e){return e=e.childContextTypes,e!=null}function yp(){fn(Qr),fn(Tr)}function V5(e,t,n){if(Tr.current!==pa)throw Error(Ce(168));ln(Tr,t),ln(Qr,n)}function r3(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Ce(108,eC(e)||"Unknown",i));return kn({},n,r)}function wp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pa,pl=Tr.current,ln(Tr,e),ln(Qr,Qr.current),!0}function H5(e,t,n){var r=e.stateNode;if(!r)throw Error(Ce(169));n?(e=r3(e,t,pl),r.__reactInternalMemoizedMergedChildContext=e,fn(Qr),fn(Tr),ln(Tr,e)):fn(Qr),ln(Qr,n)}var so=null,sm=!1,k0=!1;function i3(e){so===null?so=[e]:so.push(e)}function v6(e){sm=!0,i3(e)}function ba(){if(!k0&&so!==null){k0=!0;var e=0,t=Yt;try{var n=so;for(Yt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}so=null,sm=!1}catch(i){throw so!==null&&(so=so.slice(e+1)),CS(Tv,ba),i}finally{Yt=t,k0=!1}}return null}var sc=[],oc=0,bp=null,xp=0,$i=[],zi=0,ml=null,lo=1,co="";function Ga(e,t){sc[oc++]=xp,sc[oc++]=bp,bp=e,xp=t}function s3(e,t,n){$i[zi++]=lo,$i[zi++]=co,$i[zi++]=ml,ml=e;var r=lo;e=co;var i=32-ms(r)-1;r&=~(1<<i),n+=1;var s=32-ms(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,lo=1<<32-ms(t)+i|n<<i|r,co=s+e}else lo=1<<s|n<<i|r,co=e}function $v(e){e.return!==null&&(Ga(e,1),s3(e,1,0))}function zv(e){for(;e===bp;)bp=sc[--oc],sc[oc]=null,xp=sc[--oc],sc[oc]=null;for(;e===ml;)ml=$i[--zi],$i[zi]=null,co=$i[--zi],$i[zi]=null,lo=$i[--zi],$i[zi]=null}var Ai=null,ki=null,gn=!1,ps=null;function o3(e,t){var n=Vi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function W5(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ai=e,ki=sa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ai=e,ki=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ml!==null?{id:lo,overflow:co}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ai=e,ki=null,!0):!1;default:return!1}}function i1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function s1(e){if(gn){var t=ki;if(t){var n=t;if(!W5(e,t)){if(i1(e))throw Error(Ce(418));t=sa(n.nextSibling);var r=Ai;t&&W5(e,t)?o3(r,n):(e.flags=e.flags&-4097|2,gn=!1,Ai=e)}}else{if(i1(e))throw Error(Ce(418));e.flags=e.flags&-4097|2,gn=!1,Ai=e}}}function G5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ai=e}function nf(e){if(e!==Ai)return!1;if(!gn)return G5(e),gn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!e1(e.type,e.memoizedProps)),t&&(t=ki)){if(i1(e))throw a3(),Error(Ce(418));for(;t;)o3(e,t),t=sa(t.nextSibling)}if(G5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ki=sa(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ki=null}}else ki=Ai?sa(e.stateNode.nextSibling):null;return!0}function a3(){for(var e=ki;e;)e=sa(e.nextSibling)}function Lc(){ki=Ai=null,gn=!1}function qv(e){ps===null?ps=[e]:ps.push(e)}var y6=xo.ReactCurrentBatchConfig;function Ru(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,e))}return e}function rf(e,t){throw e=Object.prototype.toString.call(t),Error(Ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function K5(e){var t=e._init;return t(e._payload)}function l3(e){function t(v,x){if(e){var _=v.deletions;_===null?(v.deletions=[x],v.flags|=16):_.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=ca(v,x),v.index=0,v.sibling=null,v}function s(v,x,_){return v.index=_,e?(_=v.alternate,_!==null?(_=_.index,_<x?(v.flags|=2,x):_):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,x,_,N){return x===null||x.tag!==6?(x=L0(_,v.mode,N),x.return=v,x):(x=i(x,_),x.return=v,x)}function l(v,x,_,N){var O=_.type;return O===Ql?d(v,x,_.props.children,N,_.key):x!==null&&(x.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wo&&K5(O)===x.type)?(N=i(x,_.props),N.ref=Ru(v,x,_),N.return=v,N):(N=Gf(_.type,_.key,_.props,null,v.mode,N),N.ref=Ru(v,x,_),N.return=v,N)}function c(v,x,_,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=T0(_,v.mode,N),x.return=v,x):(x=i(x,_.children||[]),x.return=v,x)}function d(v,x,_,N,O){return x===null||x.tag!==7?(x=dl(_,v.mode,N,O),x.return=v,x):(x=i(x,_),x.return=v,x)}function p(v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=L0(""+x,v.mode,_),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wh:return _=Gf(x.type,x.key,x.props,null,v.mode,_),_.ref=Ru(v,null,x),_.return=v,_;case Xl:return x=T0(x,v.mode,_),x.return=v,x;case Wo:var N=x._init;return p(v,N(x._payload),_)}if(Hu(x)||Eu(x))return x=dl(x,v.mode,_,null),x.return=v,x;rf(v,x)}return null}function g(v,x,_,N){var O=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return O!==null?null:a(v,x,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Wh:return _.key===O?l(v,x,_,N):null;case Xl:return _.key===O?c(v,x,_,N):null;case Wo:return O=_._init,g(v,x,O(_._payload),N)}if(Hu(_)||Eu(_))return O!==null?null:d(v,x,_,N,null);rf(v,_)}return null}function f(v,x,_,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(_)||null,a(x,v,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Wh:return v=v.get(N.key===null?_:N.key)||null,l(x,v,N,O);case Xl:return v=v.get(N.key===null?_:N.key)||null,c(x,v,N,O);case Wo:var U=N._init;return f(v,x,_,U(N._payload),O)}if(Hu(N)||Eu(N))return v=v.get(_)||null,d(x,v,N,O,null);rf(x,N)}return null}function w(v,x,_,N){for(var O=null,U=null,q=x,F=x=0,M=null;q!==null&&F<_.length;F++){q.index>F?(M=q,q=null):M=q.sibling;var G=g(v,q,_[F],N);if(G===null){q===null&&(q=M);break}e&&q&&G.alternate===null&&t(v,q),x=s(G,x,F),U===null?O=G:U.sibling=G,U=G,q=M}if(F===_.length)return n(v,q),gn&&Ga(v,F),O;if(q===null){for(;F<_.length;F++)q=p(v,_[F],N),q!==null&&(x=s(q,x,F),U===null?O=q:U.sibling=q,U=q);return gn&&Ga(v,F),O}for(q=r(v,q);F<_.length;F++)M=f(q,v,F,_[F],N),M!==null&&(e&&M.alternate!==null&&q.delete(M.key===null?F:M.key),x=s(M,x,F),U===null?O=M:U.sibling=M,U=M);return e&&q.forEach(function(P){return t(v,P)}),gn&&Ga(v,F),O}function S(v,x,_,N){var O=Eu(_);if(typeof O!="function")throw Error(Ce(150));if(_=O.call(_),_==null)throw Error(Ce(151));for(var U=O=null,q=x,F=x=0,M=null,G=_.next();q!==null&&!G.done;F++,G=_.next()){q.index>F?(M=q,q=null):M=q.sibling;var P=g(v,q,G.value,N);if(P===null){q===null&&(q=M);break}e&&q&&P.alternate===null&&t(v,q),x=s(P,x,F),U===null?O=P:U.sibling=P,U=P,q=M}if(G.done)return n(v,q),gn&&Ga(v,F),O;if(q===null){for(;!G.done;F++,G=_.next())G=p(v,G.value,N),G!==null&&(x=s(G,x,F),U===null?O=G:U.sibling=G,U=G);return gn&&Ga(v,F),O}for(q=r(v,q);!G.done;F++,G=_.next())G=f(q,v,F,G.value,N),G!==null&&(e&&G.alternate!==null&&q.delete(G.key===null?F:G.key),x=s(G,x,F),U===null?O=G:U.sibling=G,U=G);return e&&q.forEach(function(L){return t(v,L)}),gn&&Ga(v,F),O}function k(v,x,_,N){if(typeof _=="object"&&_!==null&&_.type===Ql&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Wh:e:{for(var O=_.key,U=x;U!==null;){if(U.key===O){if(O=_.type,O===Ql){if(U.tag===7){n(v,U.sibling),x=i(U,_.props.children),x.return=v,v=x;break e}}else if(U.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wo&&K5(O)===U.type){n(v,U.sibling),x=i(U,_.props),x.ref=Ru(v,U,_),x.return=v,v=x;break e}n(v,U);break}else t(v,U);U=U.sibling}_.type===Ql?(x=dl(_.props.children,v.mode,N,_.key),x.return=v,v=x):(N=Gf(_.type,_.key,_.props,null,v.mode,N),N.ref=Ru(v,x,_),N.return=v,v=N)}return o(v);case Xl:e:{for(U=_.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(v,x.sibling),x=i(x,_.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=T0(_,v.mode,N),x.return=v,v=x}return o(v);case Wo:return U=_._init,k(v,x,U(_._payload),N)}if(Hu(_))return w(v,x,_,N);if(Eu(_))return S(v,x,_,N);rf(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,_),x.return=v,v=x):(n(v,x),x=L0(_,v.mode,N),x.return=v,v=x),o(v)):n(v,x)}return k}var Tc=l3(!0),c3=l3(!1),_p=wa(null),Sp=null,ac=null,Vv=null;function Hv(){Vv=ac=Sp=null}function Wv(e){var t=_p.current;fn(_p),e._currentValue=t}function o1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xc(e,t){Sp=e,Vv=ac=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zr=!0),e.firstContext=null)}function Gi(e){var t=e._currentValue;if(Vv!==e)if(e={context:e,memoizedValue:t,next:null},ac===null){if(Sp===null)throw Error(Ce(308));ac=e,Sp.dependencies={lanes:0,firstContext:e}}else ac=ac.next=e;return t}var rl=null;function Gv(e){rl===null?rl=[e]:rl.push(e)}function u3(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Gv(t)):(n.next=i.next,i.next=n),t.interleaved=n,vo(e,r)}function vo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Go=!1;function Kv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,vo(e,n)}return i=r.interleaved,i===null?(t.next=t,Gv(r)):(t.next=i.next,i.next=t),r.interleaved=t,vo(e,n)}function $f(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rv(e,n)}}function J5(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function kp(e,t,n,r){var i=e.updateQueue;Go=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=c=l=null,a=s;do{var g=a.lane,f=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,S=a;switch(g=t,f=n,S.tag){case 1:if(w=S.payload,typeof w=="function"){p=w.call(f,p,g);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,g=typeof w=="function"?w.call(f,p,g):w,g==null)break e;p=kn({},p,g);break e;case 2:Go=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else f={eventTime:f,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=p):d=d.next=f,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);vl|=o,e.lanes=o,e.memoizedState=p}}function Y5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ce(191,i));i.call(r)}}}var sh={},Fs=wa(sh),Td=wa(sh),Rd=wa(sh);function il(e){if(e===sh)throw Error(Ce(174));return e}function Jv(e,t){switch(ln(Rd,t),ln(Td,e),ln(Fs,sh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ug(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ug(t,e)}fn(Fs),ln(Fs,t)}function Rc(){fn(Fs),fn(Td),fn(Rd)}function h3(e){il(Rd.current);var t=il(Fs.current),n=Ug(t,e.type);t!==n&&(ln(Td,e),ln(Fs,n))}function Yv(e){Td.current===e&&(fn(Fs),fn(Td))}var bn=wa(0);function jp(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var j0=[];function Zv(){for(var e=0;e<j0.length;e++)j0[e]._workInProgressVersionPrimary=null;j0.length=0}var zf=xo.ReactCurrentDispatcher,N0=xo.ReactCurrentBatchConfig,gl=0,_n=null,nr=null,ar=null,Np=!1,od=!1,Id=0,w6=0;function _r(){throw Error(Ce(321))}function Xv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vs(e[n],t[n]))return!1;return!0}function Qv(e,t,n,r,i,s){if(gl=s,_n=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zf.current=e===null||e.memoizedState===null?S6:k6,e=n(r,i),od){s=0;do{if(od=!1,Id=0,25<=s)throw Error(Ce(301));s+=1,ar=nr=null,t.updateQueue=null,zf.current=j6,e=n(r,i)}while(od)}if(zf.current=Ap,t=nr!==null&&nr.next!==null,gl=0,ar=nr=_n=null,Np=!1,t)throw Error(Ce(300));return e}function ey(){var e=Id!==0;return Id=0,e}function Ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?_n.memoizedState=ar=e:ar=ar.next=e,ar}function Ki(){if(nr===null){var e=_n.alternate;e=e!==null?e.memoizedState:null}else e=nr.next;var t=ar===null?_n.memoizedState:ar.next;if(t!==null)ar=t,nr=e;else{if(e===null)throw Error(Ce(310));nr=e,e={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},ar===null?_n.memoizedState=ar=e:ar=ar.next=e}return ar}function Od(e,t){return typeof t=="function"?t(e):t}function A0(e){var t=Ki(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=nr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((gl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,_n.lanes|=d,vl|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,vs(r,t.memoizedState)||(Zr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,_n.lanes|=s,vl|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function E0(e){var t=Ki(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);vs(s,t.memoizedState)||(Zr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function f3(){}function p3(e,t){var n=_n,r=Ki(),i=t(),s=!vs(r.memoizedState,i);if(s&&(r.memoizedState=i,Zr=!0),r=r.queue,ty(v3.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ar!==null&&ar.memoizedState.tag&1){if(n.flags|=2048,Fd(9,g3.bind(null,n,r,i,t),void 0,null),cr===null)throw Error(Ce(349));gl&30||m3(n,t,i)}return i}function m3(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_n.updateQueue,t===null?(t={lastEffect:null,stores:null},_n.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function g3(e,t,n,r){t.value=n,t.getSnapshot=r,y3(t)&&w3(e)}function v3(e,t,n){return n(function(){y3(t)&&w3(e)})}function y3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vs(e,n)}catch{return!0}}function w3(e){var t=vo(e,1);t!==null&&gs(t,e,1,-1)}function Z5(e){var t=Ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:e},t.queue=e,e=e.dispatch=_6.bind(null,_n,e),[t.memoizedState,e]}function Fd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_n.updateQueue,t===null?(t={lastEffect:null,stores:null},_n.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function b3(){return Ki().memoizedState}function qf(e,t,n,r){var i=Ls();_n.flags|=e,i.memoizedState=Fd(1|t,n,void 0,r===void 0?null:r)}function om(e,t,n,r){var i=Ki();r=r===void 0?null:r;var s=void 0;if(nr!==null){var o=nr.memoizedState;if(s=o.destroy,r!==null&&Xv(r,o.deps)){i.memoizedState=Fd(t,n,s,r);return}}_n.flags|=e,i.memoizedState=Fd(1|t,n,s,r)}function X5(e,t){return qf(8390656,8,e,t)}function ty(e,t){return om(2048,8,e,t)}function x3(e,t){return om(4,2,e,t)}function _3(e,t){return om(4,4,e,t)}function S3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function k3(e,t,n){return n=n!=null?n.concat([e]):null,om(4,4,S3.bind(null,t,e),n)}function ny(){}function j3(e,t){var n=Ki();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function N3(e,t){var n=Ki();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function A3(e,t,n){return gl&21?(vs(n,t)||(n=TS(),_n.lanes|=n,vl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zr=!0),e.memoizedState=n)}function b6(e,t){var n=Yt;Yt=n!==0&&4>n?n:4,e(!0);var r=N0.transition;N0.transition={};try{e(!1),t()}finally{Yt=n,N0.transition=r}}function E3(){return Ki().memoizedState}function x6(e,t,n){var r=la(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C3(e))P3(t,n);else if(n=u3(e,t,n,r),n!==null){var i=$r();gs(n,e,r,i),L3(n,t,r)}}function _6(e,t,n){var r=la(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C3(e))P3(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vs(a,o)){var l=t.interleaved;l===null?(i.next=i,Gv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=u3(e,t,i,r),n!==null&&(i=$r(),gs(n,e,r,i),L3(n,t,r))}}function C3(e){var t=e.alternate;return e===_n||t!==null&&t===_n}function P3(e,t){od=Np=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function L3(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rv(e,n)}}var Ap={readContext:Gi,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},S6={readContext:Gi,useCallback:function(e,t){return Ls().memoizedState=[e,t===void 0?null:t],e},useContext:Gi,useEffect:X5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qf(4194308,4,S3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qf(4194308,4,e,t)},useInsertionEffect:function(e,t){return qf(4,2,e,t)},useMemo:function(e,t){var n=Ls();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ls();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=x6.bind(null,_n,e),[r.memoizedState,e]},useRef:function(e){var t=Ls();return e={current:e},t.memoizedState=e},useState:Z5,useDebugValue:ny,useDeferredValue:function(e){return Ls().memoizedState=e},useTransition:function(){var e=Z5(!1),t=e[0];return e=b6.bind(null,e[1]),Ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_n,i=Ls();if(gn){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=t(),cr===null)throw Error(Ce(349));gl&30||m3(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,X5(v3.bind(null,r,s,e),[e]),r.flags|=2048,Fd(9,g3.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ls(),t=cr.identifierPrefix;if(gn){var n=co,r=lo;n=(r&~(1<<32-ms(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Id++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=w6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},k6={readContext:Gi,useCallback:j3,useContext:Gi,useEffect:ty,useImperativeHandle:k3,useInsertionEffect:x3,useLayoutEffect:_3,useMemo:N3,useReducer:A0,useRef:b3,useState:function(){return A0(Od)},useDebugValue:ny,useDeferredValue:function(e){var t=Ki();return A3(t,nr.memoizedState,e)},useTransition:function(){var e=A0(Od)[0],t=Ki().memoizedState;return[e,t]},useMutableSource:f3,useSyncExternalStore:p3,useId:E3,unstable_isNewReconciler:!1},j6={readContext:Gi,useCallback:j3,useContext:Gi,useEffect:ty,useImperativeHandle:k3,useInsertionEffect:x3,useLayoutEffect:_3,useMemo:N3,useReducer:E0,useRef:b3,useState:function(){return E0(Od)},useDebugValue:ny,useDeferredValue:function(e){var t=Ki();return nr===null?t.memoizedState=e:A3(t,nr.memoizedState,e)},useTransition:function(){var e=E0(Od)[0],t=Ki().memoizedState;return[e,t]},useMutableSource:f3,useSyncExternalStore:p3,useId:E3,unstable_isNewReconciler:!1};function us(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function a1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:kn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var am={isMounted:function(e){return(e=e._reactInternals)?Sl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$r(),i=la(e),s=uo(r,i);s.payload=t,n!=null&&(s.callback=n),t=oa(e,s,i),t!==null&&(gs(t,e,i,r),$f(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$r(),i=la(e),s=uo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=oa(e,s,i),t!==null&&(gs(t,e,i,r),$f(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$r(),r=la(e),i=uo(n,r);i.tag=2,t!=null&&(i.callback=t),t=oa(e,i,r),t!==null&&(gs(t,e,r,n),$f(t,e,r))}};function Q5(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ed(n,r)||!Ed(i,s):!0}function T3(e,t,n){var r=!1,i=pa,s=t.contextType;return typeof s=="object"&&s!==null?s=Gi(s):(i=ei(t)?pl:Tr.current,r=t.contextTypes,s=(r=r!=null)?Pc(e,i):pa),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=am,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ew(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&am.enqueueReplaceState(t,t.state,null)}function l1(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Kv(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Gi(s):(s=ei(t)?pl:Tr.current,i.context=Pc(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(a1(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&am.enqueueReplaceState(i,i.state,null),kp(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ic(e,t){try{var n="",r=t;do n+=QE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function C0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function c1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var N6=typeof WeakMap=="function"?WeakMap:Map;function R3(e,t,n){n=uo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Cp||(Cp=!0,w1=r),c1(e,t)},n}function I3(e,t,n){n=uo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){c1(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){c1(e,t),typeof r!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function tw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new N6;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=U6.bind(null,e,t,n),t.then(e,e))}function nw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rw(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=uo(-1,1),t.tag=2,oa(n,t,1))),n.lanes|=1),e)}var A6=xo.ReactCurrentOwner,Zr=!1;function Mr(e,t,n,r){t.child=e===null?c3(t,null,n,r):Tc(t,e.child,n,r)}function iw(e,t,n,r,i){n=n.render;var s=t.ref;return xc(t,i),r=Qv(e,t,n,r,s,i),n=ey(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,yo(e,t,i)):(gn&&n&&$v(t),t.flags|=1,Mr(e,t,r,i),t.child)}function sw(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!uy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,O3(e,t,s,r,i)):(e=Gf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ed,n(o,r)&&e.ref===t.ref)return yo(e,t,i)}return t.flags|=1,e=ca(s,r),e.ref=t.ref,e.return=t,t.child=e}function O3(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Ed(s,r)&&e.ref===t.ref)if(Zr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Zr=!0);else return t.lanes=e.lanes,yo(e,t,i)}return u1(e,t,n,r,i)}function F3(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(cc,xi),xi|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ln(cc,xi),xi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ln(cc,xi),xi|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ln(cc,xi),xi|=r;return Mr(e,t,i,n),t.child}function D3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function u1(e,t,n,r,i){var s=ei(n)?pl:Tr.current;return s=Pc(t,s),xc(t,i),n=Qv(e,t,n,r,s,i),r=ey(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,yo(e,t,i)):(gn&&r&&$v(t),t.flags|=1,Mr(e,t,n,i),t.child)}function ow(e,t,n,r,i){if(ei(n)){var s=!0;wp(t)}else s=!1;if(xc(t,i),t.stateNode===null)Vf(e,t),T3(t,n,r),l1(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Gi(c):(c=ei(n)?pl:Tr.current,c=Pc(t,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ew(t,o,r,c),Go=!1;var g=t.memoizedState;o.state=g,kp(t,r,o,i),l=t.memoizedState,a!==r||g!==l||Qr.current||Go?(typeof d=="function"&&(a1(t,n,d,r),l=t.memoizedState),(a=Go||Q5(t,n,a,r,g,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,d3(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:us(t.type,a),o.props=c,p=t.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gi(l):(l=ei(n)?pl:Tr.current,l=Pc(t,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==l)&&ew(t,o,r,l),Go=!1,g=t.memoizedState,o.state=g,kp(t,r,o,i);var w=t.memoizedState;a!==p||g!==w||Qr.current||Go?(typeof f=="function"&&(a1(t,n,f,r),w=t.memoizedState),(c=Go||Q5(t,n,c,r,g,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return d1(e,t,n,r,s,i)}function d1(e,t,n,r,i,s){D3(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&H5(t,n,!1),yo(e,t,s);r=t.stateNode,A6.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tc(t,e.child,null,s),t.child=Tc(t,null,a,s)):Mr(e,t,a,s),t.memoizedState=r.state,i&&H5(t,n,!0),t.child}function M3(e){var t=e.stateNode;t.pendingContext?V5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&V5(e,t.context,!1),Jv(e,t.containerInfo)}function aw(e,t,n,r,i){return Lc(),qv(i),t.flags|=256,Mr(e,t,n,r),t.child}var h1={dehydrated:null,treeContext:null,retryLane:0};function f1(e){return{baseLanes:e,cachePool:null,transitions:null}}function B3(e,t,n){var r=t.pendingProps,i=bn.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ln(bn,i&1),e===null)return s1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=um(o,r,0,null),e=dl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=f1(n),t.memoizedState=h1,e):ry(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return E6(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ca(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ca(a,s):(s=dl(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?f1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=h1,r}return s=e.child,e=s.sibling,r=ca(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ry(e,t){return t=um({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sf(e,t,n,r){return r!==null&&qv(r),Tc(t,e.child,null,n),e=ry(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E6(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=C0(Error(Ce(422))),sf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=um({mode:"visible",children:r.children},i,0,null),s=dl(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Tc(t,e.child,null,o),t.child.memoizedState=f1(o),t.memoizedState=h1,s);if(!(t.mode&1))return sf(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ce(419)),r=C0(s,r,void 0),sf(e,t,o,r)}if(a=(o&e.childLanes)!==0,Zr||a){if(r=cr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vo(e,i),gs(r,e,i,-1))}return cy(),r=C0(Error(Ce(421))),sf(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=$6.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ki=sa(i.nextSibling),Ai=t,gn=!0,ps=null,e!==null&&($i[zi++]=lo,$i[zi++]=co,$i[zi++]=ml,lo=e.id,co=e.overflow,ml=t),t=ry(t,r.children),t.flags|=4096,t)}function lw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),o1(e.return,t,n)}function P0(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function U3(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Mr(e,t,r.children,n),r=bn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lw(e,n,t);else if(e.tag===19)lw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ln(bn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&jp(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),P0(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&jp(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}P0(t,!0,n,null,s);break;case"together":P0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ce(153));if(t.child!==null){for(e=t.child,n=ca(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ca(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function C6(e,t,n){switch(t.tag){case 3:M3(t),Lc();break;case 5:h3(t);break;case 1:ei(t.type)&&wp(t);break;case 4:Jv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ln(_p,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ln(bn,bn.current&1),t.flags|=128,null):n&t.child.childLanes?B3(e,t,n):(ln(bn,bn.current&1),e=yo(e,t,n),e!==null?e.sibling:null);ln(bn,bn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return U3(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ln(bn,bn.current),r)break;return null;case 22:case 23:return t.lanes=0,F3(e,t,n)}return yo(e,t,n)}var $3,p1,z3,q3;$3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};p1=function(){};z3=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,il(Fs.current);var s=null;switch(n){case"input":i=Fg(e,i),r=Fg(e,r),s=[];break;case"select":i=kn({},i,{value:void 0}),r=kn({},r,{value:void 0}),s=[];break;case"textarea":i=Bg(e,i),r=Bg(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=vp)}$g(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&dn("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};q3=function(e,t,n,r){n!==r&&(t.flags|=4)};function Iu(e,t){if(!gn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function P6(e,t,n){var r=t.pendingProps;switch(zv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(t),null;case 1:return ei(t.type)&&yp(),Sr(t),null;case 3:return r=t.stateNode,Rc(),fn(Qr),fn(Tr),Zv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(nf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ps!==null&&(_1(ps),ps=null))),p1(e,t),Sr(t),null;case 5:Yv(t);var i=il(Rd.current);if(n=t.type,e!==null&&t.stateNode!=null)z3(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ce(166));return Sr(t),null}if(e=il(Fs.current),nf(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ts]=t,r[Ld]=s,e=(t.mode&1)!==0,n){case"dialog":dn("cancel",r),dn("close",r);break;case"iframe":case"object":case"embed":dn("load",r);break;case"video":case"audio":for(i=0;i<Gu.length;i++)dn(Gu[i],r);break;case"source":dn("error",r);break;case"img":case"image":case"link":dn("error",r),dn("load",r);break;case"details":dn("toggle",r);break;case"input":v5(r,s),dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dn("invalid",r);break;case"textarea":w5(r,s),dn("invalid",r)}$g(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&tf(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tf(r.textContent,a,e),i=["children",""+a]):xd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dn("scroll",r)}switch(n){case"input":Gh(r),y5(r,s,!0);break;case"textarea":Gh(r),b5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vp)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ts]=t,e[Ld]=r,$3(e,t,!1,!1),t.stateNode=e;e:{switch(o=zg(n,r),n){case"dialog":dn("cancel",e),dn("close",e),i=r;break;case"iframe":case"object":case"embed":dn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Gu.length;i++)dn(Gu[i],e);i=r;break;case"source":dn("error",e),i=r;break;case"img":case"image":case"link":dn("error",e),dn("load",e),i=r;break;case"details":dn("toggle",e),i=r;break;case"input":v5(e,r),i=Fg(e,r),dn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=kn({},r,{value:void 0}),dn("invalid",e);break;case"textarea":w5(e,r),i=Bg(e,r),dn("invalid",e);break;default:i=r}$g(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?bS(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yS(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_d(e,l):typeof l=="number"&&_d(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dn("scroll",e):l!=null&&Av(e,s,l,o))}switch(n){case"input":Gh(e),y5(e,r,!1);break;case"textarea":Gh(e),b5(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?vc(e,!!r.multiple,s,!1):r.defaultValue!=null&&vc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=vp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sr(t),null;case 6:if(e&&t.stateNode!=null)q3(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ce(166));if(n=il(Rd.current),il(Fs.current),nf(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ts]=t,(s=r.nodeValue!==n)&&(e=Ai,e!==null))switch(e.tag){case 3:tf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tf(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ts]=t,t.stateNode=r}return Sr(t),null;case 13:if(fn(bn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gn&&ki!==null&&t.mode&1&&!(t.flags&128))a3(),Lc(),t.flags|=98560,s=!1;else if(s=nf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Ce(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[Ts]=t}else Lc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sr(t),s=!1}else ps!==null&&(_1(ps),ps=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||bn.current&1?rr===0&&(rr=3):cy())),t.updateQueue!==null&&(t.flags|=4),Sr(t),null);case 4:return Rc(),p1(e,t),e===null&&Cd(t.stateNode.containerInfo),Sr(t),null;case 10:return Wv(t.type._context),Sr(t),null;case 17:return ei(t.type)&&yp(),Sr(t),null;case 19:if(fn(bn),s=t.memoizedState,s===null)return Sr(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Iu(s,!1);else{if(rr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=jp(e),o!==null){for(t.flags|=128,Iu(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ln(bn,bn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Mn()>Oc&&(t.flags|=128,r=!0,Iu(s,!1),t.lanes=4194304)}else{if(!r)if(e=jp(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Iu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!gn)return Sr(t),null}else 2*Mn()-s.renderingStartTime>Oc&&n!==1073741824&&(t.flags|=128,r=!0,Iu(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Mn(),t.sibling=null,n=bn.current,ln(bn,r?n&1|2:n&1),t):(Sr(t),null);case 22:case 23:return ly(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?xi&1073741824&&(Sr(t),t.subtreeFlags&6&&(t.flags|=8192)):Sr(t),null;case 24:return null;case 25:return null}throw Error(Ce(156,t.tag))}function L6(e,t){switch(zv(t),t.tag){case 1:return ei(t.type)&&yp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rc(),fn(Qr),fn(Tr),Zv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yv(t),null;case 13:if(fn(bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ce(340));Lc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fn(bn),null;case 4:return Rc(),null;case 10:return Wv(t.type._context),null;case 22:case 23:return ly(),null;case 24:return null;default:return null}}var of=!1,Pr=!1,T6=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function lc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ln(e,t,r)}else n.current=null}function m1(e,t,n){try{n()}catch(r){Ln(e,t,r)}}var cw=!1;function R6(e,t){if(Xg=pp,e=KS(),Uv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=e,g=null;t:for(;;){for(var f;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(f=p.firstChild)!==null;)g=p,p=f;for(;;){if(p===e)break t;if(g===n&&++c===i&&(a=o),g===s&&++d===r&&(l=o),(f=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qg={focusedElem:e,selectionRange:n},pp=!1,Ue=t;Ue!==null;)if(t=Ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ue=e;else for(;Ue!==null;){t=Ue;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,k=w.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?S:us(t.type,S),k);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(N){Ln(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ue=e;break}Ue=t.return}return w=cw,cw=!1,w}function ad(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&m1(t,n,s)}i=i.next}while(i!==r)}}function lm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function g1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function V3(e){var t=e.alternate;t!==null&&(e.alternate=null,V3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ts],delete t[Ld],delete t[n1],delete t[m6],delete t[g6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function H3(e){return e.tag===5||e.tag===3||e.tag===4}function uw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||H3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function v1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=vp));else if(r!==4&&(e=e.child,e!==null))for(v1(e,t,n),e=e.sibling;e!==null;)v1(e,t,n),e=e.sibling}function y1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(y1(e,t,n),e=e.sibling;e!==null;)y1(e,t,n),e=e.sibling}var pr=null,hs=!1;function $o(e,t,n){for(n=n.child;n!==null;)W3(e,t,n),n=n.sibling}function W3(e,t,n){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(em,n)}catch{}switch(n.tag){case 5:Pr||lc(n,t);case 6:var r=pr,i=hs;pr=null,$o(e,t,n),pr=r,hs=i,pr!==null&&(hs?(e=pr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pr.removeChild(n.stateNode));break;case 18:pr!==null&&(hs?(e=pr,n=n.stateNode,e.nodeType===8?S0(e.parentNode,n):e.nodeType===1&&S0(e,n),Nd(e)):S0(pr,n.stateNode));break;case 4:r=pr,i=hs,pr=n.stateNode.containerInfo,hs=!0,$o(e,t,n),pr=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&m1(n,t,o),i=i.next}while(i!==r)}$o(e,t,n);break;case 1:if(!Pr&&(lc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ln(n,t,a)}$o(e,t,n);break;case 21:$o(e,t,n);break;case 22:n.mode&1?(Pr=(r=Pr)||n.memoizedState!==null,$o(e,t,n),Pr=r):$o(e,t,n);break;default:$o(e,t,n)}}function dw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new T6),t.forEach(function(r){var i=z6.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ss(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:pr=a.stateNode,hs=!1;break e;case 3:pr=a.stateNode.containerInfo,hs=!0;break e;case 4:pr=a.stateNode.containerInfo,hs=!0;break e}a=a.return}if(pr===null)throw Error(Ce(160));W3(s,o,i),pr=null,hs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ln(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)G3(t,e),t=t.sibling}function G3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ss(t,e),Es(e),r&4){try{ad(3,e,e.return),lm(3,e)}catch(S){Ln(e,e.return,S)}try{ad(5,e,e.return)}catch(S){Ln(e,e.return,S)}}break;case 1:ss(t,e),Es(e),r&512&&n!==null&&lc(n,n.return);break;case 5:if(ss(t,e),Es(e),r&512&&n!==null&&lc(n,n.return),e.flags&32){var i=e.stateNode;try{_d(i,"")}catch(S){Ln(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mS(i,s),zg(a,o);var c=zg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?bS(i,p):d==="dangerouslySetInnerHTML"?yS(i,p):d==="children"?_d(i,p):Av(i,d,p,c)}switch(a){case"input":Dg(i,s);break;case"textarea":gS(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?vc(i,!!s.multiple,f,!1):g!==!!s.multiple&&(s.defaultValue!=null?vc(i,!!s.multiple,s.defaultValue,!0):vc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ld]=s}catch(S){Ln(e,e.return,S)}}break;case 6:if(ss(t,e),Es(e),r&4){if(e.stateNode===null)throw Error(Ce(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(S){Ln(e,e.return,S)}}break;case 3:if(ss(t,e),Es(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nd(t.containerInfo)}catch(S){Ln(e,e.return,S)}break;case 4:ss(t,e),Es(e);break;case 13:ss(t,e),Es(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(oy=Mn())),r&4&&dw(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Pr=(c=Pr)||d,ss(t,e),Pr=c):ss(t,e),Es(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Ue=e,d=e.child;d!==null;){for(p=Ue=d;Ue!==null;){switch(g=Ue,f=g.child,g.tag){case 0:case 11:case 14:case 15:ad(4,g,g.return);break;case 1:lc(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(S){Ln(r,n,S)}}break;case 5:lc(g,g.return);break;case 22:if(g.memoizedState!==null){fw(p);continue}}f!==null?(f.return=g,Ue=f):fw(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wS("display",o))}catch(S){Ln(e,e.return,S)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(S){Ln(e,e.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ss(t,e),Es(e),r&4&&dw(e);break;case 21:break;default:ss(t,e),Es(e)}}function Es(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(H3(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_d(i,""),r.flags&=-33);var s=uw(e);y1(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uw(e);v1(e,a,o);break;default:throw Error(Ce(161))}}catch(l){Ln(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function I6(e,t,n){Ue=e,K3(e)}function K3(e,t,n){for(var r=(e.mode&1)!==0;Ue!==null;){var i=Ue,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||of;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Pr;a=of;var c=Pr;if(of=o,(Pr=l)&&!c)for(Ue=i;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?pw(i):l!==null?(l.return=o,Ue=l):pw(i);for(;s!==null;)Ue=s,K3(s),s=s.sibling;Ue=i,of=a,Pr=c}hw(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ue=s):hw(e)}}function hw(e){for(;Ue!==null;){var t=Ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pr||lm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:us(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Y5(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Y5(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Nd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}Pr||t.flags&512&&g1(t)}catch(g){Ln(t,t.return,g)}}if(t===e){Ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function fw(e){for(;Ue!==null;){var t=Ue;if(t===e){Ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function pw(e){for(;Ue!==null;){var t=Ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{lm(4,t)}catch(l){Ln(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ln(t,i,l)}}var s=t.return;try{g1(t)}catch(l){Ln(t,s,l)}break;case 5:var o=t.return;try{g1(t)}catch(l){Ln(t,o,l)}}}catch(l){Ln(t,t.return,l)}if(t===e){Ue=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ue=a;break}Ue=t.return}}var O6=Math.ceil,Ep=xo.ReactCurrentDispatcher,iy=xo.ReactCurrentOwner,Wi=xo.ReactCurrentBatchConfig,Ft=0,cr=null,Kn=null,vr=0,xi=0,cc=wa(0),rr=0,Dd=null,vl=0,cm=0,sy=0,ld=null,Yr=null,oy=0,Oc=1/0,ro=null,Cp=!1,w1=null,aa=null,af=!1,Qo=null,Pp=0,cd=0,b1=null,Hf=-1,Wf=0;function $r(){return Ft&6?Mn():Hf!==-1?Hf:Hf=Mn()}function la(e){return e.mode&1?Ft&2&&vr!==0?vr&-vr:y6.transition!==null?(Wf===0&&(Wf=TS()),Wf):(e=Yt,e!==0||(e=window.event,e=e===void 0?16:BS(e.type)),e):1}function gs(e,t,n,r){if(50<cd)throw cd=0,b1=null,Error(Ce(185));nh(e,n,r),(!(Ft&2)||e!==cr)&&(e===cr&&(!(Ft&2)&&(cm|=n),rr===4&&Jo(e,vr)),ti(e,r),n===1&&Ft===0&&!(t.mode&1)&&(Oc=Mn()+500,sm&&ba()))}function ti(e,t){var n=e.callbackNode;yC(e,t);var r=fp(e,e===cr?vr:0);if(r===0)n!==null&&S5(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&S5(n),t===1)e.tag===0?v6(mw.bind(null,e)):i3(mw.bind(null,e)),f6(function(){!(Ft&6)&&ba()}),n=null;else{switch(RS(r)){case 1:n=Tv;break;case 4:n=PS;break;case 16:n=hp;break;case 536870912:n=LS;break;default:n=hp}n=n4(n,J3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function J3(e,t){if(Hf=-1,Wf=0,Ft&6)throw Error(Ce(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=fp(e,e===cr?vr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Lp(e,r);else{t=r;var i=Ft;Ft|=2;var s=Z3();(cr!==e||vr!==t)&&(ro=null,Oc=Mn()+500,ul(e,t));do try{M6();break}catch(a){Y3(e,a)}while(1);Hv(),Ep.current=s,Ft=i,Kn!==null?t=0:(cr=null,vr=0,t=rr)}if(t!==0){if(t===2&&(i=Gg(e),i!==0&&(r=i,t=x1(e,i))),t===1)throw n=Dd,ul(e,0),Jo(e,r),ti(e,Mn()),n;if(t===6)Jo(e,r);else{if(i=e.current.alternate,!(r&30)&&!F6(i)&&(t=Lp(e,r),t===2&&(s=Gg(e),s!==0&&(r=s,t=x1(e,s))),t===1))throw n=Dd,ul(e,0),Jo(e,r),ti(e,Mn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Ce(345));case 2:Ka(e,Yr,ro);break;case 3:if(Jo(e,r),(r&130023424)===r&&(t=oy+500-Mn(),10<t)){if(fp(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){$r(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=t1(Ka.bind(null,e,Yr,ro),t);break}Ka(e,Yr,ro);break;case 4:if(Jo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ms(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Mn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O6(r/1960))-r,10<r){e.timeoutHandle=t1(Ka.bind(null,e,Yr,ro),r);break}Ka(e,Yr,ro);break;case 5:Ka(e,Yr,ro);break;default:throw Error(Ce(329))}}}return ti(e,Mn()),e.callbackNode===n?J3.bind(null,e):null}function x1(e,t){var n=ld;return e.current.memoizedState.isDehydrated&&(ul(e,t).flags|=256),e=Lp(e,t),e!==2&&(t=Yr,Yr=n,t!==null&&_1(t)),e}function _1(e){Yr===null?Yr=e:Yr.push.apply(Yr,e)}function F6(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vs(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jo(e,t){for(t&=~sy,t&=~cm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ms(t),r=1<<n;e[n]=-1,t&=~r}}function mw(e){if(Ft&6)throw Error(Ce(327));_c();var t=fp(e,0);if(!(t&1))return ti(e,Mn()),null;var n=Lp(e,t);if(e.tag!==0&&n===2){var r=Gg(e);r!==0&&(t=r,n=x1(e,r))}if(n===1)throw n=Dd,ul(e,0),Jo(e,t),ti(e,Mn()),n;if(n===6)throw Error(Ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ka(e,Yr,ro),ti(e,Mn()),null}function ay(e,t){var n=Ft;Ft|=1;try{return e(t)}finally{Ft=n,Ft===0&&(Oc=Mn()+500,sm&&ba())}}function yl(e){Qo!==null&&Qo.tag===0&&!(Ft&6)&&_c();var t=Ft;Ft|=1;var n=Wi.transition,r=Yt;try{if(Wi.transition=null,Yt=1,e)return e()}finally{Yt=r,Wi.transition=n,Ft=t,!(Ft&6)&&ba()}}function ly(){xi=cc.current,fn(cc)}function ul(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,h6(n)),Kn!==null)for(n=Kn.return;n!==null;){var r=n;switch(zv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yp();break;case 3:Rc(),fn(Qr),fn(Tr),Zv();break;case 5:Yv(r);break;case 4:Rc();break;case 13:fn(bn);break;case 19:fn(bn);break;case 10:Wv(r.type._context);break;case 22:case 23:ly()}n=n.return}if(cr=e,Kn=e=ca(e.current,null),vr=xi=t,rr=0,Dd=null,sy=cm=vl=0,Yr=ld=null,rl!==null){for(t=0;t<rl.length;t++)if(n=rl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rl=null}return e}function Y3(e,t){do{var n=Kn;try{if(Hv(),zf.current=Ap,Np){for(var r=_n.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Np=!1}if(gl=0,ar=nr=_n=null,od=!1,Id=0,iy.current=null,n===null||n.return===null){rr=1,Dd=t,Kn=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=vr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=nw(o);if(f!==null){f.flags&=-257,rw(f,o,a,s,t),f.mode&1&&tw(s,c,t),t=f,l=c;var w=t.updateQueue;if(w===null){var S=new Set;S.add(l),t.updateQueue=S}else w.add(l);break e}else{if(!(t&1)){tw(s,c,t),cy();break e}l=Error(Ce(426))}}else if(gn&&a.mode&1){var k=nw(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),rw(k,o,a,s,t),qv(Ic(l,a));break e}}s=l=Ic(l,a),rr!==4&&(rr=2),ld===null?ld=[s]:ld.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=R3(s,l,t);J5(s,v);break e;case 1:a=l;var x=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(aa===null||!aa.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var N=I3(s,a,t);J5(s,N);break e}}s=s.return}while(s!==null)}Q3(n)}catch(O){t=O,Kn===n&&n!==null&&(Kn=n=n.return);continue}break}while(1)}function Z3(){var e=Ep.current;return Ep.current=Ap,e===null?Ap:e}function cy(){(rr===0||rr===3||rr===2)&&(rr=4),cr===null||!(vl&268435455)&&!(cm&268435455)||Jo(cr,vr)}function Lp(e,t){var n=Ft;Ft|=2;var r=Z3();(cr!==e||vr!==t)&&(ro=null,ul(e,t));do try{D6();break}catch(i){Y3(e,i)}while(1);if(Hv(),Ft=n,Ep.current=r,Kn!==null)throw Error(Ce(261));return cr=null,vr=0,rr}function D6(){for(;Kn!==null;)X3(Kn)}function M6(){for(;Kn!==null&&!cC();)X3(Kn)}function X3(e){var t=t4(e.alternate,e,xi);e.memoizedProps=e.pendingProps,t===null?Q3(e):Kn=t,iy.current=null}function Q3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=L6(n,t),n!==null){n.flags&=32767,Kn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rr=6,Kn=null;return}}else if(n=P6(n,t,xi),n!==null){Kn=n;return}if(t=t.sibling,t!==null){Kn=t;return}Kn=t=e}while(t!==null);rr===0&&(rr=5)}function Ka(e,t,n){var r=Yt,i=Wi.transition;try{Wi.transition=null,Yt=1,B6(e,t,n,r)}finally{Wi.transition=i,Yt=r}return null}function B6(e,t,n,r){do _c();while(Qo!==null);if(Ft&6)throw Error(Ce(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ce(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(wC(e,s),e===cr&&(Kn=cr=null,vr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||af||(af=!0,n4(hp,function(){return _c(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wi.transition,Wi.transition=null;var o=Yt;Yt=1;var a=Ft;Ft|=4,iy.current=null,R6(e,n),G3(n,e),s6(Qg),pp=!!Xg,Qg=Xg=null,e.current=n,I6(n),uC(),Ft=a,Yt=o,Wi.transition=s}else e.current=n;if(af&&(af=!1,Qo=e,Pp=i),s=e.pendingLanes,s===0&&(aa=null),fC(n.stateNode),ti(e,Mn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cp)throw Cp=!1,e=w1,w1=null,e;return Pp&1&&e.tag!==0&&_c(),s=e.pendingLanes,s&1?e===b1?cd++:(cd=0,b1=e):cd=0,ba(),null}function _c(){if(Qo!==null){var e=RS(Pp),t=Wi.transition,n=Yt;try{if(Wi.transition=null,Yt=16>e?16:e,Qo===null)var r=!1;else{if(e=Qo,Qo=null,Pp=0,Ft&6)throw Error(Ce(331));var i=Ft;for(Ft|=4,Ue=e.current;Ue!==null;){var s=Ue,o=s.child;if(Ue.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ue=c;Ue!==null;){var d=Ue;switch(d.tag){case 0:case 11:case 15:ad(8,d,s)}var p=d.child;if(p!==null)p.return=d,Ue=p;else for(;Ue!==null;){d=Ue;var g=d.sibling,f=d.return;if(V3(d),d===c){Ue=null;break}if(g!==null){g.return=f,Ue=g;break}Ue=f}}}var w=s.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var k=S.sibling;S.sibling=null,S=k}while(S!==null)}}Ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ue=o;else e:for(;Ue!==null;){if(s=Ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ad(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ue=v;break e}Ue=s.return}}var x=e.current;for(Ue=x;Ue!==null;){o=Ue;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ue=_;else e:for(o=x;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lm(9,a)}}catch(O){Ln(a,a.return,O)}if(a===o){Ue=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,Ue=N;break e}Ue=a.return}}if(Ft=i,ba(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(em,e)}catch{}r=!0}return r}finally{Yt=n,Wi.transition=t}}return!1}function gw(e,t,n){t=Ic(n,t),t=R3(e,t,1),e=oa(e,t,1),t=$r(),e!==null&&(nh(e,1,t),ti(e,t))}function Ln(e,t,n){if(e.tag===3)gw(e,e,n);else for(;t!==null;){if(t.tag===3){gw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(aa===null||!aa.has(r))){e=Ic(n,e),e=I3(t,e,1),t=oa(t,e,1),e=$r(),t!==null&&(nh(t,1,e),ti(t,e));break}}t=t.return}}function U6(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=$r(),e.pingedLanes|=e.suspendedLanes&n,cr===e&&(vr&n)===n&&(rr===4||rr===3&&(vr&130023424)===vr&&500>Mn()-oy?ul(e,0):sy|=n),ti(e,t)}function e4(e,t){t===0&&(e.mode&1?(t=Yh,Yh<<=1,!(Yh&130023424)&&(Yh=4194304)):t=1);var n=$r();e=vo(e,t),e!==null&&(nh(e,t,n),ti(e,n))}function $6(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),e4(e,n)}function z6(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(t),e4(e,n)}var t4;t4=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qr.current)Zr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Zr=!1,C6(e,t,n);Zr=!!(e.flags&131072)}else Zr=!1,gn&&t.flags&1048576&&s3(t,xp,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vf(e,t),e=t.pendingProps;var i=Pc(t,Tr.current);xc(t,n),i=Qv(null,t,r,e,i,n);var s=ey();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ei(r)?(s=!0,wp(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kv(t),i.updater=am,t.stateNode=i,i._reactInternals=t,l1(t,r,e,n),t=d1(null,t,r,!0,s,n)):(t.tag=0,gn&&s&&$v(t),Mr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=V6(r),e=us(r,e),i){case 0:t=u1(null,t,r,e,n);break e;case 1:t=ow(null,t,r,e,n);break e;case 11:t=iw(null,t,r,e,n);break e;case 14:t=sw(null,t,r,us(r.type,e),n);break e}throw Error(Ce(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:us(r,i),u1(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:us(r,i),ow(e,t,r,i,n);case 3:e:{if(M3(t),e===null)throw Error(Ce(387));r=t.pendingProps,s=t.memoizedState,i=s.element,d3(e,t),kp(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ic(Error(Ce(423)),t),t=aw(e,t,r,n,i);break e}else if(r!==i){i=Ic(Error(Ce(424)),t),t=aw(e,t,r,n,i);break e}else for(ki=sa(t.stateNode.containerInfo.firstChild),Ai=t,gn=!0,ps=null,n=c3(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lc(),r===i){t=yo(e,t,n);break e}Mr(e,t,r,n)}t=t.child}return t;case 5:return h3(t),e===null&&s1(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,e1(r,i)?o=null:s!==null&&e1(r,s)&&(t.flags|=32),D3(e,t),Mr(e,t,o,n),t.child;case 6:return e===null&&s1(t),null;case 13:return B3(e,t,n);case 4:return Jv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tc(t,null,r,n):Mr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:us(r,i),iw(e,t,r,i,n);case 7:return Mr(e,t,t.pendingProps,n),t.child;case 8:return Mr(e,t,t.pendingProps.children,n),t.child;case 12:return Mr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ln(_p,r._currentValue),r._currentValue=o,s!==null)if(vs(s.value,o)){if(s.children===i.children&&!Qr.current){t=yo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=uo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),o1(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),o1(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xc(t,n),i=Gi(i),r=r(i),t.flags|=1,Mr(e,t,r,n),t.child;case 14:return r=t.type,i=us(r,t.pendingProps),i=us(r.type,i),sw(e,t,r,i,n);case 15:return O3(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:us(r,i),Vf(e,t),t.tag=1,ei(r)?(e=!0,wp(t)):e=!1,xc(t,n),T3(t,r,i),l1(t,r,i,n),d1(null,t,r,!0,e,n);case 19:return U3(e,t,n);case 22:return F3(e,t,n)}throw Error(Ce(156,t.tag))};function n4(e,t){return CS(e,t)}function q6(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(e,t,n,r){return new q6(e,t,n,r)}function uy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function V6(e){if(typeof e=="function")return uy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cv)return 11;if(e===Pv)return 14}return 2}function ca(e,t){var n=e.alternate;return n===null?(n=Vi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gf(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")uy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ql:return dl(n.children,i,s,t);case Ev:o=8,i|=8;break;case Tg:return e=Vi(12,n,t,i|2),e.elementType=Tg,e.lanes=s,e;case Rg:return e=Vi(13,n,t,i),e.elementType=Rg,e.lanes=s,e;case Ig:return e=Vi(19,n,t,i),e.elementType=Ig,e.lanes=s,e;case hS:return um(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uS:o=10;break e;case dS:o=9;break e;case Cv:o=11;break e;case Pv:o=14;break e;case Wo:o=16,r=null;break e}throw Error(Ce(130,e==null?e:typeof e,""))}return t=Vi(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function dl(e,t,n,r){return e=Vi(7,e,r,t),e.lanes=n,e}function um(e,t,n,r){return e=Vi(22,e,r,t),e.elementType=hS,e.lanes=n,e.stateNode={isHidden:!1},e}function L0(e,t,n){return e=Vi(6,e,null,t),e.lanes=n,e}function T0(e,t,n){return t=Vi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H6(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h0(0),this.expirationTimes=h0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dy(e,t,n,r,i,s,o,a,l){return e=new H6(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Vi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kv(s),e}function W6(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function r4(e){if(!e)return pa;e=e._reactInternals;e:{if(Sl(e)!==e||e.tag!==1)throw Error(Ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ei(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ce(171))}if(e.tag===1){var n=e.type;if(ei(n))return r3(e,n,t)}return t}function i4(e,t,n,r,i,s,o,a,l){return e=dy(n,r,!0,e,i,s,o,a,l),e.context=r4(null),n=e.current,r=$r(),i=la(n),s=uo(r,i),s.callback=t??null,oa(n,s,i),e.current.lanes=i,nh(e,i,r),ti(e,r),e}function dm(e,t,n,r){var i=t.current,s=$r(),o=la(i);return n=r4(n),t.context===null?t.context=n:t.pendingContext=n,t=uo(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=oa(i,t,o),e!==null&&(gs(e,i,o,s),$f(e,i,o)),o}function Tp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hy(e,t){vw(e,t),(e=e.alternate)&&vw(e,t)}function G6(){return null}var s4=typeof reportError=="function"?reportError:function(e){console.error(e)};function fy(e){this._internalRoot=e}hm.prototype.render=fy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ce(409));dm(e,t,null,null)};hm.prototype.unmount=fy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yl(function(){dm(null,e,null,null)}),t[go]=null}};function hm(e){this._internalRoot=e}hm.prototype.unstable_scheduleHydration=function(e){if(e){var t=FS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ko.length&&t!==0&&t<Ko[n].priority;n++);Ko.splice(n,0,e),n===0&&MS(e)}};function py(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yw(){}function K6(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Tp(o);s.call(c)}}var o=i4(t,r,e,0,null,!1,!1,"",yw);return e._reactRootContainer=o,e[go]=o.current,Cd(e.nodeType===8?e.parentNode:e),yl(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Tp(l);a.call(c)}}var l=dy(e,0,!1,null,null,!1,!1,"",yw);return e._reactRootContainer=l,e[go]=l.current,Cd(e.nodeType===8?e.parentNode:e),yl(function(){dm(t,l,n,r)}),l}function pm(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Tp(o);a.call(l)}}dm(t,o,e,i)}else o=K6(n,t,e,i,r);return Tp(o)}IS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wu(t.pendingLanes);n!==0&&(Rv(t,n|1),ti(t,Mn()),!(Ft&6)&&(Oc=Mn()+500,ba()))}break;case 13:yl(function(){var r=vo(e,1);if(r!==null){var i=$r();gs(r,e,1,i)}}),hy(e,1)}};Iv=function(e){if(e.tag===13){var t=vo(e,134217728);if(t!==null){var n=$r();gs(t,e,134217728,n)}hy(e,134217728)}};OS=function(e){if(e.tag===13){var t=la(e),n=vo(e,t);if(n!==null){var r=$r();gs(n,e,t,r)}hy(e,t)}};FS=function(){return Yt};DS=function(e,t){var n=Yt;try{return Yt=e,t()}finally{Yt=n}};Vg=function(e,t,n){switch(t){case"input":if(Dg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=im(r);if(!i)throw Error(Ce(90));pS(r),Dg(r,i)}}}break;case"textarea":gS(e,n);break;case"select":t=n.value,t!=null&&vc(e,!!n.multiple,t,!1)}};SS=ay;kS=yl;var J6={usingClientEntryPoint:!1,Events:[ih,rc,im,xS,_S,ay]},Ou={findFiberByHostInstance:nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y6={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=AS(e),e===null?null:e.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||G6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{em=lf.inject(Y6),Os=lf}catch{}}Li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J6;Li.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!py(t))throw Error(Ce(200));return W6(e,t,null,n)};Li.createRoot=function(e,t){if(!py(e))throw Error(Ce(299));var n=!1,r="",i=s4;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=dy(e,1,!1,null,null,n,!1,r,i),e[go]=t.current,Cd(e.nodeType===8?e.parentNode:e),new fy(t)};Li.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ce(188)):(e=Object.keys(e).join(","),Error(Ce(268,e)));return e=AS(t),e=e===null?null:e.stateNode,e};Li.flushSync=function(e){return yl(e)};Li.hydrate=function(e,t,n){if(!fm(t))throw Error(Ce(200));return pm(null,e,t,!0,n)};Li.hydrateRoot=function(e,t,n){if(!py(e))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=s4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=i4(t,null,e,1,n??null,i,!1,s,o),e[go]=t.current,Cd(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new hm(t)};Li.render=function(e,t,n){if(!fm(t))throw Error(Ce(200));return pm(null,e,t,!1,n)};Li.unmountComponentAtNode=function(e){if(!fm(e))throw Error(Ce(40));return e._reactRootContainer?(yl(function(){pm(null,null,e,!1,function(){e._reactRootContainer=null,e[go]=null})}),!0):!1};Li.unstable_batchedUpdates=ay;Li.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!fm(n))throw Error(Ce(200));if(e==null||e._reactInternals===void 0)throw Error(Ce(38));return pm(e,t,n,!1,r)};Li.version="18.3.1-next-f1338f8080-20240426";function o4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o4)}catch(e){console.error(e)}}o4(),oS.exports=Li;var a4=oS.exports;const Z6=bv(a4);var ww=a4;Pg.createRoot=ww.createRoot,Pg.hydrateRoot=ww.hydrateRoot;var bw="popstate";function X6(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return S1("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Md(i)}return eP(t,n,null,e)}function Sn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ys(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Q6(){return Math.random().toString(36).substring(2,10)}function xw(e,t){return{usr:e.state,key:e.key,idx:t}}function S1(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Gc(t):t,state:n,key:t&&t.key||r||Q6()}}function Md({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Gc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function eP(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function p(){a="POP";let k=d(),v=k==null?null:k-c;c=k,l&&l({action:a,location:S.location,delta:v})}function g(k,v){a="PUSH";let x=S1(S.location,k,v);n&&n(x,k),c=d()+1;let _=xw(x,c),N=S.createHref(x);try{o.pushState(_,"",N)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(N)}s&&l&&l({action:a,location:S.location,delta:1})}function f(k,v){a="REPLACE";let x=S1(S.location,k,v);n&&n(x,k),c=d();let _=xw(x,c),N=S.createHref(x);o.replaceState(_,"",N),s&&l&&l({action:a,location:S.location,delta:0})}function w(k){return tP(k)}let S={get action(){return a},get location(){return e(i,o)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(bw,p),l=k,()=>{i.removeEventListener(bw,p),l=null}},createHref(k){return t(i,k)},createURL:w,encodeLocation(k){let v=w(k);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:f,go(k){return o.go(k)}};return S}function tP(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Sn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Md(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function l4(e,t,n="/"){return nP(e,t,n,!1)}function nP(e,t,n,r){let i=typeof t=="string"?Gc(t):t,s=wo(i.pathname||"/",n);if(s==null)return null;let o=c4(e);rP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=pP(s);a=hP(o[l],c,r)}return a}function c4(e,t=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;Sn(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let p=ho([r,d.relativePath]),g=n.concat(d);o.children&&o.children.length>0&&(Sn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),c4(o.children,t,g,p,l)),!(o.path==null&&!o.index)&&t.push({path:p,score:uP(p,o.index),routesMeta:g})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of u4(o.path))s(o,a,!0,c)}),t}function u4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=u4(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function rP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:dP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var iP=/^:[\w-]+$/,sP=3,oP=2,aP=1,lP=10,cP=-2,_w=e=>e==="*";function uP(e,t){let n=e.split("/"),r=n.length;return n.some(_w)&&(r+=cP),t&&(r+=oP),n.filter(i=>!_w(i)).reduce((i,s)=>i+(iP.test(s)?sP:s===""?aP:lP),r)}function dP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function hP(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",p=Rp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=Rp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:ho([s,p.pathname]),pathnameBase:yP(ho([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=ho([s,p.pathnameBase]))}return o}function Rp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=fP(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:p},g)=>{if(d==="*"){let w=a[g]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const f=a[g];return p&&!f?c[d]=void 0:c[d]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function fP(e,t=!1,n=!0){ys(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function pP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ys(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function wo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function mP(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Gc(e):e;return{pathname:n?n.startsWith("/")?n:gP(n,t):t,search:wP(r),hash:bP(i)}}function gP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function R0(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function d4(e){let t=vP(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function h4(e,t,n,r=!1){let i;typeof e=="string"?i=Gc(e):(i={...e},Sn(!i.pathname||!i.pathname.includes("?"),R0("?","pathname","search",i)),Sn(!i.pathname||!i.pathname.includes("#"),R0("#","pathname","hash",i)),Sn(!i.search||!i.search.includes("#"),R0("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?t[p]:"/"}let l=mP(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var ho=e=>e.join("/").replace(/\/\/+/g,"/"),yP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var f4=["POST","PUT","PATCH","DELETE"];new Set(f4);var _P=["GET",...f4];new Set(_P);var Kc=R.createContext(null);Kc.displayName="DataRouter";var mm=R.createContext(null);mm.displayName="DataRouterState";R.createContext(!1);var p4=R.createContext({isTransitioning:!1});p4.displayName="ViewTransition";var SP=R.createContext(new Map);SP.displayName="Fetchers";var kP=R.createContext(null);kP.displayName="Await";var $s=R.createContext(null);$s.displayName="Navigation";var oh=R.createContext(null);oh.displayName="Location";var _o=R.createContext({outlet:null,matches:[],isDataRoute:!1});_o.displayName="Route";var my=R.createContext(null);my.displayName="RouteError";function jP(e,{relative:t}={}){Sn(ah(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext($s),{hash:i,pathname:s,search:o}=lh(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:ho([n,s])),r.createHref({pathname:a,search:o,hash:i})}function ah(){return R.useContext(oh)!=null}function xa(){return Sn(ah(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(oh).location}var m4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g4(e){R.useContext($s).static||R.useLayoutEffect(e)}function gy(){let{isDataRoute:e}=R.useContext(_o);return e?MP():NP()}function NP(){Sn(ah(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(Kc),{basename:t,navigator:n}=R.useContext($s),{matches:r}=R.useContext(_o),{pathname:i}=xa(),s=JSON.stringify(d4(r)),o=R.useRef(!1);return g4(()=>{o.current=!0}),R.useCallback((l,c={})=>{if(ys(o.current,m4),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=h4(l,JSON.parse(s),i,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ho([t,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[t,n,s,i,e])}R.createContext(null);function lh(e,{relative:t}={}){let{matches:n}=R.useContext(_o),{pathname:r}=xa(),i=JSON.stringify(d4(n));return R.useMemo(()=>h4(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function AP(e,t){return v4(e,t)}function v4(e,t,n,r,i){var x;Sn(ah(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=R.useContext($s),{matches:o}=R.useContext(_o),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",p=a&&a.route;{let _=p&&p.path||"";y4(c,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=xa(),f;if(t){let _=typeof t=="string"?Gc(t):t;Sn(d==="/"||((x=_.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),f=_}else f=g;let w=f.pathname||"/",S=w;if(d!=="/"){let _=d.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let k=l4(e,{pathname:S});ys(p||k!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),ys(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=TP(k&&k.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:ho([d,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:ho([d,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,i);return t&&v?R.createElement(oh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function EP(){let e=DP(),t=xP(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:s},"ErrorBoundary")," or"," ",R.createElement("code",{style:s},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:i},n):null,o)}var CP=R.createElement(EP,null),PP=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?R.createElement(_o.Provider,{value:this.props.routeContext},R.createElement(my.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LP({routeContext:e,match:t,children:n}){let r=R.useContext(Kc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(_o.Provider,{value:e},n)}function TP(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Sn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:p,errors:g}=n,f=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||f){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,p)=>{let g,f=!1,w=null,S=null;n&&(g=o&&d.route.id?o[d.route.id]:void 0,w=d.route.errorElement||CP,a&&(l<0&&p===0?(y4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,S=null):l===p&&(f=!0,S=d.route.hydrateFallbackElement||null)));let k=t.concat(s.slice(0,p+1)),v=()=>{let x;return g?x=w:f?x=S:d.route.Component?x=R.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,R.createElement(LP,{match:d,routeContext:{outlet:c,matches:k,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(PP,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:v(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:r}):v()},null)}function vy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RP(e){let t=R.useContext(Kc);return Sn(t,vy(e)),t}function IP(e){let t=R.useContext(mm);return Sn(t,vy(e)),t}function OP(e){let t=R.useContext(_o);return Sn(t,vy(e)),t}function yy(e){let t=OP(e),n=t.matches[t.matches.length-1];return Sn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function FP(){return yy("useRouteId")}function DP(){var r;let e=R.useContext(my),t=IP("useRouteError"),n=yy("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function MP(){let{router:e}=RP("useNavigate"),t=yy("useNavigate"),n=R.useRef(!1);return g4(()=>{n.current=!0}),R.useCallback(async(i,s={})=>{ys(n.current,m4),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Sw={};function y4(e,t,n){!t&&!Sw[e]&&(Sw[e]=!0,ys(!1,n))}R.memo(BP);function BP({routes:e,future:t,state:n,unstable_onError:r}){return v4(e,void 0,n,r,t)}function Kf(e){Sn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UP({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Sn(!ah(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=R.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Gc(n));let{pathname:l="/",search:c="",hash:d="",state:p=null,key:g="default"}=n,f=R.useMemo(()=>{let w=wo(l,o);return w==null?null:{location:{pathname:w,search:c,hash:d,state:p,key:g},navigationType:r}},[o,l,c,d,p,g,r]);return ys(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:R.createElement($s.Provider,{value:a},R.createElement(oh.Provider,{children:t,value:f}))}function $P({children:e,location:t}){return AP(k1(e),t)}function k1(e,t=[]){let n=[];return R.Children.forEach(e,(r,i)=>{if(!R.isValidElement(r))return;let s=[...t,i];if(r.type===R.Fragment){n.push.apply(n,k1(r.props.children,s));return}Sn(r.type===Kf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Sn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=k1(r.props.children,s)),n.push(o)}),n}var Jf="get",Yf="application/x-www-form-urlencoded";function gm(e){return e!=null&&typeof e.tagName=="string"}function zP(e){return gm(e)&&e.tagName.toLowerCase()==="button"}function qP(e){return gm(e)&&e.tagName.toLowerCase()==="form"}function VP(e){return gm(e)&&e.tagName.toLowerCase()==="input"}function HP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WP(e,t){return e.button===0&&(!t||t==="_self")&&!HP(e)}function j1(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function GP(e,t){let n=j1(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var cf=null;function KP(){if(cf===null)try{new FormData(document.createElement("form"),0),cf=!1}catch{cf=!0}return cf}var JP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function I0(e){return e!=null&&!JP.has(e)?(ys(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yf}"`),null):e}function YP(e,t){let n,r,i,s,o;if(qP(e)){let a=e.getAttribute("action");r=a?wo(a,t):null,n=e.getAttribute("method")||Jf,i=I0(e.getAttribute("enctype"))||Yf,s=new FormData(e)}else if(zP(e)||VP(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?wo(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Jf,i=I0(e.getAttribute("formenctype"))||I0(a.getAttribute("enctype"))||Yf,s=new FormData(a,e),!KP()){let{name:c,type:d,value:p}=e;if(d==="image"){let g=c?`${c}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else c&&s.append(c,p)}}else{if(gm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jf,r=null,i=Yf,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ZP(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&wo(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function XP(e,t){if(e.id in t)return t[e.id];try{let n=await ed(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QP(e){return e!=null&&typeof e.page=="string"}function eL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function tL(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await XP(s,n);return o.links?o.links():[]}return[]}));return sL(r.flat(1).filter(eL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function kw(e,t,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?t.filter((l,c)=>{var p;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let g=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function nL(e,t,{includeHydrateFallback:n}={}){return rL(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function rL(e){return[...new Set(e)]}function iL(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function sL(e,t){let n=new Set,r=new Set(t);return e.reduce((i,s)=>{if(t&&!QP(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(iL(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function w4(){let e=R.useContext(Kc);return wy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function oL(){let e=R.useContext(mm);return wy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var by=R.createContext(void 0);by.displayName="FrameworkContext";function b4(){let e=R.useContext(by);return wy(e,"You must render this element inside a <HydratedRouter> element"),e}function aL(e,t){let n=R.useContext(by),[r,i]=R.useState(!1),[s,o]=R.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:p}=t,g=R.useRef(null);R.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let S=v=>{v.forEach(x=>{o(x.isIntersecting)})},k=new IntersectionObserver(S,{threshold:.5});return g.current&&k.observe(g.current),()=>{k.disconnect()}}},[e]),R.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let f=()=>{i(!0)},w=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,g,{}]:[s,g,{onFocus:Fu(a,f),onBlur:Fu(l,w),onMouseEnter:Fu(c,f),onMouseLeave:Fu(d,w),onTouchStart:Fu(p,f)}]:[!1,g,{}]}function Fu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function lL({page:e,...t}){let{router:n}=w4(),r=R.useMemo(()=>l4(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?R.createElement(uL,{page:e,matches:r,...t}):null}function cL(e){let{manifest:t,routeModules:n}=b4(),[r,i]=R.useState([]);return R.useEffect(()=>{let s=!1;return tL(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function uL({page:e,matches:t,...n}){let r=xa(),{manifest:i,routeModules:s}=b4(),{basename:o}=w4(),{loaderData:a,matches:l}=oL(),c=R.useMemo(()=>kw(e,t,l,i,r,"data"),[e,t,l,i,r]),d=R.useMemo(()=>kw(e,t,l,i,r,"assets"),[e,t,l,i,r]),p=R.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(t.forEach(v=>{var _;let x=i.routes[v.route.id];!x||!x.hasLoader||(!c.some(N=>N.route.id===v.route.id)&&v.route.id in a&&((_=s[v.route.id])!=null&&_.shouldRevalidate)||x.hasClientLoader?S=!0:w.add(v.route.id))}),w.size===0)return[];let k=ZP(e,o,"data");return S&&w.size>0&&k.searchParams.set("_routes",t.filter(v=>w.has(v.route.id)).map(v=>v.route.id).join(",")),[k.pathname+k.search]},[o,a,r,i,c,t,e,s]),g=R.useMemo(()=>nL(d,i),[d,i]),f=cL(d);return R.createElement(R.Fragment,null,p.map(w=>R.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),g.map(w=>R.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),f.map(({key:w,link:S})=>R.createElement("link",{key:w,nonce:n.nonce,...S})))}function dL(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var x4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x4&&(window.__reactRouterVersion="7.9.5")}catch{}function hL({basename:e,children:t,window:n}){let r=R.useRef();r.current==null&&(r.current=X6({window:n,v5Compat:!0}));let i=r.current,[s,o]=R.useState({action:i.action,location:i.location}),a=R.useCallback(l=>{R.startTransition(()=>o(l))},[o]);return R.useLayoutEffect(()=>i.listen(a),[i,a]),R.createElement(UP,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var _4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S4=R.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:p,...g},f){let{basename:w}=R.useContext($s),S=typeof c=="string"&&_4.test(c),k,v=!1;if(typeof c=="string"&&S&&(k=c,x4))try{let M=new URL(window.location.href),G=c.startsWith("//")?new URL(M.protocol+c):new URL(c),P=wo(G.pathname,w);G.origin===M.origin&&P!=null?c=P+G.search+G.hash:v=!0}catch{ys(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=jP(c,{relative:i}),[_,N,O]=aL(r,g),U=gL(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:p});function q(M){t&&t(M),M.defaultPrevented||U(M)}let F=R.createElement("a",{...g,...O,href:k||x,onClick:v||s?t:q,ref:dL(f,N),target:l,"data-discover":!S&&n==="render"?"true":void 0});return _&&!S?R.createElement(R.Fragment,null,F,R.createElement(lL,{page:x})):F});S4.displayName="Link";var fL=R.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},d){let p=lh(o,{relative:c.relative}),g=xa(),f=R.useContext(mm),{navigator:w,basename:S}=R.useContext($s),k=f!=null&&_L(p)&&a===!0,v=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,x=g.pathname,_=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(x=x.toLowerCase(),_=_?_.toLowerCase():null,v=v.toLowerCase()),_&&S&&(_=wo(_,S)||_);const N=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=x===v||!i&&x.startsWith(v)&&x.charAt(N)==="/",U=_!=null&&(_===v||!i&&_.startsWith(v)&&_.charAt(v.length)==="/"),q={isActive:O,isPending:U,isTransitioning:k},F=O?t:void 0,M;typeof r=="function"?M=r(q):M=[r,O?"active":null,U?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let G=typeof s=="function"?s(q):s;return R.createElement(S4,{...c,"aria-current":F,className:M,ref:d,style:G,to:o,viewTransition:a},typeof l=="function"?l(q):l)});fL.displayName="NavLink";var pL=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Jf,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:p,...g},f)=>{let w=bL(),S=xL(a,{relative:c}),k=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&_4.test(a),x=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let N=_.nativeEvent.submitter,O=(N==null?void 0:N.getAttribute("formmethod"))||o;w(N||_.currentTarget,{fetcherKey:t,method:O,navigate:n,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:p})};return R.createElement("form",{ref:f,method:k,action:S,onSubmit:r?l:x,...g,"data-discover":!v&&e==="render"?"true":void 0})});pL.displayName="Form";function mL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k4(e){let t=R.useContext(Kc);return Sn(t,mL(e)),t}function gL(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=gy(),l=xa(),c=lh(e,{relative:s});return R.useCallback(d=>{if(WP(d,t)){d.preventDefault();let p=n!==void 0?n:Md(l)===Md(c);a(e,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,t,e,i,s,o])}function vL(e){ys(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=R.useRef(j1(e)),n=R.useRef(!1),r=xa(),i=R.useMemo(()=>GP(r.search,n.current?null:t.current),[r.search]),s=gy(),o=R.useCallback((a,l)=>{const c=j1(typeof a=="function"?a(new URLSearchParams(i)):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var yL=0,wL=()=>`__${String(++yL)}__`;function bL(){let{router:e}=k4("useSubmit"),{basename:t}=R.useContext($s),n=FP();return R.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=YP(r,t);if(i.navigate===!1){let d=i.fetcherKey||wL();await e.fetch(d,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function xL(e,{relative:t}={}){let{basename:n}=R.useContext($s),r=R.useContext(_o);Sn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...lh(e||".",{relative:t})},o=xa();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let d=a.toString();s.search=d?`?${d}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ho([n,s.pathname])),Md(s)}function _L(e,{relative:t}={}){let n=R.useContext(p4);Sn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=k4("useViewTransitionState"),i=lh(e,{relative:t});if(!n.isTransitioning)return!1;let s=wo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=wo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rp(i.pathname,o)!=null||Rp(i.pathname,s)!=null}const xy=R.createContext({});function _y(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const vm=R.createContext(null),Sy=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class SL extends R.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function kL({children:e,isPresent:t}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=R.useContext(Sy);return R.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(t||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),u.jsx(SL,{isPresent:t,childRef:r,sizeRef:i,children:R.cloneElement(e,{ref:r})})}const jL=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=_y(NL),l=R.useId(),c=R.useCallback(p=>{a.set(p,!0);for(const g of a.values())if(!g)return;r&&r()},[a,r]),d=R.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c,register:p=>(a.set(p,!1),()=>a.delete(p))}),s?[Math.random(),c]:[n,c]);return R.useMemo(()=>{a.forEach((p,g)=>a.set(g,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=u.jsx(kL,{isPresent:n,children:e})),u.jsx(vm.Provider,{value:d,children:e})};function NL(){return new Map}function j4(e=!0){const t=R.useContext(vm);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=R.useId();R.useEffect(()=>{e&&i(s)},[e]);const o=R.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const uf=e=>e.key||"";function jw(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const ky=typeof window<"u",N4=ky?R.useLayoutEffect:R.useEffect,Hi=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=j4(o),c=R.useMemo(()=>jw(e),[e]),d=o&&!a?[]:c.map(uf),p=R.useRef(!0),g=R.useRef(c),f=_y(()=>new Map),[w,S]=R.useState(c),[k,v]=R.useState(c);N4(()=>{p.current=!1,g.current=c;for(let N=0;N<k.length;N++){const O=uf(k[N]);d.includes(O)?f.delete(O):f.get(O)!==!0&&f.set(O,!1)}},[k,d.length,d.join("-")]);const x=[];if(c!==w){let N=[...c];for(let O=0;O<k.length;O++){const U=k[O],q=uf(U);d.includes(q)||(N.splice(O,0,U),x.push(U))}s==="wait"&&x.length&&(N=x),v(jw(N)),S(c);return}const{forceRender:_}=R.useContext(xy);return u.jsx(u.Fragment,{children:k.map(N=>{const O=uf(N),U=o&&!a?!1:c===k||d.includes(O),q=()=>{if(f.has(O))f.set(O,!0);else return;let F=!0;f.forEach(M=>{M||(F=!1)}),F&&(_==null||_(),v(g.current),o&&(l==null||l()),r&&r())};return u.jsx(jL,{isPresent:U,initial:!p.current||n?void 0:!1,custom:U?void 0:t,presenceAffectsLayout:i,mode:s,onExitComplete:U?void 0:q,children:N},O)})})},Ei=e=>e;let A4=Ei;function jy(e){let t;return()=>(t===void 0&&(t=e()),t)}const Fc=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},fo=e=>e*1e3,po=e=>e/1e3,AL={skipAnimations:!1,useManualTiming:!1};function EL(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),e()),c(o)}const l={schedule:(c,d=!1,p=!1)=>{const f=p&&r?t:n;return d&&s.add(c),f.has(c)||f.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(a),t.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const df=["read","resolveKeyframes","update","preRender","render","postRender"],CL=40;function E4(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=df.reduce((v,x)=>(v[x]=EL(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:p,postRender:g}=o,f=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,CL),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),d.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(f))},w=()=>{n=!0,r=!0,i.isProcessing||e(f)};return{schedule:df.reduce((v,x)=>{const _=o[x];return v[x]=(N,O=!1,U=!1)=>(n||w(),_.schedule(N,O,U)),v},{}),cancel:v=>{for(let x=0;x<df.length;x++)o[df[x]].cancel(v)},state:i,steps:o}}const{schedule:pn,cancel:ma,state:gr,steps:O0}=E4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ei,!0),C4=R.createContext({strict:!1}),Nw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Dc={};for(const e in Nw)Dc[e]={isEnabled:t=>Nw[e].some(n=>!!t[n])};function PL(e){for(const t in e)Dc[t]={...Dc[t],...e[t]}}const LL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ip(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||LL.has(e)}let P4=e=>!Ip(e);function TL(e){e&&(P4=t=>t.startsWith("on")?!Ip(t):e(t))}try{TL(require("@emotion/is-prop-valid").default)}catch{}function RL(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(P4(i)||n===!0&&Ip(i)||!t&&!Ip(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function IL(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const ym=R.createContext({});function Bd(e){return typeof e=="string"||Array.isArray(e)}function wm(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Ny=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ay=["initial",...Ny];function bm(e){return wm(e.animate)||Ay.some(t=>Bd(e[t]))}function L4(e){return!!(bm(e)||e.variants)}function OL(e,t){if(bm(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Bd(n)?n:void 0,animate:Bd(r)?r:void 0}}return e.inherit!==!1?t:{}}function FL(e){const{initial:t,animate:n}=OL(e,R.useContext(ym));return R.useMemo(()=>({initial:t,animate:n}),[Aw(t),Aw(n)])}function Aw(e){return Array.isArray(e)?e.join(" "):e}const DL=Symbol.for("motionComponentSymbol");function uc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ML(e,t,n){return R.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):uc(n)&&(n.current=r))},[t])}const Ey=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BL="framerAppearId",T4="data-"+Ey(BL),{schedule:Cy,cancel:m$}=E4(queueMicrotask,!1),R4=R.createContext({});function UL(e,t,n,r,i){var s,o;const{visualElement:a}=R.useContext(ym),l=R.useContext(C4),c=R.useContext(vm),d=R.useContext(Sy).reducedMotion,p=R.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(e,{visualState:t,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=p.current,f=R.useContext(R4);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&$L(p.current,n,i,f);const w=R.useRef(!1);R.useInsertionEffect(()=>{g&&w.current&&g.update(n,c)});const S=n[T4],k=R.useRef(!!S&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,S))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,S)));return N4(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Cy.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),R.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,S)}),k.current=!1))}),g}function $L(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:I4(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&uc(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function I4(e){if(e)return e.options.allowProjection!==!1?e.projection:I4(e.parent)}function zL({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var s,o;e&&PL(e);function a(c,d){let p;const g={...R.useContext(Sy),...c,layoutId:qL(c)},{isStatic:f}=g,w=FL(c),S=r(c,f);if(!f&&ky){VL();const k=HL(g);p=k.MeasureLayout,w.visualElement=UL(i,S,g,t,k.ProjectionNode)}return u.jsxs(ym.Provider,{value:w,children:[p&&w.visualElement?u.jsx(p,{visualElement:w.visualElement,...g}):null,n(i,c,ML(S,w.visualElement,d),S,f,w.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=R.forwardRef(a);return l[DL]=i,l}function qL({layoutId:e}){const t=R.useContext(xy).id;return t&&e!==void 0?t+"-"+e:e}function VL(e,t){R.useContext(C4).strict}function HL(e){const{drag:t,layout:n}=Dc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const WL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Py(e){return typeof e!="string"||e.includes("-")?!1:!!(WL.indexOf(e)>-1||/[A-Z]/u.test(e))}function Ew(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Ly(e,t,n,r){if(typeof t=="function"){const[i,s]=Ew(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=Ew(r);t=t(n!==void 0?n:e.custom,i,s)}return t}const N1=e=>Array.isArray(e),GL=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),KL=e=>N1(e)?e[e.length-1]||0:e,Lr=e=>!!(e&&e.getVelocity);function Zf(e){const t=Lr(e)?e.get():e;return GL(t)?t.toValue():t}function JL({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){const o={latestValues:YL(r,i,s,e),renderState:t()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const O4=e=>(t,n)=>{const r=R.useContext(ym),i=R.useContext(vm),s=()=>JL(e,t,r,i);return n?s():_y(s)};function YL(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=Zf(s[g]);let{initial:o,animate:a}=e;const l=bm(e),c=L4(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const p=d?a:o;if(p&&typeof p!="boolean"&&!wm(p)){const g=Array.isArray(p)?p:[p];for(let f=0;f<g.length;f++){const w=Ly(e,g[f]);if(w){const{transitionEnd:S,transition:k,...v}=w;for(const x in v){let _=v[x];if(Array.isArray(_)){const N=d?_.length-1:0;_=_[N]}_!==null&&(i[x]=_)}for(const x in S)i[x]=S[x]}}}return i}const Jc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kl=new Set(Jc),F4=e=>t=>typeof t=="string"&&t.startsWith(e),D4=F4("--"),ZL=F4("var(--"),Ty=e=>ZL(e)?XL.test(e.split("/*")[0].trim()):!1,XL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,M4=(e,t)=>t&&typeof e=="number"?t.transform(e):e,bo=(e,t,n)=>n>t?t:n<e?e:n,Yc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ud={...Yc,transform:e=>bo(0,1,e)},hf={...Yc,default:1},ch=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ho=ch("deg"),Ds=ch("%"),ct=ch("px"),QL=ch("vh"),e8=ch("vw"),Cw={...Ds,parse:e=>Ds.parse(e)/100,transform:e=>Ds.transform(e*100)},t8={borderWidth:ct,borderTopWidth:ct,borderRightWidth:ct,borderBottomWidth:ct,borderLeftWidth:ct,borderRadius:ct,radius:ct,borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomRightRadius:ct,borderBottomLeftRadius:ct,width:ct,maxWidth:ct,height:ct,maxHeight:ct,top:ct,right:ct,bottom:ct,left:ct,padding:ct,paddingTop:ct,paddingRight:ct,paddingBottom:ct,paddingLeft:ct,margin:ct,marginTop:ct,marginRight:ct,marginBottom:ct,marginLeft:ct,backgroundPositionX:ct,backgroundPositionY:ct},n8={rotate:Ho,rotateX:Ho,rotateY:Ho,rotateZ:Ho,scale:hf,scaleX:hf,scaleY:hf,scaleZ:hf,skew:Ho,skewX:Ho,skewY:Ho,distance:ct,translateX:ct,translateY:ct,translateZ:ct,x:ct,y:ct,z:ct,perspective:ct,transformPerspective:ct,opacity:Ud,originX:Cw,originY:Cw,originZ:ct},Pw={...Yc,transform:Math.round},Ry={...t8,...n8,zIndex:Pw,size:ct,fillOpacity:Ud,strokeOpacity:Ud,numOctaves:Pw},r8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},i8=Jc.length;function s8(e,t,n){let r="",i=!0;for(let s=0;s<i8;s++){const o=Jc[s],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=M4(a,Ry[o]);if(!l){i=!1;const d=r8[o]||o;r+=`${d}(${c}) `}n&&(t[o]=c)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function Iy(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(kl.has(l)){o=!0;continue}else if(D4(l)){i[l]=c;continue}else{const d=M4(c,Ry[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(t.transform||(o||n?r.transform=s8(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const o8={offset:"stroke-dashoffset",array:"stroke-dasharray"},a8={offset:"strokeDashoffset",array:"strokeDasharray"};function l8(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?o8:a8;e[s.offset]=ct.transform(-r);const o=ct.transform(t),a=ct.transform(n);e[s.array]=`${o} ${a}`}function Lw(e,t,n){return typeof e=="string"?e:ct.transform(t+n*e)}function c8(e,t,n){const r=Lw(t,e.x,e.width),i=Lw(n,e.y,e.height);return`${r} ${i}`}function Oy(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,p){if(Iy(e,c,p),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:f,dimensions:w}=e;g.transform&&(w&&(f.transform=g.transform),delete g.transform),w&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=c8(w,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(g.x=t),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&l8(g,o,a,l,!1)}const Fy=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),B4=()=>({...Fy(),attrs:{}}),Dy=e=>typeof e=="string"&&e.toLowerCase()==="svg";function U4(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const $4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function z4(e,t,n,r){U4(e,t,void 0,r);for(const i in t.attrs)e.setAttribute($4.has(i)?i:Ey(i),t.attrs[i])}const Op={};function u8(e){Object.assign(Op,e)}function q4(e,{layout:t,layoutId:n}){return kl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Op[e]||e==="opacity")}function My(e,t,n){var r;const{style:i}=e,s={};for(const o in i)(Lr(i[o])||t.style&&Lr(t.style[o])||q4(o,e)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function V4(e,t,n){const r=My(e,t,n);for(const i in e)if(Lr(e[i])||Lr(t[i])){const s=Jc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}function d8(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Tw=["x","y","width","height","cx","cy","r"],h8={useVisualState:O4({scrapeMotionValuesFromProps:V4,createRenderState:B4,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!e.drag;if(!s){for(const a in i)if(kl.has(a)){s=!0;break}}if(!s)return;let o=!t;if(t)for(let a=0;a<Tw.length;a++){const l=Tw[a];e[l]!==t[l]&&(o=!0)}o&&pn.read(()=>{d8(n,r),pn.render(()=>{Oy(r,i,Dy(n.tagName),e.transformTemplate),z4(n,r)})})}})},f8={useVisualState:O4({scrapeMotionValuesFromProps:My,createRenderState:Fy})};function H4(e,t,n){for(const r in t)!Lr(t[r])&&!q4(r,n)&&(e[r]=t[r])}function p8({transformTemplate:e},t){return R.useMemo(()=>{const n=Fy();return Iy(n,t,e),Object.assign({},n.vars,n.style)},[t])}function m8(e,t){const n=e.style||{},r={};return H4(r,n,e),Object.assign(r,p8(e,t)),r}function g8(e,t){const n={},r=m8(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function v8(e,t,n,r){const i=R.useMemo(()=>{const s=B4();return Oy(s,t,Dy(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};H4(s,e.style,e),i.style={...s,...i.style}}return i}function y8(e=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Py(n)?v8:g8)(r,s,o,n),c=RL(r,typeof n=="string",e),d=n!==R.Fragment?{...c,...l,ref:i}:{},{children:p}=r,g=R.useMemo(()=>Lr(p)?p.get():p,[p]);return R.createElement(n,{...d,children:g})}}function w8(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Py(r)?h8:f8,preloadedFeatures:e,useRender:y8(i),createVisualElement:t,Component:r};return zL(o)}}function W4(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function xm(e,t,n){const r=e.getProps();return Ly(r,t,n!==void 0?n:r.custom,e)}const b8=jy(()=>window.ScrollTimeline!==void 0);class x8{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(b8()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class _8 extends x8{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function By(e,t){return e?e[t]||e.default||e:void 0}const A1=2e4;function G4(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<A1;)t+=n,r=e.next(t);return t>=A1?1/0:t}function Uy(e){return typeof e=="function"}function Rw(e,t){e.timeline=t,e.onfinish=null}const $y=e=>Array.isArray(e)&&typeof e[0]=="number",S8={linearEasing:void 0};function k8(e,t){const n=jy(e);return()=>{var r;return(r=S8[t])!==null&&r!==void 0?r:n()}}const Fp=k8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),K4=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(Fc(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function J4(e){return!!(typeof e=="function"&&Fp()||!e||typeof e=="string"&&(e in E1||Fp())||$y(e)||Array.isArray(e)&&e.every(J4))}const Ku=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,E1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ku([0,.65,.55,1]),circOut:Ku([.55,0,1,.45]),backIn:Ku([.31,.01,.66,-.59]),backOut:Ku([.33,1.53,.69,.99])};function Y4(e,t){if(e)return typeof e=="function"&&Fp()?K4(e,t):$y(e)?Ku(e):Array.isArray(e)?e.map(n=>Y4(n,t)||E1.easeOut):E1[e]}const cs={x:!1,y:!1};function Z4(){return cs.x||cs.y}function j8(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;t&&(i=t.current);const s=(r=n==null?void 0:n[e])!==null&&r!==void 0?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function X4(e,t){const n=j8(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function Iw(e){return t=>{t.pointerType==="touch"||Z4()||e(t)}}function N8(e,t,n={}){const[r,i,s]=X4(e,n),o=Iw(a=>{const{target:l}=a,c=t(a);if(typeof c!="function"||!l)return;const d=Iw(p=>{c(p),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Q4=(e,t)=>t?e===t?!0:Q4(e,t.parentElement):!1,zy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,A8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function E8(e){return A8.has(e.tagName)||e.tabIndex!==-1}const Ju=new WeakSet;function Ow(e){return t=>{t.key==="Enter"&&e(t)}}function F0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const C8=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Ow(()=>{if(Ju.has(n))return;F0(n,"down");const i=Ow(()=>{F0(n,"up")}),s=()=>F0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Fw(e){return zy(e)&&!Z4()}function P8(e,t,n={}){const[r,i,s]=X4(e,n),o=a=>{const l=a.currentTarget;if(!Fw(a)||Ju.has(l))return;Ju.add(l);const c=t(a),d=(f,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),!(!Fw(f)||!Ju.has(l))&&(Ju.delete(l),typeof c=="function"&&c(f,{success:w}))},p=f=>{d(f,n.useGlobalTarget||Q4(l,f.target))},g=f=>{d(f,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(a=>{!E8(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>C8(c,i),i)}),s}function L8(e){return e==="x"||e==="y"?cs[e]?null:(cs[e]=!0,()=>{cs[e]=!1}):cs.x||cs.y?null:(cs.x=cs.y=!0,()=>{cs.x=cs.y=!1})}const ek=new Set(["width","height","top","left","right","bottom",...Jc]);let Xf;function T8(){Xf=void 0}const Ms={now:()=>(Xf===void 0&&Ms.set(gr.isProcessing||AL.useManualTiming?gr.timestamp:performance.now()),Xf),set:e=>{Xf=e,queueMicrotask(T8)}};function qy(e,t){e.indexOf(t)===-1&&e.push(t)}function Vy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Hy{constructor(){this.subscriptions=[]}add(t){return qy(this.subscriptions,t),()=>Vy(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function tk(e,t){return t?e*(1e3/t):0}const Dw=30,R8=e=>!isNaN(parseFloat(e));class I8{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Ms.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ms.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=R8(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Hy);const r=this.events[t].add(n);return t==="change"?()=>{r(),pn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ms.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Dw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Dw);return tk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $d(e,t){return new I8(e,t)}function O8(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,$d(n))}function F8(e,t){const n=xm(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=KL(s[o]);O8(e,o,a)}}function D8(e){return!!(Lr(e)&&e.add)}function C1(e,t){const n=e.getValue("willChange");if(D8(n))return n.add(t)}function nk(e){return e.props[T4]}const rk=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,M8=1e-7,B8=12;function U8(e,t,n,r,i){let s,o,a=0;do o=t+(n-t)/2,s=rk(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>M8&&++a<B8);return o}function uh(e,t,n,r){if(e===t&&n===r)return Ei;const i=s=>U8(s,0,1,e,n);return s=>s===0||s===1?s:rk(i(s),t,r)}const ik=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,sk=e=>t=>1-e(1-t),ok=uh(.33,1.53,.69,.99),Wy=sk(ok),ak=ik(Wy),lk=e=>(e*=2)<1?.5*Wy(e):.5*(2-Math.pow(2,-10*(e-1))),Gy=e=>1-Math.sin(Math.acos(e)),ck=sk(Gy),uk=ik(Gy),dk=e=>/^0[^.\s]+$/u.test(e);function $8(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||dk(e):!0}const ud=e=>Math.round(e*1e5)/1e5,Ky=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function z8(e){return e==null}const q8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jy=(e,t)=>n=>!!(typeof n=="string"&&q8.test(n)&&n.startsWith(e)||t&&!z8(n)&&Object.prototype.hasOwnProperty.call(n,t)),hk=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Ky);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},V8=e=>bo(0,255,e),D0={...Yc,transform:e=>Math.round(V8(e))},sl={test:Jy("rgb","red"),parse:hk("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+D0.transform(e)+", "+D0.transform(t)+", "+D0.transform(n)+", "+ud(Ud.transform(r))+")"};function H8(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const P1={test:Jy("#"),parse:H8,transform:sl.transform},dc={test:Jy("hsl","hue"),parse:hk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ds.transform(ud(t))+", "+Ds.transform(ud(n))+", "+ud(Ud.transform(r))+")"},Cr={test:e=>sl.test(e)||P1.test(e)||dc.test(e),parse:e=>sl.test(e)?sl.parse(e):dc.test(e)?dc.parse(e):P1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?sl.transform(e):dc.transform(e)},W8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function G8(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Ky))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(W8))===null||n===void 0?void 0:n.length)||0)>0}const fk="number",pk="color",K8="var",J8="var(",Mw="${}",Y8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zd(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(Y8,l=>(Cr.test(l)?(r.color.push(s),i.push(pk),n.push(Cr.parse(l))):l.startsWith(J8)?(r.var.push(s),i.push(K8),n.push(l)):(r.number.push(s),i.push(fk),n.push(parseFloat(l))),++s,Mw)).split(Mw);return{values:n,split:a,indexes:r,types:i}}function mk(e){return zd(e).values}function gk(e){const{split:t,types:n}=zd(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const a=n[o];a===fk?s+=ud(i[o]):a===pk?s+=Cr.transform(i[o]):s+=i[o]}return s}}const Z8=e=>typeof e=="number"?0:e;function X8(e){const t=mk(e);return gk(e)(t.map(Z8))}const ga={test:G8,parse:mk,createTransformer:gk,getAnimatableNone:X8},Q8=new Set(["brightness","contrast","saturate","opacity"]);function eT(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ky)||[];if(!r)return e;const i=n.replace(r,"");let s=Q8.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const tT=/\b([a-z-]*)\(.*?\)/gu,L1={...ga,getAnimatableNone:e=>{const t=e.match(tT);return t?t.map(eT).join(" "):e}},nT={...Ry,color:Cr,backgroundColor:Cr,outlineColor:Cr,fill:Cr,stroke:Cr,borderColor:Cr,borderTopColor:Cr,borderRightColor:Cr,borderBottomColor:Cr,borderLeftColor:Cr,filter:L1,WebkitFilter:L1},Yy=e=>nT[e];function vk(e,t){let n=Yy(e);return n!==L1&&(n=ga),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const rT=new Set(["auto","none","0"]);function iT(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!rT.has(s)&&zd(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=vk(n,i)}const Bw=e=>e===Yc||e===ct,Uw=(e,t)=>parseFloat(e.split(", ")[t]),$w=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Uw(i[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?Uw(s[1],e):0}},sT=new Set(["x","y","z"]),oT=Jc.filter(e=>!sT.has(e));function aT(e){const t=[];return oT.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Mc={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:$w(4,13),y:$w(5,14)};Mc.translateX=Mc.x;Mc.translateY=Mc.y;const hl=new Set;let T1=!1,R1=!1;function yk(){if(R1){const e=Array.from(hl).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=aT(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}R1=!1,T1=!1,hl.forEach(e=>e.complete()),hl.clear()}function wk(){hl.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(R1=!0)})}function lT(){wk(),yk()}class Zy{constructor(t,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(hl.add(this),T1||(T1=!0,pn.read(wk),pn.resolveKeyframes(yk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),i&&o===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),hl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,hl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const bk=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),cT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uT(e){const t=cT.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function xk(e,t,n=1){const[r,i]=uT(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return bk(o)?parseFloat(o):o}return Ty(i)?xk(i,t,n+1):i}const _k=e=>t=>t.test(e),dT={test:e=>e==="auto",parse:e=>e},Sk=[Yc,ct,Ds,Ho,e8,QL,dT],zw=e=>Sk.find(_k(e));class kk extends Zy{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),Ty(c))){const d=xk(c,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!ek.has(r)||t.length!==2)return;const[i,s]=t,o=zw(i),a=zw(s);if(o!==a)if(Bw(o)&&Bw(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)$8(t[i])&&r.push(i);r.length&&iT(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Mc[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Mc[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const qw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ga.test(e)||e==="0")&&!e.startsWith("url("));function hT(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function fT(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=qw(i,t),a=qw(s,t);return!o||!a?!1:hT(e)||(n==="spring"||Uy(n))&&r}const pT=e=>e!==null;function _m(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(pT),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const mT=40;class jk{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ms.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>mT?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&lT(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Ms.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!fT(t,r,i,s))if(o)this.options.duration=0;else{l&&l(_m(t,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const xn=(e,t,n)=>e+(t-e)*n;function M0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function gT({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=M0(l,a,e+1/3),s=M0(l,a,e),o=M0(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Dp(e,t){return n=>n>0?t:e}const B0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},vT=[P1,sl,dc],yT=e=>vT.find(t=>t.test(e));function Vw(e){const t=yT(e);if(!t)return!1;let n=t.parse(e);return t===dc&&(n=gT(n)),n}const Hw=(e,t)=>{const n=Vw(e),r=Vw(t);if(!n||!r)return Dp(e,t);const i={...n};return s=>(i.red=B0(n.red,r.red,s),i.green=B0(n.green,r.green,s),i.blue=B0(n.blue,r.blue,s),i.alpha=xn(n.alpha,r.alpha,s),sl.transform(i))},wT=(e,t)=>n=>t(e(n)),dh=(...e)=>e.reduce(wT),I1=new Set(["none","hidden"]);function bT(e,t){return I1.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function xT(e,t){return n=>xn(e,t,n)}function Xy(e){return typeof e=="number"?xT:typeof e=="string"?Ty(e)?Dp:Cr.test(e)?Hw:kT:Array.isArray(e)?Nk:typeof e=="object"?Cr.test(e)?Hw:_T:Dp}function Nk(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>Xy(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function _T(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Xy(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function ST(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=e.indexes[o][i[o]],l=(n=e.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const kT=(e,t)=>{const n=ga.createTransformer(t),r=zd(e),i=zd(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?I1.has(e)&&!i.values.length||I1.has(t)&&!r.values.length?bT(e,t):dh(Nk(ST(r,i),i.values),n):Dp(e,t)};function Ak(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?xn(e,t,n):Xy(e)(e,t)}const jT=5;function Ek(e,t,n){const r=Math.max(t-jT,0);return tk(n-e(r),t-r)}const Pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},U0=.001;function NT({duration:e=Pn.duration,bounce:t=Pn.bounce,velocity:n=Pn.velocity,mass:r=Pn.mass}){let i,s,o=1-t;o=bo(Pn.minDamping,Pn.maxDamping,o),e=bo(Pn.minDuration,Pn.maxDuration,po(e)),o<1?(i=c=>{const d=c*o,p=d*e,g=d-n,f=O1(c,o),w=Math.exp(-p);return U0-g/f*w},s=c=>{const p=c*o*e,g=p*n+n,f=Math.pow(o,2)*Math.pow(c,2)*e,w=Math.exp(-p),S=O1(Math.pow(c,2),o);return(-i(c)+U0>0?-1:1)*((g-f)*w)/S}):(i=c=>{const d=Math.exp(-c*e),p=(c-n)*e+1;return-U0+d*p},s=c=>{const d=Math.exp(-c*e),p=(n-c)*(e*e);return d*p});const a=5/e,l=ET(i,s,a);if(e=fo(e),isNaN(l))return{stiffness:Pn.stiffness,damping:Pn.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:e}}}const AT=12;function ET(e,t,n){let r=n;for(let i=1;i<AT;i++)r=r-e(r)/t(r);return r}function O1(e,t){return e*Math.sqrt(1-t*t)}const CT=["duration","bounce"],PT=["stiffness","damping","mass"];function Ww(e,t){return t.some(n=>e[n]!==void 0)}function LT(e){let t={velocity:Pn.velocity,stiffness:Pn.stiffness,damping:Pn.damping,mass:Pn.mass,isResolvedFromDuration:!1,...e};if(!Ww(e,PT)&&Ww(e,CT))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*bo(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Pn.mass,stiffness:i,damping:s}}else{const n=NT(e);t={...t,...n,mass:Pn.mass},t.isResolvedFromDuration=!0}return t}function Ck(e=Pn.visualDuration,t=Pn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:p,velocity:g,isResolvedFromDuration:f}=LT({...n,velocity:-po(n.velocity||0)}),w=g||0,S=c/(2*Math.sqrt(l*d)),k=o-s,v=po(Math.sqrt(l/d)),x=Math.abs(k)<5;r||(r=x?Pn.restSpeed.granular:Pn.restSpeed.default),i||(i=x?Pn.restDelta.granular:Pn.restDelta.default);let _;if(S<1){const O=O1(v,S);_=U=>{const q=Math.exp(-S*v*U);return o-q*((w+S*v*k)/O*Math.sin(O*U)+k*Math.cos(O*U))}}else if(S===1)_=O=>o-Math.exp(-v*O)*(k+(w+v*k)*O);else{const O=v*Math.sqrt(S*S-1);_=U=>{const q=Math.exp(-S*v*U),F=Math.min(O*U,300);return o-q*((w+S*v*k)*Math.sinh(F)+O*k*Math.cosh(F))/O}}const N={calculatedDuration:f&&p||null,next:O=>{const U=_(O);if(f)a.done=O>=p;else{let q=0;S<1&&(q=O===0?fo(w):Ek(_,O,U));const F=Math.abs(q)<=r,M=Math.abs(o-U)<=i;a.done=F&&M}return a.value=a.done?o:U,a},toString:()=>{const O=Math.min(G4(N),A1),U=K4(q=>N.next(O*q).value,O,30);return O+"ms "+U}};return N}function Gw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const p=e[0],g={done:!1,value:p},f=F=>a!==void 0&&F<a||l!==void 0&&F>l,w=F=>a===void 0?l:l===void 0||Math.abs(a-F)<Math.abs(l-F)?a:l;let S=n*t;const k=p+S,v=o===void 0?k:o(k);v!==k&&(S=v-p);const x=F=>-S*Math.exp(-F/r),_=F=>v+x(F),N=F=>{const M=x(F),G=_(F);g.done=Math.abs(M)<=c,g.value=g.done?v:G};let O,U;const q=F=>{f(g.value)&&(O=F,U=Ck({keyframes:[g.value,w(g.value)],velocity:Ek(_,F,g.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return q(0),{calculatedDuration:null,next:F=>{let M=!1;return!U&&O===void 0&&(M=!0,N(F),q(F)),O!==void 0&&F>=O?U.next(F-O):(!M&&N(F),g)}}}const TT=uh(.42,0,1,1),RT=uh(0,0,.58,1),Pk=uh(.42,0,.58,1),IT=e=>Array.isArray(e)&&typeof e[0]!="number",OT={linear:Ei,easeIn:TT,easeInOut:Pk,easeOut:RT,circIn:Gy,circInOut:uk,circOut:ck,backIn:Wy,backInOut:ak,backOut:ok,anticipate:lk},Kw=e=>{if($y(e)){A4(e.length===4);const[t,n,r,i]=e;return uh(t,n,r,i)}else if(typeof e=="string")return OT[e];return e};function FT(e,t,n){const r=[],i=n||Ak,s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Ei:t;a=dh(l,a)}r.push(a)}return r}function DT(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(A4(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=FT(t,r,i),l=a.length,c=d=>{if(o&&d<e[0])return t[0];let p=0;if(l>1)for(;p<e.length-2&&!(d<e[p+1]);p++);const g=Fc(e[p],e[p+1],d);return a[p](g)};return n?d=>c(bo(e[0],e[s-1],d)):c}function MT(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Fc(0,t,r);e.push(xn(n,1,i))}}function BT(e){const t=[0];return MT(t,e.length-1),t}function UT(e,t){return e.map(n=>n*t)}function $T(e,t){return e.map(()=>t||Pk).splice(0,e.length-1)}function Mp({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=IT(r)?r.map(Kw):Kw(r),s={done:!1,value:t[0]},o=UT(n&&n.length===t.length?n:BT(t),e),a=DT(o,t,{ease:Array.isArray(i)?i:$T(t,i)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const zT=e=>{const t=({timestamp:n})=>e(n);return{start:()=>pn.update(t,!0),stop:()=>ma(t),now:()=>gr.isProcessing?gr.timestamp:Ms.now()}},qT={decay:Gw,inertia:Gw,tween:Mp,keyframes:Mp,spring:Ck},VT=e=>e/100;class Qy extends jk{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Zy,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Uy(n)?n:qT[n]||Mp;let l,c;a!==Mp&&typeof t[0]!="number"&&(l=dh(VT,Ak(t[0],t[1])),t=[0,100]);const d=a({...this.options,keyframes:t});s==="mirror"&&(c=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=G4(d));const{calculatedDuration:p}=d,g=p+i,f=g*(r+1)-i;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:g,totalDuration:f}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:p}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:f,repeatType:w,repeatDelay:S,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-g*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>d;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let _=this.currentTime,N=s;if(f){const F=Math.min(this.currentTime,d)/p;let M=Math.floor(F),G=F%1;!G&&F>=1&&(G=1),G===1&&M--,M=Math.min(M,f+1),!!(M%2)&&(w==="reverse"?(G=1-G,S&&(G-=S/p)):w==="mirror"&&(N=o)),_=bo(0,1,G)*p}const O=x?{done:!1,value:l[0]}:N.next(_);a&&(O.value=a(O.value));let{done:U}=O;!x&&c!==null&&(U=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return q&&i!==void 0&&(O.value=_m(l,this.options,i)),k&&k(O.value),q&&this.finish(),O}get duration(){const{resolved:t}=this;return t?po(t.calculatedDuration):0}get time(){return po(this.currentTime)}set time(t){t=fo(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=po(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=zT,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const HT=new Set(["opacity","clipPath","filter","transform"]);function WT(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const d=Y4(a,i);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const GT=jy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Bp=10,KT=2e4;function JT(e){return Uy(e.type)||e.type==="spring"||!J4(e.ease)}function YT(e,t){const n=new Qy({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<KT;)r=n.sample(s),i.push(r.value),s+=Bp;return{times:void 0,keyframes:i,duration:s-Bp,ease:"linear"}}const Lk={anticipate:lk,backInOut:ak,circInOut:uk};function ZT(e){return e in Lk}class Jw extends jk{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new kk(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Fp()&&ZT(s)&&(s=Lk[s]),JT(this.options)){const{onComplete:p,onUpdate:g,motionValue:f,element:w,...S}=this.options,k=YT(t,S);t=k.keyframes,t.length===1&&(t[1]=t[0]),r=k.duration,i=k.times,s=k.ease,o="keyframes"}const d=WT(a.owner.current,l,t,{...this.options,duration:r,times:i,ease:s});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(Rw(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:p}=this.options;a.set(_m(t,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:o,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return po(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return po(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=fo(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Ei;const{animation:r}=n;Rw(r,t)}return Ei}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:p,element:g,...f}=this.options,w=new Qy({...f,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),S=fo(this.time);c.setWithVelocity(w.sample(S-Bp).value,w.sample(S).value,Bp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return GT()&&r&&HT.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const XT={type:"spring",stiffness:500,damping:25,restSpeed:10},QT=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),eR={type:"keyframes",duration:.8},tR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nR=(e,{keyframes:t})=>t.length>2?eR:kl.has(e)?e.startsWith("scale")?QT(t[1]):XT:tR;function rR({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const e2=(e,t,n,r={},i,s)=>o=>{const a=By(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-fo(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:g=>{t.set(g),a.onUpdate&&a.onUpdate(g)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};rR(a)||(d={...d,...nR(e,d)}),d.duration&&(d.duration=fo(d.duration)),d.repeatDelay&&(d.repeatDelay=fo(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!s&&t.get()!==void 0){const g=_m(d.keyframes,a);if(g!==void 0)return pn.update(()=>{d.onUpdate(g),d.onComplete()}),new _8([])}return!s&&Jw.supports(d)?new Jw(d):new Qy(d)};function iR({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Tk(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(o=r);const c=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const p in l){const g=e.getValue(p,(s=e.latestValues[p])!==null&&s!==void 0?s:null),f=l[p];if(f===void 0||d&&iR(d,p))continue;const w={delay:n,...By(o||{},p)};let S=!1;if(window.MotionHandoffAnimation){const v=nk(e);if(v){const x=window.MotionHandoffAnimation(v,p,pn);x!==null&&(w.startTime=x,S=!0)}}C1(e,p),g.start(e2(p,g,f,e.shouldReduceMotion&&ek.has(p)?{type:!1}:w,e,S));const k=g.animation;k&&c.push(k)}return a&&Promise.all(c).then(()=>{pn.update(()=>{a&&F8(e,a)})}),c}function F1(e,t,n={}){var r;const i=xm(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(Tk(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:g}=s;return sR(e,t,d+c,p,g,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function sR(e,t,n=0,r=0,i=1,s){const o=[],a=(e.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(e.variantChildren).sort(oR).forEach((c,d)=>{c.notify("AnimationStart",t),o.push(F1(c,t,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function oR(e,t){return e.sortNodePosition(t)}function aR(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>F1(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=F1(e,t,n);else{const i=typeof t=="function"?xm(e,t,n.custom):t;r=Promise.all(Tk(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const lR=Ay.length;function Rk(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Rk(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<lR;n++){const r=Ay[n],i=e.props[r];(Bd(i)||i===!1)&&(t[r]=i)}return t}const cR=[...Ny].reverse(),uR=Ny.length;function dR(e){return t=>Promise.all(t.map(({animation:n,options:r})=>aR(e,n,r)))}function hR(e){let t=dR(e),n=Yw(),r=!0;const i=l=>(c,d)=>{var p;const g=xm(e,d,l==="exit"?(p=e.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(g){const{transition:f,transitionEnd:w,...S}=g;c={...c,...S,...w}}return c};function s(l){t=l(e)}function o(l){const{props:c}=e,d=Rk(e.parent)||{},p=[],g=new Set;let f={},w=1/0;for(let k=0;k<uR;k++){const v=cR[k],x=n[v],_=c[v]!==void 0?c[v]:d[v],N=Bd(_),O=v===l?x.isActive:null;O===!1&&(w=k);let U=_===d[v]&&_!==c[v]&&N;if(U&&r&&e.manuallyAnimateOnMount&&(U=!1),x.protectedKeys={...f},!x.isActive&&O===null||!_&&!x.prevProp||wm(_)||typeof _=="boolean")continue;const q=fR(x.prevProp,_);let F=q||v===l&&x.isActive&&!U&&N||k>w&&N,M=!1;const G=Array.isArray(_)?_:[_];let P=G.reduce(i(v),{});O===!1&&(P={});const{prevResolvedValues:L={}}=x,Y={...L,...P},V=ce=>{F=!0,g.has(ce)&&(M=!0,g.delete(ce)),x.needsAnimating[ce]=!0;const J=e.getValue(ce);J&&(J.liveStyle=!1)};for(const ce in Y){const J=P[ce],ie=L[ce];if(f.hasOwnProperty(ce))continue;let te=!1;N1(J)&&N1(ie)?te=!W4(J,ie):te=J!==ie,te?J!=null?V(ce):g.add(ce):J!==void 0&&g.has(ce)?V(ce):x.protectedKeys[ce]=!0}x.prevProp=_,x.prevResolvedValues=P,x.isActive&&(f={...f,...P}),r&&e.blockInitialAnimation&&(F=!1),F&&(!(U&&q)||M)&&p.push(...G.map(ce=>({animation:ce,options:{type:v}})))}if(g.size){const k={};g.forEach(v=>{const x=e.getBaseTarget(v),_=e.getValue(v);_&&(_.liveStyle=!0),k[v]=x??null}),p.push({animation:k})}let S=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(g=>{var f;return(f=g.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const p=o(l);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Yw(),r=!0}}}function fR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!W4(t,e):!1}function qa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yw(){return{animate:qa(!0),whileInView:qa(),whileHover:qa(),whileTap:qa(),whileDrag:qa(),whileFocus:qa(),exit:qa()}}class _a{constructor(t){this.isMounted=!1,this.node=t}update(){}}class pR extends _a{constructor(t){super(t),t.animationState||(t.animationState=hR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();wm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let mR=0;class gR extends _a{constructor(){super(...arguments),this.id=mR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const vR={animation:{Feature:pR},exit:{Feature:gR}};function qd(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function hh(e){return{point:{x:e.pageX,y:e.pageY}}}const yR=e=>t=>zy(t)&&e(t,hh(t));function dd(e,t,n,r){return qd(e,t,yR(n),r)}const Zw=(e,t)=>Math.abs(e-t);function wR(e,t){const n=Zw(e.x,t.x),r=Zw(e.y,t.y);return Math.sqrt(n**2+r**2)}class Ik{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=z0(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,f=wR(p.offset,{x:0,y:0})>=3;if(!g&&!f)return;const{point:w}=p,{timestamp:S}=gr;this.history.push({...w,timestamp:S});const{onStart:k,onMove:v}=this.handlers;g||(k&&k(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=$0(g,this.transformPagePoint),pn.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:f,onSessionEnd:w,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=z0(p.type==="pointercancel"?this.lastMoveEventInfo:$0(g,this.transformPagePoint),this.history);this.startEvent&&f&&f(p,k),w&&w(p,k)},!zy(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=hh(t),a=$0(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=gr;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,z0(a,this.history)),this.removeListeners=dh(dd(this.contextWindow,"pointermove",this.handlePointerMove),dd(this.contextWindow,"pointerup",this.handlePointerUp),dd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ma(this.updatePoint)}}function $0(e,t){return t?{point:t(e.point)}:e}function Xw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function z0({point:e},t){return{point:e,delta:Xw(e,Ok(t)),offset:Xw(e,bR(t)),velocity:xR(t,.1)}}function bR(e){return e[0]}function Ok(e){return e[e.length-1]}function xR(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Ok(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>fo(t)));)n--;if(!r)return{x:0,y:0};const s=po(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Fk=1e-4,_R=1-Fk,SR=1+Fk,Dk=.01,kR=0-Dk,jR=0+Dk;function Pi(e){return e.max-e.min}function NR(e,t,n){return Math.abs(e-t)<=n}function Qw(e,t,n,r=.5){e.origin=r,e.originPoint=xn(t.min,t.max,e.origin),e.scale=Pi(n)/Pi(t),e.translate=xn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=_R&&e.scale<=SR||isNaN(e.scale))&&(e.scale=1),(e.translate>=kR&&e.translate<=jR||isNaN(e.translate))&&(e.translate=0)}function hd(e,t,n,r){Qw(e.x,t.x,n.x,r?r.originX:void 0),Qw(e.y,t.y,n.y,r?r.originY:void 0)}function eb(e,t,n){e.min=n.min+t.min,e.max=e.min+Pi(t)}function AR(e,t,n){eb(e.x,t.x,n.x),eb(e.y,t.y,n.y)}function tb(e,t,n){e.min=t.min-n.min,e.max=e.min+Pi(t)}function fd(e,t,n){tb(e.x,t.x,n.x),tb(e.y,t.y,n.y)}function ER(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?xn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?xn(n,e,r.max):Math.min(e,n)),e}function nb(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function CR(e,{top:t,left:n,bottom:r,right:i}){return{x:nb(e.x,n,i),y:nb(e.y,t,r)}}function rb(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function PR(e,t){return{x:rb(e.x,t.x),y:rb(e.y,t.y)}}function LR(e,t){let n=.5;const r=Pi(e),i=Pi(t);return i>r?n=Fc(t.min,t.max-r,e.min):r>i&&(n=Fc(e.min,e.max-i,t.min)),bo(0,1,n)}function TR(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const D1=.35;function RR(e=D1){return e===!1?e=0:e===!0&&(e=D1),{x:ib(e,"left","right"),y:ib(e,"top","bottom")}}function ib(e,t,n){return{min:sb(e,t),max:sb(e,n)}}function sb(e,t){return typeof e=="number"?e:e[t]||0}const ob=()=>({translate:0,scale:1,origin:0,originPoint:0}),hc=()=>({x:ob(),y:ob()}),ab=()=>({min:0,max:0}),Dn=()=>({x:ab(),y:ab()});function Ui(e){return[e("x"),e("y")]}function Mk({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function IR({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function OR(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function q0(e){return e===void 0||e===1}function M1({scale:e,scaleX:t,scaleY:n}){return!q0(e)||!q0(t)||!q0(n)}function Ja(e){return M1(e)||Bk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Bk(e){return lb(e.x)||lb(e.y)}function lb(e){return e&&e!=="0%"}function Up(e,t,n){const r=e-n,i=t*r;return n+i}function cb(e,t,n,r,i){return i!==void 0&&(e=Up(e,i,r)),Up(e,n,r)+t}function B1(e,t=0,n=1,r,i){e.min=cb(e.min,t,n,r,i),e.max=cb(e.max,t,n,r,i)}function Uk(e,{x:t,y:n}){B1(e.x,t.translate,t.scale,t.originPoint),B1(e.y,n.translate,n.scale,n.originPoint)}const ub=.999999999999,db=1.0000000000001;function FR(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&pc(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Uk(e,o)),r&&Ja(s.latestValues)&&pc(e,s.latestValues))}t.x<db&&t.x>ub&&(t.x=1),t.y<db&&t.y>ub&&(t.y=1)}function fc(e,t){e.min=e.min+t,e.max=e.max+t}function hb(e,t,n,r,i=.5){const s=xn(e.min,e.max,i);B1(e,t,n,s,r)}function pc(e,t){hb(e.x,t.x,t.scaleX,t.scale,t.originX),hb(e.y,t.y,t.scaleY,t.scale,t.originY)}function $k(e,t){return Mk(OR(e.getBoundingClientRect(),t))}function DR(e,t,n){const r=$k(e,n),{scroll:i}=t;return i&&(fc(r.x,i.offset.x),fc(r.y,i.offset.y)),r}const zk=({current:e})=>e?e.ownerDocument.defaultView:null,MR=new WeakMap;class BR{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hh(d).point)},s=(d,p)=>{const{drag:g,dragPropagation:f,onDragStart:w}=this.getProps();if(g&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=L8(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ui(k=>{let v=this.getAxisMotionValue(k).get()||0;if(Ds.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const _=x.layout.layoutBox[k];_&&(v=Pi(_)*(parseFloat(v)/100))}}this.originPoint[k]=v}),w&&pn.postRender(()=>w(d,p)),C1(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(d,p)=>{const{dragPropagation:g,dragDirectionLock:f,onDirectionLock:w,onDrag:S}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:k}=p;if(f&&this.currentDirection===null){this.currentDirection=UR(k),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",p.point,k),this.updateAxis("y",p.point,k),this.visualElement.render(),S&&S(d,p)},a=(d,p)=>this.stop(d,p),l=()=>Ui(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Ik(t,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:zk(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&pn.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!ff(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=ER(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&uc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CR(i.layoutBox,n):this.constraints=!1,this.elastic=RR(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ui(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=TR(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!uc(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=DR(r,i.root,this.visualElement.getTransformPagePoint());let o=PR(i.layout.layoutBox,s);if(n){const a=n(IR(o));this.hasMutatedConstraints=!!a,a&&(o=Mk(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ui(d=>{if(!ff(d,n,this.currentDirection))return;let p=l&&l[d]||{};o&&(p={min:0,max:0});const g=i?200:1e6,f=i?40:1e7,w={type:"inertia",velocity:r?t[d]:0,bounceStiffness:g,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(d,w)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return C1(this.visualElement,t),r.start(e2(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ui(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ui(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ui(n=>{const{drag:r}=this.getProps();if(!ff(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(t[n]-xn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!uc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ui(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=LR({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ui(o=>{if(!ff(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(xn(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;MR.set(this.visualElement,this);const t=this.visualElement.current,n=dd(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();uc(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),pn.read(r);const o=qd(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ui(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=l[d].translate,p.set(p.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=D1,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ff(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function UR(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class $R extends _a{constructor(t){super(t),this.removeGroupControls=Ei,this.removeListeners=Ei,this.controls=new BR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ei}unmount(){this.removeGroupControls(),this.removeListeners()}}const fb=e=>(t,n)=>{e&&pn.postRender(()=>e(t,n))};class zR extends _a{constructor(){super(...arguments),this.removePointerDownListener=Ei}onPointerDown(t){this.session=new Ik(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:fb(t),onStart:fb(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&pn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=dd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Qf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Du={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ct.test(e))e=parseFloat(e);else return e;const n=pb(e,t.target.x),r=pb(e,t.target.y);return`${n}% ${r}%`}},qR={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=ga.parse(e);if(i.length>5)return r;const s=ga.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const c=xn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class VR extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;u8(HR),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Qf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||pn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Cy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function qk(e){const[t,n]=j4(),r=R.useContext(xy);return u.jsx(VR,{...e,layoutGroup:r,switchLayoutGroup:R.useContext(R4),isPresent:t,safeToRemove:n})}const HR={borderRadius:{...Du,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Du,borderTopRightRadius:Du,borderBottomLeftRadius:Du,borderBottomRightRadius:Du,boxShadow:qR};function WR(e,t,n){const r=Lr(e)?e:$d(e);return r.start(e2("",r,t,n)),r.animation}function GR(e){return e instanceof SVGElement&&e.tagName!=="svg"}const KR=(e,t)=>e.depth-t.depth;class JR{constructor(){this.children=[],this.isDirty=!1}add(t){qy(this.children,t),this.isDirty=!0}remove(t){Vy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(KR),this.isDirty=!1,this.children.forEach(t)}}function YR(e,t){const n=Ms.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(ma(r),e(s-t))};return pn.read(r,!0),()=>ma(r)}const Vk=["TopLeft","TopRight","BottomLeft","BottomRight"],ZR=Vk.length,mb=e=>typeof e=="string"?parseFloat(e):e,gb=e=>typeof e=="number"||ct.test(e);function XR(e,t,n,r,i,s){i?(e.opacity=xn(0,n.opacity!==void 0?n.opacity:1,QR(r)),e.opacityExit=xn(t.opacity!==void 0?t.opacity:1,0,e7(r))):s&&(e.opacity=xn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<ZR;o++){const a=`border${Vk[o]}Radius`;let l=vb(t,a),c=vb(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||gb(l)===gb(c)?(e[a]=Math.max(xn(mb(l),mb(c),r),0),(Ds.test(c)||Ds.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=xn(t.rotate||0,n.rotate||0,r))}function vb(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const QR=Hk(0,.5,ck),e7=Hk(.5,.95,Ei);function Hk(e,t,n){return r=>r<e?0:r>t?1:n(Fc(e,t,r))}function yb(e,t){e.min=t.min,e.max=t.max}function Bi(e,t){yb(e.x,t.x),yb(e.y,t.y)}function wb(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function bb(e,t,n,r,i){return e-=t,e=Up(e,1/n,r),i!==void 0&&(e=Up(e,1/i,r)),e}function t7(e,t=0,n=1,r=.5,i,s=e,o=e){if(Ds.test(t)&&(t=parseFloat(t),t=xn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=xn(s.min,s.max,r);e===s&&(a-=t),e.min=bb(e.min,t,n,a,i),e.max=bb(e.max,t,n,a,i)}function xb(e,t,[n,r,i],s,o){t7(e,t[n],t[r],t[i],t.scale,s,o)}const n7=["x","scaleX","originX"],r7=["y","scaleY","originY"];function _b(e,t,n,r){xb(e.x,t,n7,n?n.x:void 0,r?r.x:void 0),xb(e.y,t,r7,n?n.y:void 0,r?r.y:void 0)}function Sb(e){return e.translate===0&&e.scale===1}function Wk(e){return Sb(e.x)&&Sb(e.y)}function kb(e,t){return e.min===t.min&&e.max===t.max}function i7(e,t){return kb(e.x,t.x)&&kb(e.y,t.y)}function jb(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Gk(e,t){return jb(e.x,t.x)&&jb(e.y,t.y)}function Nb(e){return Pi(e.x)/Pi(e.y)}function Ab(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class s7{constructor(){this.members=[]}add(t){qy(this.members,t),t.scheduleRender()}remove(t){if(Vy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o7(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:p,rotateY:g,skewX:f,skewY:w}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),f&&(r+=`skewX(${f}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Ya={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yu=typeof window<"u"&&window.MotionDebug!==void 0,V0=["","X","Y","Z"],a7={visibility:"hidden"},Eb=1e3;let l7=0;function H0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Kk(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=nk(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",pn,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Kk(r)}function Jk({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=l7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yu&&(Ya.totalNodes=Ya.resolvedTargetDeltas=Ya.recalculatedProjection=0),this.nodes.forEach(d7),this.nodes.forEach(g7),this.nodes.forEach(v7),this.nodes.forEach(h7),Yu&&window.MotionDebug.record(Ya)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new JR)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Hy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=GR(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),e){let p;const g=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=YR(g,250),Qf.hasAnimatedSinceResize&&(Qf.hasAnimatedSinceResize=!1,this.nodes.forEach(Pb))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeTargetChanged:f,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||d.getDefaultTransition()||_7,{onLayoutAnimationStart:k,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!Gk(this.targetLayout,w)||f,_=!g&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||g&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,_);const N={...By(S,"layout"),onPlay:k,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else g||Pb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ma(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(y7),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Kk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cb);return}this.isUpdating||this.nodes.forEach(p7),this.isUpdating=!1,this.nodes.forEach(m7),this.nodes.forEach(c7),this.nodes.forEach(u7),this.clearAllSnapshots();const a=Ms.now();gr.delta=bo(0,1e3/60,a-gr.timestamp),gr.timestamp=a,gr.isProcessing=!0,O0.update.process(gr),O0.preRender.process(gr),O0.render.process(gr),gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(f7),this.sharedNodes.forEach(w7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Wk(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Ja(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),S7(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Dn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(k7))){const{scroll:d}=this.root;d&&(fc(l.x,d.offset.x),fc(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=Dn();if(Bi(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:p,options:g}=d;d!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&Bi(l,o),fc(l.x,p.offset.x),fc(l.y,p.offset.y))}return l}applyTransform(o,a=!1){const l=Dn();Bi(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&pc(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ja(d.latestValues)&&pc(l,d.latestValues)}return Ja(this.latestValues)&&pc(l,this.latestValues),l}removeTransform(o){const a=Dn();Bi(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ja(c.latestValues))continue;M1(c.latestValues)&&c.updateSnapshot();const d=Dn(),p=c.measurePageBox();Bi(d,p),_b(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Ja(this.latestValues)&&_b(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=gr.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),fd(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dn(),this.targetWithTransforms=Dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bi(this.target,this.layout.layoutBox),Uk(this.target,this.targetDelta)):Bi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),fd(this.relativeTargetOrigin,this.target,f.target),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yu&&Ya.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||M1(this.parent.latestValues)||Bk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gr.timestamp&&(c=!1),c)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;Bi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,f=this.treeScale.y;FR(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Dn());const{target:w}=a;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wb(this.prevProjectionDelta.x,this.projectionDelta.x),wb(this.prevProjectionDelta.y,this.projectionDelta.y)),hd(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==f||!Ab(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ab(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Yu&&Ya.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hc(),this.projectionDelta=hc(),this.projectionDeltaWithTransform=hc()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},p=hc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const g=Dn(),f=l?l.source:void 0,w=this.layout?this.layout.source:void 0,S=f!==w,k=this.getStack(),v=!k||k.members.length<=1,x=!!(S&&!v&&this.options.crossfade===!0&&!this.path.some(x7));this.animationProgress=0;let _;this.mixTargetDelta=N=>{const O=N/1e3;Lb(p.x,o.x,O),Lb(p.y,o.y,O),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fd(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),b7(this.relativeTarget,this.relativeTargetOrigin,g,O),_&&i7(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Dn()),Bi(_,this.relativeTarget)),S&&(this.animationValues=d,XR(d,c,this.latestValues,O,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ma(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pn.update(()=>{Qf.hasAnimatedSinceResize=!0,this.currentAnimation=WR(0,Eb,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Eb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Yk(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Dn();const p=Pi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const g=Pi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+g}Bi(a,l),pc(a,d),hd(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new s7),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&H0("z",o,c,this.animationValues);for(let d=0;d<V0.length;d++)H0(`rotate${V0[d]}`,o,c,this.animationValues),H0(`skew${V0[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return a7;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Zf(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Zf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ja(this.latestValues)&&(S.transform=d?d({},""):"none",this.hasProjected=!1),S}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=o7(this.projectionDeltaWithTransform,this.treeScale,g),d&&(c.transform=d(g,c.transform));const{x:f,y:w}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${w.origin*100}% 0`,p.animationValues?c.opacity=p===this?(l=(a=g.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const S in Op){if(g[S]===void 0)continue;const{correct:k,applyTo:v}=Op[S],x=c.transform==="none"?g[S]:k(g[S],p);if(v){const _=v.length;for(let N=0;N<_;N++)c[v[N]]=x}else c[S]=x}return this.options.layoutId&&(c.pointerEvents=p===this?Zf(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Cb),this.root.sharedNodes.clear()}}}function c7(e){e.updateLayout()}function u7(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;s==="size"?Ui(p=>{const g=o?n.measuredBox[p]:n.layoutBox[p],f=Pi(g);g.min=r[p].min,g.max=g.min+f}):Yk(s,n.layoutBox,r)&&Ui(p=>{const g=o?n.measuredBox[p]:n.layoutBox[p],f=Pi(r[p]);g.max=g.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+f)});const a=hc();hd(a,r,n.layoutBox);const l=hc();o?hd(l,e.applyTransform(i,!0),n.measuredBox):hd(l,r,n.layoutBox);const c=!Wk(a);let d=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:f}=p;if(g&&f){const w=Dn();fd(w,n.layoutBox,g.layoutBox);const S=Dn();fd(S,r,f.layoutBox),Gk(w,S)||(d=!0),p.options.layoutRoot&&(e.relativeTarget=S,e.relativeTargetOrigin=w,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function d7(e){Yu&&Ya.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function h7(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function f7(e){e.clearSnapshot()}function Cb(e){e.clearMeasurements()}function p7(e){e.isLayoutDirty=!1}function m7(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Pb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function g7(e){e.resolveTargetDelta()}function v7(e){e.calcProjection()}function y7(e){e.resetSkewAndRotation()}function w7(e){e.removeLeadSnapshot()}function Lb(e,t,n){e.translate=xn(t.translate,0,n),e.scale=xn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Tb(e,t,n,r){e.min=xn(t.min,n.min,r),e.max=xn(t.max,n.max,r)}function b7(e,t,n,r){Tb(e.x,t.x,n.x,r),Tb(e.y,t.y,n.y,r)}function x7(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const _7={duration:.45,ease:[.4,0,.1,1]},Rb=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ib=Rb("applewebkit/")&&!Rb("chrome/")?Math.round:Ei;function Ob(e){e.min=Ib(e.min),e.max=Ib(e.max)}function S7(e){Ob(e.x),Ob(e.y)}function Yk(e,t,n){return e==="position"||e==="preserve-aspect"&&!NR(Nb(t),Nb(n),.2)}function k7(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const j7=Jk({attachResizeListener:(e,t)=>qd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),W0={current:void 0},Zk=Jk({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!W0.current){const e=new j7({});e.mount(window),e.setOptions({layoutScroll:!0}),W0.current=e}return W0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),N7={pan:{Feature:zR},drag:{Feature:$R,ProjectionNode:Zk,MeasureLayout:qk}};function Fb(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&pn.postRender(()=>s(t,hh(t)))}class A7 extends _a{mount(){const{current:t}=this.node;t&&(this.unmount=N8(t,n=>(Fb(this.node,n,"Start"),r=>Fb(this.node,r,"End"))))}unmount(){}}class E7 extends _a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dh(qd(this.node.current,"focus",()=>this.onFocus()),qd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Db(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&pn.postRender(()=>s(t,hh(t)))}class C7 extends _a{mount(){const{current:t}=this.node;t&&(this.unmount=P8(t,n=>(Db(this.node,n,"Start"),(r,{success:i})=>Db(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const U1=new WeakMap,G0=new WeakMap,P7=e=>{const t=U1.get(e.target);t&&t(e)},L7=e=>{e.forEach(P7)};function T7({root:e,...t}){const n=e||document;G0.has(n)||G0.set(n,{});const r=G0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(L7,{root:e,...t})),r[i]}function R7(e,t,n){const r=T7(t);return U1.set(e,n),r.observe(e),()=>{U1.delete(e),r.unobserve(e)}}const I7={some:0,all:1};class O7 extends _a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:I7[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),g=c?d:p;g&&g(l)};return R7(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(F7(t,n))&&this.startObserver()}unmount(){}}function F7({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const D7={inView:{Feature:O7},tap:{Feature:C7},focus:{Feature:E7},hover:{Feature:A7}},M7={layout:{ProjectionNode:Zk,MeasureLayout:qk}},$1={current:null},Xk={current:!1};function B7(){if(Xk.current=!0,!!ky)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>$1.current=e.matches;e.addListener(t),t()}else $1.current=!1}const U7=[...Sk,Cr,ga],$7=e=>U7.find(_k(e)),Mb=new WeakMap;function z7(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Lr(i))e.addValue(r,i);else if(Lr(s))e.addValue(r,$d(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,$d(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Bb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class q7{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ms.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,pn.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=bm(n),this.isVariantNode=L4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in g){const w=g[f];l[f]!==void 0&&Lr(w)&&w.set(l[f],!1)}}mount(t){this.current=t,Mb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Xk.current||B7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Mb.delete(this.current),this.projection&&this.projection.unmount(),ma(this.notifyUpdate),ma(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=kl.has(t),i=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&pn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Dc){const n=Dc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Bb.length;r++){const i=Bb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=z7(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=$d(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(bk(i)||dk(i))?i=parseFloat(i):!$7(i)&&ga.test(n)&&(i=vk(t,n)),this.setBaseTarget(t,Lr(i)?i.get():i)),Lr(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Ly(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Lr(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Hy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Qk extends q7{constructor(){super(...arguments),this.KeyframeResolver=kk}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Lr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function V7(e){return window.getComputedStyle(e)}class H7 extends Qk{constructor(){super(...arguments),this.type="html",this.renderInstance=U4}readValueFromInstance(t,n){if(kl.has(n)){const r=Yy(n);return r&&r.default||0}else{const r=V7(t),i=(D4(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return $k(t,n)}build(t,n,r){Iy(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return My(t,n,r)}}class W7 extends Qk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(kl.has(n)){const r=Yy(n);return r&&r.default||0}return n=$4.has(n)?n:Ey(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return V4(t,n,r)}build(t,n,r){Oy(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){z4(t,n,r,i)}mount(t){this.isSVGTag=Dy(t.tagName),super.mount(t)}}const G7=(e,t)=>Py(e)?new W7(t):new H7(t,{allowProjection:e!==R.Fragment}),K7=w8({...vR,...D7,...N7,...M7},G7),Te=IL(K7);var z1=function(e,t){return z1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},z1(e,t)};function ej(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");z1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var $p=function(){return $p=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$p.apply(this,arguments)};function Zc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function tj(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function nj(e,t){return function(n,r){t(n,r,e)}}function rj(e,t,n,r,i,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),p,g=!1,f=n.length-1;f>=0;f--){var w={};for(var S in r)w[S]=S==="access"?{}:r[S];for(var S in r.access)w.access[S]=r.access[S];w.addInitializer=function(v){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var k=(0,n[f])(a==="accessor"?{get:d.get,set:d.set}:d[l],w);if(a==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(p=o(k.get))&&(d.get=p),(p=o(k.set))&&(d.set=p),(p=o(k.init))&&i.unshift(p)}else(p=o(k))&&(a==="field"?i.unshift(p):d[l]=p)}c&&Object.defineProperty(c,r.name,d),g=!0}function ij(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function sj(e){return typeof e=="symbol"?e:"".concat(e)}function oj(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function aj(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ye(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function lj(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Sm=Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function cj(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Sm(t,e,n)}function zp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function t2(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function uj(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(t2(arguments[t]));return e}function dj(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function hj(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Bc(e){return this instanceof Bc?(this.v=e,this):new Bc(e)}function fj(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(w){return Promise.resolve(w).then(f,p)}}function a(f,w){r[f]&&(i[f]=function(S){return new Promise(function(k,v){s.push([f,S,k,v])>1||l(f,S)})},w&&(i[f]=w(i[f])))}function l(f,w){try{c(r[f](w))}catch(S){g(s[0][3],S)}}function c(f){f.value instanceof Bc?Promise.resolve(f.value.v).then(d,p):g(s[0][2],f)}function d(f){l("next",f)}function p(f){l("throw",f)}function g(f,w){f(w),s.shift(),s.length&&l(s[0][0],s[0][1])}}function pj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Bc(e[i](o)),done:!1}:s?s(o):o}:s}}function mj(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof zp=="function"?zp(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function gj(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var J7=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},q1=function(e){return q1=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},q1(e)};function vj(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=q1(e),r=0;r<n.length;r++)n[r]!=="default"&&Sm(t,e,n[r]);return J7(t,e),t}function yj(e){return e&&e.__esModule?e:{default:e}}function wj(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function bj(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function xj(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function _j(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var Y7=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Sj(e){function t(s){e.error=e.hasError?new Y7(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return t(o),i()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function kj(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,o){return r?t?".jsx":".js":i&&(!s||!o)?n:i+s+"."+o.toLowerCase()+"js"}):e}const Z7={__extends:ej,__assign:$p,__rest:Zc,__decorate:tj,__param:nj,__esDecorate:rj,__runInitializers:ij,__propKey:sj,__setFunctionName:oj,__metadata:aj,__awaiter:Ye,__generator:lj,__createBinding:Sm,__exportStar:cj,__values:zp,__read:t2,__spread:uj,__spreadArrays:dj,__spreadArray:hj,__await:Bc,__asyncGenerator:fj,__asyncDelegator:pj,__asyncValues:mj,__makeTemplateObject:gj,__importStar:vj,__importDefault:yj,__classPrivateFieldGet:wj,__classPrivateFieldSet:bj,__classPrivateFieldIn:xj,__addDisposableResource:_j,__disposeResources:Sj,__rewriteRelativeImportExtension:kj},X7=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:_j,get __assign(){return $p},__asyncDelegator:pj,__asyncGenerator:fj,__asyncValues:mj,__await:Bc,__awaiter:Ye,__classPrivateFieldGet:wj,__classPrivateFieldIn:xj,__classPrivateFieldSet:bj,__createBinding:Sm,__decorate:tj,__disposeResources:Sj,__esDecorate:rj,__exportStar:cj,__extends:ej,__generator:lj,__importDefault:yj,__importStar:vj,__makeTemplateObject:gj,__metadata:aj,__param:nj,__propKey:sj,__read:t2,__rest:Zc,__rewriteRelativeImportExtension:kj,__runInitializers:ij,__setFunctionName:oj,__spread:uj,__spreadArray:hj,__spreadArrays:dj,__values:zp,default:Z7},Symbol.toStringTag,{value:"Module"})),Q7=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class n2 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Ub extends n2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $b extends n2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class zb extends n2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var V1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(V1||(V1={}));class eI{constructor(t,{headers:n={},customFetch:r,region:i=V1.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=Q7(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ye(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let c={},{region:d}=r;d||(d=this.region);const p=new URL(`${this.url}/${n}`);d&&d!=="any"&&(c["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let g;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",g=a):typeof a=="string"?(c["Content-Type"]="text/plain",g=a):typeof FormData<"u"&&a instanceof FormData?g=a:(c["Content-Type"]="application/json",g=JSON.stringify(a)):g=a;const f=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:g,signal:l}).catch(v=>{throw v.name==="AbortError"?v:new Ub(v)}),w=f.headers.get("x-relay-error");if(w&&w==="true")throw new $b(f);if(!f.ok)throw new zb(f);let S=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield f.json():S==="application/octet-stream"||S==="application/pdf"?k=yield f.blob():S==="text/event-stream"?k=f:S==="multipart/form-data"?k=yield f.formData():k=yield f.text(),{data:k,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new Ub(s)}:{data:null,error:s,response:s instanceof zb||s instanceof $b?s.context:void 0}}})}}var Br={};const Xc=jE(X7);var pf={},mf={},gf={},vf={},yf={},wf={},qb;function jj(){if(qb)return wf;qb=1,Object.defineProperty(wf,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return wf.default=e,wf}var Vb;function Nj(){if(Vb)return yf;Vb=1,Object.defineProperty(yf,"__esModule",{value:!0});const t=Xc.__importDefault(jj());class n{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,d,p,g;let f=null,w=null,S=null,k=l.status,v=l.statusText;if(l.ok){if(this.method!=="HEAD"){const O=await l.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?w=O:w=JSON.parse(O))}const _=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),N=(p=l.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");_&&N&&N.length>1&&(S=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(f={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,S=null,k=406,v="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const _=await l.text();try{f=JSON.parse(_),Array.isArray(f)&&l.status===404&&(w=[],f=null,k=200,v="OK")}catch{l.status===404&&_===""?(k=204,v="No Content"):f={message:_}}if(f&&this.isMaybeSingle&&(!((g=f==null?void 0:f.details)===null||g===void 0)&&g.includes("0 rows"))&&(f=null,k=200,v="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:w,count:S,status:k,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,d,p;return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(d=l==null?void 0:l.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(p=l==null?void 0:l.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}}return yf.default=n,yf}var Hb;function Aj(){if(Hb)return vf;Hb=1,Object.defineProperty(vf,"__esModule",{value:!0});const t=Xc.__importDefault(Nj());class n extends t.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const p=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),g=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${p};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return vf.default=n,vf}var Wb;function r2(){if(Wb)return gf;Wb=1,Object.defineProperty(gf,"__esModule",{value:!0});const t=Xc.__importDefault(Aj()),n=new RegExp("[,()]");class r extends t.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${c}fts${d}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return gf.default=r,gf}var Gb;function Ej(){if(Gb)return mf;Gb=1,Object.defineProperty(mf,"__esModule",{value:!0});const t=Xc.__importDefault(r2());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let c=!1;const d=(i??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",d),a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(c.length>0){const d=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((g,f)=>g.concat(Object.keys(f)),[]);if(p.length>0){const g=[...new Set(p)].map(f=>`"${f}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return mf.default=n,mf}var Kb;function tI(){if(Kb)return pf;Kb=1,Object.defineProperty(pf,"__esModule",{value:!0});const e=Xc,t=e.__importDefault(Ej()),n=e.__importDefault(r2());class r{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var d;let p;const g=new URL(`${this.url}/rpc/${s}`);let f;a||l?(p=a?"HEAD":"GET",Object.entries(o).filter(([S,k])=>k!==void 0).map(([S,k])=>[S,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([S,k])=>{g.searchParams.append(S,k)})):(p="POST",f=o);const w=new Headers(this.headers);return c&&w.set("Prefer",`count=${c}`),new n.default({method:p,url:g,headers:w,schema:this.schemaName,body:f,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return pf.default=r,pf}Object.defineProperty(Br,"__esModule",{value:!0});var Cj=Br.PostgrestError=Bj=Br.PostgrestBuilder=Dj=Br.PostgrestTransformBuilder=Oj=Br.PostgrestFilterBuilder=Rj=Br.PostgrestQueryBuilder=Lj=Br.PostgrestClient=void 0;const Qc=Xc,Pj=Qc.__importDefault(tI());var Lj=Br.PostgrestClient=Pj.default;const Tj=Qc.__importDefault(Ej());var Rj=Br.PostgrestQueryBuilder=Tj.default;const Ij=Qc.__importDefault(r2());var Oj=Br.PostgrestFilterBuilder=Ij.default;const Fj=Qc.__importDefault(Aj());var Dj=Br.PostgrestTransformBuilder=Fj.default;const Mj=Qc.__importDefault(Nj());var Bj=Br.PostgrestBuilder=Mj.default;const Uj=Qc.__importDefault(jj());Cj=Br.PostgrestError=Uj.default;var $j=Br.default={PostgrestClient:Pj.default,PostgrestQueryBuilder:Tj.default,PostgrestFilterBuilder:Ij.default,PostgrestTransformBuilder:Fj.default,PostgrestBuilder:Mj.default,PostgrestError:Uj.default};const nI=kE({__proto__:null,get PostgrestBuilder(){return Bj},get PostgrestClient(){return Lj},get PostgrestError(){return Cj},get PostgrestFilterBuilder(){return Oj},get PostgrestQueryBuilder(){return Rj},get PostgrestTransformBuilder(){return Dj},default:$j},[Br]),{PostgrestClient:rI,PostgrestQueryBuilder:v$,PostgrestFilterBuilder:y$,PostgrestTransformBuilder:w$,PostgrestBuilder:b$,PostgrestError:x$}=$j||nI;class iI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const sI="2.79.0",oI=`realtime-js/${sI}`,aI="1.0.0",H1=1e4,lI=1e3,cI=100;var pd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(pd||(pd={}));var tr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(tr||(tr={}));var fs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(fs||(fs={}));var W1;(function(e){e.websocket="websocket"})(W1||(W1={}));var Qa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Qa||(Qa={}));class uI{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+i));o=o+i;const l=r.decode(t.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class zj{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var an;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(an||(an={}));const Jb=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,o)=>(s[o]=dI(o,e,t,i),s),{}):{}},dI=(e,t,n,r)=>{const i=t.find(a=>a.name===e),s=i==null?void 0:i.type,o=n[e];return s&&!r.includes(s)?qj(s,o):G1(o)},qj=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return mI(t,n)}switch(e){case an.bool:return hI(t);case an.float4:case an.float8:case an.int2:case an.int4:case an.int8:case an.numeric:case an.oid:return fI(t);case an.json:case an.jsonb:return pI(t);case an.timestamp:return gI(t);case an.abstime:case an.date:case an.daterange:case an.int4range:case an.int8range:case an.money:case an.reltime:case an.text:case an.time:case an.timestamptz:case an.timetz:case an.tsrange:case an.tstzrange:return G1(t);default:return G1(t)}},G1=e=>e,hI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},mI=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>qj(t,a))}return e},gI=e=>typeof e=="string"?e.replace(" ","T"):e,Vj=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class K0{constructor(t,n,r={},i=H1){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Yb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Yb||(Yb={}));class md{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=md.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=md.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=md.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const p=s[c];if(p){const g=d.map(k=>k.presence_ref),f=p.map(k=>k.presence_ref),w=d.filter(k=>f.indexOf(k.presence_ref)<0),S=p.filter(k=>g.indexOf(k.presence_ref)<0);w.length>0&&(a[c]=w),S.length>0&&(l[c]=S)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){const p=t[a].map(f=>f.presence_ref),g=d.filter(f=>p.indexOf(f.presence_ref)<0);t[a].unshift(...g)}r(a,d,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const d=l.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Zb||(Zb={}));var gd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gd||(gd={}));var io;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(io||(io={}));class i2{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=tr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new K0(this,fs.join,this.params,this.timeout),this.rejoinTimer=new zj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fs.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new md(this),this.broadcastEndpointURL=Vj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==tr.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[gd.PRESENCE]&&this.bindings[gd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},g={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(io.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(io.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var w;if(this.socket.setAuth(),f===void 0){t==null||t(io.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,k=(w=S==null?void 0:S.length)!==null&&w!==void 0?w:0,v=[];for(let x=0;x<k;x++){const _=S[x],{filter:{event:N,schema:O,table:U,filter:q}}=_,F=f&&f[x];if(F&&F.event===N&&F.schema===O&&F.table===U&&F.filter===q)v.push(Object.assign(Object.assign({},_),{id:F.id}));else{this.unsubscribe(),this.state=tr.errored,t==null||t(io.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(io.SUBSCRIBED);return}}).receive("error",f=>{this.state=tr.errored,t==null||t(io.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(io.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===tr.joined&&t===gd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=tr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new K0(this,fs.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new K0(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>cI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=fs;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var w,S,k;return((w=f.filter)===null||w===void 0?void 0:w.event)==="*"||((k=(S=f.filter)===null||S===void 0?void 0:S.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(f=>f.callback(g,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var w,S,k,v,x,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const N=f.id,O=(w=f.filter)===null||w===void 0?void 0:w.event;return N&&((S=n.ids)===null||S===void 0?void 0:S.includes(N))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const N=(x=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return N==="*"||N===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof g=="object"&&"ids"in g){const w=g.data,{schema:S,table:k,commit_timestamp:v,type:x,errors:_}=w;g=Object.assign(Object.assign({},{schema:S,table:k,commit_timestamp:v,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(w))}f.callback(g,r)})}_isClosed(){return this.state===tr.closed}_isJoined(){return this.state===tr.joined}_isJoining(){return this.state===tr.joining}_isLeaving(){return this.state===tr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&i2.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fs.close,{},t)}_onError(t){this._on(fs.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Jb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Jb(t.columns,t.old_record)),n}}const J0=()=>{},bf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vI=[1e3,2e3,5e3,1e4],yI=1e4,wI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bI{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=H1,this.transport=null,this.heartbeatIntervalMs=bf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=J0,this.ref=0,this.reconnectTimer=null,this.logger=J0,this.conn=null,this.sendBuffer=[],this.serializer=new uI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${W1.websocket}`,this.httpEndpoint=Vj(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aI}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pd.connecting:return Qa.Connecting;case pd.open:return Qa.Open;case pd.closing:return Qa.Closing;default:return Qa.Closed}}isConnected(){return this.connectionState()===Qa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new i2(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(lI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},bf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(fs.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([wI],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:oI};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(fs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new zj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,o,a,l,c,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:H1,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:bf.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:J0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:p=>vI[p-1]||yI,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(p,g)=>g(JSON.stringify(p)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class s2 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function wn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xI extends s2{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class K1 extends s2{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const o2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_I=()=>Response,J1=e=>{if(Array.isArray(e))return e.map(n=>J1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=J1(r)}),t},SI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Y0=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},kI=(e,t,n)=>Ye(void 0,void 0,void 0,function*(){const r=yield _I();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,o=(i==null?void 0:i.statusCode)||s+"";t(new xI(Y0(i),s,o))}).catch(i=>{t(new K1(Y0(i),i))}):t(new K1(Y0(e),e))}),jI=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(SI(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function fh(e,t,n,r,i,s){return Ye(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,jI(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>kI(l,a,r))})})}function Vd(e,t,n,r){return Ye(this,void 0,void 0,function*(){return fh(e,"GET",t,n,r)})}function ds(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return fh(e,"POST",t,r,i,n)})}function Y1(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return fh(e,"PUT",t,r,i,n)})}function NI(e,t,n,r){return Ye(this,void 0,void 0,function*(){return fh(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function a2(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return fh(e,"DELETE",t,r,i,n)})}class AI{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ye(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wn(t))return{data:null,error:t};throw t}})}}var Hj;class EI{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[Hj]="BlobDownloadBuilder",this.promise=null}asStream(){return new AI(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ye(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wn(t))return{data:null,error:t};throw t}})}}Hj=Symbol.toStringTag;const CI=EI,PI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class LI{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=o2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Ye(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Xb),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),p=yield(t=="PUT"?Y1:ds)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wn(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Ye(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Xb.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const p=yield Y1(this.fetch,a.toString(),l,{headers:d});return{data:{path:s,fullPath:p.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(wn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield ds(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new s2("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:yield ds(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:{path:(yield ds(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Ye(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield ds(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Ye(this,void 0,void 0,function*(){try{const i=yield ds(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(t),l=()=>Vd(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new CI(l,this.shouldThrowOnError)}info(t){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Vd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:J1(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}exists(t){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield NI(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r)&&r instanceof K1){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield a2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ye(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},PI),n),{prefix:t||""});return{data:yield ds(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Ye(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ds(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Wj="2.79.0",Gj={"X-Client-Info":`storage-js/${Wj}`};class TI{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gj),n),this.fetch=o2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ye(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Vd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}getBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Vd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}createBucket(t){return Ye(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield ds(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Ye(this,void 0,void 0,function*(){try{return{data:yield Y1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield ds(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield a2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class RI{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gj),n),this.fetch=o2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield ds(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ye(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Vd(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield a2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}}const l2={"X-Client-Info":`storage-js/${Wj}`,"Content-Type":"application/json"};class Kj extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _i(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Z0 extends Kj{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class II extends Kj{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Qb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Qb||(Qb={}));const c2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),OI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ex=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),FI=(e,t,n)=>Ye(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new Z0(ex(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;t(new Z0(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;t(new Z0(a,i,o))}}else t(new II(ex(e),e))}),DI=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(OI(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))};function MI(e,t,n,r,i,s){return Ye(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,DI(t,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>FI(l,a,r))})})}function Si(e,t,n,r,i){return Ye(this,void 0,void 0,function*(){return MI(e,"POST",t,r,i,n)})}class BI{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},l2),n),this.fetch=c2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Si(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ye(this,void 0,void 0,function*(){try{return{data:yield Si(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_i(r))return{data:null,error:r};throw r}})}listIndexes(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Si(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Si(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_i(r))return{data:null,error:r};throw r}})}}class UI{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},l2),n),this.fetch=c2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ye(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Si(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}getVectors(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Si(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}listVectors(t){return Ye(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Si(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Si(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ye(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Si(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}}class $I{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},l2),n),this.fetch=c2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Si(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}getBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:yield Si(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}listBuckets(){return Ye(this,arguments,void 0,function*(t={}){try{return{data:yield Si(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ye(this,void 0,void 0,function*(){try{return{data:(yield Si(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_i(n))return{data:null,error:n};throw n}})}}class zI extends $I{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new qI(this.url,this.headers,t,this.fetch)}}class qI extends BI{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ye(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ye(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ye(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ye(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new VI(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class VI extends UI{constructor(t,n,r,i,s){super(t,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ye(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ye(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ye(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ye(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ye(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class HI extends TI{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new LI(this.url,this.headers,t,this.fetch)}get vectors(){return new zI(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new RI(this.url+"/iceberg",this.headers,this.fetch)}}const WI="2.79.0";let Zu="";typeof Deno<"u"?Zu="deno":typeof document<"u"?Zu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zu="react-native":Zu="node";const GI={"X-Client-Info":`supabase-js-${Zu}/${WI}`},KI={headers:GI},JI={schema:"public"},YI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ZI={},XI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),QI=()=>Headers,eO=(e,t,n)=>{const r=XI(n),i=QI();return async(s,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))}};function tO(e){return e.endsWith("/")?e:e+"/"}function nO(e,t){var n,r;const{db:i,auth:s,realtime:o,global:a}=e,{db:l,auth:c,realtime:d,global:p}=t,g={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function rO(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Jj="2.79.0",Kl=30*1e3,Z1=3,X0=Z1*Kl,iO="http://localhost:9999",sO="supabase.auth.token",oO={"X-Client-Info":`gotrue-js/${Jj}`},X1="X-Supabase-Api-Version",Yj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lO=10*60*1e3;class Hd extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function it(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class cO extends Hd{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function uO(e){return it(e)&&e.name==="AuthApiError"}class el extends Hd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Sa extends Hd{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class as extends Sa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dO(e){return it(e)&&e.name==="AuthSessionMissingError"}class Ml extends Sa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xf extends Sa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _f extends Sa{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hO(e){return it(e)&&e.name==="AuthImplicitGrantRedirectError"}class tx extends Sa{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q1 extends Sa{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Q0(e){return it(e)&&e.name==="AuthRetryableFetchError"}class nx extends Sa{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ev extends Sa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rx=` 	
\r=`.split(""),fO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rx.length;t+=1)e[rx[t].charCodeAt(0)]=-2;for(let t=0;t<qp.length;t+=1)e[qp[t].charCodeAt(0)]=t;return e})();function ix(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(qp[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(qp[r]),t.queuedBits-=6}}function Zj(e,t,n){const r=fO[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function sx(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{gO(o,r,n)};for(let o=0;o<e.length;o+=1)Zj(e.charCodeAt(o),i,s);return t.join("")}function pO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mO(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}pO(r,t)}}function gO(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Sc(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Zj(e.charCodeAt(i),n,r);return new Uint8Array(t)}function vO(e){const t=[];return mO(e,n=>t.push(n)),new Uint8Array(t)}function ol(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>ix(i,n,r)),ix(null,n,r),t.join("")}function yO(e){return Math.round(Date.now()/1e3)+e}function wO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Er=()=>typeof window<"u"&&typeof document<"u",Va={tested:!1,writable:!1},Xj=()=>{if(!Er())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Va.tested)return Va.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Va.tested=!0,Va.writable=!0}catch{Va.tested=!0,Va.writable=!1}return Va.writable};function bO(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const Qj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),xO=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Jl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ha=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zo=async(e,t)=>{await e.removeItem(t)};class km{constructor(){this.promise=new km.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}km.promiseConstructor=Promise;function eg(e){const t=e.split(".");if(t.length!==3)throw new ev("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!aO.test(t[r]))throw new ev("JWT not in base64url format");return{header:JSON.parse(sx(t[0])),payload:JSON.parse(sx(t[1])),signature:Sc(t[2]),raw:{header:t[0],payload:t[1]}}}async function _O(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SO(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function kO(e){return("0"+e.toString(16)).substr(-2)}function jO(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,kO).join("")}async function NO(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function AO(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await NO(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bl(e,t,n=!1){const r=jO();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Jl(e,`${t}-code-verifier`,i);const s=await AO(r);return[s,r===s?"plain":"s256"]}const EO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CO(e){const t=e.headers.get(X1);if(!t||!t.match(EO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function PO(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function LO(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const TO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ul(e){if(!TO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tg(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function RO(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function ox(e){return JSON.parse(JSON.stringify(e))}const Za=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),IO=[502,503,504];async function ax(e){var t;if(!xO(e))throw new Q1(Za(e),0);if(IO.includes(e.status))throw new Q1(Za(e),e.status);let n;try{n=await e.json()}catch(s){throw new el(Za(s),s)}let r;const i=CO(e);if(i&&i.getTime()>=Yj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new nx(Za(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new as}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new nx(Za(n),e.status,n.weak_password.reasons);throw new cO(Za(n),e.status||500,r)}const OO=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function dt(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[X1]||(s[X1]=Yj["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await FO(e,t,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function FO(e,t,n,r,i,s){const o=OO(t,r,i,s);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Q1(Za(l),0)}if(a.ok||await ax(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ax(l)}}function ls(e){var t;let n=null;BO(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=yO(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function lx(e){const t=ls(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Yo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function DO(e){return{data:e,error:null}}function MO(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,o=Zc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function cx(e){return e}function BO(e){return e.access_token&&e.refresh_token&&e.expires_in}const ng=["global","local","others"];class UO{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Qj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ng[0]){if(ng.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ng.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Yo})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Zc(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:MO,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(it(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Yo})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:cx});if(d.error)throw d.error;const p=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);c[`${k}Page`]=S}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(it(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Ul(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Yo})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ul(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Yo})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ul(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Yo})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ul(t.userId);try{const{data:n,error:r}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ul(t.userId),Ul(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:cx});if(d.error)throw d.error;const p=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);c[`${k}Page`]=S}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(it(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await dt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await dt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}}function ux(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const $l={debug:!!(globalThis&&Xj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class $O extends eN{}async function zO(e,t,n){$l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),$l.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){$l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{$l.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw $l.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new $O(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($l.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function qO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tN(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function VO(e){return parseInt(e,16)}function HO(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function WO(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:p,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=tN(e.address),w=d?`${d}://${r}`:r,S=e.statement?`${e.statement}
`:"",k=`${w} wants you to sign in with your Ethereum account:
${f}

${S}`;let v=`URI: ${p}
Version: ${g}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),l&&(v+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);x+=`
- ${_}`}v+=x}return`${k}
${v}`}class Gn extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Vp extends Gn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function GO({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Gn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Gn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Gn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Gn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Gn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Gn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Gn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Gn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(nN(o)){if(s.rp.id!==o)return new Gn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Gn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Gn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function KO({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Gn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Gn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(nN(r)){if(n.rpId!==r)return new Gn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Gn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class JO{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const YO=new JO;function ZO(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Zc(e,["challenge","user","excludeCredentials"]),s=Sc(t).buffer,o=Object.assign(Object.assign({},n),{id:Sc(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Sc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function XO(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Zc(e,["challenge","allowCredentials"]),i=Sc(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Sc(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function QO(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ol(new Uint8Array(e.response.attestationObject)),clientDataJSON:ol(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ol(new Uint8Array(i.authenticatorData)),clientDataJSON:ol(new Uint8Array(i.clientDataJSON)),signature:ol(new Uint8Array(i.signature)),userHandle:i.userHandle?ol(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function nN(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function dx(){var e,t;return!!(Er()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function tF(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Vp("Browser returned unexpected credential type",t)}:{data:null,error:new Vp("Empty credential response",t)}}catch(t){return{data:null,error:GO({error:t,options:e})}}}async function nF(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Vp("Browser returned unexpected credential type",t)}:{data:null,error:new Vp("Empty credential response",t)}}catch(t){return{data:null,error:KO({error:t,options:e})}}}const rF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},iF={userVerification:"preferred",hints:["security-key"]};function Hp(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(t(o)){const a=r[s];t(a)?r[s]=Hp(a,o):r[s]=Hp(o)}else r[s]=o}return r}function sF(e,t){return Hp(rF,e,t||{})}function oF(e,t){return Hp(iF,e,t||{})}class aF{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=i??YO.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=sF(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:p}=await tF({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const c=oF(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:p}=await nF(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new el("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Hd("rpId is required for WebAuthn authentication")};try{if(!dx())return{data:null,error:new el("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new el("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Hd("rpId is required for WebAuthn registration")};try{if(!dx())return{data:null,error:new el("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new el("Unexpected error in register",o)}}}}qO();const lF={url:iO,storageKey:sO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function hx(e,t,n){return await n()}const zl={};class Wd{get jwks(){var t,n;return(n=(t=zl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){zl[this.storageKey]=Object.assign(Object.assign({},zl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=zl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){zl[this.storageKey]=Object.assign(Object.assign({},zl[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wd.nextInstanceID,Wd.nextInstanceID+=1,this.instanceID>0&&Er()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},lF),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new UO({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Qj(i.fetch),this.lock=i.lock||hx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Er()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=zO:this.lock=hx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new aF(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Xj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ux(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ux(this.memoryStorage)),Er()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Er()&&(n=bO(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Er()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),hO(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return it(n)?this._returnResult({error:n}):this._returnResult({error:new el("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ls}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:d,password:p,options:g}=t;let f=null,w=null;this.flowType==="pkce"&&([f,w]=await Bl(this.storage,this.storageKey)),s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:p,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:f,code_challenge_method:w},xform:ls})}else if("phone"in t){const{phone:d,password:p,options:g}=t;s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:ls})}else throw new xf("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:a}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lx})}else if("phone"in t){const{phone:s,password:o,options:a}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lx})}else throw new xf("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Ml;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,o,a,l,c,d,p,g;let f,w;if("message"in t)f=t.message,w=t.signature;else{const{chain:S,wallet:k,statement:v,options:x}=t;let _;if(Er())if(typeof k=="object")_=k;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")_=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=k}const N=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),O=await _.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=tN(O[0]);let q=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!q){const M=await _.request({method:"eth_chainId"});q=VO(M)}const F={domain:N.host,address:U,statement:v,uri:N.href,version:"1",chainId:q,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};f=WO(F),w=await _.request({method:"personal_sign",params:[HO(f),U]})}try{const{data:S,error:k}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:w},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ls});if(k)throw k;if(!S||!S.session||!S.user){const v=new Ml;return this._returnResult({data:{user:null,session:null},error:v})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:k})}catch(S){if(it(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var n,r,i,s,o,a,l,c,d,p,g,f;let w,S;if("message"in t)w=t.message,S=t.signature;else{const{chain:k,wallet:v,statement:x,options:_}=t;let N;if(Er())if(typeof v=="object")N=v;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))N=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=v}const O=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const U=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),x?{statement:x}:null));let q;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")q=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)q=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)w=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),S=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${O.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((p=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",..._.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const U=await N.signMessage(new TextEncoder().encode(w),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=U}}try{const{data:k,error:v}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:ol(S)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ls});if(v)throw v;if(!k||!k.session||!k.user){const x=new Ml;return this._returnResult({data:{user:null,session:null},error:x})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:v})}catch(k){if(it(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const n=await Ha(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ls});if(await zo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new Ml;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=t,a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ls}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new Ml;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Bl(this.storage,this.storageKey));const{error:p}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new xf("You must provide either an email or phone number.")}catch(a){if(it(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ls});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Bl(this.storage,this.storageKey));const a=await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:DO});return this._returnResult(a)}catch(s){if(it(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new as;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(it(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:o}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:o,error:a}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new xf("You must provide either an email or phone number and a type")}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ha(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<X0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ha(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=tg()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=RO(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Yo}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new as}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Yo})})}catch(n){if(it(n))return dO(n)&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new as;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Bl(this.storage,this.storageKey));const{data:c,error:d}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Yo});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(it(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new as;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=eg(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(it(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new as;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Er())throw new _f("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _f(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new tx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _f("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new tx("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!s||!a||!o||!c)throw new _f("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let g=d+p;l&&(g=parseInt(l));const f=g-d;f*1e3<=Kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${p}s`);const w=g-p;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,g,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,g,d);const{data:S,error:k}=await this._getUser(s);if(k)throw k;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:g,refresh_token:o,token_type:c,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(r){if(it(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ha(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(uO(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=wO(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Bl(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(it(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,d;const{data:p,error:g}=s;if(g)throw g;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Er()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(it(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:d}=t,p=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ls}),{data:g,error:f}=p;return f?this._returnResult({data:{user:null,session:null},error:f}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Ml}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:f}))}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await SO(async i=>(i>0&&await _O(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ls})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Q0(s)&&Date.now()+o-r<Kl})}catch(r){if(this._debug(n,"error",r),it(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Er()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ha(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Ha(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Jl(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:tg()}else if(i&&!i.user&&!i.user){const o=await Ha(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await zo(this.storage,this.storageKey+"-user"),await Jl(this.storage,this.storageKey,i)):i.user=tg()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<X0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${X0}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Q0(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new as;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new km;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new as;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),it(s)){const o={data:null,error:s};return Q0(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Jl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=ox(i);await Jl(this.storage,this.storageKey,s)}else{const i=ox(n);await Jl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await zo(this.storage,this.storageKey),await zo(this.storage,this.storageKey+"-code-verifier"),await zo(this.storage,this.storageKey+"-user"),this.userStorage&&await zo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Er()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Kl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Kl}ms, refresh threshold is ${Z1} ticks`),i<=Z1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof eN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Er()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Bl(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?QO(t.webauthn.credential_response):eF(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ZO(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:XO(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=eg(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await dt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new as})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new as});const o=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Er()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new as});const o=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Er()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+lO>i)return r;const{data:s,error:o}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:w}=await this.getSession();if(w||!f.session)return this._returnResult({data:null,error:w});r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=eg(r);n!=null&&n.allowExpired||PO(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const d=LO(i.alg),p=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,vO(`${a}.${l}`)))throw new ev("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}}Wd.nextInstanceID=0;const cF=Wd;class uF extends cF{constructor(t){super(t)}}class dF{constructor(t,n,r){var i,s,o;this.supabaseUrl=t,this.supabaseKey=n;const a=rO(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:JI,realtime:ZI,auth:Object.assign(Object.assign({},YI),{storageKey:l}),global:KI},d=nO(r??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=eO(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new rI(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new HI(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new eI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:d},p,g){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uF({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),p),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:d,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new bI(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hF=(e,t,n)=>new dF(e,t,n);function fF(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pF="https://xfbmdeuzuyixpmouhqcv.supabase.co",mF="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhmYm1kZXV6dXlpeHBtb3VocWN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkzMzE3ODQsImV4cCI6MjA2NDkwNzc4NH0.XzFIT3BwW9dKRrmFFbSAufCpC1SZuUI-VU2Uer5VoTw",Pt=hF(pF,mF,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"herbbie-auth",flowType:"pkce",onAuthStateChange:(e,t)=>{e==="SIGNED_OUT"&&Object.keys(localStorage).forEach(r=>{(r.startsWith("sb-")||r.startsWith("supabase.")||r.startsWith("herbbie-auth"))&&localStorage.removeItem(r)})}},global:{headers:{"x-client-info":"herbbie-web"},fetch:(e,t={})=>fetch(e,t).catch(n=>{if(n.message.includes("Failed to fetch")||n.message.includes("ERR_NAME_NOT_RESOLVED"))return Promise.resolve(new Response(JSON.stringify({error:"Network error"}),{status:503,headers:{"Content-Type":"application/json"}}));throw n})}});function Jt(e){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(e)}var ws=Uint8Array,ji=Uint16Array,u2=Int32Array,d2=new ws([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),h2=new ws([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fx=new ws([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rN=function(e,t){for(var n=new ji(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new u2(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},iN=rN(d2,2),gF=iN.b,tv=iN.r;gF[28]=258,tv[258]=28;var vF=rN(h2,0),px=vF.r,nv=new ji(32768);for(var hn=0;hn<32768;++hn){var qo=(hn&43690)>>1|(hn&21845)<<1;qo=(qo&52428)>>2|(qo&13107)<<2,qo=(qo&61680)>>4|(qo&3855)<<4,nv[hn]=((qo&65280)>>8|(qo&255)<<8)>>1}var vd=function(e,t,n){for(var r=e.length,i=0,s=new ji(t);i<r;++i)e[i]&&++s[e[i]-1];var o=new ji(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new ji(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],p=o[e[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)a[nv[p]>>l]=c}else for(a=new ji(r),i=0;i<r;++i)e[i]&&(a[i]=nv[o[e[i]-1]++]>>15-e[i]);return a},wl=new ws(288);for(var hn=0;hn<144;++hn)wl[hn]=8;for(var hn=144;hn<256;++hn)wl[hn]=9;for(var hn=256;hn<280;++hn)wl[hn]=7;for(var hn=280;hn<288;++hn)wl[hn]=8;var Wp=new ws(32);for(var hn=0;hn<32;++hn)Wp[hn]=5;var yF=vd(wl,9,0),wF=vd(Wp,5,0),sN=function(e){return(e+7)/8|0},bF=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new ws(e.subarray(t,n))},to=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Mu=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},rg=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:aN,l:0};if(i==1){var o=new ws(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(O,U){return O.f-U.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var g=s[0].s,r=1;r<i;++r)s[r].s>g&&(g=s[r].s);var f=new ji(g+1),w=rv(n[d-1],f,0);if(w>t){var r=0,S=0,k=w-t,v=1<<k;for(s.sort(function(U,q){return f[q.s]-f[U.s]||U.f-q.f});r<i;++r){var x=s[r].s;if(f[x]>t)S+=v-(1<<w-f[x]),f[x]=t;else break}for(S>>=k;S>0;){var _=s[r].s;f[_]<t?S-=1<<t-f[_]++-1:++r}for(;r>=0&&S;--r){var N=s[r].s;f[N]==t&&(--f[N],++S)}w=t}return{t:new ws(f),l:w}},rv=function(e,t,n){return e.s==-1?Math.max(rv(e.l,t,n+1),rv(e.r,t,n+1)):t[e.s]=n},mx=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ji(++t),r=0,i=e[0],s=1,o=function(l){n[r++]=l},a=1;a<=t;++a)if(e[a]==i&&a!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[a]}return{c:n.subarray(0,r),n:t}},Bu=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},oN=function(e,t,n){var r=n.length,i=sN(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},gx=function(e,t,n,r,i,s,o,a,l,c,d){to(t,d++,n),++i[256];for(var p=rg(i,15),g=p.t,f=p.l,w=rg(s,15),S=w.t,k=w.l,v=mx(g),x=v.c,_=v.n,N=mx(S),O=N.c,U=N.n,q=new ji(19),F=0;F<x.length;++F)++q[x[F]&31];for(var F=0;F<O.length;++F)++q[O[F]&31];for(var M=rg(q,7),G=M.t,P=M.l,L=19;L>4&&!G[fx[L-1]];--L);var Y=c+5<<3,V=Bu(i,wl)+Bu(s,Wp)+o,ae=Bu(i,g)+Bu(s,S)+o+14+3*L+Bu(q,G)+2*q[16]+3*q[17]+7*q[18];if(l>=0&&Y<=V&&Y<=ae)return oN(t,d,e.subarray(l,l+c));var de,ce,J,ie;if(to(t,d,1+(ae<V)),d+=2,ae<V){de=vd(g,f,0),ce=g,J=vd(S,k,0),ie=S;var te=vd(G,P,0);to(t,d,_-257),to(t,d+5,U-1),to(t,d+10,L-4),d+=14;for(var F=0;F<L;++F)to(t,d+3*F,G[fx[F]]);d+=3*L;for(var se=[x,O],A=0;A<2;++A)for(var z=se[A],F=0;F<z.length;++F){var B=z[F]&31;to(t,d,te[B]),d+=G[B],B>15&&(to(t,d,z[F]>>5&127),d+=z[F]>>12)}}else de=yF,ce=wl,J=wF,ie=Wp;for(var F=0;F<a;++F){var X=r[F];if(X>255){var B=X>>18&31;Mu(t,d,de[B+257]),d+=ce[B+257],B>7&&(to(t,d,X>>23&31),d+=d2[B]);var ee=X&31;Mu(t,d,J[ee]),d+=ie[ee],ee>3&&(Mu(t,d,X>>5&8191),d+=h2[ee])}else Mu(t,d,de[X]),d+=ce[X]}return Mu(t,d,de[256]),d+ce[256]},xF=new u2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aN=new ws(0),_F=function(e,t,n,r,i,s){var o=s.z||e.length,a=new ws(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(t){d&&(l[0]=s.r>>3);for(var p=xF[t-1],g=p>>13,f=p&8191,w=(1<<n)-1,S=s.p||new ji(32768),k=s.h||new ji(w+1),v=Math.ceil(n/3),x=2*v,_=function(ve){return(e[ve]^e[ve+1]<<v^e[ve+2]<<x)&w},N=new u2(25e3),O=new ji(288),U=new ji(32),q=0,F=0,M=s.i||0,G=0,P=s.w||0,L=0;M+2<o;++M){var Y=_(M),V=M&32767,ae=k[Y];if(S[V]=ae,k[Y]=V,P<=M){var de=o-M;if((q>7e3||G>24576)&&(de>423||!c)){d=gx(e,l,0,N,O,U,F,G,L,M-L,d),G=q=F=0,L=M;for(var ce=0;ce<286;++ce)O[ce]=0;for(var ce=0;ce<30;++ce)U[ce]=0}var J=2,ie=0,te=f,se=V-ae&32767;if(de>2&&Y==_(M-se))for(var A=Math.min(g,de)-1,z=Math.min(32767,M),B=Math.min(258,de);se<=z&&--te&&V!=ae;){if(e[M+J]==e[M+J-se]){for(var X=0;X<B&&e[M+X]==e[M+X-se];++X);if(X>J){if(J=X,ie=se,X>A)break;for(var ee=Math.min(se,X-2),oe=0,ce=0;ce<ee;++ce){var ge=M-se+ce&32767,he=S[ge],me=ge-he&32767;me>oe&&(oe=me,ae=ge)}}}V=ae,ae=S[V],se+=V-ae&32767}if(ie){N[G++]=268435456|tv[J]<<18|px[ie];var Se=tv[J]&31,Pe=px[ie]&31;F+=d2[Se]+h2[Pe],++O[257+Se],++U[Pe],P=M+J,++q}else N[G++]=e[M],++O[e[M]]}}for(M=Math.max(M,P);M<o;++M)N[G++]=e[M],++O[e[M]];d=gx(e,l,c,N,O,U,F,G,L,M-L,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=k,s.p=S,s.i=M,s.w=P)}else{for(var M=s.w||0;M<o+c;M+=65535){var Le=M+65535;Le>=o&&(l[d/8|0]=c,Le=o),d=oN(l,d+1,e.subarray(M,Le))}s.i=o}return bF(a,0,r+sN(d)+i)},lN=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},SF=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new ws(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return _F(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},cN=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},kF=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=lN();i.p(t.dictionary),cN(e,2,i.d())}};function iv(e,t){t||(t={});var n=lN();n.p(e);var r=SF(e,t,t.dictionary?6:2,4);return kF(r,t),cN(r,r.length-4,n.d()),r}var jF=typeof TextDecoder<"u"&&new TextDecoder,NF=0;try{jF.decode(aN,{stream:!0}),NF=1}catch{}function AF(e){if(Array.isArray(e))return e}function EF(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function vx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function CF(e,t){if(e){if(typeof e=="string")return vx(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vx(e,t):void 0}}function PF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yx(e,t){return AF(e)||EF(e,t)||CF(e,t)||PF()}function wx(e,t="utf8"){return new TextDecoder(t).decode(e)}const LF=new TextEncoder;function TF(e){return LF.encode(e)}const RF=1024*8,IF=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),ig={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class f2{constructor(t=RF,n={}){Kt(this,"buffer");Kt(this,"byteLength");Kt(this,"byteOffset");Kt(this,"length");Kt(this,"offset");Kt(this,"lastWrittenByte");Kt(this,"littleEndian");Kt(this,"_data");Kt(this,"_mark");Kt(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,s=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof f2)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=ig[n].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===IF&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new ig[n](a.buffer);return this.offset+=r,l.reverse(),l}const o=new ig[n](s);return this.offset+=r,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return wx(this.readBytes(t))}decodeText(t=1,n="utf8"){return wx(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(TF(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const OF=4,bx=0,xx=1,FF=2;function eu(e){let t=e.length;for(;--t>=0;)e[t]=0}const DF=0,uN=1,MF=2,BF=3,UF=258,p2=29,ph=256,Gd=ph+1+p2,kc=30,m2=19,dN=2*Gd+1,al=15,sg=16,$F=7,g2=256,hN=16,fN=17,pN=18,sv=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ep=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),zF=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),mN=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qF=512,oo=new Array((Gd+2)*2);eu(oo);const yd=new Array(kc*2);eu(yd);const Kd=new Array(qF);eu(Kd);const Jd=new Array(UF-BF+1);eu(Jd);const v2=new Array(p2);eu(v2);const Gp=new Array(kc);eu(Gp);function og(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let gN,vN,yN;function ag(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const wN=e=>e<256?Kd[e]:Kd[256+(e>>>7)],Yd=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Xr=(e,t,n)=>{e.bi_valid>sg-n?(e.bi_buf|=t<<e.bi_valid&65535,Yd(e,e.bi_buf),e.bi_buf=t>>sg-e.bi_valid,e.bi_valid+=n-sg):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Rs=(e,t,n)=>{Xr(e,n[t*2],n[t*2+1])},bN=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},VF=e=>{e.bi_valid===16?(Yd(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},HF=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,p,g,f,w,S=0;for(g=0;g<=al;g++)e.bl_count[g]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<dN;c++)d=e.heap[c],g=n[n[d*2+1]*2+1]+1,g>l&&(g=l,S++),n[d*2+1]=g,!(d>r)&&(e.bl_count[g]++,f=0,d>=a&&(f=o[d-a]),w=n[d*2],e.opt_len+=w*(g+f),s&&(e.static_len+=w*(i[d*2+1]+f)));if(S!==0){do{for(g=l-1;e.bl_count[g]===0;)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[l]--,S-=2}while(S>0);for(g=l;g!==0;g--)for(d=e.bl_count[g];d!==0;)p=e.heap[--c],!(p>r)&&(n[p*2+1]!==g&&(e.opt_len+=(g-n[p*2+1])*n[p*2],n[p*2+1]=g),d--)}},xN=(e,t,n)=>{const r=new Array(al+1);let i=0,s,o;for(s=1;s<=al;s++)i=i+n[s-1]<<1,r[s]=i;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=bN(r[a]++,a))}},WF=()=>{let e,t,n,r,i;const s=new Array(al+1);for(n=0,r=0;r<p2-1;r++)for(v2[r]=n,e=0;e<1<<sv[r];e++)Jd[n++]=r;for(Jd[n-1]=r,i=0,r=0;r<16;r++)for(Gp[r]=i,e=0;e<1<<ep[r];e++)Kd[i++]=r;for(i>>=7;r<kc;r++)for(Gp[r]=i<<7,e=0;e<1<<ep[r]-7;e++)Kd[256+i++]=r;for(t=0;t<=al;t++)s[t]=0;for(e=0;e<=143;)oo[e*2+1]=8,e++,s[8]++;for(;e<=255;)oo[e*2+1]=9,e++,s[9]++;for(;e<=279;)oo[e*2+1]=7,e++,s[7]++;for(;e<=287;)oo[e*2+1]=8,e++,s[8]++;for(xN(oo,Gd+1,s),e=0;e<kc;e++)yd[e*2+1]=5,yd[e*2]=bN(e,5);gN=new og(oo,sv,ph+1,Gd,al),vN=new og(yd,ep,0,kc,al),yN=new og(new Array(0),zF,0,m2,$F)},_N=e=>{let t;for(t=0;t<Gd;t++)e.dyn_ltree[t*2]=0;for(t=0;t<kc;t++)e.dyn_dtree[t*2]=0;for(t=0;t<m2;t++)e.bl_tree[t*2]=0;e.dyn_ltree[g2*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},SN=e=>{e.bi_valid>8?Yd(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},_x=(e,t,n,r)=>{const i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},lg=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&_x(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!_x(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},Sx=(e,t,n)=>{let r,i,s=0,o,a;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+s++]&255,r+=(e.pending_buf[e.sym_buf+s++]&255)<<8,i=e.pending_buf[e.sym_buf+s++],r===0?Rs(e,i,t):(o=Jd[i],Rs(e,o+ph+1,t),a=sv[o],a!==0&&(i-=v2[o],Xr(e,i,a)),r--,o=wN(r),Rs(e,o,n),a=ep[o],a!==0&&(r-=Gp[o],Xr(e,r,a)));while(s<e.sym_next);Rs(e,g2,t)},ov=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=dN,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)lg(e,n,o);c=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],lg(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,lg(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],HF(e,t),xN(n,l,e.bl_count)},kx=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[hN*2]++):a<=10?e.bl_tree[fN*2]++:e.bl_tree[pN*2]++,a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},jx=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=n;r++)if(s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)){if(a<c)do Rs(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Rs(e,s,e.bl_tree),a--),Rs(e,hN,e.bl_tree),Xr(e,a-3,2)):a<=10?(Rs(e,fN,e.bl_tree),Xr(e,a-3,3)):(Rs(e,pN,e.bl_tree),Xr(e,a-11,7));a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},GF=e=>{let t;for(kx(e,e.dyn_ltree,e.l_desc.max_code),kx(e,e.dyn_dtree,e.d_desc.max_code),ov(e,e.bl_desc),t=m2-1;t>=3&&e.bl_tree[mN[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},KF=(e,t,n,r)=>{let i;for(Xr(e,t-257,5),Xr(e,n-1,5),Xr(e,r-4,4),i=0;i<r;i++)Xr(e,e.bl_tree[mN[i]*2+1],3);jx(e,e.dyn_ltree,t-1),jx(e,e.dyn_dtree,n-1)},JF=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return bx;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return xx;for(n=32;n<ph;n++)if(e.dyn_ltree[n*2]!==0)return xx;return bx};let Nx=!1;const YF=e=>{Nx||(WF(),Nx=!0),e.l_desc=new ag(e.dyn_ltree,gN),e.d_desc=new ag(e.dyn_dtree,vN),e.bl_desc=new ag(e.bl_tree,yN),e.bi_buf=0,e.bi_valid=0,_N(e)},kN=(e,t,n,r)=>{Xr(e,(DF<<1)+(r?1:0),3),SN(e),Yd(e,n),Yd(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},ZF=e=>{Xr(e,uN<<1,3),Rs(e,g2,oo),VF(e)},XF=(e,t,n,r)=>{let i,s,o=0;e.level>0?(e.strm.data_type===FF&&(e.strm.data_type=JF(e)),ov(e,e.l_desc),ov(e,e.d_desc),o=GF(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?kN(e,t,n,r):e.strategy===OF||s===i?(Xr(e,(uN<<1)+(r?1:0),3),Sx(e,oo,yd)):(Xr(e,(MF<<1)+(r?1:0),3),KF(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Sx(e,e.dyn_ltree,e.dyn_dtree)),_N(e),r&&SN(e)},QF=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Jd[n]+ph+1)*2]++,e.dyn_dtree[wN(t)*2]++),e.sym_next===e.sym_end);var eD=YF,tD=kN,nD=XF,rD=QF,iD=ZF,sD={_tr_init:eD,_tr_stored_block:tD,_tr_flush_block:nD,_tr_tally:rD,_tr_align:iD};const oD=(e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var Zd=oD;const aD=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},lD=new Uint32Array(aD()),cD=(e,t,n,r)=>{const i=lD,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var or=cD,Uc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},mh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:uD,_tr_stored_block:av,_tr_flush_block:dD,_tr_tally:ua,_tr_align:hD}=sD,{Z_NO_FLUSH:da,Z_PARTIAL_FLUSH:fD,Z_FULL_FLUSH:pD,Z_FINISH:qi,Z_BLOCK:Ax,Z_OK:mr,Z_STREAM_END:Ex,Z_STREAM_ERROR:Bs,Z_DATA_ERROR:mD,Z_BUF_ERROR:cg,Z_DEFAULT_COMPRESSION:gD,Z_FILTERED:vD,Z_HUFFMAN_ONLY:Sf,Z_RLE:yD,Z_FIXED:wD,Z_DEFAULT_STRATEGY:bD,Z_UNKNOWN:xD,Z_DEFLATED:jm}=mh,_D=9,SD=15,kD=8,jD=29,ND=256,lv=ND+1+jD,AD=30,ED=19,CD=2*lv+1,PD=15,Tt=3,ea=258,Us=ea+Tt+1,LD=32,$c=42,y2=57,cv=69,uv=73,dv=91,hv=103,ll=113,Xu=666,Ur=1,tu=2,bl=3,nu=4,TD=3,cl=(e,t)=>(e.msg=Uc[t],t),Cx=e=>e*2-(e>4?9:0),Zo=e=>{let t=e.length;for(;--t>=0;)e[t]=0},RD=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)};let ID=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ha=ID;const bi=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Ni=(e,t)=>{dD(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,bi(e.strm)},Bt=(e,t)=>{e.pending_buf[e.pending++]=t},Uu=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},fv=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=Zd(e.adler,t,i,n):e.state.wrap===2&&(e.adler=or(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},jN=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Us?e.strstart-(e.w_size-Us):0,c=e.window,d=e.w_mask,p=e.prev,g=e.strstart+ea;let f=c[r+o-1],w=c[r+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(c[i+o]!==w||c[i+o-1]!==f||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<g);if(s=ea-(g-r),r=g-ea,s>o){if(e.match_start=t,o=s,s>=a)break;f=c[r+o-1],w=c[r+o]}}while((t=p[t&d])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},zc=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Us)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),RD(e),r+=t),e.strm.avail_in===0)break;if(n=fv(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=Tt)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=ha(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=ha(e,e.ins_h,e.window[i+Tt-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Tt)););}while(e.lookahead<Us&&e.strm.avail_in!==0)},NN=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,s,o=0,a=e.strm.avail_in;do{if(r=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>s&&(r=s),r<n&&(r===0&&t!==qi||t===da||r!==i+e.strm.avail_in)))break;o=t===qi&&r===i+e.strm.avail_in?1:0,av(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,bi(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(fv(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?nu:t!==da&&t!==qi&&e.strm.avail_in===0&&e.strstart===e.block_start?tu:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(fv(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,n=s>e.w_size?e.w_size:s,i=e.strstart-e.block_start,(i>=n||(i||t===qi)&&t!==da&&e.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,o=t===qi&&e.strm.avail_in===0&&r===i?1:0,av(e,e.block_start,r,o),e.block_start+=r,bi(e.strm)),o?bl:Ur)},ug=(e,t)=>{let n,r;for(;;){if(e.lookahead<Us){if(zc(e),e.lookahead<Us&&t===da)return Ur;if(e.lookahead===0)break}if(n=0,e.lookahead>=Tt&&(e.ins_h=ha(e,e.ins_h,e.window[e.strstart+Tt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Us&&(e.match_length=jN(e,n)),e.match_length>=Tt)if(r=ua(e,e.strstart-e.match_start,e.match_length-Tt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Tt){e.match_length--;do e.strstart++,e.ins_h=ha(e,e.ins_h,e.window[e.strstart+Tt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ha(e,e.ins_h,e.window[e.strstart+1]);else r=ua(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ni(e,!1),e.strm.avail_out===0))return Ur}return e.insert=e.strstart<Tt-1?e.strstart:Tt-1,t===qi?(Ni(e,!0),e.strm.avail_out===0?bl:nu):e.sym_next&&(Ni(e,!1),e.strm.avail_out===0)?Ur:tu},ql=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Us){if(zc(e),e.lookahead<Us&&t===da)return Ur;if(e.lookahead===0)break}if(n=0,e.lookahead>=Tt&&(e.ins_h=ha(e,e.ins_h,e.window[e.strstart+Tt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Tt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Us&&(e.match_length=jN(e,n),e.match_length<=5&&(e.strategy===vD||e.match_length===Tt&&e.strstart-e.match_start>4096)&&(e.match_length=Tt-1)),e.prev_length>=Tt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Tt,r=ua(e,e.strstart-1-e.prev_match,e.prev_length-Tt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=ha(e,e.ins_h,e.window[e.strstart+Tt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Tt-1,e.strstart++,r&&(Ni(e,!1),e.strm.avail_out===0))return Ur}else if(e.match_available){if(r=ua(e,0,e.window[e.strstart-1]),r&&Ni(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ur}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=ua(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Tt-1?e.strstart:Tt-1,t===qi?(Ni(e,!0),e.strm.avail_out===0?bl:nu):e.sym_next&&(Ni(e,!1),e.strm.avail_out===0)?Ur:tu},OD=(e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=ea){if(zc(e),e.lookahead<=ea&&t===da)return Ur;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Tt&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+ea;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=ea-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Tt?(n=ua(e,1,e.match_length-Tt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ua(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ni(e,!1),e.strm.avail_out===0))return Ur}return e.insert=0,t===qi?(Ni(e,!0),e.strm.avail_out===0?bl:nu):e.sym_next&&(Ni(e,!1),e.strm.avail_out===0)?Ur:tu},FD=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(zc(e),e.lookahead===0)){if(t===da)return Ur;break}if(e.match_length=0,n=ua(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ni(e,!1),e.strm.avail_out===0))return Ur}return e.insert=0,t===qi?(Ni(e,!0),e.strm.avail_out===0?bl:nu):e.sym_next&&(Ni(e,!1),e.strm.avail_out===0)?Ur:tu};function Cs(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Qu=[new Cs(0,0,0,0,NN),new Cs(4,4,8,4,ug),new Cs(4,5,16,8,ug),new Cs(4,6,32,32,ug),new Cs(4,4,16,16,ql),new Cs(8,16,32,32,ql),new Cs(8,16,128,128,ql),new Cs(8,32,128,256,ql),new Cs(32,128,258,1024,ql),new Cs(32,258,258,4096,ql)],DD=e=>{e.window_size=2*e.w_size,Zo(e.head),e.max_lazy_match=Qu[e.level].max_lazy,e.good_match=Qu[e.level].good_length,e.nice_match=Qu[e.level].nice_length,e.max_chain_length=Qu[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Tt-1,e.match_available=0,e.ins_h=0};function MD(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=jm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(CD*2),this.dyn_dtree=new Uint16Array((2*AD+1)*2),this.bl_tree=new Uint16Array((2*ED+1)*2),Zo(this.dyn_ltree),Zo(this.dyn_dtree),Zo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(PD+1),this.heap=new Uint16Array(2*lv+1),Zo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*lv+1),Zo(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const gh=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==$c&&t.status!==y2&&t.status!==cv&&t.status!==uv&&t.status!==dv&&t.status!==hv&&t.status!==ll&&t.status!==Xu?1:0},AN=e=>{if(gh(e))return cl(e,Bs);e.total_in=e.total_out=0,e.data_type=xD;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?y2:t.wrap?$c:ll,e.adler=t.wrap===2?0:1,t.last_flush=-2,uD(t),mr},EN=e=>{const t=AN(e);return t===mr&&DD(e.state),t},BD=(e,t)=>gh(e)||e.state.wrap!==2?Bs:(e.state.gzhead=t,mr),CN=(e,t,n,r,i,s)=>{if(!e)return Bs;let o=1;if(t===gD&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>_D||n!==jm||r<8||r>15||t<0||t>9||s<0||s>wD||r===8&&o!==1)return cl(e,Bs);r===8&&(r=9);const a=new MD;return e.state=a,a.strm=e,a.status=$c,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Tt-1)/Tt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=s,a.method=n,EN(e)},UD=(e,t)=>CN(e,t,jm,SD,kD,bD),$D=(e,t)=>{if(gh(e)||t>Ax||t<0)return e?cl(e,Bs):Bs;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===Xu&&t!==qi)return cl(e,e.avail_out===0?cg:Bs);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(bi(e),e.avail_out===0)return n.last_flush=-1,mr}else if(e.avail_in===0&&Cx(t)<=Cx(r)&&t!==qi)return cl(e,cg);if(n.status===Xu&&e.avail_in!==0)return cl(e,cg);if(n.status===$c&&n.wrap===0&&(n.status=ll),n.status===$c){let i=jm+(n.w_bits-8<<4)<<8,s=-1;if(n.strategy>=Sf||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,i|=s<<6,n.strstart!==0&&(i|=LD),i+=31-i%31,Uu(n,i),n.strstart!==0&&(Uu(n,e.adler>>>16),Uu(n,e.adler&65535)),e.adler=1,n.status=ll,bi(e),n.pending!==0)return n.last_flush=-1,mr}if(n.status===y2){if(e.adler=0,Bt(n,31),Bt(n,139),Bt(n,8),n.gzhead)Bt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Bt(n,n.gzhead.time&255),Bt(n,n.gzhead.time>>8&255),Bt(n,n.gzhead.time>>16&255),Bt(n,n.gzhead.time>>24&255),Bt(n,n.level===9?2:n.strategy>=Sf||n.level<2?4:0),Bt(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Bt(n,n.gzhead.extra.length&255),Bt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=or(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=cv;else if(Bt(n,0),Bt(n,0),Bt(n,0),Bt(n,0),Bt(n,0),Bt(n,n.level===9?2:n.strategy>=Sf||n.level<2?4:0),Bt(n,TD),n.status=ll,bi(e),n.pending!==0)return n.last_flush=-1,mr}if(n.status===cv){if(n.gzhead.extra){let i=n.pending,s=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+s>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=or(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=a,bi(e),n.pending!==0)return n.last_flush=-1,mr;i=0,s-=a}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>i&&(e.adler=or(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=uv}if(n.status===uv){if(n.gzhead.name){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=or(e.adler,n.pending_buf,n.pending-i,i)),bi(e),n.pending!==0)return n.last_flush=-1,mr;i=0}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,Bt(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=or(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=dv}if(n.status===dv){if(n.gzhead.comment){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=or(e.adler,n.pending_buf,n.pending-i,i)),bi(e),n.pending!==0)return n.last_flush=-1,mr;i=0}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,Bt(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=or(e.adler,n.pending_buf,n.pending-i,i))}n.status=hv}if(n.status===hv){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(bi(e),n.pending!==0))return n.last_flush=-1,mr;Bt(n,e.adler&255),Bt(n,e.adler>>8&255),e.adler=0}if(n.status=ll,bi(e),n.pending!==0)return n.last_flush=-1,mr}if(e.avail_in!==0||n.lookahead!==0||t!==da&&n.status!==Xu){let i=n.level===0?NN(n,t):n.strategy===Sf?FD(n,t):n.strategy===yD?OD(n,t):Qu[n.level].func(n,t);if((i===bl||i===nu)&&(n.status=Xu),i===Ur||i===bl)return e.avail_out===0&&(n.last_flush=-1),mr;if(i===tu&&(t===fD?hD(n):t!==Ax&&(av(n,0,0,!1),t===pD&&(Zo(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),bi(e),e.avail_out===0))return n.last_flush=-1,mr}return t!==qi?mr:n.wrap<=0?Ex:(n.wrap===2?(Bt(n,e.adler&255),Bt(n,e.adler>>8&255),Bt(n,e.adler>>16&255),Bt(n,e.adler>>24&255),Bt(n,e.total_in&255),Bt(n,e.total_in>>8&255),Bt(n,e.total_in>>16&255),Bt(n,e.total_in>>24&255)):(Uu(n,e.adler>>>16),Uu(n,e.adler&65535)),bi(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?mr:Ex)},zD=e=>{if(gh(e))return Bs;const t=e.state.status;return e.state=null,t===ll?cl(e,mD):mr},qD=(e,t)=>{let n=t.length;if(gh(e))return Bs;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==$c||r.lookahead)return Bs;if(i===1&&(e.adler=Zd(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(Zo(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,zc(r);r.lookahead>=Tt;){let l=r.strstart,c=r.lookahead-(Tt-1);do r.ins_h=ha(r,r.ins_h,r.window[l+Tt-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=Tt-1,zc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Tt-1,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,mr};var VD=UD,HD=CN,WD=EN,GD=AN,KD=BD,JD=$D,YD=zD,ZD=qD,XD="pako deflate (from Nodeca project)",wd={deflateInit:VD,deflateInit2:HD,deflateReset:WD,deflateResetKeep:GD,deflateSetHeader:KD,deflate:JD,deflateEnd:YD,deflateSetDictionary:ZD,deflateInfo:XD};const QD=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var eM=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)QD(n,r)&&(e[r]=n[r])}}return e},tM=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let o=e[r];n.set(o,i),i+=o.length}return n},Nm={assign:eM,flattenChunks:tM};let PN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{PN=!1}const Xd=new Uint8Array(256);for(let e=0;e<256;e++)Xd[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Xd[254]=Xd[254]=1;var nM=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const rM=(e,t)=>{if(t<65534&&e.subarray&&PN)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var iM=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){s[i++]=o;continue}let a=Xd[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|e[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return rM(s,i)},sM=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Xd[e[n]]>t?n:t},Qd={string2buf:nM,buf2string:iM,utf8border:sM};function oM(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var LN=oM;const TN=Object.prototype.toString,{Z_NO_FLUSH:aM,Z_SYNC_FLUSH:lM,Z_FULL_FLUSH:cM,Z_FINISH:uM,Z_OK:Kp,Z_STREAM_END:dM,Z_DEFAULT_COMPRESSION:hM,Z_DEFAULT_STRATEGY:fM,Z_DEFLATED:pM}=mh;function w2(e){this.options=Nm.assign({level:hM,method:pM,chunkSize:16384,windowBits:15,memLevel:8,strategy:fM},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new LN,this.strm.avail_out=0;let n=wd.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Kp)throw new Error(Uc[n]);if(t.header&&wd.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=Qd.string2buf(t.dictionary):TN.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=wd.deflateSetDictionary(this.strm,r),n!==Kp)throw new Error(Uc[n]);this._dict_set=!0}}w2.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?uM:aM,typeof e=="string"?n.input=Qd.string2buf(e):TN.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===lM||s===cM)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=wd.deflate(n,s),i===dM)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=wd.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Kp;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};w2.prototype.onData=function(e){this.chunks.push(e)};w2.prototype.onEnd=function(e){e===Kp&&(this.result=Nm.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const kf=16209,mM=16191;var gM=function(t,n){let r,i,s,o,a,l,c,d,p,g,f,w,S,k,v,x,_,N,O,U,q,F,M,G;const P=t.state;r=t.next_in,M=t.input,i=r+(t.avail_in-5),s=t.next_out,G=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=P.dmax,c=P.wsize,d=P.whave,p=P.wnext,g=P.window,f=P.hold,w=P.bits,S=P.lencode,k=P.distcode,v=(1<<P.lenbits)-1,x=(1<<P.distbits)-1;e:do{w<15&&(f+=M[r++]<<w,w+=8,f+=M[r++]<<w,w+=8),_=S[f&v];t:for(;;){if(N=_>>>24,f>>>=N,w-=N,N=_>>>16&255,N===0)G[s++]=_&65535;else if(N&16){O=_&65535,N&=15,N&&(w<N&&(f+=M[r++]<<w,w+=8),O+=f&(1<<N)-1,f>>>=N,w-=N),w<15&&(f+=M[r++]<<w,w+=8,f+=M[r++]<<w,w+=8),_=k[f&x];n:for(;;){if(N=_>>>24,f>>>=N,w-=N,N=_>>>16&255,N&16){if(U=_&65535,N&=15,w<N&&(f+=M[r++]<<w,w+=8,w<N&&(f+=M[r++]<<w,w+=8)),U+=f&(1<<N)-1,U>l){t.msg="invalid distance too far back",P.mode=kf;break e}if(f>>>=N,w-=N,N=s-o,U>N){if(N=U-N,N>d&&P.sane){t.msg="invalid distance too far back",P.mode=kf;break e}if(q=0,F=g,p===0){if(q+=c-N,N<O){O-=N;do G[s++]=g[q++];while(--N);q=s-U,F=G}}else if(p<N){if(q+=c+p-N,N-=p,N<O){O-=N;do G[s++]=g[q++];while(--N);if(q=0,p<O){N=p,O-=N;do G[s++]=g[q++];while(--N);q=s-U,F=G}}}else if(q+=p-N,N<O){O-=N;do G[s++]=g[q++];while(--N);q=s-U,F=G}for(;O>2;)G[s++]=F[q++],G[s++]=F[q++],G[s++]=F[q++],O-=3;O&&(G[s++]=F[q++],O>1&&(G[s++]=F[q++]))}else{q=s-U;do G[s++]=G[q++],G[s++]=G[q++],G[s++]=G[q++],O-=3;while(O>2);O&&(G[s++]=G[q++],O>1&&(G[s++]=G[q++]))}}else if(N&64){t.msg="invalid distance code",P.mode=kf;break e}else{_=k[(_&65535)+(f&(1<<N)-1)];continue n}break}}else if(N&64)if(N&32){P.mode=mM;break e}else{t.msg="invalid literal/length code",P.mode=kf;break e}else{_=S[(_&65535)+(f&(1<<N)-1)];continue t}break}}while(r<i&&s<a);O=w>>3,r-=O,w-=O<<3,f&=(1<<w)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<a?257+(a-s):257-(s-a),P.hold=f,P.bits=w};const Vl=15,Px=852,Lx=592,Tx=0,dg=1,Rx=2,vM=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),yM=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wM=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bM=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),xM=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let c=0,d=0,p=0,g=0,f=0,w=0,S=0,k=0,v=0,x=0,_,N,O,U,q,F=null,M;const G=new Uint16Array(Vl+1),P=new Uint16Array(Vl+1);let L=null,Y,V,ae;for(c=0;c<=Vl;c++)G[c]=0;for(d=0;d<r;d++)G[t[n+d]]++;for(f=l,g=Vl;g>=1&&G[g]===0;g--);if(f>g&&(f=g),g===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<g&&G[p]===0;p++);for(f<p&&(f=p),k=1,c=1;c<=Vl;c++)if(k<<=1,k-=G[c],k<0)return-1;if(k>0&&(e===Tx||g!==1))return-1;for(P[1]=0,c=1;c<Vl;c++)P[c+1]=P[c]+G[c];for(d=0;d<r;d++)t[n+d]!==0&&(o[P[t[n+d]]++]=d);if(e===Tx?(F=L=o,M=20):e===dg?(F=vM,L=yM,M=257):(F=wM,L=bM,M=0),x=0,d=0,c=p,q=s,w=f,S=0,O=-1,v=1<<f,U=v-1,e===dg&&v>Px||e===Rx&&v>Lx)return 1;for(;;){Y=c-S,o[d]+1<M?(V=0,ae=o[d]):o[d]>=M?(V=L[o[d]-M],ae=F[o[d]-M]):(V=32+64,ae=0),_=1<<c-S,N=1<<w,p=N;do N-=_,i[q+(x>>S)+N]=Y<<24|V<<16|ae|0;while(N!==0);for(_=1<<c-1;x&_;)_>>=1;if(_!==0?(x&=_-1,x+=_):x=0,d++,--G[c]===0){if(c===g)break;c=t[n+o[d]]}if(c>f&&(x&U)!==O){for(S===0&&(S=f),q+=p,w=c-S,k=1<<w;w+S<g&&(k-=G[w+S],!(k<=0));)w++,k<<=1;if(v+=1<<w,e===dg&&v>Px||e===Rx&&v>Lx)return 1;O=x&U,i[O]=f<<24|w<<16|q-s|0}}return x!==0&&(i[q+x]=c-S<<24|64<<16|0),a.bits=f,0};var bd=xM;const _M=0,RN=1,IN=2,{Z_FINISH:Ix,Z_BLOCK:SM,Z_TREES:jf,Z_OK:xl,Z_STREAM_END:kM,Z_NEED_DICT:jM,Z_STREAM_ERROR:Ji,Z_DATA_ERROR:ON,Z_MEM_ERROR:FN,Z_BUF_ERROR:NM,Z_DEFLATED:Ox}=mh,Am=16180,Fx=16181,Dx=16182,Mx=16183,Bx=16184,Ux=16185,$x=16186,zx=16187,qx=16188,Vx=16189,Jp=16190,no=16191,hg=16192,Hx=16193,fg=16194,Wx=16195,Gx=16196,Kx=16197,Jx=16198,Nf=16199,Af=16200,Yx=16201,Zx=16202,Xx=16203,Qx=16204,e_=16205,pg=16206,t_=16207,n_=16208,mn=16209,DN=16210,MN=16211,AM=852,EM=592,CM=15,PM=CM,r_=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function LM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const jl=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Am||t.mode>MN?1:0},BN=e=>{if(jl(e))return Ji;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Am,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(AM),t.distcode=t.distdyn=new Int32Array(EM),t.sane=1,t.back=-1,xl},UN=e=>{if(jl(e))return Ji;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,BN(e)},$N=(e,t)=>{let n;if(jl(e))return Ji;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ji:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,UN(e))},zN=(e,t)=>{if(!e)return Ji;const n=new LM;e.state=n,n.strm=e,n.window=null,n.mode=Am;const r=$N(e,t);return r!==xl&&(e.state=null),r},TM=e=>zN(e,PM);let i_=!0,mg,gg;const RM=e=>{if(i_){mg=new Int32Array(512),gg=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(bd(RN,e.lens,0,288,mg,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;bd(IN,e.lens,0,32,gg,0,e.work,{bits:5}),i_=!1}e.lencode=mg,e.lenbits=9,e.distcode=gg,e.distbits=5},qN=(e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},IM=(e,t)=>{let n,r,i,s,o,a,l,c,d,p,g,f,w,S,k=0,v,x,_,N,O,U,q,F;const M=new Uint8Array(4);let G,P;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(jl(e)||!e.output||!e.input&&e.avail_in!==0)return Ji;n=e.state,n.mode===no&&(n.mode=hg),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,d=n.bits,p=a,g=l,F=xl;e:for(;;)switch(n.mode){case Am:if(n.wrap===0){n.mode=hg;break}for(;d<16;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,M[0]=c&255,M[1]=c>>>8&255,n.check=or(n.check,M,2,0),c=0,d=0,n.mode=Fx;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=mn;break}if((c&15)!==Ox){e.msg="unknown compression method",n.mode=mn;break}if(c>>>=4,d-=4,q=(c&15)+8,n.wbits===0&&(n.wbits=q),q>15||q>n.wbits){e.msg="invalid window size",n.mode=mn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?Vx:no,c=0,d=0;break;case Fx:for(;d<16;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(n.flags=c,(n.flags&255)!==Ox){e.msg="unknown compression method",n.mode=mn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=mn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,n.check=or(n.check,M,2,0)),c=0,d=0,n.mode=Dx;case Dx:for(;d<32;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,M[2]=c>>>16&255,M[3]=c>>>24&255,n.check=or(n.check,M,4,0)),c=0,d=0,n.mode=Mx;case Mx:for(;d<16;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,n.check=or(n.check,M,2,0)),c=0,d=0,n.mode=Bx;case Bx:if(n.flags&1024){for(;d<16;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,n.check=or(n.check,M,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=Ux;case Ux:if(n.flags&1024&&(f=n.length,f>a&&(f=a),f&&(n.head&&(q=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),q)),n.flags&512&&n.wrap&4&&(n.check=or(n.check,r,f,s)),a-=f,s+=f,n.length-=f),n.length))break e;n.length=0,n.mode=$x;case $x:if(n.flags&2048){if(a===0)break e;f=0;do q=r[s+f++],n.head&&q&&n.length<65536&&(n.head.name+=String.fromCharCode(q));while(q&&f<a);if(n.flags&512&&n.wrap&4&&(n.check=or(n.check,r,f,s)),a-=f,s+=f,q)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=zx;case zx:if(n.flags&4096){if(a===0)break e;f=0;do q=r[s+f++],n.head&&q&&n.length<65536&&(n.head.comment+=String.fromCharCode(q));while(q&&f<a);if(n.flags&512&&n.wrap&4&&(n.check=or(n.check,r,f,s)),a-=f,s+=f,q)break e}else n.head&&(n.head.comment=null);n.mode=qx;case qx:if(n.flags&512){for(;d<16;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=mn;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=no;break;case Vx:for(;d<32;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}e.adler=n.check=r_(c),c=0,d=0,n.mode=Jp;case Jp:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=d,jM;e.adler=n.check=1,n.mode=no;case no:if(t===SM||t===jf)break e;case hg:if(n.last){c>>>=d&7,d-=d&7,n.mode=pg;break}for(;d<3;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}switch(n.last=c&1,c>>>=1,d-=1,c&3){case 0:n.mode=Hx;break;case 1:if(RM(n),n.mode=Nf,t===jf){c>>>=2,d-=2;break e}break;case 2:n.mode=Gx;break;case 3:e.msg="invalid block type",n.mode=mn}c>>>=2,d-=2;break;case Hx:for(c>>>=d&7,d-=d&7;d<32;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=mn;break}if(n.length=c&65535,c=0,d=0,n.mode=fg,t===jf)break e;case fg:n.mode=Wx;case Wx:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;i.set(r.subarray(s,s+f),o),a-=f,s+=f,l-=f,o+=f,n.length-=f;break}n.mode=no;break;case Gx:for(;d<14;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(n.nlen=(c&31)+257,c>>>=5,d-=5,n.ndist=(c&31)+1,c>>>=5,d-=5,n.ncode=(c&15)+4,c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=mn;break}n.have=0,n.mode=Kx;case Kx:for(;n.have<n.ncode;){for(;d<3;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}n.lens[L[n.have++]]=c&7,c>>>=3,d-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,G={bits:n.lenbits},F=bd(_M,n.lens,0,19,n.lencode,0,n.work,G),n.lenbits=G.bits,F){e.msg="invalid code lengths set",n.mode=mn;break}n.have=0,n.mode=Jx;case Jx:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],v=k>>>24,x=k>>>16&255,_=k&65535,!(v<=d);){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(_<16)c>>>=v,d-=v,n.lens[n.have++]=_;else{if(_===16){for(P=v+2;d<P;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(c>>>=v,d-=v,n.have===0){e.msg="invalid bit length repeat",n.mode=mn;break}q=n.lens[n.have-1],f=3+(c&3),c>>>=2,d-=2}else if(_===17){for(P=v+3;d<P;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}c>>>=v,d-=v,q=0,f=3+(c&7),c>>>=3,d-=3}else{for(P=v+7;d<P;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}c>>>=v,d-=v,q=0,f=11+(c&127),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=mn;break}for(;f--;)n.lens[n.have++]=q}}if(n.mode===mn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=mn;break}if(n.lenbits=9,G={bits:n.lenbits},F=bd(RN,n.lens,0,n.nlen,n.lencode,0,n.work,G),n.lenbits=G.bits,F){e.msg="invalid literal/lengths set",n.mode=mn;break}if(n.distbits=6,n.distcode=n.distdyn,G={bits:n.distbits},F=bd(IN,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,G),n.distbits=G.bits,F){e.msg="invalid distances set",n.mode=mn;break}if(n.mode=Nf,t===jf)break e;case Nf:n.mode=Af;case Af:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=d,gM(e,g),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,d=n.bits,n.mode===no&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],v=k>>>24,x=k>>>16&255,_=k&65535,!(v<=d);){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(x&&!(x&240)){for(N=v,O=x,U=_;k=n.lencode[U+((c&(1<<N+O)-1)>>N)],v=k>>>24,x=k>>>16&255,_=k&65535,!(N+v<=d);){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}c>>>=N,d-=N,n.back+=N}if(c>>>=v,d-=v,n.back+=v,n.length=_,x===0){n.mode=e_;break}if(x&32){n.back=-1,n.mode=no;break}if(x&64){e.msg="invalid literal/length code",n.mode=mn;break}n.extra=x&15,n.mode=Yx;case Yx:if(n.extra){for(P=n.extra;d<P;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Zx;case Zx:for(;k=n.distcode[c&(1<<n.distbits)-1],v=k>>>24,x=k>>>16&255,_=k&65535,!(v<=d);){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(!(x&240)){for(N=v,O=x,U=_;k=n.distcode[U+((c&(1<<N+O)-1)>>N)],v=k>>>24,x=k>>>16&255,_=k&65535,!(N+v<=d);){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}c>>>=N,d-=N,n.back+=N}if(c>>>=v,d-=v,n.back+=v,x&64){e.msg="invalid distance code",n.mode=mn;break}n.offset=_,n.extra=x&15,n.mode=Xx;case Xx:if(n.extra){for(P=n.extra;d<P;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=mn;break}n.mode=Qx;case Qx:if(l===0)break e;if(f=g-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=mn;break}f>n.wnext?(f-=n.wnext,w=n.wsize-f):w=n.wnext-f,f>n.length&&(f=n.length),S=n.window}else S=i,w=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[o++]=S[w++];while(--f);n.length===0&&(n.mode=Af);break;case e_:if(l===0)break e;i[o++]=n.length,l--,n.mode=Af;break;case pg:if(n.wrap){for(;d<32;){if(a===0)break e;a--,c|=r[s++]<<d,d+=8}if(g-=l,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?or(n.check,i,g,o-g):Zd(n.check,i,g,o-g)),g=l,n.wrap&4&&(n.flags?c:r_(c))!==n.check){e.msg="incorrect data check",n.mode=mn;break}c=0,d=0}n.mode=t_;case t_:if(n.wrap&&n.flags){for(;d<32;){if(a===0)break e;a--,c+=r[s++]<<d,d+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=mn;break}c=0,d=0}n.mode=n_;case n_:F=kM;break e;case mn:F=ON;break e;case DN:return FN;case MN:default:return Ji}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=d,(n.wsize||g!==e.avail_out&&n.mode<mn&&(n.mode<pg||t!==Ix))&&qN(e,e.output,e.next_out,g-e.avail_out),p-=e.avail_in,g-=e.avail_out,e.total_in+=p,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?or(n.check,i,g,e.next_out-g):Zd(n.check,i,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===no?128:0)+(n.mode===Nf||n.mode===fg?256:0),(p===0&&g===0||t===Ix)&&F===xl&&(F=NM),F},OM=e=>{if(jl(e))return Ji;let t=e.state;return t.window&&(t.window=null),e.state=null,xl},FM=(e,t)=>{if(jl(e))return Ji;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,xl):Ji},DM=(e,t)=>{const n=t.length;let r,i,s;return jl(e)||(r=e.state,r.wrap!==0&&r.mode!==Jp)?Ji:r.mode===Jp&&(i=1,i=Zd(i,t,n,0),i!==r.check)?ON:(s=qN(e,t,n,n),s?(r.mode=DN,FN):(r.havedict=1,xl))};var MM=UN,BM=$N,UM=BN,$M=TM,zM=zN,qM=IM,VM=OM,HM=FM,WM=DM,GM="pako inflate (from Nodeca project)",ao={inflateReset:MM,inflateReset2:BM,inflateResetKeep:UM,inflateInit:$M,inflateInit2:zM,inflate:qM,inflateEnd:VM,inflateGetHeader:HM,inflateSetDictionary:WM,inflateInfo:GM};function KM(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var JM=KM;const VN=Object.prototype.toString,{Z_NO_FLUSH:YM,Z_FINISH:ZM,Z_OK:eh,Z_STREAM_END:vg,Z_NEED_DICT:yg,Z_STREAM_ERROR:XM,Z_DATA_ERROR:s_,Z_MEM_ERROR:QM}=mh;function vh(e){this.options=Nm.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new LN,this.strm.avail_out=0;let n=ao.inflateInit2(this.strm,t.windowBits);if(n!==eh)throw new Error(Uc[n]);if(this.header=new JM,ao.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Qd.string2buf(t.dictionary):VN.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ao.inflateSetDictionary(this.strm,t.dictionary),n!==eh)))throw new Error(Uc[n])}vh.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?ZM:YM,VN.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=ao.inflate(n,o),s===yg&&i&&(s=ao.inflateSetDictionary(n,i),s===eh?s=ao.inflate(n,o):s===s_&&(s=yg));n.avail_in>0&&s===vg&&n.state.wrap>0&&e[n.next_in]!==0;)ao.inflateReset(n),s=ao.inflate(n,o);switch(s){case XM:case s_:case yg:case QM:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===vg))if(this.options.to==="string"){let l=Qd.utf8border(n.output,n.next_out),c=n.next_out-l,d=Qd.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===eh&&a===0)){if(s===vg)return s=ao.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};vh.prototype.onData=function(e){this.chunks.push(e)};vh.prototype.onEnd=function(e){e===eh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Nm.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function b2(e,t){const n=new vh(t);if(n.push(e),n.err)throw n.msg||Uc[n.err];return n.result}function e9(e,t){return t=t||{},t.raw=!0,b2(e,t)}var t9=vh,n9=b2,r9=e9,i9=b2,s9=mh,o9={Inflate:t9,inflate:n9,inflateRaw:r9,ungzip:i9,constants:s9};const{Inflate:a9,inflate:l9,inflateRaw:_$,ungzip:S$}=o9;var o_=a9,c9=l9;const HN=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;HN[e]=t}const a_=4294967295;function u9(e,t,n){let r=e;for(let i=0;i<n;i++)r=HN[(r^t[i])&255]^r>>>8;return r}function d9(e,t){return(u9(a_,e,t)^a_)>>>0}function l_(e,t,n){const r=e.readUint32(),i=d9(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function WN(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function GN(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function KN(e,t,n,r){let i=0;if(n.length===0)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function JN(e,t,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(n[s]>>1)&255;for(;s<r;s++)t[s]=e[s]+(t[s-i]+n[s]>>1)&255}}function YN(e,t,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+n[s]&255;for(;s<r;s++)t[s]=e[s]+h9(t[s-i],n[s],n[s-i])&255}}function h9(e,t,n){const r=e+t-n,i=Math.abs(r-e),s=Math.abs(r-t),o=Math.abs(r-n);return i<=s&&i<=o?e:s<=o?t:n}function f9(e,t,n,r,i,s){switch(e){case 0:WN(t,n,i);break;case 1:GN(t,n,i,s);break;case 2:KN(t,n,r,i);break;case 3:JN(t,n,r,i,s);break;case 4:YN(t,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const p9=new Uint16Array([255]),m9=new Uint8Array(p9.buffer),g9=m9[0]===255;function v9(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*n*a);let c=0;for(let d=0;d<7;d++){const p=o[d],g=Math.ceil((n-p.x)/p.xStep),f=Math.ceil((r-p.y)/p.yStep);if(g<=0||f<=0)continue;const w=g*a,S=new Uint8Array(w);for(let k=0;k<f;k++){const v=t[c++],x=t.subarray(c,c+w);c+=w;const _=new Uint8Array(w);f9(v,x,_,S,w,a),S.set(_);for(let N=0;N<g;N++){const O=p.x+N*p.xStep,U=p.y+k*p.yStep;if(!(O>=n||U>=r))for(let q=0;q<a;q++)l[(U*n+O)*a+q]=_[N*a+q]}}}if(s===16){const d=new Uint16Array(l.buffer);if(g9)for(let p=0;p<d.length;p++)d[p]=y9(d[p]);return d}else return l}function y9(e){return(e&255)<<8|e>>8&255}const w9=new Uint16Array([255]),b9=new Uint8Array(w9.buffer),x9=b9[0]===255,_9=new Uint8Array(0);function c_(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*n),l=new Uint8Array(r*a);let c=_9,d=0,p,g;for(let f=0;f<r;f++){switch(p=t.subarray(d+1,d+1+a),g=l.subarray(f*a,(f+1)*a),t[d]){case 0:WN(p,g,a);break;case 1:GN(p,g,a,o);break;case 2:KN(p,g,c,a);break;case 3:JN(p,g,c,a,o);break;case 4:YN(p,g,c,a,o);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}c=g,d+=a+1}if(s===16){const f=new Uint16Array(l.buffer);if(x9)for(let w=0;w<f.length;w++)f[w]=S9(f[w]);return f}else return l}function S9(e){return(e&255)<<8|e>>8&255}const tp=Uint8Array.of(137,80,78,71,13,10,26,10);function u_(e){if(!k9(e.readBytes(tp.length)))throw new Error("wrong PNG signature")}function k9(e){if(e.length<tp.length)return!1;for(let t=0;t<tp.length;t++)if(e[t]!==tp[t])return!1;return!0}const j9="tEXt",N9=0,ZN=new TextDecoder("latin1");function A9(e){if(C9(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const E9=/^[\u0000-\u00FF]*$/;function C9(e){if(!E9.test(e))throw new Error("invalid latin1 text")}function P9(e,t,n){const r=XN(t);e[r]=L9(t,n-r.length-1)}function XN(e){for(e.mark();e.readByte()!==N9;);const t=e.offset;e.reset();const n=ZN.decode(e.readBytes(t-e.offset-1));return e.skip(1),A9(n),n}function L9(e,t){return ZN.decode(e.readBytes(t))}const wi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},wg={UNKNOWN:-1,DEFLATE:0},d_={UNKNOWN:-1,ADAPTIVE:0},bg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ef={NONE:0,BACKGROUND:1,PREVIOUS:2},xg={SOURCE:0,OVER:1};class T9 extends f2{constructor(n,r={}){super(n);Kt(this,"_checkCrc");Kt(this,"_inflator");Kt(this,"_png");Kt(this,"_apng");Kt(this,"_end");Kt(this,"_hasPalette");Kt(this,"_palette");Kt(this,"_hasTransparency");Kt(this,"_transparency");Kt(this,"_compressionMethod");Kt(this,"_filterMethod");Kt(this,"_interlaceMethod");Kt(this,"_colorType");Kt(this,"_isAnimated");Kt(this,"_numberOfFrames");Kt(this,"_numberOfPlays");Kt(this,"_frames");Kt(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new o_,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=wg.UNKNOWN,this._filterMethod=d_.UNKNOWN,this._interlaceMethod=bg.UNKNOWN,this._colorType=wi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(u_(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(u_(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case j9:P9(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?l_(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?l_(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=R9(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case wi.GREYSCALE:i=1;break;case wi.TRUECOLOUR:i=3;break;case wi.INDEXED_COLOUR:i=1;break;case wi.GREYSCALE_ALPHA:i=2;break;case wi.TRUECOLOUR_ALPHA:i=4;break;case wi.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==wg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case wi.GREYSCALE:case wi.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case wi.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case wi.UNKNOWN:case wi.GREYSCALE_ALPHA:case wi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=XN(this),i=this.readUint8();if(i!==wg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:c9(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=c_({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case Ef.NONE:break;case Ef.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const a=(s*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[a+l]=0}break;case Ef.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,a)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,c=(o*r.width+a)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case xg.SOURCE:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let d=0;d<this._png.channels;d++)n.data[l+d]=r.data[c+d]}break;case xg.OVER:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let d=0;d<this._png.channels;d++){const p=r.data[c+this._png.channels-1]/i,g=d%(this._png.channels-1)===0?1:r.data[c+d],f=Math.floor(p*g+(1-p)*n.data[l+d]);n.data[l+d]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==d_.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===bg.NO_INTERLACE)this._png.data=c_({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===bg.ADAM7)this._png.data=v9({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ef.NONE,blendOp:xg.SOURCE,data:n}),this._inflator=new o_,this._writingDataChunks=!1}}function R9(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var h_;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(h_||(h_={}));function I9(e,t){return new T9(e,t).decode()}var pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function _g(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var tn={log:_g,warn:function(e){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):_g.call(null,arguments))},error:function(e){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):_g(e))}};function Sg(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Xa(r.response,t,n)},r.onerror=function(){tn.error("could not download file")},r.send()}function f_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Cf(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Xa=pt.saveAs||((typeof window>"u"?"undefined":Jt(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=pt.URL||pt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?f_(i.href)?Sg(e,t,n):Cf(i,i.target="_blank"):Cf(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Cf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(f_(e))Sg(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Cf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Jt(s)!=="object"&&(tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Sg(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(pt.HTMLElement)||pt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Jt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(e)}else{var l=pt.URL||pt.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function QN(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var np=pt.atob.bind(pt),p_=pt.btoa.bind(pt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function kg(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=kr(n,r,i,s,t[0],7,-680876936),s=kr(s,n,r,i,t[1],12,-389564586),i=kr(i,s,n,r,t[2],17,606105819),r=kr(r,i,s,n,t[3],22,-1044525330),n=kr(n,r,i,s,t[4],7,-176418897),s=kr(s,n,r,i,t[5],12,1200080426),i=kr(i,s,n,r,t[6],17,-1473231341),r=kr(r,i,s,n,t[7],22,-45705983),n=kr(n,r,i,s,t[8],7,1770035416),s=kr(s,n,r,i,t[9],12,-1958414417),i=kr(i,s,n,r,t[10],17,-42063),r=kr(r,i,s,n,t[11],22,-1990404162),n=kr(n,r,i,s,t[12],7,1804603682),s=kr(s,n,r,i,t[13],12,-40341101),i=kr(i,s,n,r,t[14],17,-1502002290),n=jr(n,r=kr(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=jr(s,n,r,i,t[6],9,-1069501632),i=jr(i,s,n,r,t[11],14,643717713),r=jr(r,i,s,n,t[0],20,-373897302),n=jr(n,r,i,s,t[5],5,-701558691),s=jr(s,n,r,i,t[10],9,38016083),i=jr(i,s,n,r,t[15],14,-660478335),r=jr(r,i,s,n,t[4],20,-405537848),n=jr(n,r,i,s,t[9],5,568446438),s=jr(s,n,r,i,t[14],9,-1019803690),i=jr(i,s,n,r,t[3],14,-187363961),r=jr(r,i,s,n,t[8],20,1163531501),n=jr(n,r,i,s,t[13],5,-1444681467),s=jr(s,n,r,i,t[2],9,-51403784),i=jr(i,s,n,r,t[7],14,1735328473),n=Nr(n,r=jr(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=Nr(s,n,r,i,t[8],11,-2022574463),i=Nr(i,s,n,r,t[11],16,1839030562),r=Nr(r,i,s,n,t[14],23,-35309556),n=Nr(n,r,i,s,t[1],4,-1530992060),s=Nr(s,n,r,i,t[4],11,1272893353),i=Nr(i,s,n,r,t[7],16,-155497632),r=Nr(r,i,s,n,t[10],23,-1094730640),n=Nr(n,r,i,s,t[13],4,681279174),s=Nr(s,n,r,i,t[0],11,-358537222),i=Nr(i,s,n,r,t[3],16,-722521979),r=Nr(r,i,s,n,t[6],23,76029189),n=Nr(n,r,i,s,t[9],4,-640364487),s=Nr(s,n,r,i,t[12],11,-421815835),i=Nr(i,s,n,r,t[15],16,530742520),n=Ar(n,r=Nr(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=Ar(s,n,r,i,t[7],10,1126891415),i=Ar(i,s,n,r,t[14],15,-1416354905),r=Ar(r,i,s,n,t[5],21,-57434055),n=Ar(n,r,i,s,t[12],6,1700485571),s=Ar(s,n,r,i,t[3],10,-1894986606),i=Ar(i,s,n,r,t[10],15,-1051523),r=Ar(r,i,s,n,t[1],21,-2054922799),n=Ar(n,r,i,s,t[8],6,1873313359),s=Ar(s,n,r,i,t[15],10,-30611744),i=Ar(i,s,n,r,t[6],15,-1560198380),r=Ar(r,i,s,n,t[13],21,1309151649),n=Ar(n,r,i,s,t[4],6,-145523070),s=Ar(s,n,r,i,t[11],10,-1120210379),i=Ar(i,s,n,r,t[2],15,718787259),r=Ar(r,i,s,n,t[9],21,-343485551),e[0]=ta(n,e[0]),e[1]=ta(r,e[1]),e[2]=ta(i,e[2]),e[3]=ta(s,e[3])}function Em(e,t,n,r,i,s){return t=ta(ta(t,e),ta(r,s)),ta(t<<i|t>>>32-i,n)}function kr(e,t,n,r,i,s,o){return Em(t&n|~t&r,e,t,i,s,o)}function jr(e,t,n,r,i,s,o){return Em(t&r|n&~r,e,t,i,s,o)}function Nr(e,t,n,r,i,s,o){return Em(t^n^r,e,t,i,s,o)}function Ar(e,t,n,r,i,s,o){return Em(n^(t|~r),e,t,i,s,o)}function eA(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)kg(r,O9(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(kg(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,kg(r,i),r}function O9(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var m_="0123456789abcdef".split("");function F9(e){for(var t="",n=0;n<4;n++)t+=m_[e>>8*n+4&15]+m_[e>>8*n&15];return t}function D9(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function pv(e){return eA(e).map(D9).join("")}var M9=function(e){for(var t=0;t<e.length;t++)e[t]=F9(e[t]);return e.join("")}(eA("hello"))!="5d41402abc4b2a76b9719d911017c592";function ta(e,t){if(M9){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function mv(e,t){var n,r,i,s;if(e!==n){for(var o=(i=e,s=1+(256/e.length|0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=e,r=a}else a=r;var p=t.length,g=0,f=0,w="";for(l=0;l<p;l++)f=(f+(d=a[g=(g+1)%256]))%256,a[g]=a[f],a[f]=d,o=a[(a[g]+a[f])%256],w+=String.fromCharCode(t.charCodeAt(l)^o);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var g_={print:4,modify:8,copy:16,"annot-forms":32};function Yl(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(g_.perm!==void 0)throw new Error("Invalid permission: "+a);i+=g_[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=pv(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=mv(this.encryptionKey,this.padding)}function Zl(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function v_(e){if(Jt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var o=t[n][s];try{o[0].apply(e,r)}catch(a){pt.console&&tn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Yp(e){if(!(this instanceof Yp))return new Yp(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function tA(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function tl(e,t,n,r,i){if(!(this instanceof tl))return new tl(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,tA.call(this,r,i)}function mc(e,t,n,r,i){if(!(this instanceof mc))return new mc(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,tA.call(this,r,i)}function Xe(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;Jt(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,g={},f={internal:{},__private__:{}};f.__private__.PubSub=v_;var w="1.3",S=f.__private__.getPdfVersion=function(){return w};f.__private__.setPdfVersion=function(y){w=y};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return k};var v=f.__private__.getPageFormat=function(y){return k[y]};i=i||"a4";var x="compat",_="advanced",N=x;function O(){this.saveGraphicsState(),Z(new lt(He,0,0,-He,0,La()*He).toString()+" cm"),this.setFontSize(this.getFontSize()/He),c="n",N=_}function U(){this.restoreGraphicsState(),c="S",N=x}var q=f.__private__.combineFontStyleAndFontWeight=function(y,E){if(y=="bold"&&E=="normal"||y=="bold"&&E==400||y=="normal"&&E=="italic"||y=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(y=E==400||E==="normal"?y==="italic"?"italic":"normal":E!=700&&E!=="bold"||y!=="normal"?(E==700?"bold":E)+""+y:"bold"),y};f.advancedAPI=function(y){var E=N===x;return E&&O.call(this),typeof y!="function"||(y(this),E&&U.call(this)),this},f.compatAPI=function(y){var E=N===_;return E&&U.call(this),typeof y!="function"||(y(this),E&&O.call(this)),this},f.isAdvancedAPI=function(){return N===_};var F,M=function(y){if(N!==_)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=f.roundToPrecision=f.__private__.roundToPrecision=function(y,E){var K=t||E;if(isNaN(y)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(K).replace(/0+$/,"")};F=f.hpf=f.__private__.hpf=typeof l=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return G(y,l)}:l==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return G(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return G(y,16)};var P=f.f2=f.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return G(y,2)},L=f.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return G(y,3)},Y=f.scale=f.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return N===x?y*He:N===_?y:void 0},V=function(y){return Y(function(E){return N===x?La()-E:N===_?E:void 0}(y))};f.__private__.setPrecision=f.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(t=parseInt(y,10))};var ae,de="00000000000000000000000000000000",ce=f.__private__.getFileId=function(){return de},J=f.__private__.setFileId=function(y){return de=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():de.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(zt=new Yl(d.userPermissions,d.userPassword,d.ownerPassword,de)),de};f.setFileId=function(y){return J(y),this},f.getFileId=function(){return ce()};var ie=f.__private__.convertDateToPDFDate=function(y){var E=y.getTimezoneOffset(),K=E<0?"+":"-",Q=Math.floor(Math.abs(E/60)),le=Math.abs(E%60),be=[K,B(Q),"'",B(le),"'"].join("");return["D:",y.getFullYear(),B(y.getMonth()+1),B(y.getDate()),B(y.getHours()),B(y.getMinutes()),B(y.getSeconds()),be].join("")},te=f.__private__.convertPDFDateToDate=function(y){var E=parseInt(y.substr(2,4),10),K=parseInt(y.substr(6,2),10)-1,Q=parseInt(y.substr(8,2),10),le=parseInt(y.substr(10,2),10),be=parseInt(y.substr(12,2),10),je=parseInt(y.substr(14,2),10);return new Date(E,K,Q,le,be,je,0)},se=f.__private__.setCreationDate=function(y){var E;if(y===void 0&&(y=new Date),y instanceof Date)E=ie(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=y}return ae=E},A=f.__private__.getCreationDate=function(y){var E=ae;return y==="jsDate"&&(E=te(ae)),E};f.setCreationDate=function(y){return se(y),this},f.getCreationDate=function(y){return A(y)};var z,B=f.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},X=f.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},ee=0,oe=[],ge=[],he=0,me=[],Se=[],Pe=!1,Le=ge;f.__private__.setCustomOutputDestination=function(y){Pe=!0,Le=y};var ve=function(y){Pe||(Le=y)};f.__private__.resetCustomOutputDestination=function(){Pe=!1,Le=ge};var Z=f.__private__.out=function(y){return y=y.toString(),he+=y.length+1,Le.push(y),Le},st=f.__private__.write=function(y){return Z(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},ht=f.__private__.getArrayBuffer=function(y){for(var E=y.length,K=new ArrayBuffer(E),Q=new Uint8Array(K);E--;)Q[E]=y.charCodeAt(E);return K},rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return rt};var Ne=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(y){return Ne=N===_?y/He:y,this};var Me,Oe=f.__private__.getFontSize=f.getFontSize=function(){return N===x?Ne:Ne*He},ot=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(y){return ot=y,this},f.__private__.getR2L=f.getR2L=function(){return ot};var Ke,At=f.__private__.setZoomMode=function(y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))Me=y;else if(isNaN(y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');Me=y}else Me=parseInt(y,10)};f.__private__.getZoomMode=function(){return Me};var Ae,Ie=f.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');Ke=y};f.__private__.getPageMode=function(){return Ke};var yt=f.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');Ae=y};f.__private__.getLayoutMode=function(){return Ae},f.__private__.setDisplayMode=f.setDisplayMode=function(y,E,K){return At(y),yt(E),Ie(K),this};var mt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(y){if(Object.keys(mt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return mt[y]},f.__private__.getDocumentProperties=function(){return mt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(y){for(var E in mt)mt.hasOwnProperty(E)&&y[E]&&(mt[E]=y[E]);return this},f.__private__.setDocumentProperty=function(y,E){if(Object.keys(mt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return mt[y]=E};var tt,He,Qe,Zt,Rt,Je={},gt={},Vt=[],at={},Et={},wt={},vn={},jn=null,Ut=0,ut=[],Dt=new v_(f),_s=e.hotfixes||[],ir={},Yi={},si=[],lt=function y(E,K,Q,le,be,je){if(!(this instanceof y))return new y(E,K,Q,le,be,je);isNaN(E)&&(E=1),isNaN(K)&&(K=0),isNaN(Q)&&(Q=0),isNaN(le)&&(le=1),isNaN(be)&&(be=0),isNaN(je)&&(je=0),this._matrix=[E,K,Q,le,be,je]};Object.defineProperty(lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),lt.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(y)},lt.prototype.multiply=function(y){var E=y.sx*this.sx+y.shy*this.shx,K=y.sx*this.shy+y.shy*this.sy,Q=y.shx*this.sx+y.sy*this.shx,le=y.shx*this.shy+y.sy*this.sy,be=y.tx*this.sx+y.ty*this.shx+this.tx,je=y.tx*this.shy+y.ty*this.sy+this.ty;return new lt(E,K,Q,le,be,je)},lt.prototype.decompose=function(){var y=this.sx,E=this.shy,K=this.shx,Q=this.sy,le=this.tx,be=this.ty,je=Math.sqrt(y*y+E*E),Ve=(y/=je)*K+(E/=je)*Q;K-=y*Ve,Q-=E*Ve;var Ze=Math.sqrt(K*K+Q*Q);return Ve/=Ze,y*(Q/=Ze)<E*(K/=Ze)&&(y=-y,E=-E,Ve=-Ve,je=-je),{scale:new lt(je,0,0,Ze,0,0),translate:new lt(1,0,0,1,le,be),rotate:new lt(y,E,-E,y,0,0),skew:new lt(1,0,Ve,1,0,0)}},lt.prototype.toString=function(y){return this.join(" ")},lt.prototype.inversed=function(){var y=this.sx,E=this.shy,K=this.shx,Q=this.sy,le=this.tx,be=this.ty,je=1/(y*Q-E*K),Ve=Q*je,Ze=-E*je,vt=-K*je,xt=y*je;return new lt(Ve,Ze,vt,xt,-Ve*le-vt*be,-Ze*le-xt*be)},lt.prototype.applyToPoint=function(y){var E=y.x*this.sx+y.y*this.shx+this.tx,K=y.x*this.shy+y.y*this.sy+this.ty;return new Ca(E,K)},lt.prototype.applyToRectangle=function(y){var E=this.applyToPoint(y),K=this.applyToPoint(new Ca(y.x+y.w,y.y+y.h));return new uu(E.x,E.y,K.x-E.x,K.y-E.y)},lt.prototype.clone=function(){var y=this.sx,E=this.shy,K=this.shx,Q=this.sy,le=this.tx,be=this.ty;return new lt(y,E,K,Q,le,be)},f.Matrix=lt;var Zi=f.matrixMult=function(y,E){return E.multiply(y)},Xi=new lt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Xi;var Vr=function(y,E){if(!Et[y]){var K=(E instanceof tl?"Sh":"P")+(Object.keys(at).length+1).toString(10);E.id=K,Et[y]=K,at[K]=E,Dt.publish("addPattern",E)}};f.ShadingPattern=tl,f.TilingPattern=mc,f.addShadingPattern=function(y,E){return M("addShadingPattern()"),Vr(y,E),this},f.beginTilingPattern=function(y){M("beginTilingPattern()"),du(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},f.endTilingPattern=function(y,E){M("endTilingPattern()"),E.stream=Se[z].join(`
`),Vr(y,E),Dt.publish("endTilingPattern",E),si.pop().restore()};var wr,ft=f.__private__.newObject=function(){var y=zn();return Jn(y,!0),y},zn=f.__private__.newObjectDeferred=function(){return ee++,oe[ee]=function(){return he},ee},Jn=function(y,E){return E=typeof E=="boolean"&&E,oe[y]=he,E&&Z(y+" 0 obj"),y},oi=f.__private__.newAdditionalObject=function(){var y={objId:zn(),content:""};return me.push(y),y},ai=zn(),Hr=zn(),Qi=f.__private__.decodeColorString=function(y){var E=y.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length!==5||E[4]!=="k"&&E[4]!=="K"||(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var K=parseFloat(E[0]);E=[K,K,K,"r"]}for(var Q="#",le=0;le<3;le++)Q+=("0"+Math.floor(255*parseFloat(E[le])).toString(16)).slice(-2);return Q},li=f.__private__.encodeColorString=function(y){var E;typeof y=="string"&&(y={ch1:y});var K=y.ch1,Q=y.ch2,le=y.ch3,be=y.ch4,je=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var Ve=new QN(K);if(Ve.ok)K=Ve.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var Ze=parseInt(K.substr(1),16);K=Ze>>16&255,Q=Ze>>8&255,le=255&Ze}if(Q===void 0||be===void 0&&K===Q&&Q===le)E=typeof K=="string"?K+" "+je[0]:y.precision===2?P(K/255)+" "+je[0]:L(K/255)+" "+je[0];else if(be===void 0||Jt(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return["1.","1.","1.",je[1]].join(" ");E=typeof K=="string"?[K,Q,le,je[1]].join(" "):y.precision===2?[P(K/255),P(Q/255),P(le/255),je[1]].join(" "):[L(K/255),L(Q/255),L(le/255),je[1]].join(" ")}else E=typeof K=="string"?[K,Q,le,be,je[2]].join(" "):y.precision===2?[P(K),P(Q),P(le),P(be),je[2]].join(" "):[L(K),L(Q),L(le),L(be),je[2]].join(" ");return E},ci=f.__private__.getFilters=function(){return o},Rr=f.__private__.putStream=function(y){var E=(y=y||{}).data||"",K=y.filters||ci(),Q=y.alreadyAppliedFilters||[],le=y.addLength1||!1,be=E.length,je=y.objectId,Ve=function(Yn){return Yn};if(d!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ve=zt.encryptor(je,0));var Ze={};K===!0&&(K=["FlateEncode"]);var vt=y.additionalKeyValues||[],xt=(Ze=Xe.API.processDataByFilters!==void 0?Xe.API.processDataByFilters(E,K):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(Q)?Q.join(" "):Q.toString());if(Ze.data.length!==0&&(vt.push({key:"Length",value:Ze.data.length}),le===!0&&vt.push({key:"Length1",value:be})),xt.length!=0)if(xt.split("/").length-1==1)vt.push({key:"Filter",value:xt});else{vt.push({key:"Filter",value:"["+xt+"]"});for(var Mt=0;Mt<vt.length;Mt+=1)if(vt[Mt].key==="DecodeParms"){for(var yn=[],Vn=0;Vn<Ze.reverseChain.split("/").length-1;Vn+=1)yn.push("null");yn.push(vt[Mt].value),vt[Mt].value="["+yn.join(" ")+"]"}}Z("<<");for(var sn=0;sn<vt.length;sn++)Z("/"+vt[sn].key+" "+vt[sn].value);Z(">>"),Ze.data.length!==0&&(Z("stream"),Z(Ve(Ze.data)),Z("endstream"))},es=f.__private__.putPage=function(y){var E=y.number,K=y.data,Q=y.objId,le=y.contentsObjId;Jn(Q,!0),Z("<</Type /Page"),Z("/Parent "+y.rootDictionaryObjId+" 0 R"),Z("/Resources "+y.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(F(y.mediaBox.bottomLeftX))+" "+parseFloat(F(y.mediaBox.bottomLeftY))+" "+F(y.mediaBox.topRightX)+" "+F(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&Z("/CropBox ["+F(y.cropBox.bottomLeftX)+" "+F(y.cropBox.bottomLeftY)+" "+F(y.cropBox.topRightX)+" "+F(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&Z("/BleedBox ["+F(y.bleedBox.bottomLeftX)+" "+F(y.bleedBox.bottomLeftY)+" "+F(y.bleedBox.topRightX)+" "+F(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&Z("/TrimBox ["+F(y.trimBox.bottomLeftX)+" "+F(y.trimBox.bottomLeftY)+" "+F(y.trimBox.topRightX)+" "+F(y.trimBox.topRightY)+"]"),y.artBox!==null&&Z("/ArtBox ["+F(y.artBox.bottomLeftX)+" "+F(y.artBox.bottomLeftY)+" "+F(y.artBox.topRightX)+" "+F(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&Z("/UserUnit "+y.userUnit),Dt.publish("putPage",{objId:Q,pageContext:ut[E],pageNumber:E,page:K}),Z("/Contents "+le+" 0 R"),Z(">>"),Z("endobj");var be=K.join(`
`);return N===_&&(be+=`
Q`),Jn(le,!0),Rr({data:be,filters:ci(),objectId:le}),Z("endobj"),Q},Ri=f.__private__.putPages=function(){var y,E,K=[];for(y=1;y<=Ut;y++)ut[y].objId=zn(),ut[y].contentsObjId=zn();for(y=1;y<=Ut;y++)K.push(es({number:y,data:Se[y],objId:ut[y].objId,contentsObjId:ut[y].contentsObjId,mediaBox:ut[y].mediaBox,cropBox:ut[y].cropBox,bleedBox:ut[y].bleedBox,trimBox:ut[y].trimBox,artBox:ut[y].artBox,userUnit:ut[y].userUnit,rootDictionaryObjId:ai,resourceDictionaryObjId:Hr}));Jn(ai,!0),Z("<</Type /Pages");var Q="/Kids [";for(E=0;E<Ut;E++)Q+=K[E]+" 0 R ";Z(Q+"]"),Z("/Count "+Ut),Z(">>"),Z("endobj"),Dt.publish("postPutPages")},ts=function(y){Dt.publish("putFont",{font:y,out:Z,newObject:ft,putStream:Rr}),y.isAlreadyPutted!==!0&&(y.objectNumber=ft(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+Zl(y.postScriptName)),Z("/Subtype /Type1"),typeof y.encoding=="string"&&Z("/Encoding /"+y.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},So=function(y){y.objectNumber=ft();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[F(y.x),F(y.y),F(y.x+y.width),F(y.y+y.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var K=y.pages[1].join(`
`);Rr({data:K,additionalKeyValues:E,objectId:y.objectNumber}),Z("endobj")},qs=function(y,E){E||(E=21);var K=ft(),Q=function(je,Ve){var Ze,vt=[],xt=1/(Ve-1);for(Ze=0;Ze<1;Ze+=xt)vt.push(Ze);if(vt.push(1),je[0].offset!=0){var Mt={offset:0,color:je[0].color};je.unshift(Mt)}if(je[je.length-1].offset!=1){var yn={offset:1,color:je[je.length-1].color};je.push(yn)}for(var Vn="",sn=0,Yn=0;Yn<vt.length;Yn++){for(Ze=vt[Yn];Ze>je[sn+1].offset;)sn++;var Hn=je[sn].offset,ur=(Ze-Hn)/(je[sn+1].offset-Hn),Ii=je[sn].color,Gr=je[sn+1].color;Vn+=X(Math.round((1-ur)*Ii[0]+ur*Gr[0]).toString(16))+X(Math.round((1-ur)*Ii[1]+ur*Gr[1]).toString(16))+X(Math.round((1-ur)*Ii[2]+ur*Gr[2]).toString(16))}return Vn.trim()}(y.colors,E),le=[];le.push({key:"FunctionType",value:"0"}),le.push({key:"Domain",value:"[0.0 1.0]"}),le.push({key:"Size",value:"["+E+"]"}),le.push({key:"BitsPerSample",value:"8"}),le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rr({data:Q,additionalKeyValues:le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),Z("endobj"),y.objectNumber=ft(),Z("<< /ShadingType "+y.type),Z("/ColorSpace /DeviceRGB");var be="/Coords ["+F(parseFloat(y.coords[0]))+" "+F(parseFloat(y.coords[1]))+" ";y.type===2?be+=F(parseFloat(y.coords[2]))+" "+F(parseFloat(y.coords[3])):be+=F(parseFloat(y.coords[2]))+" "+F(parseFloat(y.coords[3]))+" "+F(parseFloat(y.coords[4]))+" "+F(parseFloat(y.coords[5])),Z(be+="]"),y.matrix&&Z("/Matrix ["+y.matrix.toString()+"]"),Z("/Function "+K+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},ko=function(y,E){var K=zn(),Q=ft();E.push({resourcesOid:K,objectOid:Q}),y.objectNumber=Q;var le=[];le.push({key:"Type",value:"/Pattern"}),le.push({key:"PatternType",value:"1"}),le.push({key:"PaintType",value:"1"}),le.push({key:"TilingType",value:"1"}),le.push({key:"BBox",value:"["+y.boundingBox.map(F).join(" ")+"]"}),le.push({key:"XStep",value:F(y.xStep)}),le.push({key:"YStep",value:F(y.yStep)}),le.push({key:"Resources",value:K+" 0 R"}),y.matrix&&le.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),Rr({data:y.stream,additionalKeyValues:le,objectId:y.objectNumber}),Z("endobj")},Vs=function(y){for(var E in y.objectNumber=ft(),Z("<<"),y)switch(E){case"opacity":Z("/ca "+P(y[E]));break;case"stroke-opacity":Z("/CA "+P(y[E]))}Z(">>"),Z("endobj")},ka=function(y){Jn(y.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var E in Z("/Font <<"),Je)Je.hasOwnProperty(E)&&(p===!1||p===!0&&g.hasOwnProperty(E))&&Z("/"+E+" "+Je[E].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(at).length>0){for(var E in Z("/Shading <<"),at)at.hasOwnProperty(E)&&at[E]instanceof tl&&at[E].objectNumber>=0&&Z("/"+E+" "+at[E].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),Z(">>")}}(),function(E){if(Object.keys(at).length>0){for(var K in Z("/Pattern <<"),at)at.hasOwnProperty(K)&&at[K]instanceof f.TilingPattern&&at[K].objectNumber>=0&&at[K].objectNumber<E&&Z("/"+K+" "+at[K].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),Z(">>")}}(y.objectOid),function(){if(Object.keys(wt).length>0){var E;for(E in Z("/ExtGState <<"),wt)wt.hasOwnProperty(E)&&wt[E].objectNumber>=0&&Z("/"+E+" "+wt[E].objectNumber+" 0 R");Dt.publish("putGStateDict"),Z(">>")}}(),function(){for(var E in Z("/XObject <<"),ir)ir.hasOwnProperty(E)&&ir[E].objectNumber>=0&&Z("/"+E+" "+ir[E].objectNumber+" 0 R");Dt.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},Al=function(y){gt[y.fontName]=gt[y.fontName]||{},gt[y.fontName][y.fontStyle]=y.id},De=function(y,E,K,Q,le){var be={id:"F"+(Object.keys(Je).length+1).toString(10),postScriptName:y,fontName:E,fontStyle:K,encoding:Q,isStandardFont:le||!1,metadata:{}};return Dt.publish("addFont",{font:be,instance:this}),Je[be.id]=be,Al(be),be.id},_e=f.__private__.pdfEscape=f.pdfEscape=function(y,E){return function(K,Q){var le,be,je,Ve,Ze,vt,xt,Mt,yn;if(je=(Q=Q||{}).sourceEncoding||"Unicode",Ze=Q.outputEncoding,(Q.autoencode||Ze)&&Je[tt].metadata&&Je[tt].metadata[je]&&Je[tt].metadata[je].encoding&&(Ve=Je[tt].metadata[je].encoding,!Ze&&Je[tt].encoding&&(Ze=Je[tt].encoding),!Ze&&Ve.codePages&&(Ze=Ve.codePages[0]),typeof Ze=="string"&&(Ze=Ve[Ze]),Ze)){for(xt=!1,vt=[],le=0,be=K.length;le<be;le++)(Mt=Ze[K.charCodeAt(le)])?vt.push(String.fromCharCode(Mt)):vt.push(K[le]),vt[le].charCodeAt(0)>>8&&(xt=!0);K=vt.join("")}for(le=K.length;xt===void 0&&le!==0;)K.charCodeAt(le-1)>>8&&(xt=!0),le--;if(!xt)return K;for(vt=Q.noBOM?[]:[254,255],le=0,be=K.length;le<be;le++){if((yn=(Mt=K.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+K+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");vt.push(yn),vt.push(Mt-(yn<<8))}return String.fromCharCode.apply(void 0,vt)}(y,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$e=f.__private__.beginPage=function(y){Se[++Ut]=[],ut[Ut]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},nt(Ut),ve(Se[z])},Nt=function(y,E){var K,Q,le;switch(n=E||n,typeof y=="string"&&(K=v(y.toLowerCase()),Array.isArray(K)&&(Q=K[0],le=K[1])),Array.isArray(y)&&(Q=y[0]*He,le=y[1]*He),isNaN(Q)&&(Q=i[0],le=i[1]),(Q>14400||le>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Q=Math.min(14400,Q),le=Math.min(14400,le)),i=[Q,le],n.substr(0,1)){case"l":le>Q&&(i=[le,Q]);break;case"p":Q>le&&(i=[le,Q])}$e(i),Mm(ou),Z(El),lu!==0&&Z(lu+" J"),cu!==0&&Z(cu+" j"),Dt.publish("addPage",{pageNumber:Ut})},Be=function(y){y>0&&y<=Ut&&(Se.splice(y,1),ut.splice(y,1),Ut--,z>Ut&&(z=Ut),this.setPage(z))},nt=function(y){y>0&&y<=Ut&&(z=y)},Re=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Se.length-1},$t=function(y,E,K){var Q,le=void 0;return K=K||{},y=y!==void 0?y:Je[tt].fontName,E=E!==void 0?E:Je[tt].fontStyle,Q=y.toLowerCase(),gt[Q]!==void 0&&gt[Q][E]!==void 0?le=gt[Q][E]:gt[y]!==void 0&&gt[y][E]!==void 0?le=gt[y][E]:K.disableWarning===!1&&tn.warn("Unable to look up font label for font '"+y+"', '"+E+"'. Refer to getFontList() for available fonts."),le||K.noFallback||(le=gt.times[E])==null&&(le=gt.times.normal),le},qn=f.__private__.putInfo=function(){var y=ft(),E=function(Q){return Q};for(var K in d!==null&&(E=zt.encryptor(y,0)),Z("<<"),Z("/Producer ("+_e(E("jsPDF "+Xe.version))+")"),mt)mt.hasOwnProperty(K)&&mt[K]&&Z("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+_e(E(mt[K]))+")");Z("/CreationDate ("+_e(E(ae))+")"),Z(">>"),Z("endobj")},sr=f.__private__.putCatalog=function(y){var E=(y=y||{}).rootDictionaryObjId||ai;switch(ft(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+E+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+Me;K.substr(K.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+P(Me)+"]")}switch(Ae||(Ae="continuous"),Ae){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}Ke&&Z("/PageMode /"+Ke),Dt.publish("putCatalog"),Z(">>"),Z("endobj")},Ht=f.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(ee+1)),Z("/Root "+ee+" 0 R"),Z("/Info "+(ee-1)+" 0 R"),d!==null&&Z("/Encrypt "+zt.oid+" 0 R"),Z("/ID [ <"+de+"> <"+de+"> ]"),Z(">>")},Ss=f.__private__.putHeader=function(){Z("%PDF-"+w),Z("%")},Wr=f.__private__.putXRef=function(){var y="0000000000";Z("xref"),Z("0 "+(ee+1)),Z("0000000000 65535 f ");for(var E=1;E<=ee;E++)typeof oe[E]=="function"?Z((y+oe[E]()).slice(-10)+" 00000 n "):oe[E]!==void 0?Z((y+oe[E]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},cn=f.__private__.buildDocument=function(){var y;ee=0,he=0,ge=[],oe=[],me=[],ai=zn(),Hr=zn(),ve(ge),Dt.publish("buildDocument"),Ss(),Ri(),function(){Dt.publish("putAdditionalObjects");for(var K=0;K<me.length;K++){var Q=me[K];Jn(Q.objId,!0),Z(Q.content),Z("endobj")}Dt.publish("postPutAdditionalObjects")}(),y=[],function(){for(var K in Je)Je.hasOwnProperty(K)&&(p===!1||p===!0&&g.hasOwnProperty(K))&&ts(Je[K])}(),function(){var K;for(K in wt)wt.hasOwnProperty(K)&&Vs(wt[K])}(),function(){for(var K in ir)ir.hasOwnProperty(K)&&So(ir[K])}(),function(K){var Q;for(Q in at)at.hasOwnProperty(Q)&&(at[Q]instanceof tl?qs(at[Q]):at[Q]instanceof mc&&ko(at[Q],K))}(y),Dt.publish("putResources"),y.forEach(ka),ka({resourcesOid:Hr,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources"),d!==null&&(zt.oid=ft(),Z("<<"),Z("/Filter /Standard"),Z("/V "+zt.v),Z("/R "+zt.r),Z("/U <"+zt.toHexString(zt.U)+">"),Z("/O <"+zt.toHexString(zt.O)+">"),Z("/P "+zt.P),Z(">>"),Z("endobj")),qn(),sr();var E=he;return Wr(),Ht(),Z("startxref"),Z(""+E),Z("%%EOF"),ve(Se[z]),ge.join(`
`)},rn=f.__private__.getBlob=function(y){return new Blob([ht(y)],{type:"application/pdf"})},Tn=f.output=f.__private__.output=(wr=function(y,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",y){case void 0:return cn();case"save":f.save(E.filename);break;case"arraybuffer":return ht(cn());case"blob":return rn(cn());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(rn(cn()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",Q=cn();try{K=p_(Q)}catch{K=p_(unescape(encodeURIComponent(Q)))}return"data:application/pdf;filename="+E.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(le=E.pdfObjectUrl,be="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+le+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",Ve=pt.open();return Ve!==null&&Ve.document.write(je),Ve}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var Ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',vt=pt.open();if(vt!==null){vt.document.write(Ze);var xt=this;vt.document.documentElement.querySelector("#pdfViewer").onload=function(){vt.document.title=E.filename,vt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(xt.output("bloburl"))}}return vt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',yn=pt.open();if(yn!==null&&(yn.document.write(Mt),yn.document.title=E.filename),yn||typeof safari>"u")return yn;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",E);default:return null}},wr.foo=function(){try{return wr.apply(this,arguments)}catch(K){var y=K.stack||"";~y.indexOf(" at ")&&(y=y.split(" at ")[1]);var E="Error in function "+y.split(`
`)[0].split("<")[0]+": "+K.message;if(!pt.console)throw new Error(E);pt.console.error(E,K),pt.alert&&alert(E)}},wr.foo.bar=wr,wr.foo),ui=function(y){return Array.isArray(_s)===!0&&_s.indexOf(y)>-1};switch(r){case"pt":He=1;break;case"mm":He=72/25.4;break;case"cm":He=72/2.54;break;case"in":He=72;break;case"px":He=ui("px_scaling")==1?.75:96/72;break;case"pc":case"em":He=12;break;case"ex":He=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);He=r}var zt=null;se(),J();var ru=f.__private__.getPageInfo=f.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[y].objId,pageNumber:y,pageContext:ut[y]}},Lm=f.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in ut)if(ut[E].objId===y)break;return ru(E)},Tm=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ut[z].objId,pageNumber:z,pageContext:ut[z]}};f.addPage=function(){return Nt.apply(this,arguments),this},f.setPage=function(){return nt.apply(this,arguments),ve.call(this,Se[z]),this},f.insertPage=function(y){return this.addPage(),this.movePage(z,y),this},f.movePage=function(y,E){var K,Q;if(y>E){K=Se[y],Q=ut[y];for(var le=y;le>E;le--)Se[le]=Se[le-1],ut[le]=ut[le-1];Se[E]=K,ut[E]=Q,this.setPage(E)}else if(y<E){K=Se[y],Q=ut[y];for(var be=y;be<E;be++)Se[be]=Se[be+1],ut[be]=ut[be+1];Se[E]=K,ut[E]=Q,this.setPage(E)}return this},f.deletePage=function(){return Be.apply(this,arguments),this},f.__private__.text=f.text=function(y,E,K,Q,le){var be,je,Ve,Ze,vt,xt,Mt,yn,Vn,sn=(Q=Q||{}).scope||this;if(typeof y=="number"&&typeof E=="number"&&(typeof K=="string"||Array.isArray(K))){var Yn=K;K=E,E=y,y=Yn}if(arguments[3]instanceof lt==0?(Ve=arguments[4],Ze=arguments[5],Jt(Mt=arguments[3])==="object"&&Mt!==null||(typeof Ve=="string"&&(Ze=Ve,Ve=null),typeof Mt=="string"&&(Ze=Mt,Mt=null),typeof Mt=="number"&&(Ve=Mt,Mt=null),Q={flags:Mt,angle:Ve,align:Ze})):(M("The transform parameter of text() with a Matrix value"),Vn=le),isNaN(E)||isNaN(K)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return sn;var Hn,ur="",Ii=typeof Q.lineHeightFactor=="number"?Q.lineHeightFactor:Na,Gr=sn.internal.scaleFactor;function jh(qt){return qt=qt.split("	").join(Array(Q.TabLen||9).join(" ")),_e(qt,Mt)}function Tl(qt){for(var Qt,In=qt.concat(),Zn=[],Zs=In.length;Zs--;)typeof(Qt=In.shift())=="string"?Zn.push(Qt):Array.isArray(qt)&&(Qt.length===1||Qt[1]===void 0&&Qt[2]===void 0)?Zn.push(Qt[0]):Zn.push([Qt[0],Qt[1],Qt[2]]);return Zn}function Ta(qt,Qt){var In;if(typeof qt=="string")In=Qt(qt)[0];else if(Array.isArray(qt)){for(var Zn,Zs,xu=qt.concat(),Ol=[],Eh=xu.length;Eh--;)typeof(Zn=xu.shift())=="string"?Ol.push(Qt(Zn)[0]):Array.isArray(Zn)&&typeof Zn[0]=="string"&&(Zs=Qt(Zn[0],Zn[1],Zn[2]),Ol.push([Zs[0],Zs[1],Zs[2]]));In=Ol}return In}var Ao=!1,Ra=!0;if(typeof y=="string")Ao=!0;else if(Array.isArray(y)){var Ia=y.concat();je=[];for(var Oa,br=Ia.length;br--;)(typeof(Oa=Ia.shift())!="string"||Array.isArray(Oa)&&typeof Oa[0]!="string")&&(Ra=!1);Ao=Ra}if(Ao===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var Fa=Ne/sn.internal.scaleFactor,Da=Fa*(Ii-1);switch(Q.baseline){case"bottom":K-=Da;break;case"top":K+=Fa-Da;break;case"hanging":K+=Fa-2*Da;break;case"middle":K+=Fa/2-Da}if((xt=Q.maxWidth||0)>0&&(typeof y=="string"?y=sn.splitTextToSize(y,xt):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(qt,Qt){return qt.concat(sn.splitTextToSize(Qt,xt))},[]))),be={text:y,x:E,y:K,options:Q,mutex:{pdfEscape:_e,activeFontKey:tt,fonts:Je,activeFontSize:Ne}},Dt.publish("preProcessText",be),y=be.text,Ve=(Q=be.options).angle,Vn instanceof lt==0&&Ve&&typeof Ve=="number"){Ve*=Math.PI/180,Q.rotationDirection===0&&(Ve=-Ve),N===_&&(Ve=-Ve);var hu=Math.cos(Ve),fu=Math.sin(Ve);Vn=new lt(hu,fu,-fu,hu,0,0)}else Ve&&Ve instanceof lt&&(Vn=Ve);N!==_||Vn||(Vn=Xi),(vt=Q.charSpace||Pl)!==void 0&&(ur+=F(Y(vt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(yn=Q.horizontalScale)!==void 0&&(ur+=F(100*yn)+` Tz
`),Q.lang;var Nn=-1,Js=Q.renderingMode!==void 0?Q.renderingMode:Q.stroke,Rl=sn.internal.getCurrentPageInfo().pageContext;switch(Js){case 0:case!1:case"fill":Nn=0;break;case 1:case!0:case"stroke":Nn=1;break;case 2:case"fillThenStroke":Nn=2;break;case 3:case"invisible":Nn=3;break;case 4:case"fillAndAddForClipping":Nn=4;break;case 5:case"strokeAndAddPathForClipping":Nn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Nn=6;break;case 7:case"addToPathForClipping":Nn=7}var Nh=Rl.usedRenderingMode!==void 0?Rl.usedRenderingMode:-1;Nn!==-1?ur+=Nn+` Tr
`:Nh!==-1&&(ur+=`0 Tr
`),Nn!==-1&&(Rl.usedRenderingMode=Nn),Ze=Q.align||"left";var Oi,Ma=Ne*Ii,pu=sn.internal.pageSize.getWidth(),mu=Je[tt];vt=Q.charSpace||Pl,xt=Q.maxWidth||0,Mt=Object.assign({autoencode:!0,noBOM:!0},Q.flags);var Eo=[],Ba=function(qt){return sn.getStringUnitWidth(qt,{font:mu,charSpace:vt,fontSize:Ne,doKerning:!1})*Ne/Gr};if(Object.prototype.toString.call(y)==="[object Array]"){var di;je=Tl(y),Ze!=="left"&&(Oi=je.map(Ba));var hi,Co=0;if(Ze==="right"){E-=Oi[0],y=[],br=je.length;for(var Ys=0;Ys<br;Ys++)Ys===0?(hi=Hs(E),di=Ws(K)):(hi=Y(Co-Oi[Ys]),di=-Ma),y.push([je[Ys],hi,di]),Co=Oi[Ys]}else if(Ze==="center"){E-=Oi[0]/2,y=[],br=je.length;for(var Po=0;Po<br;Po++)Po===0?(hi=Hs(E),di=Ws(K)):(hi=Y((Co-Oi[Po])/2),di=-Ma),y.push([je[Po],hi,di]),Co=Oi[Po]}else if(Ze==="left"){y=[],br=je.length;for(var gu=0;gu<br;gu++)y.push(je[gu])}else if(Ze==="justify"&&mu.encoding==="Identity-H"){y=[],br=je.length,xt=xt!==0?xt:pu;for(var Il=0,Rn=0;Rn<br;Rn++)if(di=Rn===0?Ws(K):-Ma,hi=Rn===0?Hs(E):Il,Rn<br-1){var Ah=Y((xt-Oi[Rn])/(je[Rn].split(" ").length-1)),js=je[Rn].split(" ");y.push([js[0]+" ",hi,di]),Il=0;for(var Ns=1;Ns<js.length;Ns++){var vu=(Ba(js[Ns-1]+" "+js[Ns])-Ba(js[Ns]))*Gr+Ah;Ns==js.length-1?y.push([js[Ns],vu,0]):y.push([js[Ns]+" ",vu,0]),Il-=vu}}else y.push([je[Rn],hi,di]);y.push(["",Il,0])}else{if(Ze!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],br=je.length,xt=xt!==0?xt:pu,Rn=0;Rn<br;Rn++){di=Rn===0?Ws(K):-Ma,hi=Rn===0?Hs(E):0;var yu=je[Rn].split(" ").length-1,wu=yu>0?(xt-Oi[Rn])/yu:0;Rn<br-1?Eo.push(F(Y(wu))):Eo.push(0),y.push([je[Rn],hi,di])}}}(typeof Q.R2L=="boolean"?Q.R2L:ot)===!0&&(y=Ta(y,function(qt,Qt,In){return[qt.split("").reverse().join(""),Qt,In]})),be={text:y,x:E,y:K,options:Q,mutex:{pdfEscape:_e,activeFontKey:tt,fonts:Je,activeFontSize:Ne}},Dt.publish("postProcessText",be),y=be.text,Hn=be.mutex.isHex||!1;var bu=Je[tt].encoding;bu!=="WinAnsiEncoding"&&bu!=="StandardEncoding"||(y=Ta(y,function(qt,Qt,In){return[jh(qt),Qt,In]})),je=Tl(y),y=[];for(var Lo,To,Ro,Ua=Array.isArray(je[0])?1:0,Io="",$a=function(qt,Qt,In){var Zn="";return In instanceof lt?(In=typeof Q.angle=="number"?Zi(In,new lt(1,0,0,1,qt,Qt)):Zi(new lt(1,0,0,1,qt,Qt),In),N===_&&(In=Zi(new lt(1,0,0,-1,0,0),In)),Zn=In.join(" ")+` Tm
`):Zn=F(qt)+" "+F(Qt)+` Td
`,Zn},Fi=0;Fi<je.length;Fi++){switch(Io="",Ua){case 1:Ro=(Hn?"<":"(")+je[Fi][0]+(Hn?">":")"),Lo=parseFloat(je[Fi][1]),To=parseFloat(je[Fi][2]);break;case 0:Ro=(Hn?"<":"(")+je[Fi]+(Hn?">":")"),Lo=Hs(E),To=Ws(K)}Eo!==void 0&&Eo[Fi]!==void 0&&(Io=Eo[Fi]+` Tw
`),Fi===0?y.push(Io+$a(Lo,To,Vn)+Ro):Ua===0?y.push(Io+Ro):Ua===1&&y.push(Io+$a(Lo,To,Vn)+Ro)}y=Ua===0?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var As=`BT
/`;return As+=tt+" "+Ne+` Tf
`,As+=F(Ne*Ii)+` TL
`,As+=Aa+`
`,As+=ur,As+=y,Z(As+="ET"),g[tt]=!0,sn};var Rm=f.__private__.clip=f.clip=function(y){return Z(y==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Rm("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Z("n"),this};var ks=f.__private__.isValidStyle=function(y){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(E=!0),E};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(y){return ks(y)&&(c=y),this};var yh=f.__private__.getStyle=f.getStyle=function(y){var E=c;switch(y){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=y}return E},wh=f.close=function(){return Z("h"),this};f.stroke=function(){return Z("S"),this},f.fill=function(y){return jo("f",y),this},f.fillEvenOdd=function(y){return jo("f*",y),this},f.fillStroke=function(y){return jo("B",y),this},f.fillStrokeEvenOdd=function(y){return jo("B*",y),this};var jo=function(y,E){Jt(E)==="object"?Om(E,y):Z(y)},iu=function(y){y===null||N===_&&y===void 0||(y=yh(y),Z(y))};function Im(y,E,K,Q,le){var be=new mc(E||this.boundingBox,K||this.xStep,Q||this.yStep,this.gState,le||this.matrix);be.stream=this.stream;var je=y+"$$"+this.cloneIndex+++"$$";return Vr(je,be),be}var Om=function(y,E){var K=Et[y.key],Q=at[K];if(Q instanceof tl)Z("q"),Z(Fm(E)),Q.gState&&f.setGState(Q.gState),Z(y.matrix.toString()+" cm"),Z("/"+K+" sh"),Z("Q");else if(Q instanceof mc){var le=new lt(1,0,0,-1,0,La());y.matrix&&(le=le.multiply(y.matrix||Xi),K=Im.call(Q,y.key,y.boundingBox,y.xStep,y.yStep,le).id),Z("q"),Z("/Pattern cs"),Z("/"+K+" scn"),Q.gState&&f.setGState(Q.gState),Z(E),Z("Q")}},Fm=function(y){switch(y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},su=f.moveTo=function(y,E){return Z(F(Y(y))+" "+F(V(E))+" m"),this},ja=f.lineTo=function(y,E){return Z(F(Y(y))+" "+F(V(E))+" l"),this},No=f.curveTo=function(y,E,K,Q,le,be){return Z([F(Y(y)),F(V(E)),F(Y(K)),F(V(Q)),F(Y(le)),F(V(be)),"c"].join(" ")),this};f.__private__.line=f.line=function(y,E,K,Q,le){if(isNaN(y)||isNaN(E)||isNaN(K)||isNaN(Q)||!ks(le))throw new Error("Invalid arguments passed to jsPDF.line");return N===x?this.lines([[K-y,Q-E]],y,E,[1,1],le||"S"):this.lines([[K-y,Q-E]],y,E,[1,1]).stroke()},f.__private__.lines=f.lines=function(y,E,K,Q,le,be){var je,Ve,Ze,vt,xt,Mt,yn,Vn,sn,Yn,Hn,ur;if(typeof y=="number"&&(ur=K,K=E,E=y,y=ur),Q=Q||[1,1],be=be||!1,isNaN(E)||isNaN(K)||!Array.isArray(y)||!Array.isArray(Q)||!ks(le)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(su(E,K),je=Q[0],Ve=Q[1],vt=y.length,Yn=E,Hn=K,Ze=0;Ze<vt;Ze++)(xt=y[Ze]).length===2?(Yn=xt[0]*je+Yn,Hn=xt[1]*Ve+Hn,ja(Yn,Hn)):(Mt=xt[0]*je+Yn,yn=xt[1]*Ve+Hn,Vn=xt[2]*je+Yn,sn=xt[3]*Ve+Hn,Yn=xt[4]*je+Yn,Hn=xt[5]*Ve+Hn,No(Mt,yn,Vn,sn,Yn,Hn));return be&&wh(),iu(le),this},f.path=function(y){for(var E=0;E<y.length;E++){var K=y[E],Q=K.c;switch(K.op){case"m":su(Q[0],Q[1]);break;case"l":ja(Q[0],Q[1]);break;case"c":No.apply(this,Q);break;case"h":wh()}}return this},f.__private__.rect=f.rect=function(y,E,K,Q,le){if(isNaN(y)||isNaN(E)||isNaN(K)||isNaN(Q)||!ks(le))throw new Error("Invalid arguments passed to jsPDF.rect");return N===x&&(Q=-Q),Z([F(Y(y)),F(V(E)),F(Y(K)),F(Y(Q)),"re"].join(" ")),iu(le),this},f.__private__.triangle=f.triangle=function(y,E,K,Q,le,be,je){if(isNaN(y)||isNaN(E)||isNaN(K)||isNaN(Q)||isNaN(le)||isNaN(be)||!ks(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-y,Q-E],[le-K,be-Q],[y-le,E-be]],y,E,[1,1],je,!0),this},f.__private__.roundedRect=f.roundedRect=function(y,E,K,Q,le,be,je){if(isNaN(y)||isNaN(E)||isNaN(K)||isNaN(Q)||isNaN(le)||isNaN(be)||!ks(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ve=4/3*(Math.SQRT2-1);return le=Math.min(le,.5*K),be=Math.min(be,.5*Q),this.lines([[K-2*le,0],[le*Ve,0,le,be-be*Ve,le,be],[0,Q-2*be],[0,be*Ve,-le*Ve,be,-le,be],[2*le-K,0],[-le*Ve,0,-le,-be*Ve,-le,-be],[0,2*be-Q],[0,-be*Ve,le*Ve,-be,le,-be]],y+le,E,[1,1],je,!0),this},f.__private__.ellipse=f.ellipse=function(y,E,K,Q,le){if(isNaN(y)||isNaN(E)||isNaN(K)||isNaN(Q)||!ks(le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*K,je=4/3*(Math.SQRT2-1)*Q;return su(y+K,E),No(y+K,E-je,y+be,E-Q,y,E-Q),No(y-be,E-Q,y-K,E-je,y-K,E),No(y-K,E+je,y-be,E+Q,y,E+Q),No(y+be,E+Q,y+K,E+je,y+K,E),iu(le),this},f.__private__.circle=f.circle=function(y,E,K,Q){if(isNaN(y)||isNaN(E)||isNaN(K)||!ks(Q))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,E,K,K,Q)},f.setFont=function(y,E,K){return K&&(E=q(E,K)),tt=$t(y,E,{disableWarning:!1}),this};var Dm=f.__private__.getFont=f.getFont=function(){return Je[$t.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var y,E,K={};for(y in gt)if(gt.hasOwnProperty(y))for(E in K[y]=[],gt[y])gt[y].hasOwnProperty(E)&&K[y].push(E);return K},f.addFont=function(y,E,K,Q,le){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?le=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(K=q(K,Q)),De.call(this,y,E,K,le=le||"Identity-H")};var Na,ou=e.lineWidth||.200025,bt=f.__private__.getLineWidth=f.getLineWidth=function(){return ou},Mm=f.__private__.setLineWidth=f.setLineWidth=function(y){return ou=y,Z(F(Y(y))+" w"),this};f.__private__.setLineDash=Xe.API.setLineDash=Xe.API.setLineDashPattern=function(y,E){if(y=y||[],E=E||0,isNaN(E)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(K){return F(Y(K))}).join(" "),E=F(Y(E)),Z("["+y+"] "+E+" d"),this};var Bm=f.__private__.getLineHeight=f.getLineHeight=function(){return Ne*Na};f.__private__.getLineHeight=f.getLineHeight=function(){return Ne*Na};var Um=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(Na=y),this},$m=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Na};Um(e.lineHeight);var Hs=f.__private__.getHorizontalCoordinate=function(y){return Y(y)},Ws=f.__private__.getVerticalCoordinate=function(y){return N===_?y:ut[z].mediaBox.topRightY-ut[z].mediaBox.bottomLeftY-Y(y)},zm=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(y){return F(Hs(y))},qm=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(y){return F(Ws(y))},El=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Qi(El)},f.__private__.setStrokeColor=f.setDrawColor=function(y,E,K,Q){return El=li({ch1:y,ch2:E,ch3:K,ch4:Q,pdfColorType:"draw",precision:2}),Z(El),this};var au=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Qi(au)},f.__private__.setFillColor=f.setFillColor=function(y,E,K,Q){return au=li({ch1:y,ch2:E,ch3:K,ch4:Q,pdfColorType:"fill",precision:2}),Z(au),this};var Aa=e.textColor||"0 g",Cl=f.__private__.getTextColor=f.getTextColor=function(){return Qi(Aa)};f.__private__.setTextColor=f.setTextColor=function(y,E,K,Q){return Aa=li({ch1:y,ch2:E,ch3:K,ch4:Q,pdfColorType:"text",precision:3}),this};var Pl=e.charSpace,Vm=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Pl||0)};f.__private__.setCharSpace=f.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Pl=y,this};var lu=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(y){var E=f.CapJoinStyles[y];if(E===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lu=E,Z(E+" J"),this};var cu=0;f.__private__.setLineJoin=f.setLineJoin=function(y){var E=f.CapJoinStyles[y];if(E===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cu=E,Z(E+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(F(Y(y))+" M"),this},f.GState=Yp,f.setGState=function(y){(y=typeof y=="string"?wt[vn[y]]:Ea(null,y)).equals(jn)||(Z("/"+y.id+" gs"),jn=y)};var Ea=function(y,E){if(!y||!vn[y]){var K=!1;for(var Q in wt)if(wt.hasOwnProperty(Q)&&wt[Q].equals(E)){K=!0;break}if(K)E=wt[Q];else{var le="GS"+(Object.keys(wt).length+1).toString(10);wt[le]=E,E.id=le}return y&&(vn[y]=E.id),Dt.publish("addGState",E),E}};f.addGState=function(y,E){return Ea(y,E),this},f.saveGraphicsState=function(){return Z("q"),Vt.push({key:tt,size:Ne,color:Aa}),this},f.restoreGraphicsState=function(){Z("Q");var y=Vt.pop();return tt=y.key,Ne=y.size,Aa=y.color,jn=null,this},f.setCurrentTransformationMatrix=function(y){return Z(y.toString()+" cm"),this},f.comment=function(y){return Z("#"+y),this};var Ca=function(y,E){var K=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(be){isNaN(be)||(K=parseFloat(be))}});var Q=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Q},set:function(be){isNaN(be)||(Q=parseFloat(be))}});var le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return le},set:function(be){le=be.toString()}}),this},uu=function(y,E,K,Q){Ca.call(this,y,E),this.type="rect";var le=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return le},set:function(je){isNaN(je)||(le=parseFloat(je))}});var be=Q||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(je){isNaN(je)||(be=parseFloat(je))}}),this},Ll=function(){this.page=Ut,this.currentPage=z,this.pages=Se.slice(0),this.pagesContext=ut.slice(0),this.x=Qe,this.y=Zt,this.matrix=Rt,this.width=bh(z),this.height=Gs(z),this.outputDestination=Le,this.id="",this.objectNumber=-1};Ll.prototype.restore=function(){Ut=this.page,z=this.currentPage,ut=this.pagesContext,Se=this.pages,Qe=this.x,Zt=this.y,Rt=this.matrix,xh(z,this.width),Ks(z,this.height),Le=this.outputDestination};var du=function(y,E,K,Q,le){si.push(new Ll),Ut=z=0,Se=[],Qe=y,Zt=E,Rt=le,$e([K,Q])};for(var Pa in f.beginFormObject=function(y,E,K,Q,le){return du(y,E,K,Q,le),this},f.endFormObject=function(y){return function(E){if(Yi[E])si.pop().restore();else{var K=new Ll,Q="Xo"+(Object.keys(ir).length+1).toString(10);K.id=Q,Yi[E]=Q,ir[Q]=K,Dt.publish("addFormObject",K),si.pop().restore()}}(y),this},f.doFormObject=function(y,E){var K=ir[Yi[y]];return Z("q"),Z(E.toString()+" cm"),Z("/"+K.id+" Do"),Z("Q"),this},f.getFormObject=function(y){var E=ir[Yi[y]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},f.save=function(y,E){return y=y||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(Xa(rn(cn()),y),typeof Xa.unload=="function"&&pt.setTimeout&&setTimeout(Xa.unload,911),this):new Promise(function(K,Q){try{var le=Xa(rn(cn()),y);typeof Xa.unload=="function"&&pt.setTimeout&&setTimeout(Xa.unload,911),K(le)}catch(be){Q(be.message)}})},Xe.API)Xe.API.hasOwnProperty(Pa)&&(Pa==="events"&&Xe.API.events.length?function(y,E){var K,Q,le;for(le=E.length-1;le!==-1;le--)K=E[le][0],Q=E[le][1],y.subscribe.apply(y,[K].concat(typeof Q=="function"?[Q]:Q))}(Dt,Xe.API.events):f[Pa]=Xe.API[Pa]);function bh(y){return ut[y].mediaBox.topRightX-ut[y].mediaBox.bottomLeftX}function xh(y,E){ut[y].mediaBox.topRightX=E+ut[y].mediaBox.bottomLeftX}function Gs(y){return ut[y].mediaBox.topRightY-ut[y].mediaBox.bottomLeftY}function Ks(y,E){ut[y].mediaBox.topRightY=E+ut[y].mediaBox.bottomLeftY}var _h=f.getPageWidth=function(y){return bh(y=y||z)/He},Sh=f.setPageWidth=function(y,E){xh(y,E*He)},La=f.getPageHeight=function(y){return Gs(y=y||z)/He},kh=f.setPageHeight=function(y,E){Ks(y,E*He)};return f.internal={pdfEscape:_e,getStyle:yh,getFont:Dm,getFontSize:Oe,getCharSpace:Vm,getTextColor:Cl,getLineHeight:Bm,getLineHeightFactor:$m,getLineWidth:bt,write:st,getHorizontalCoordinate:Hs,getVerticalCoordinate:Ws,getCoordinateString:zm,getVerticalCoordinateString:qm,collections:{},newObject:ft,newAdditionalObject:oi,newObjectDeferred:zn,newObjectDeferredBegin:Jn,getFilters:ci,putStream:Rr,events:Dt,scaleFactor:He,pageSize:{getWidth:function(){return _h(z)},setWidth:function(y){Sh(z,y)},getHeight:function(){return La(z)},setHeight:function(y){kh(z,y)}},encryptionOptions:d,encryption:zt,getEncryptor:function(y){return d!==null?zt.encryptor(y,0):function(E){return E}},output:Tn,getNumberOfPages:Re,pages:Se,out:Z,f2:P,f3:L,getPageInfo:ru,getPageInfoByObjId:Lm,getCurrentPageInfo:Tm,getPDFVersion:S,Point:Ca,Rectangle:uu,Matrix:lt,hasHotfix:ui},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return _h(z)},set:function(y){Sh(z,y)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return La(z)},set:function(y){kh(z,y)},enumerable:!0,configurable:!0}),(function(y){for(var E=0,K=rt.length;E<K;E++){var Q=De.call(this,y[E][0],y[E][1],y[E][2],rt[E][3],!0);p===!1&&(g[Q]=!0);var le=y[E][0].split("-");Al({id:Q,fontName:le[0],fontStyle:le[1]||""})}Dt.publish("addFonts",{fonts:Je,dictionary:gt})}).call(f,rt),tt="F1",Nt(i,n),Dt.publish("initialized"),f}Yl.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Yl.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Yl.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Yl.prototype.processOwnerPassword=function(e,t){return mv(pv(t).substr(0,5),e)},Yl.prototype.encryptor=function(e,t){var n=pv(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return mv(n,r)}},Yp.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Jt(e)!==Jt(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Xe.API={events:[]},Xe.version="3.0.3";var Cn=Xe.API,x2=1,Nl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hl=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},_t=function(e){return e.toFixed(2)},Vo=function(e){return e.toFixed(5)};Cn.__acroform__={};var ni=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},y_=function(e){return e*x2},Ps=function(e){var t=new rA,n=qe.internal.getHeight(e)||0,r=qe.internal.getWidth(e)||0;return t.BBox=[0,0,Number(_t(r)),Number(_t(n))],t},B9=Cn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},U9=Cn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},$9=Cn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Bn=Cn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $9(e,t-1)},Un=Cn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return B9(e,t-1)},$n=Cn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return U9(e,t-1)},z9=Cn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],a=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(_t(l.lowerLeft_X)),Number(_t(l.lowerLeft_Y)),Number(_t(l.upperRight_X)),Number(_t(l.upperRight_Y))]},q9=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=gv(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+_t(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Ps(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},gv=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(P){return P.split(`
`)}):i.map(function(P){return[P]});var s=n,o=qe.internal.getHeight(e)||0;o=o<0?-o:o;var a=qe.internal.getWidth(e)||0;a=a<0?-a:a;var l=function(P,L,Y){if(P+1<i.length){var V=L+" "+i[P+1][0];return Pf(V,e,Y).width<=a-4}return!1};s++;e:for(;s>0;){t="",s--;var c,d,p=Pf("3",e,s).height,g=e.multiline?o-s:(o-p)/2,f=g+=2,w=0,S=0,k=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Pf(t,e,s=12).width+", FieldWidth:"+a+`
`;break}for(var v="",x=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var N=!1;if(i[_].length!==1&&k!==i[_].length-1){if((p+2)*(x+2)+2>o)continue e;v+=i[_][k],N=!0,S=_,_--}else{v=(v+=i[_][k]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var O=parseInt(_),U=l(O,v,s),q=_>=i.length-1;if(U&&!q){v+=" ",k=0;continue}if(U||q){if(q)S=O;else if(e.multiline&&(p+2)*(x+2)+2>o)continue e}else{if(!e.multiline||(p+2)*(x+2)+2>o)continue e;S=O}}for(var F="",M=w;M<=S;M++){var G=i[M];if(e.multiline){if(M===S){F+=G[k]+" ",k=(k+1)%G.length;continue}if(M===w){F+=G[G.length-1]+" ";continue}}F+=G[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,d=Pf(F,e,s).width,e.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;default:c=2}t+=_t(c)+" "+_t(f)+` Td
`,t+="("+Nl(F)+`) Tj
`,t+=-_t(c)+` 0 Td
`,f=-(s+2),d=0,w=N?S:S+1,x++,v=""}break}return r.text=t,r.fontSize=s,r},Pf=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},V9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},H9=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},W9=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(bs.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(V9)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");x2=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new iA,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&H9(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=z9(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=qe.createDefaultAppearanceStream(a),Jt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=q9(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var g in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(g)){var f=a.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var w=f[o];typeof w=="function"&&(w=w.call(i,a)),p+="/"+o+" "+w+" ",i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w)}}else typeof(w=f)=="function"&&(w=w.call(i,a)),p+="/"+o+" "+w,i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(S,k){for(var v in S)if(S.hasOwnProperty(v)){var x=v,_=S[v];k.internal.newObjectDeferredBegin(_.objId,!0),Jt(_)==="object"&&typeof _.putStream=="function"&&_.putStream(),delete S[x]}}(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},nA=Cn.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Jt(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Nl(r(e[s].toString()))+")"):i+=e[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},jg=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Nl(r(e))+")"},Is=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Is.prototype.toString=function(){return this.objId+" 0 R"},Is.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Is.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:nA(i,this.objId,this.scope)}):i instanceof Is?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var rA=function(){Is.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ni(rA,Is);var iA=function(){Is.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Nl(n(e))+")"}},set:function(n){e=n}})};ni(iA,Is);var bs=function e(){Is.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bn(t,3)},set:function(v){v?this.F=Un(t,3):this.F=$n(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Zp)return;s="FieldObject"+e.FieldNum++}var v=function(x){return x};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Nl(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(v){a=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/x2:c},set:function(v){c=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Zp||this instanceof fl))return jg(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=v}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof lr==0?jg(g,this.objId,this.scope):g},set:function(v){v=v.toString(),g=this instanceof lr==0?v.substr(0,1)==="("?Hl(v.substr(1,v.length-2)):Hl(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof lr==1?Hl(g.substr(1,g.length-1)):g},set:function(v){v=v.toString(),g=this instanceof lr==1?"/"+v:v}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof lr==0?jg(f,this.objId,this.scope):f},set:function(v){v=v.toString(),f=this instanceof lr==0?v.substr(0,1)==="("?Hl(v.substr(1,v.length-2)):Hl(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof lr==1?Hl(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof lr==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(v){v=!!v,S=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(v){w=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,1)},set:function(v){v?this.Ff=Un(this.Ff,1):this.Ff=$n(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,2)},set:function(v){v?this.Ff=Un(this.Ff,2):this.Ff=$n(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,3)},set:function(v){v?this.Ff=Un(this.Ff,3):this.Ff=$n(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');k=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(k){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};ni(bs,Is);var jc=function(){bs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nA(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,18)},set:function(n){n?this.Ff=Un(this.Ff,18):this.Ff=$n(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Un(this.Ff,19):this.Ff=$n(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,20)},set:function(n){n?(this.Ff=Un(this.Ff,20),t.sort()):this.Ff=$n(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,22)},set:function(n){n?this.Ff=Un(this.Ff,22):this.Ff=$n(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,23)},set:function(n){n?this.Ff=Un(this.Ff,23):this.Ff=$n(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,27)},set:function(n){n?this.Ff=Un(this.Ff,27):this.Ff=$n(this.Ff,27)}}),this.hasAppearanceStream=!1};ni(jc,bs);var Nc=function(){jc.call(this),this.fontName="helvetica",this.combo=!1};ni(Nc,jc);var Ac=function(){Nc.call(this),this.combo=!0};ni(Ac,Nc);var rp=function(){Ac.call(this),this.edit=!0};ni(rp,Ac);var lr=function(){bs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,15)},set:function(n){n?this.Ff=Un(this.Ff,15):this.Ff=$n(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,16)},set:function(n){n?this.Ff=Un(this.Ff,16):this.Ff=$n(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,17)},set:function(n){n?this.Ff=Un(this.Ff,17):this.Ff=$n(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,26)},set:function(n){n?this.Ff=Un(this.Ff,26):this.Ff=$n(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Nl(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Jt(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ni(lr,bs);var ip=function(){lr.call(this),this.pushButton=!0};ni(ip,lr);var Ec=function(){lr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ni(Ec,lr);var Zp=function(){var e,t;bs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Nl(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Jt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ni(Zp,bs),Ec.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Ec.prototype.createOption=function(e){var t=new Zp;return t.Parent=this,t.optionName=e,this.Kids.push(t),G9.call(this.scope,t),t};var sp=function(){lr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qe.CheckBox.createAppearanceStream()};ni(sp,lr);var fl=function(){bs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,13)},set:function(t){t?this.Ff=Un(this.Ff,13):this.Ff=$n(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,21)},set:function(t){t?this.Ff=Un(this.Ff,21):this.Ff=$n(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,23)},set:function(t){t?this.Ff=Un(this.Ff,23):this.Ff=$n(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,24)},set:function(t){t?this.Ff=Un(this.Ff,24):this.Ff=$n(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,25)},set:function(t){t?this.Ff=Un(this.Ff,25):this.Ff=$n(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,26)},set:function(t){t?this.Ff=Un(this.Ff,26):this.Ff=$n(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ni(fl,bs);var op=function(){fl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,14)},set:function(e){e?this.Ff=Un(this.Ff,14):this.Ff=$n(this.Ff,14)}}),this.password=!0};ni(op,fl);var qe={CheckBox:{createAppearanceStream:function(){return{N:{On:qe.CheckBox.YesNormal},D:{On:qe.CheckBox.YesPushDown,Off:qe.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=gv(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+_t(qe.internal.getWidth(e))+" "+_t(qe.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+_t(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ps(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=qe.internal.getHeight(e),o=qe.internal.getWidth(e),a=gv(e,e.caption);return i.push("1 g"),i.push("0 0 "+_t(o)+" "+_t(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+_t(o-1)+" "+_t(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+_t(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+_t(qe.internal.getWidth(e))+" "+_t(qe.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:qe.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=qe.RadioButton.Circle.YesNormal,t.D[e]=qe.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=qe.internal.getWidth(e)<=qe.internal.getHeight(e)?qe.internal.getWidth(e)/4:qe.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=qe.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Vo(qe.internal.getWidth(e)/2)+" "+Vo(qe.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=qe.internal.getWidth(e)<=qe.internal.getHeight(e)?qe.internal.getWidth(e)/4:qe.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*qe.internal.Bezier_C).toFixed(5)),o=Number((r*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Vo(qe.internal.getWidth(e)/2)+" "+Vo(qe.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Vo(qe.internal.getWidth(e)/2)+" "+Vo(qe.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=qe.internal.getWidth(e)<=qe.internal.getHeight(e)?qe.internal.getWidth(e)/4:qe.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Vo(qe.internal.getWidth(e)/2)+" "+Vo(qe.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:qe.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=qe.RadioButton.Cross.YesNormal,t.D[e]=qe.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=qe.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+_t(qe.internal.getWidth(e)-2)+" "+_t(qe.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(_t(r.x1.x)+" "+_t(r.x1.y)+" m"),n.push(_t(r.x2.x)+" "+_t(r.x2.y)+" l"),n.push(_t(r.x4.x)+" "+_t(r.x4.y)+" m"),n.push(_t(r.x3.x)+" "+_t(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=qe.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+_t(qe.internal.getWidth(e))+" "+_t(qe.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+_t(qe.internal.getWidth(e)-2)+" "+_t(qe.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(_t(n.x1.x)+" "+_t(n.x1.y)+" m"),r.push(_t(n.x2.x)+" "+_t(n.x2.y)+" l"),r.push(_t(n.x4.x)+" "+_t(n.x4.y)+" m"),r.push(_t(n.x3.x)+" "+_t(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+_t(qe.internal.getWidth(e))+" "+_t(qe.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};qe.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=qe.internal.getWidth(e),n=qe.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},qe.internal.getWidth=function(e){var t=0;return Jt(e)==="object"&&(t=y_(e.Rect[2])),t},qe.internal.getHeight=function(e){var t=0;return Jt(e)==="object"&&(t=y_(e.Rect[3])),t};var G9=Cn.addField=function(e){if(W9(this,e),!(e instanceof bs))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cn.AcroFormChoiceField=jc,Cn.AcroFormListBox=Nc,Cn.AcroFormComboBox=Ac,Cn.AcroFormEditBox=rp,Cn.AcroFormButton=lr,Cn.AcroFormPushButton=ip,Cn.AcroFormRadioButton=Ec,Cn.AcroFormCheckBox=sp,Cn.AcroFormTextField=fl,Cn.AcroFormPasswordField=op,Cn.AcroFormAppearance=qe,Cn.AcroForm={ChoiceField:jc,ListBox:Nc,ComboBox:Ac,EditBox:rp,Button:lr,PushButton:ip,RadioButton:Ec,CheckBox:sp,TextField:fl,PasswordField:op,Appearance:qe},Xe.AcroForm={ChoiceField:jc,ListBox:Nc,ComboBox:Ac,EditBox:rp,Button:lr,PushButton:ip,RadioButton:Ec,CheckBox:sp,TextField:fl,PasswordField:op,Appearance:qe};function sA(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(P,L){var Y,V,ae,de,ce,J=n;if((L=L||n)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(U(P))for(ce in r)for(ae=r[ce],Y=0;Y<ae.length;Y+=1){for(de=!0,V=0;V<ae[Y].length;V+=1)if(ae[Y][V]!==void 0&&ae[Y][V]!==P[V]){de=!1;break}if(de===!0){J=ce;break}}else for(ce in r)for(ae=r[ce],Y=0;Y<ae.length;Y+=1){for(de=!0,V=0;V<ae[Y].length;V+=1)if(ae[Y][V]!==void 0&&ae[Y][V]!==P.charCodeAt(V)){de=!1;break}if(de===!0){J=ce;break}}return J===n&&L!==n&&(J=L),J},s=function P(L){for(var Y=this.internal.write,V=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var de=[];if(de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Image"}),de.push({key:"Width",value:L.width}),de.push({key:"Height",value:L.height}),L.colorSpace===v.INDEXED?de.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(de.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===v.DEVICE_CMYK&&de.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),de.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&de.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var ce="",J=0,ie=L.transparency.length;J<ie;J++)ce+=L.transparency[J]+" "+L.transparency[J]+" ";de.push({key:"Mask",value:"["+ce+"]"})}L.sMask!==void 0&&de.push({key:"SMask",value:L.objectId+1+" 0 R"});var te=L.filter!==void 0?["/"+L.filter]:void 0;if(V({data:L.data,additionalKeyValues:de,alreadyAppliedFilters:te,objectId:L.objectId}),Y("endobj"),"sMask"in L&&L.sMask!==void 0){var se,A=(se=L.sMaskBitsPerComponent)!==null&&se!==void 0?se:L.bitsPerComponent,z={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:L.sMask};"filter"in L&&(z.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(L.width),z.filter=L.filter),P.call(this,z)}if(L.colorSpace===v.INDEXED){var B=this.internal.newObject();V({data:F(new Uint8Array(L.palette)),objectId:B}),Y("endobj")}},o=function(){var P=this.internal.collections[t+"images"];for(var L in P)s.call(this,P[L])},a=function(){var P,L=this.internal.collections[t+"images"],Y=this.internal.write;for(var V in L)Y("/I"+(P=L[V]).index,P.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var P=this.internal.collections[t+"images"];return l.call(this),P},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(P){return typeof e["process"+P.toUpperCase()]=="function"},g=function(P){return Jt(P)==="object"&&P.nodeType===1},f=function(P,L){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var Y=""+P.getAttribute("src");if(Y.indexOf("data:image/")===0)return np(unescape(Y).split("base64,").pop());var V=e.loadFile(Y,!0);if(V!==void 0)return V}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var ae;switch(L){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return np(P.toDataURL(ae,1).split("base64,").pop())}},w=function(P){var L=this.internal.collections[t+"images"];if(L){for(var Y in L)if(P===L[Y].alias)return L[Y]}},S=function(P,L,Y){return P||L||(P=-96,L=-96),P<0&&(P=-1*Y.width*72/P/this.internal.scaleFactor),L<0&&(L=-1*Y.height*72/L/this.internal.scaleFactor),P===0&&(P=L*Y.width/Y.height),L===0&&(L=P*Y.height/Y.width),[P,L]},k=function(P,L,Y,V,ae,de){var ce=S.call(this,Y,V,ae),J=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,te=c.call(this);if(Y=ce[0],V=ce[1],te[ae.index]=ae,de){de*=Math.PI/180;var se=Math.cos(de),A=Math.sin(de),z=function(X){return X.toFixed(4)},B=[z(se),z(A),z(-1*A),z(se),0,0,"cm"]}this.internal.write("q"),de?(this.internal.write([1,"0","0",1,J(P),ie(L+V),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([J(Y),"0","0",J(V),"0","0","cm"].join(" "))):this.internal.write([J(Y),"0","0",J(V),J(P),ie(L+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(P){var L,Y,V=0;if(typeof P=="string")for(Y=P.length,L=0;L<Y;L++)V=(V<<5)-V+P.charCodeAt(L),V|=0;else if(U(P))for(Y=P.byteLength/2,L=0;L<Y;L++)V=(V<<5)-V+P[L],V|=0;return V},N=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var L=!0;return P.length===0&&(L=!1),P.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(L=!1),L},O=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var L=P.indexOf(",");return L<0?null:P.substring(0,L).trim().endsWith("base64")?P.substring(L+1):null};e.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var U=e.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},q=e.__addimage__.binaryStringToUint8Array=function(P){for(var L=P.length,Y=new Uint8Array(L),V=0;V<L;V++)Y[V]=P.charCodeAt(V);return Y},F=e.__addimage__.arrayBufferToBinaryString=function(P){for(var L="",Y=U(P)?P:new Uint8Array(P),V=0;V<Y.length;V+=8192)L+=String.fromCharCode.apply(null,Y.subarray(V,V+8192));return L};e.addImage=function(){var P,L,Y,V,ae,de,ce,J,ie;if(typeof arguments[1]=="number"?(L=n,Y=arguments[1],V=arguments[2],ae=arguments[3],de=arguments[4],ce=arguments[5],J=arguments[6],ie=arguments[7]):(L=arguments[1],Y=arguments[2],V=arguments[3],ae=arguments[4],de=arguments[5],ce=arguments[6],J=arguments[7],ie=arguments[8]),Jt(P=arguments[0])==="object"&&!g(P)&&"imageData"in P){var te=P;P=te.imageData,L=te.format||L||n,Y=te.x||Y||0,V=te.y||V||0,ae=te.w||te.width||ae,de=te.h||te.height||de,ce=te.alias||ce,J=te.compression||J,ie=te.rotation||te.angle||ie}var se=this.internal.getFilters();if(J===void 0&&se.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(Y)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var A=M.call(this,P,L,ce,J);return k.call(this,Y,V,ae,de,A,ie),this};var M=function(P,L,Y,V){var ae,de,ce;if(typeof P=="string"&&i(P)===n){P=unescape(P);var J=G(P,!1);(J!==""||(J=e.loadFile(P,!0))!==void 0)&&(P=J)}if(g(P)&&(P=f(P,L)),L=i(P,L),!p(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ce=Y)==null||ce.length===0)&&(Y=function(ie){return typeof ie=="string"||U(ie)?_(ie):U(ie.data)?_(ie.data):null}(P)),(ae=w.call(this,Y))||(P instanceof Uint8Array||L==="RGBA"||(de=P,P=q(P)),ae=this["process"+L.toUpperCase()](P,d.call(this),Y,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in e.image_compression?ie:x.NONE}(V),de)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},G=e.__addimage__.convertBase64ToBinaryString=function(P,L){L=typeof L!="boolean"||L;var Y,V="";if(typeof P=="string"){var ae;Y=(ae=O(P))!==null&&ae!==void 0?ae:P;try{V=np(Y)}catch(de){if(L)throw N(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+de.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};e.getImageProperties=function(P){var L,Y,V="";if(g(P)&&(P=f(P)),typeof P=="string"&&i(P)===n&&((V=G(P,!1))===""&&(V=e.loadFile(P)||""),P=V),Y=i(P),!p(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(P instanceof Uint8Array||(P=q(P)),!(L=this["process"+Y.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=Y,L}})(Xe.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Xe.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){r=c[g];var f=this.internal.pdfEscape,w=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(S.objId),x=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(v(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(v(x))+") >>",S.content=s;var _=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(S.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(w(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var O=this.annotations._nameMap[r.options.name];r.options.pageNumber=O.page,r.options.top=O.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(w(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var U=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+U+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},e.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Xe.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(S){return t[S.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},a=e.__arabicParser__.isArabicEndLetter=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(S){return o(S)&&i.indexOf(S.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(S){var k=0,v=n,x="",_=0;for(k=0;k<S.length;k+=1)v[S.charCodeAt(k)]!==void 0?(_++,typeof(v=v[S.charCodeAt(k)])=="number"&&(x+=String.fromCharCode(v),v=n,_=0),k===S.length-1&&(v=n,x+=S.charAt(k-(_-1)),k-=_-1,_=0)):(v=n,x+=S.charAt(k-_),k-=_,_=0);return x};e.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(S,k,v){return o(S)?s(S)===!1?-1:!c(S)||!o(k)&&!o(v)||!o(v)&&a(k)||a(S)&&!o(k)||a(S)&&l(k)||a(S)&&a(k)?0:d(S)&&o(k)&&!a(k)&&o(v)&&c(v)?3:a(S)||!o(v)?1:2:-1},f=function(S){var k=0,v=0,x=0,_="",N="",O="",U=(S=S||"").split("\\s+"),q=[];for(k=0;k<U.length;k+=1){for(q.push(""),v=0;v<U[k].length;v+=1)_=U[k][v],N=U[k][v-1],O=U[k][v+1],o(_)?(x=g(_,N,O),q[k]+=x!==-1?String.fromCharCode(t[_.charCodeAt(0)][x]):_):q[k]+=_;q[k]=p(q[k])}return q.join(" ")},w=e.__arabicParser__.processArabic=e.processArabic=function(){var S,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(k)){var x=0;for(v=[],x=0;x<k.length;x+=1)Array.isArray(k[x])?v.push([f(k[x][0]),k[x][1],k[x][2]]):v.push([f(k[x])]);S=v}else S=f(k);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};e.events.push(["preProcessText",w])}(Xe.API),Xe.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Xe.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(S){w=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,f=0,w=0,S=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=c.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,N){return _.concat(k.splitTextToSize(N,v))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)f<(S=this.getStringUnitWidth(l[x],{font:p})*d)&&(f=S);return f!==0&&(w=l.length),{w:f/=g,h:Math.max((w*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,f&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,d,p,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var f,w,S,k,v=[],x=[],_=[],N={},O={},U=[],q=[],F=(g=g||{}).autoSize||!1,M=g.printHeaders!==!1,G=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,P=g.margins||Object.assign({width:this.getPageWidth()},t),L=typeof g.padding=="number"?g.padding:3,Y=g.headerBackgroundColor||"#c8c8c8",V=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=V,this.setFontSize(G),p==null)x=v=Object.keys(d[0]),_=v.map(function(){return"left"});else if(Array.isArray(p)&&Jt(p[0])==="object")for(v=p.map(function(te){return te.name}),x=p.map(function(te){return te.prompt||te.name||""}),_=p.map(function(te){return te.align||"left"}),f=0;f<p.length;f+=1)O[p[f].name]=.7499990551181103*p[f].width;else Array.isArray(p)&&typeof p[0]=="string"&&(x=v=p,_=v.map(function(){return"left"}));if(F||Array.isArray(p)&&typeof p[0]=="string")for(f=0;f<v.length;f+=1){for(N[k=v[f]]=d.map(function(te){return te[k]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=N[k],this.setFont(void 0,"normal"),S=0;S<w.length;S+=1)U.push(this.getTextDimensions(w[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[k]=Math.max.apply(null,U)+L+L,U=[]}if(M){var ae={};for(f=0;f<v.length;f+=1)ae[v[f]]={},ae[v[f]].text=x[f],ae[v[f]].align=_[f];var de=a.call(this,ae,O);q=v.map(function(te){return new s(l,c,O[te],de,ae[te].text,void 0,ae[te].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var ce=p.reduce(function(te,se){return te[se.name]=se.align,te},{});for(f=0;f<d.length;f+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:f,data:d[f]},this);var J=a.call(this,d[f],O);for(S=0;S<v.length;S+=1){var ie=d[f][v[S]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:f,col:S,data:ie},this),o.call(this,new s(l,c,O[v[S]],J,ie,f+2,ce[v[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(f){var w=l[f];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,c[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*p/g+d+d},this).reduce(function(f,w){return Math.max(f,w)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=l;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(w)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(Xe.API);var oA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},aA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],vv=sA(aA),lA=[100,200,300,400,500,600,700,800,900],K9=sA(lA);function Ng(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return oA[s=s||"normal"]?s:"normal"}(e.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(e.weight),i=function(s){return typeof vv[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function w_(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var J9={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},b_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function x_(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function __(e){return e.trimLeft()}function Y9(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Z9(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Lf,S_,k_,Wl,Tf,j_,N_,A_,Ag=["times"];function E_(e,t,n,r,i){var s=4,o=P_;switch(i){case Xe.API.image_compression.FAST:s=1,o=C_;break;case Xe.API.image_compression.MEDIUM:s=6,o=L_;break;case Xe.API.image_compression.SLOW:s=9,o=T_}e=function(l,c,d,p){for(var g,f=l.length/c,w=new Uint8Array(l.length+f),S=[X9,C_,P_,L_,T_],k=0;k<f;k+=1){var v=k*c,x=l.subarray(v,v+c);if(p)w.set(p(x,d,g),v+k);else{for(var _=S.length,N=[],O=0;O<_;O+=1)N[O]=S[O](x,d,g);var U=eB(N.concat());w.set(N[U],v+k)}g=x}return w}(e,t,Math.ceil(n*r/8),o);var a=iv(e,{level:s});return Xe.API.__addimage__.arrayBufferToBinaryString(a)}function X9(e){var t=Array.apply([],e);return t.unshift(0),t}function C_(e,t){var n=e.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=e[i-t]||0;r[i+1]=e[i]-s+256&255}return r}function P_(e,t,n){var r=e.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=e[s]-o+256&255}return i}function L_(e,t,n){var r=e.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=e[s-t]||0,a=n&&n[s]||0;i[s+1]=e[s]+256-(o+a>>>1)&255}return i}function T_(e,t,n){var r=e.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=Q9(e[s-t]||0,n&&n[s]||0,n&&n[s-t]||0);i[s+1]=e[s]-o+256&255}return i}function Q9(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),s=Math.abs(e+t-n-n);return r<=i&&r<=s?e:i<=s?t:n}function eB(e){var t=e.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function Eg(e,t,n){var r=t*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return cA(e,i)>>s&o}function R_(e,t,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(t&a)<<o;(function(c,d,p){if(d+1<c.byteLength)c.setUint16(d,p,!1);else{var g=p>>8&255;c.setUint8(d,g)}})(e,s,cA(e,s)&~(a<<o)&65535|l)}function cA(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function tB(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,o=1<<1+(7&i);e[t++],e[t++];var a=null,l=null;s&&(a=t,l=o,t+=3*o);var c=!0,d=[],p=0,g=null,f=0,w=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,w=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var S=e[t++];p=e[t++]|e[t++]<<8,g=e[t++],1&S||(g=null),f=S>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,N=e[t++],O=N>>6&1,U=1<<1+(7&N),q=a,F=l,M=!1;N>>7&&(M=!0,q=t,F=U,t+=3*U);var G=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:k,y:v,width:x,height:_,has_local_palette:M,palette_offset:q,palette_size:F,data_offset:G,data_length:t-G,transparent_index:g,interlaced:!!O,delay:p,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return w},this.frameInfo=function(L){if(L<0||L>=d.length)throw new Error("Frame index out of range.");return d[L]},this.decodeAndBlitFrameBGRA=function(L,Y){var V=this.frameInfo(L),ae=V.width*V.height,de=new Uint8Array(ae);I_(e,V.data_offset,de,ae);var ce=V.palette_offset,J=V.transparent_index;J===null&&(J=256);var ie=V.width,te=n-ie,se=ie,A=4*(V.y*n+V.x),z=4*((V.y+V.height)*n+V.x),B=A,X=4*te;V.interlaced===!0&&(X+=4*n*7);for(var ee=8,oe=0,ge=de.length;oe<ge;++oe){var he=de[oe];if(se===0&&(se=ie,(B+=X)>=z&&(X=4*te+4*n*(ee-1),B=A+(ie+te)*(ee<<1),ee>>=1)),he===J)B+=4;else{var me=e[ce+3*he],Se=e[ce+3*he+1],Pe=e[ce+3*he+2];Y[B++]=Pe,Y[B++]=Se,Y[B++]=me,Y[B++]=255}--se}},this.decodeAndBlitFrameRGBA=function(L,Y){var V=this.frameInfo(L),ae=V.width*V.height,de=new Uint8Array(ae);I_(e,V.data_offset,de,ae);var ce=V.palette_offset,J=V.transparent_index;J===null&&(J=256);var ie=V.width,te=n-ie,se=ie,A=4*(V.y*n+V.x),z=4*((V.y+V.height)*n+V.x),B=A,X=4*te;V.interlaced===!0&&(X+=4*n*7);for(var ee=8,oe=0,ge=de.length;oe<ge;++oe){var he=de[oe];if(se===0&&(se=ie,(B+=X)>=z&&(X=4*te+4*n*(ee-1),B=A+(ie+te)*(ee<<1),ee>>=1)),he===J)B+=4;else{var me=e[ce+3*he],Se=e[ce+3*he+1],Pe=e[ce+3*he+2];Y[B++]=me,Y[B++]=Se,Y[B++]=Pe,Y[B++]=255}--se}}}function I_(e,t,n,r){for(var i=e[t++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,g=0,f=e[t++],w=new Int32Array(4096),S=null;;){for(;d<16&&f!==0;)p|=e[t++]<<d,d+=8,f===1?f=e[t++]:--f;if(d<l)break;var k=p&c;if(p>>=l,d-=l,k!==s){if(k===o)break;for(var v=k<a?k:S,x=0,_=v;_>s;)_=w[_]>>8,++x;var N=_;if(g+x+(v!==k?1:0)>r)return void tn.log("Warning, gif stream longer than expected.");n[g++]=N;var O=g+=x;for(v!==k&&(n[g++]=N),_=v;x--;)_=w[_],n[--O]=255&_,_>>=8;S!==null&&a<4096&&(w[a++]=S<<8|N,a>=c+1&&l<12&&(++l,c=c<<1|1)),S=k}else a=o+1,c=(1<<(l=i+1))-1,S=null}return g!==r&&tn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Cg(e){var t,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),f=new Array(64),w=new Array(64),S=[],k=0,v=7,x=new Array(64),_=new Array(64),N=new Array(64),O=new Array(256),U=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function de(A,z){for(var B=0,X=0,ee=new Array,oe=1;oe<=16;oe++){for(var ge=1;ge<=A[oe];ge++)ee[z[X]]=[],ee[z[X]][0]=B,ee[z[X]][1]=oe,X++,B++;B*=2}return ee}function ce(A){for(var z=A[0],B=A[1]-1;B>=0;)z&1<<B&&(k|=1<<v),B--,--v<0&&(k==255?(J(255),J(0)):J(k),v=7,k=0)}function J(A){S.push(A)}function ie(A){J(A>>8&255),J(255&A)}function te(A,z,B,X,ee){for(var oe,ge=ee[0],he=ee[240],me=function(Ne,Me){var Oe,ot,Ke,At,Ae,Ie,yt,mt,tt,He,Qe=0;for(tt=0;tt<8;++tt){Oe=Ne[Qe],ot=Ne[Qe+1],Ke=Ne[Qe+2],At=Ne[Qe+3],Ae=Ne[Qe+4],Ie=Ne[Qe+5],yt=Ne[Qe+6];var Zt=Oe+(mt=Ne[Qe+7]),Rt=Oe-mt,Je=ot+yt,gt=ot-yt,Vt=Ke+Ie,at=Ke-Ie,Et=At+Ae,wt=At-Ae,vn=Zt+Et,jn=Zt-Et,Ut=Je+Vt,ut=Je-Vt;Ne[Qe]=vn+Ut,Ne[Qe+4]=vn-Ut;var Dt=.707106781*(ut+jn);Ne[Qe+2]=jn+Dt,Ne[Qe+6]=jn-Dt;var _s=.382683433*((vn=wt+at)-(ut=gt+Rt)),ir=.5411961*vn+_s,Yi=1.306562965*ut+_s,si=.707106781*(Ut=at+gt),lt=Rt+si,Zi=Rt-si;Ne[Qe+5]=Zi+ir,Ne[Qe+3]=Zi-ir,Ne[Qe+1]=lt+Yi,Ne[Qe+7]=lt-Yi,Qe+=8}for(Qe=0,tt=0;tt<8;++tt){Oe=Ne[Qe],ot=Ne[Qe+8],Ke=Ne[Qe+16],At=Ne[Qe+24],Ae=Ne[Qe+32],Ie=Ne[Qe+40],yt=Ne[Qe+48];var Xi=Oe+(mt=Ne[Qe+56]),Vr=Oe-mt,wr=ot+yt,ft=ot-yt,zn=Ke+Ie,Jn=Ke-Ie,oi=At+Ae,ai=At-Ae,Hr=Xi+oi,Qi=Xi-oi,li=wr+zn,ci=wr-zn;Ne[Qe]=Hr+li,Ne[Qe+32]=Hr-li;var Rr=.707106781*(ci+Qi);Ne[Qe+16]=Qi+Rr,Ne[Qe+48]=Qi-Rr;var es=.382683433*((Hr=ai+Jn)-(ci=ft+Vr)),Ri=.5411961*Hr+es,ts=1.306562965*ci+es,So=.707106781*(li=Jn+ft),qs=Vr+So,ko=Vr-So;Ne[Qe+40]=ko+Ri,Ne[Qe+24]=ko-Ri,Ne[Qe+8]=qs+ts,Ne[Qe+56]=qs-ts,Qe++}for(tt=0;tt<64;++tt)He=Ne[tt]*Me[tt],f[tt]=He>0?He+.5|0:He-.5|0;return f}(A,z),Se=0;Se<64;++Se)w[q[Se]]=me[Se];var Pe=w[0]-B;B=w[0],Pe==0?ce(X[0]):(ce(X[g[oe=32767+Pe]]),ce(p[oe]));for(var Le=63;Le>0&&w[Le]==0;)Le--;if(Le==0)return ce(ge),B;for(var ve,Z=1;Z<=Le;){for(var st=Z;w[Z]==0&&Z<=Le;)++Z;var ht=Z-st;if(ht>=16){ve=ht>>4;for(var rt=1;rt<=ve;++rt)ce(he);ht&=15}oe=32767+w[Z],ce(ee[(ht<<4)+g[oe]]),ce(p[oe]),Z++}return Le!=63&&ce(ge),B}function se(A){A=Math.min(Math.max(A,1),100),s!=A&&(function(z){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var ee=o((B[X]*z+50)/100);ee=Math.min(Math.max(ee,1),255),a[q[X]]=ee}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var he=o((oe[ge]*z+50)/100);he=Math.min(Math.max(he,1),255),l[q[ge]]=he}for(var me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Pe=0;Pe<8;Pe++)for(var Le=0;Le<8;Le++)c[Se]=1/(a[q[Se]]*me[Pe]*me[Le]*8),d[Se]=1/(l[q[Se]]*me[Pe]*me[Le]*8),Se++}(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),s=A)}this.encode=function(A,z){z&&se(z),S=new Array,k=0,v=7,ie(65496),ie(65504),ie(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),ie(1),ie(1),J(0),J(0),function(){ie(65499),ie(132),J(0);for(var ot=0;ot<64;ot++)J(a[ot]);J(1);for(var Ke=0;Ke<64;Ke++)J(l[Ke])}(),function(ot,Ke){ie(65472),ie(17),J(8),ie(Ke),ie(ot),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(A.width,A.height),function(){ie(65476),ie(418),J(0);for(var ot=0;ot<16;ot++)J(F[ot+1]);for(var Ke=0;Ke<=11;Ke++)J(M[Ke]);J(16);for(var At=0;At<16;At++)J(G[At+1]);for(var Ae=0;Ae<=161;Ae++)J(P[Ae]);J(1);for(var Ie=0;Ie<16;Ie++)J(L[Ie+1]);for(var yt=0;yt<=11;yt++)J(Y[yt]);J(17);for(var mt=0;mt<16;mt++)J(V[mt+1]);for(var tt=0;tt<=161;tt++)J(ae[tt])}(),ie(65498),ie(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var B=0,X=0,ee=0;k=0,v=7,this.encode.displayName="_encode_";for(var oe,ge,he,me,Se,Pe,Le,ve,Z,st=A.data,ht=A.width,rt=A.height,Ne=4*ht,Me=0;Me<rt;){for(oe=0;oe<Ne;){for(Se=Ne*Me+oe,Le=-1,ve=0,Z=0;Z<64;Z++)Pe=Se+(ve=Z>>3)*Ne+(Le=4*(7&Z)),Me+ve>=rt&&(Pe-=Ne*(Me+1+ve-rt)),oe+Le>=Ne&&(Pe-=oe+Le-Ne+4),ge=st[Pe++],he=st[Pe++],me=st[Pe++],x[Z]=(U[ge]+U[he+256|0]+U[me+512|0]>>16)-128,_[Z]=(U[ge+768|0]+U[he+1024|0]+U[me+1280|0]>>16)-128,N[Z]=(U[ge+1280|0]+U[he+1536|0]+U[me+1792|0]>>16)-128;B=te(x,c,B,t,r),X=te(_,d,X,n,i),ee=te(N,d,ee,n,i),oe+=32}Me+=8}if(v>=0){var Oe=[];Oe[1]=v+1,Oe[0]=(1<<v+1)-1,ce(Oe)}return ie(65497),new Uint8Array(S)},e=e||50,function(){for(var A=String.fromCharCode,z=0;z<256;z++)O[z]=A(z)}(),t=de(F,M),n=de(L,Y),r=de(G,P),i=de(V,ae),function(){for(var A=1,z=2,B=1;B<=15;B++){for(var X=A;X<z;X++)g[32767+X]=B,p[32767+X]=[],p[32767+X][1]=B,p[32767+X][0]=X;for(var ee=-(z-1);ee<=-A;ee++)g[32767+ee]=B,p[32767+ee]=[],p[32767+ee][1]=B,p[32767+ee][0]=z-1+ee;A<<=1,z<<=1}}(),function(){for(var A=0;A<256;A++)U[A]=19595*A,U[A+256|0]=38470*A,U[A+512|0]=7471*A+32768,U[A+768|0]=-11059*A,U[A+1024|0]=-21709*A,U[A+1280|0]=32768*A+8421375,U[A+1536|0]=-27439*A,U[A+1792|0]=-5329*A}(),se(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function os(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function O_(e){function t(M){if(!M)throw Error("assert :P")}function n(M,G,P){for(var L=0;4>L;L++)if(M[G+L]!=P.charCodeAt(L))return!0;return!1}function r(M,G,P,L,Y){for(var V=0;V<Y;V++)M[G+V]=P[L+V]}function i(M,G,P,L){for(var Y=0;Y<L;Y++)M[G+Y]=P}function s(M){return new Int32Array(M)}function o(M,G){for(var P=[],L=0;L<M;L++)P.push(new G);return P}function a(M,G){var P=[];return function L(Y,V,ae){for(var de=ae[V],ce=0;ce<de&&(Y.push(ae.length>V+1?[]:new G),!(ae.length<V+1));ce++)L(Y[ce],V+1,ae)}(P,0,M),P}var l=function(){var M=this;function G(h,m){for(var b=1<<m-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function P(h,m,b,j,C){t(!(j%b));do h[m+(j-=b)]=C;while(0<j)}function L(h,m,b,j,C){if(t(2328>=C),512>=C)var T=s(512);else if((T=s(C))==null)return 0;return function(I,D,$,H,ne,pe){var W,re,ue=D,ye=1<<$,fe=s(16),we=s(16);for(t(ne!=0),t(H!=null),t(I!=null),t(0<$),re=0;re<ne;++re){if(15<H[re])return 0;++fe[H[re]]}if(fe[0]==ne)return 0;for(we[1]=0,W=1;15>W;++W){if(fe[W]>1<<W)return 0;we[W+1]=we[W]+fe[W]}for(re=0;re<ne;++re)W=H[re],0<H[re]&&(pe[we[W]++]=re);if(we[15]==1)return(H=new Y).g=0,H.value=pe[0],P(I,ue,1,ye,H),ye;var xe,Ee=-1,ke=ye-1,et=0,ze=1,kt=1,We=1<<$;for(re=0,W=1,ne=2;W<=$;++W,ne<<=1){if(ze+=kt<<=1,0>(kt-=fe[W]))return 0;for(;0<fe[W];--fe[W])(H=new Y).g=W,H.value=pe[re++],P(I,ue+et,ne,We,H),et=G(et,W)}for(W=$+1,ne=2;15>=W;++W,ne<<=1){if(ze+=kt<<=1,0>(kt-=fe[W]))return 0;for(;0<fe[W];--fe[W]){if(H=new Y,(et&ke)!=Ee){for(ue+=We,xe=1<<(Ee=W)-$;15>Ee&&!(0>=(xe-=fe[Ee]));)++Ee,xe<<=1;ye+=We=1<<(xe=Ee-$),I[D+(Ee=et&ke)].g=xe+$,I[D+Ee].value=ue-D-Ee}H.g=W-$,H.value=pe[re++],P(I,ue+(et>>$),ne,We,H),et=G(et,W)}}return ze!=2*we[15]-1?0:ye}(h,m,b,j,C,T)}function Y(){this.value=this.g=0}function V(){this.value=this.g=0}function ae(){this.G=o(5,Y),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ba,V)}function de(h,m,b,j){t(h!=null),t(m!=null),t(2147483648>j),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=b,h.Jd=m,h.Yc=b+j,h.Zc=4<=j?b+j-4+1:b,ge(h)}function ce(h,m){for(var b=0;0<m--;)b|=me(h,128)<<m;return b}function J(h,m){var b=ce(h,m);return he(h)?-b:b}function ie(h,m,b,j){var C,T=0;for(t(h!=null),t(m!=null),t(4294967288>j),h.Sb=j,h.Ra=0,h.u=0,h.h=0,4<j&&(j=4),C=0;C<j;++C)T+=m[b+C]<<8*C;h.Ra=T,h.bb=j,h.oa=m,h.pa=b}function te(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Co-8>>>0,++h.bb,h.u-=8;X(h)&&(h.h=1,h.u=0)}function se(h,m){if(t(0<=m),!h.h&&m<=hi){var b=B(h)&di[m];return h.u+=m,te(h),b}return h.h=1,h.u=0}function A(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(h){return h.Ra>>>(h.u&Co-1)>>>0}function X(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Co}function ee(h,m){h.u=m,h.h=X(h)}function oe(h){h.u>=Ys&&(t(h.u>=Ys),te(h))}function ge(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function he(h){return ce(h,1)}function me(h,m){var b=h.Ca;0>h.b&&ge(h);var j=h.b,C=b*m>>>8,T=(h.I>>>j>C)+0;for(T?(b-=C,h.I-=C+1<<j>>>0):b=C+1,j=b,C=0;256<=j;)C+=8,j>>=8;return j=7^C+Po[j],h.b-=j,h.Ca=(b<<j)-1,T}function Se(h,m,b){h[m+0]=b>>24&255,h[m+1]=b>>16&255,h[m+2]=b>>8&255,h[m+3]=255&b}function Pe(h,m){return h[m+0]|h[m+1]<<8}function Le(h,m){return Pe(h,m)|h[m+2]<<16}function ve(h,m){return Pe(h,m)|Pe(h,m+2)<<16}function Z(h,m){var b=1<<m;return t(h!=null),t(0<m),h.X=s(b),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function st(h,m){t(h!=null),t(m!=null),t(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function ht(){this.X=[],this.Xa=this.Mb=0}function rt(h,m,b,j){t(b!=null),t(j!=null);var C=b[0],T=j[0];return C==0&&(C=(h*T+m/2)/m),T==0&&(T=(m*C+h/2)/h),0>=C||0>=T?0:(b[0]=C,j[0]=T,1)}function Ne(h,m){return h+(1<<m)-1>>>m}function Me(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function Oe(h,m){M[m]=function(b,j,C,T,I,D,$){var H;for(H=0;H<I;++H){var ne=M[h](D[$+H-1],C,T+H);D[$+H]=Me(b[j+H],ne)}}}function ot(){this.ud=this.hd=this.jd=0}function Ke(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function At(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ae(h,m){return At(h+(h-m+.5>>1))}function Ie(h,m,b){return Math.abs(m-b)-Math.abs(h-b)}function yt(h,m,b,j,C,T,I){for(j=T[I-1],b=0;b<C;++b)T[I+b]=j=Me(h[m+b],j)}function mt(h,m,b,j,C){var T;for(T=0;T<b;++T){var I=h[m+T],D=I>>8&255,$=16711935&($=($=16711935&I)+((D<<16)+D));j[C+T]=(4278255360&I)+$>>>0}}function tt(h,m){m.jd=255&h,m.hd=h>>8&255,m.ud=h>>16&255}function He(h,m,b,j,C,T){var I;for(I=0;I<j;++I){var D=m[b+I],$=D>>>8,H=D,ne=255&(ne=(ne=D>>>16)+((h.jd<<24>>24)*($<<24>>24)>>>5));H=255&(H=(H+=(h.hd<<24>>24)*($<<24>>24)>>>5)+((h.ud<<24>>24)*(ne<<24>>24)>>>5)),C[T+I]=(4278255360&D)+(ne<<16)+H}}function Qe(h,m,b,j,C){M[m]=function(T,I,D,$,H,ne,pe,W,re){for($=pe;$<W;++$)for(pe=0;pe<re;++pe)H[ne++]=C(D[j(T[I++])])},M[h]=function(T,I,D,$,H,ne,pe){var W=8>>T.b,re=T.Ea,ue=T.K[0],ye=T.w;if(8>W)for(T=(1<<T.b)-1,ye=(1<<W)-1;I<D;++I){var fe,we=0;for(fe=0;fe<re;++fe)fe&T||(we=j($[H++])),ne[pe++]=C(ue[we&ye]),we>>=W}else M["VP8LMapColor"+b]($,H,ue,ye,ne,pe,I,D,re)}}function Zt(h,m,b,j,C){for(b=m+b;m<b;){var T=h[m++];j[C++]=T>>16&255,j[C++]=T>>8&255,j[C++]=255&T}}function Rt(h,m,b,j,C){for(b=m+b;m<b;){var T=h[m++];j[C++]=T>>16&255,j[C++]=T>>8&255,j[C++]=255&T,j[C++]=T>>24&255}}function Je(h,m,b,j,C){for(b=m+b;m<b;){var T=(I=h[m++])>>16&240|I>>12&15,I=240&I|I>>28&15;j[C++]=T,j[C++]=I}}function gt(h,m,b,j,C){for(b=m+b;m<b;){var T=(I=h[m++])>>16&248|I>>13&7,I=I>>5&224|I>>3&31;j[C++]=T,j[C++]=I}}function Vt(h,m,b,j,C){for(b=m+b;m<b;){var T=h[m++];j[C++]=255&T,j[C++]=T>>8&255,j[C++]=T>>16&255}}function at(h,m,b,j,C,T){if(T==0)for(b=m+b;m<b;)Se(j,((T=h[m++])[0]>>24|T[1]>>8&65280|T[2]<<8&16711680|T[3]<<24)>>>0),C+=32;else r(j,C,h,m,b)}function Et(h,m){M[m][0]=M[h+"0"],M[m][1]=M[h+"1"],M[m][2]=M[h+"2"],M[m][3]=M[h+"3"],M[m][4]=M[h+"4"],M[m][5]=M[h+"5"],M[m][6]=M[h+"6"],M[m][7]=M[h+"7"],M[m][8]=M[h+"8"],M[m][9]=M[h+"9"],M[m][10]=M[h+"10"],M[m][11]=M[h+"11"],M[m][12]=M[h+"12"],M[m][13]=M[h+"13"],M[m][14]=M[h+"0"],M[m][15]=M[h+"0"]}function wt(h){return h==Gm||h==Km||h==Ih||h==Jm}function vn(){this.eb=[],this.size=this.A=this.fb=0}function jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ut(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vn,this.f.kb=new jn,this.sd=null}function ut(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _s(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function ir(h,m){var b=h.T,j=m.ba.f.RGBA,C=j.eb,T=j.fb+h.ka*j.A,I=Mi[m.ba.S],D=h.y,$=h.O,H=h.f,ne=h.N,pe=h.ea,W=h.W,re=m.cc,ue=m.dc,ye=m.Mc,fe=m.Nc,we=h.ka,xe=h.ka+h.T,Ee=h.U,ke=Ee+1>>1;for(we==0?I(D,$,null,null,H,ne,pe,W,H,ne,pe,W,C,T,null,null,Ee):(I(m.ec,m.fc,D,$,re,ue,ye,fe,H,ne,pe,W,C,T-j.A,C,T,Ee),++b);we+2<xe;we+=2)re=H,ue=ne,ye=pe,fe=W,ne+=h.Rc,W+=h.Rc,T+=2*j.A,I(D,($+=2*h.fa)-h.fa,D,$,re,ue,ye,fe,H,ne,pe,W,C,T-j.A,C,T,Ee);return $+=h.fa,h.j+xe<h.o?(r(m.ec,m.fc,D,$,Ee),r(m.cc,m.dc,H,ne,ke),r(m.Mc,m.Nc,pe,W,ke),b--):1&xe||I(D,$,null,null,H,ne,pe,W,H,ne,pe,W,C,T+j.A,null,null,Ee),b}function Yi(h,m,b){var j=h.F,C=[h.J];if(j!=null){var T=h.U,I=m.ba.S,D=I==Rh||I==Ih;m=m.ba.f.RGBA;var $=[0],H=h.ka;$[0]=h.T,h.Kb&&(H==0?--$[0]:(--H,C[0]-=h.width),h.j+h.ka+h.T==h.o&&($[0]=h.o-h.j-H));var ne=m.eb;H=m.fb+H*m.A,h=I2(j,C[0],h.width,T,$,ne,H+(D?0:3),m.A),t(b==$),h&&wt(I)&&_u(ne,H,D,T,$,m.A)}return 0}function si(h){var m=h.ma,b=m.ba.S,j=11>b,C=b==Lh||b==Th||b==Rh||b==Wm||b==12||wt(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!pu(m.Oa,h,C?11:12))return 0;if(C&&wt(b)&&jh(),h.da)alert("todo:use_scaling");else{if(j){if(m.Ib=_s,h.Kb){if(b=h.U+1>>1,m.memory=s(h.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=ir,jh()}}else alert("todo:EmitYUV");C&&(m.Jb=Yi,j&&Ii())}if(j&&!Z2){for(h=0;256>h;++h)rE[h]=89858*(h-128)+Fh>>Oh,oE[h]=-22014*(h-128)+Fh,sE[h]=-45773*(h-128),iE[h]=113618*(h-128)+Fh>>Oh;for(h=ku;h<Xm;++h)m=76283*(h-16)+Fh>>Oh,aE[h-ku]=Nn(m,255),lE[h-ku]=Nn(m+8>>4,15);Z2=1}return 1}function lt(h){var m=h.ma,b=h.U,j=h.T;return t(!(1&h.ka)),0>=b||0>=j?0:(b=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,b),m.Dc+=b,1)}function Zi(h){h.ma.memory=null}function Xi(h,m,b,j){return se(h,8)!=47?0:(m[0]=se(h,14)+1,b[0]=se(h,14)+1,j[0]=se(h,1),se(h,3)!=0?0:!h.h)}function Vr(h,m){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+se(m,b)+1}function wr(h,m){return 120<m?m-120:1<=(b=((b=qA[m-1])>>4)*h+(8-(15&b)))?b:1;var b}function ft(h,m,b){var j=B(b),C=h[m+=255&j].g-8;return 0<C&&(ee(b,b.u+8),j=B(b),m+=h[m].value,m+=j&(1<<C)-1),ee(b,b.u+h[m].g),h[m].value}function zn(h,m,b){return b.g+=h.g,b.value+=h.value<<m>>>0,t(8>=b.g),h.g}function Jn(h,m,b){var j=h.xc;return t((m=j==0?0:h.vc[h.md*(b>>j)+(m>>j)])<h.Wb),h.Ya[m]}function oi(h,m,b,j){var C=h.ab,T=h.c*m,I=h.C;m=I+m;var D=b,$=j;for(j=h.Ta,b=h.Ua;0<C--;){var H=h.gc[C],ne=I,pe=m,W=D,re=$,ue=($=j,D=b,H.Ea);switch(t(ne<pe),t(pe<=H.nc),H.hc){case 2:Rn(W,re,(pe-ne)*ue,$,D);break;case 0:var ye=ne,fe=pe,we=$,xe=D,Ee=(We=H).Ea;ye==0&&(gu(W,re,null,null,1,we,xe),yt(W,re+1,0,0,Ee-1,we,xe+1),re+=Ee,xe+=Ee,++ye);for(var ke=1<<We.b,et=ke-1,ze=Ne(Ee,We.b),kt=We.K,We=We.w+(ye>>We.b)*ze;ye<fe;){var Lt=kt,Xn=We,jt=1;for(Il(W,re,we,xe-Ee,1,we,xe);jt<Ee;){var Ge=(jt&~et)+ke;Ge>Ee&&(Ge=Ee),(0,yu[Lt[Xn++]>>8&15])(W,re+ +jt,we,xe+jt-Ee,Ge-jt,we,xe+jt),jt=Ge}re+=Ee,xe+=Ee,++ye&et||(We+=ze)}pe!=H.nc&&r($,D-ue,$,D+(pe-ne-1)*ue,ue);break;case 1:for(ue=W,fe=re,Ee=(W=H.Ea)-(xe=W&~(we=(re=1<<H.b)-1)),ye=Ne(W,H.b),ke=H.K,H=H.w+(ne>>H.b)*ye;ne<pe;){for(et=ke,ze=H,kt=new ot,We=fe+xe,Lt=fe+W;fe<We;)tt(et[ze++],kt),wu(kt,ue,fe,re,$,D),fe+=re,D+=re;fe<Lt&&(tt(et[ze++],kt),wu(kt,ue,fe,Ee,$,D),fe+=Ee,D+=Ee),++ne&we||(H+=ye)}break;case 3:if(W==$&&re==D&&0<H.b){for(fe=$,W=ue=D+(pe-ne)*ue-(xe=(pe-ne)*Ne(H.Ea,H.b)),re=$,we=D,ye=[],xe=(Ee=xe)-1;0<=xe;--xe)ye[xe]=re[we+xe];for(xe=Ee-1;0<=xe;--xe)fe[W+xe]=ye[xe];Ah(H,ne,pe,$,ue,$,D)}else Ah(H,ne,pe,W,re,$,D)}D=j,$=b}$!=b&&r(j,b,D,$,T)}function ai(h,m){var b=h.V,j=h.Ba+h.c*h.C,C=m-h.C;if(t(m<=h.l.o),t(16>=C),0<C){var T=h.l,I=h.Ta,D=h.Ua,$=T.width;if(oi(h,C,b,j),C=D=[D],t((b=h.C)<(j=m)),t(T.v<T.va),j>T.o&&(j=T.o),b<T.j){var H=T.j-b;b=T.j,C[0]+=H*$}if(b>=j?b=0:(C[0]+=4*T.v,T.ka=b-T.j,T.U=T.va-T.v,T.T=j-b,b=1),b){if(D=D[0],11>(b=h.ca).S){var ne=b.f.RGBA,pe=(j=b.S,C=T.U,T=T.T,H=ne.eb,ne.A),W=T;for(ne=ne.fb+h.Ma*ne.A;0<W--;){var re=I,ue=D,ye=C,fe=H,we=ne;switch(j){case Ph:bu(re,ue,ye,fe,we);break;case Lh:Lo(re,ue,ye,fe,we);break;case Gm:Lo(re,ue,ye,fe,we),_u(fe,we,0,ye,1,0);break;case $2:Ua(re,ue,ye,fe,we);break;case Th:at(re,ue,ye,fe,we,1);break;case Km:at(re,ue,ye,fe,we,1),_u(fe,we,0,ye,1,0);break;case Rh:at(re,ue,ye,fe,we,0);break;case Ih:at(re,ue,ye,fe,we,0),_u(fe,we,1,ye,1,0);break;case Wm:To(re,ue,ye,fe,we);break;case Jm:To(re,ue,ye,fe,we),R2(fe,we,ye,1,0);break;case z2:Ro(re,ue,ye,fe,we);break;default:t(0)}D+=$,ne+=pe}h.Ma+=T}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=b.height)}}h.C=m,t(h.C<=h.i)}function Hr(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var b=h.Ya[m].G,j=h.Ya[m].H;if(0<b[1][j[1]+0].g||0<b[2][j[2]+0].g||0<b[3][j[3]+0].g)return 0}return 1}function Qi(h,m,b,j,C,T){if(h.Z!=0){var I=h.qd,D=h.rd;for(t(Fo[h.Z]!=null);m<b;++m)Fo[h.Z](I,D,j,C,j,C,T),I=j,D=C,C+=T;h.qd=I,h.rd=D}}function li(h,m){var b=h.l.ma,j=b.Z==0||b.Z==1?h.l.j:h.C;if(j=h.C<j?j:h.C,t(m<=h.l.o),m>j){var C=h.l.width,T=b.ca,I=b.tb+C*j,D=h.V,$=h.Ba+h.c*j,H=h.gc;t(h.ab==1),t(H[0].hc==3),Ns(H[0],j,m,D,$,T,I),Qi(b,j,m,T,I,C)}h.C=h.Ma=m}function ci(h,m,b,j,C,T,I){var D=h.$/j,$=h.$%j,H=h.m,ne=h.s,pe=b+h.$,W=pe;C=b+j*C;var re=b+j*T,ue=280+ne.ua,ye=h.Pb?D:16777216,fe=0<ne.ua?ne.Wa:null,we=ne.wc,xe=pe<re?Jn(ne,$,D):null;t(h.C<T),t(re<=C);var Ee=!1;e:for(;;){for(;Ee||pe<re;){var ke=0;if(D>=ye){var et=pe-b;t((ye=h).Pb),ye.wd=ye.m,ye.xd=et,0<ye.s.ua&&st(ye.s.Wa,ye.s.vb),ye=D+HA}if($&we||(xe=Jn(ne,$,D)),t(xe!=null),xe.Qb&&(m[pe]=xe.qb,Ee=!0),!Ee)if(oe(H),xe.jc){ke=H,et=m;var ze=pe,kt=xe.pd[B(ke)&Ba-1];t(xe.jc),256>kt.g?(ee(ke,ke.u+kt.g),et[ze]=kt.value,ke=0):(ee(ke,ke.u+kt.g-256),t(256<=kt.value),ke=kt.value),ke==0&&(Ee=!0)}else ke=ft(xe.G[0],xe.H[0],H);if(H.h)break;if(Ee||256>ke){if(!Ee)if(xe.nd)m[pe]=(xe.qb|ke<<8)>>>0;else{if(oe(H),Ee=ft(xe.G[1],xe.H[1],H),oe(H),et=ft(xe.G[2],xe.H[2],H),ze=ft(xe.G[3],xe.H[3],H),H.h)break;m[pe]=(ze<<24|Ee<<16|ke<<8|et)>>>0}if(Ee=!1,++pe,++$>=j&&($=0,++D,I!=null&&D<=T&&!(D%16)&&I(h,D),fe!=null))for(;W<pe;)ke=m[W++],fe.X[(506832829*ke&4294967295)>>>fe.Mb]=ke}else if(280>ke){if(ke=Vr(ke-256,H),et=ft(xe.G[4],xe.H[4],H),oe(H),et=wr(j,et=Vr(et,H)),H.h)break;if(pe-b<et||C-pe<ke)break e;for(ze=0;ze<ke;++ze)m[pe+ze]=m[pe+ze-et];for(pe+=ke,$+=ke;$>=j;)$-=j,++D,I!=null&&D<=T&&!(D%16)&&I(h,D);if(t(pe<=C),$&we&&(xe=Jn(ne,$,D)),fe!=null)for(;W<pe;)ke=m[W++],fe.X[(506832829*ke&4294967295)>>>fe.Mb]=ke}else{if(!(ke<ue))break e;for(Ee=ke-280,t(fe!=null);W<pe;)ke=m[W++],fe.X[(506832829*ke&4294967295)>>>fe.Mb]=ke;ke=pe,t(!(Ee>>>(et=fe).Xa)),m[ke]=et.X[Ee],Ee=!0}Ee||t(H.h==X(H))}if(h.Pb&&H.h&&pe<C)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&st(h.s.vb,h.s.Wa);else{if(H.h)break e;I!=null&&I(h,D>T?T:D),h.a=0,h.$=pe-b}return 1}return h.a=3,0}function Rr(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,t(h!=null)}function es(){var h=new Ze;return h==null?null:(h.a=0,h.xb=H2,Et("Predictor","VP8LPredictors"),Et("Predictor","VP8LPredictors_C"),Et("PredictorAdd","VP8LPredictorsAdd"),Et("PredictorAdd","VP8LPredictorsAdd_C"),Rn=mt,wu=He,bu=Zt,Lo=Rt,To=Je,Ro=gt,Ua=Vt,M.VP8LMapColor32b=js,M.VP8LMapColor8b=vu,h)}function Ri(h,m,b,j,C){var T=1,I=[h],D=[m],$=j.m,H=j.s,ne=null,pe=0;e:for(;;){if(b)for(;T&&se($,1);){var W=I,re=D,ue=j,ye=1,fe=ue.m,we=ue.gc[ue.ab],xe=se(fe,2);if(ue.Oc&1<<xe)T=0;else{switch(ue.Oc|=1<<xe,we.hc=xe,we.Ea=W[0],we.nc=re[0],we.K=[null],++ue.ab,t(4>=ue.ab),xe){case 0:case 1:we.b=se(fe,3)+2,ye=Ri(Ne(we.Ea,we.b),Ne(we.nc,we.b),0,ue,we.K),we.K=we.K[0];break;case 3:var Ee,ke=se(fe,8)+1,et=16<ke?0:4<ke?1:2<ke?2:3;if(W[0]=Ne(we.Ea,et),we.b=et,Ee=ye=Ri(ke,1,0,ue,we.K)){var ze,kt=ke,We=we,Lt=1<<(8>>We.b),Xn=s(Lt);if(Xn==null)Ee=0;else{var jt=We.K[0],Ge=We.w;for(Xn[0]=We.K[0][0],ze=1;ze<1*kt;++ze)Xn[ze]=Me(jt[Ge+ze],Xn[ze-1]);for(;ze<4*Lt;++ze)Xn[ze]=0;We.K[0]=null,We.K[0]=Xn,Ee=1}}ye=Ee;break;case 2:break;default:t(0)}T=ye}}if(I=I[0],D=D[0],T&&se($,1)&&!(T=1<=(pe=se($,4))&&11>=pe)){j.a=3;break e}var Fe;if(Fe=T)t:{var On,St,It,un=j,dr=I,Ir=D,An=pe,xr=b,Or=un.m,Qn=un.s,Ot=[null],Wt=1,En=0,Gt=VA[An];n:for(;;){if(xr&&se(Or,1)){var hr=se(Or,3)+2,rs=Ne(dr,hr),Fn=Ne(Ir,hr),Kr=rs*Fn;if(!Ri(rs,Fn,0,un,Ot))break n;for(Ot=Ot[0],Qn.xc=hr,On=0;On<Kr;++On){var en=Ot[On]>>8&65535;Ot[On]=en,en>=Wt&&(Wt=en+1)}}if(Or.h)break n;for(St=0;5>St;++St){var er=q2[St];!St&&0<An&&(er+=1<<An),En<er&&(En=er)}var pi=o(Wt*Gt,Y),Fr=Wt,mi=o(Fr,ae);if(mi==null)var gi=null;else t(65536>=Fr),gi=mi;var Jr=s(En);if(gi==null||Jr==null||pi==null){un.a=1;break n}var vi=pi;for(On=It=0;On<Wt;++On){var on=gi[On],yi=on.G,is=on.H,za=0,Qs=1,fr=0;for(St=0;5>St;++St){er=q2[St],yi[St]=vi,is[St]=It,!St&&0<An&&(er+=1<<An);i:{var Mh,Qm=er,Bh=un,ju=Jr,dE=vi,hE=It,e0=0,Do=Bh.m,fE=se(Do,1);if(i(ju,0,0,Qm),fE){var pE=se(Do,1)+1,mE=se(Do,1),e5=se(Do,mE==0?1:8);ju[e5]=1,pE==2&&(ju[e5=se(Do,8)]=1);var Uh=1}else{var t5=s(19),n5=se(Do,4)+4;if(19<n5){Bh.a=3;var $h=0;break i}for(Mh=0;Mh<n5;++Mh)t5[zA[Mh]]=se(Do,3);var t0=void 0,Nu=void 0,r5=Bh,gE=t5,zh=Qm,i5=ju,n0=0,Mo=r5.m,s5=8,o5=o(128,Y);r:for(;L(o5,0,7,gE,19);){if(se(Mo,1)){var vE=2+2*se(Mo,3);if((t0=2+se(Mo,vE))>zh)break r}else t0=zh;for(Nu=0;Nu<zh&&t0--;){oe(Mo);var a5=o5[0+(127&B(Mo))];ee(Mo,Mo.u+a5.g);var Fl=a5.value;if(16>Fl)i5[Nu++]=Fl,Fl!=0&&(s5=Fl);else{var yE=Fl==16,l5=Fl-16,wE=UA[l5],c5=se(Mo,BA[l5])+wE;if(Nu+c5>zh)break r;for(var bE=yE?s5:0;0<c5--;)i5[Nu++]=bE}}n0=1;break r}n0||(r5.a=3),Uh=n0}(Uh=Uh&&!Do.h)&&(e0=L(dE,hE,8,ju,Qm)),Uh&&e0!=0?$h=e0:(Bh.a=3,$h=0)}if($h==0)break n;if(Qs&&$A[St]==1&&(Qs=vi[It].g==0),za+=vi[It].g,It+=$h,3>=St){var Au,r0=Jr[0];for(Au=1;Au<er;++Au)Jr[Au]>r0&&(r0=Jr[Au]);fr+=r0}}if(on.nd=Qs,on.Qb=0,Qs&&(on.qb=(yi[3][is[3]+0].value<<24|yi[1][is[1]+0].value<<16|yi[2][is[2]+0].value)>>>0,za==0&&256>yi[0][is[0]+0].value&&(on.Qb=1,on.qb+=yi[0][is[0]+0].value<<8)),on.jc=!on.Qb&&6>fr,on.jc){var qh,eo=on;for(qh=0;qh<Ba;++qh){var Bo=qh,Uo=eo.pd[Bo],Vh=eo.G[0][eo.H[0]+Bo];256<=Vh.value?(Uo.g=Vh.g+256,Uo.value=Vh.value):(Uo.g=0,Uo.value=0,Bo>>=zn(Vh,8,Uo),Bo>>=zn(eo.G[1][eo.H[1]+Bo],16,Uo),Bo>>=zn(eo.G[2][eo.H[2]+Bo],0,Uo),zn(eo.G[3][eo.H[3]+Bo],24,Uo))}}}Qn.vc=Ot,Qn.Wb=Wt,Qn.Ya=gi,Qn.yc=pi,Fe=1;break t}Fe=0}if(!(T=Fe)){j.a=3;break e}if(0<pe){if(H.ua=1<<pe,!Z(H.Wa,pe)){j.a=1,T=0;break e}}else H.ua=0;var i0=j,u5=I,xE=D,s0=i0.s,o0=s0.xc;if(i0.c=u5,i0.i=xE,s0.md=Ne(u5,o0),s0.wc=o0==0?-1:(1<<o0)-1,b){j.xb=XA;break e}if((ne=s(I*D))==null){j.a=1,T=0;break e}T=(T=ci(j,ne,0,I,D,D,null))&&!$.h;break e}return T?(C!=null?C[0]=ne:(t(ne==null),t(b)),j.$=0,b||Rr(H)):Rr(H),T}function ts(h,m){var b=h.c*h.i,j=b+m+16*m;return t(h.c<=m),h.V=s(j),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+m,1)}function So(h,m){var b=h.C,j=m-b,C=h.V,T=h.Ba+h.c*b;for(t(m<=h.l.o);0<j;){var I=16<j?16:j,D=h.l.ma,$=h.l.width,H=$*I,ne=D.ca,pe=D.tb+$*b,W=h.Ta,re=h.Ua;oi(h,I,C,T),O2(W,re,ne,pe,H),Qi(D,b,b+I,ne,pe,$),j-=I,C+=I*h.c,b+=I}t(b==m),h.C=h.Ma=m}function qs(){this.ub=this.yd=this.td=this.Rb=0}function ko(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ka(){this.Yb=function(){var h=[];return function m(b,j,C){for(var T=C[j],I=0;I<T&&(b.push(C.length>j+1?[]:0),!(C.length<j+1));I++)m(b[I],j+1,C)}(h,0,[3,11]),h}()}function Al(){this.jb=s(3),this.Wc=a([4,8],ka),this.Xc=a([4,17],ka)}function De(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function _e(){this.ld=this.La=this.dd=this.tc=0}function $e(){this.Na=this.la=0}function Nt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Be(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function nt(){this.uc=this.M=this.Nb=0,this.wa=Array(new _e),this.Y=0,this.ya=Array(new Be),this.aa=0,this.l=new qn}function Re(){this.y=s(16),this.f=s(8),this.ea=s(8)}function $t(){this.cb=this.a=0,this.sc="",this.m=new A,this.Od=new qs,this.Kc=new ko,this.ed=new De,this.Qa=new Vs,this.Ic=this.$c=this.Aa=0,this.D=new nt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,A),this.ia=0,this.pb=o(4,Nt),this.Pa=new Al,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Re),this.Hd=0,this.rb=Array(new $e),this.sb=0,this.wa=Array(new _e),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Be),this.L=this.aa=0,this.gd=a([4,2],_e),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function sr(){var h=new $t;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Su||(Su=cn)),h}function Ht(h,m,b){return h.a==0&&(h.a=m,h.sc=b,h.cb=0),0}function Ss(h,m,b){return 3<=b&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function Wr(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return Ht(h,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,j=m.w,C=m.ha;if(4>C)return Ht(h,7,"Truncated header.");var T=b[j+0]|b[j+1]<<8|b[j+2]<<16,I=h.Od;if(I.Rb=!(1&T),I.td=T>>1&7,I.yd=T>>4&1,I.ub=T>>5,3<I.td)return Ht(h,3,"Incorrect keyframe parameters.");if(!I.yd)return Ht(h,4,"Frame not displayable.");j+=3,C-=3;var D=h.Kc;if(I.Rb){if(7>C)return Ht(h,7,"cannot parse picture header");if(!Ss(b,j,C))return Ht(h,3,"Bad code word");D.c=16383&(b[j+4]<<8|b[j+3]),D.Td=b[j+4]>>6,D.i=16383&(b[j+6]<<8|b[j+5]),D.Ud=b[j+6]>>6,j+=7,C-=7,h.za=D.c+15>>4,h.Ub=D.i+15>>4,m.width=D.c,m.height=D.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((T=h.Pa).jb,0,255,T.jb.length),t((T=h.Qa)!=null),T.Cb=0,T.Bb=0,T.Fb=1,i(T.Zb,0,0,T.Zb.length),i(T.Lb,0,0,T.Lb)}if(I.ub>C)return Ht(h,7,"bad partition length");de(T=h.m,b,j,I.ub),j+=I.ub,C-=I.ub,I.Rb&&(D.Ld=he(T),D.Kd=he(T)),D=h.Qa;var $,H=h.Pa;if(t(T!=null),t(D!=null),D.Cb=he(T),D.Cb){if(D.Bb=he(T),he(T)){for(D.Fb=he(T),$=0;4>$;++$)D.Zb[$]=he(T)?J(T,7):0;for($=0;4>$;++$)D.Lb[$]=he(T)?J(T,6):0}if(D.Bb)for($=0;3>$;++$)H.jb[$]=he(T)?ce(T,8):255}else D.Bb=0;if(T.Ka)return Ht(h,3,"cannot parse segment header");if((D=h.ed).zd=he(T),D.Tb=ce(T,6),D.wb=ce(T,3),D.Pc=he(T),D.Pc&&he(T)){for(H=0;4>H;++H)he(T)&&(D.vd[H]=J(T,6));for(H=0;4>H;++H)he(T)&&(D.od[H]=J(T,6))}if(h.L=D.Tb==0?0:D.zd?1:2,T.Ka)return Ht(h,3,"cannot parse filter header");var ne=C;if(C=$=j,j=$+ne,D=ne,h.Xb=(1<<ce(h.m,2))-1,ne<3*(H=h.Xb))b=7;else{for($+=3*H,D-=3*H,ne=0;ne<H;++ne){var pe=b[C+0]|b[C+1]<<8|b[C+2]<<16;pe>D&&(pe=D),de(h.Jc[+ne],b,$,pe),$+=pe,D-=pe,C+=3}de(h.Jc[+H],b,$,D),b=$<j?0:5}if(b!=0)return Ht(h,b,"cannot parse partitions");for(b=ce($=h.m,7),C=he($)?J($,4):0,j=he($)?J($,4):0,D=he($)?J($,4):0,H=he($)?J($,4):0,$=he($)?J($,4):0,ne=h.Qa,pe=0;4>pe;++pe){if(ne.Cb){var W=ne.Zb[pe];ne.Fb||(W+=b)}else{if(0<pe){h.pb[pe]=h.pb[0];continue}W=b}var re=h.pb[pe];re.Sc[0]=Ym[Nn(W+C,127)],re.Sc[1]=Zm[Nn(W+0,127)],re.Eb[0]=2*Ym[Nn(W+j,127)],re.Eb[1]=101581*Zm[Nn(W+D,127)]>>16,8>re.Eb[1]&&(re.Eb[1]=8),re.Qc[0]=Ym[Nn(W+H,117)],re.Qc[1]=Zm[Nn(W+$,127)],re.lc=W+$}if(!I.Rb)return Ht(h,4,"Not a key frame.");for(he(T),I=h.Pa,b=0;4>b;++b){for(C=0;8>C;++C)for(j=0;3>j;++j)for(D=0;11>D;++D)H=me(T,YA[b][C][j][D])?ce(T,8):KA[b][C][j][D],I.Wc[b][C].Yb[j][D]=H;for(C=0;17>C;++C)I.Xc[b][C]=I.Wc[b][ZA[C]]}return h.kc=he(T),h.kc&&(h.Bd=ce(T,8)),h.cb=1}function cn(h,m,b,j,C,T,I){var D=m[C].Yb[b];for(b=0;16>C;++C){if(!me(h,D[b+0]))return C;for(;!me(h,D[b+1]);)if(D=m[++C].Yb[0],b=0,C==16)return 16;var $=m[C+1].Yb;if(me(h,D[b+2])){var H=h,ne=0;if(me(H,(W=D)[(pe=b)+3]))if(me(H,W[pe+6])){for(D=0,pe=2*(ne=me(H,W[pe+8]))+(W=me(H,W[pe+9+ne])),ne=0,W=WA[pe];W[D];++D)ne+=ne+me(H,W[D]);ne+=3+(8<<pe)}else me(H,W[pe+7])?(ne=7+2*me(H,165),ne+=me(H,145)):ne=5+me(H,159);else ne=me(H,W[pe+4])?3+me(H,W[pe+5]):2;D=$[2]}else ne=1,D=$[1];$=I+GA[C],0>(H=h).b&&ge(H);var pe,W=H.b,re=(pe=H.Ca>>1)-(H.I>>W)>>31;--H.b,H.Ca+=re,H.Ca|=1,H.I-=(pe+1&re)<<W,T[$]=((ne^re)-re)*j[(0<C)+0]}return 16}function rn(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Tn(h,m,b,j,C){C=h[m+b+32*j]+(C>>3),h[m+b+32*j]=-256&C?0>C?0:255:C}function ui(h,m,b,j,C,T){Tn(h,m,0,b,j+C),Tn(h,m,1,b,j+T),Tn(h,m,2,b,j-T),Tn(h,m,3,b,j-C)}function zt(h){return(20091*h>>16)+h}function ru(h,m,b,j){var C,T=0,I=s(16);for(C=0;4>C;++C){var D=h[m+0]+h[m+8],$=h[m+0]-h[m+8],H=(35468*h[m+4]>>16)-zt(h[m+12]),ne=zt(h[m+4])+(35468*h[m+12]>>16);I[T+0]=D+ne,I[T+1]=$+H,I[T+2]=$-H,I[T+3]=D-ne,T+=4,m++}for(C=T=0;4>C;++C)D=(h=I[T+0]+4)+I[T+8],$=h-I[T+8],H=(35468*I[T+4]>>16)-zt(I[T+12]),Tn(b,j,0,0,D+(ne=zt(I[T+4])+(35468*I[T+12]>>16))),Tn(b,j,1,0,$+H),Tn(b,j,2,0,$-H),Tn(b,j,3,0,D-ne),T++,j+=32}function Lm(h,m,b,j){var C=h[m+0]+4,T=35468*h[m+4]>>16,I=zt(h[m+4]),D=35468*h[m+1]>>16;ui(b,j,0,C+I,h=zt(h[m+1]),D),ui(b,j,1,C+T,h,D),ui(b,j,2,C-T,h,D),ui(b,j,3,C-I,h,D)}function Tm(h,m,b,j,C){ru(h,m,b,j),C&&ru(h,m+16,b,j+4)}function Rm(h,m,b,j){$a(h,m+0,b,j,1),$a(h,m+32,b,j+128,1)}function ks(h,m,b,j){var C;for(h=h[m+0]+4,C=0;4>C;++C)for(m=0;4>m;++m)Tn(b,j,m,C,h)}function yh(h,m,b,j){h[m+0]&&qt(h,m+0,b,j),h[m+16]&&qt(h,m+16,b,j+4),h[m+32]&&qt(h,m+32,b,j+128),h[m+48]&&qt(h,m+48,b,j+128+4)}function wh(h,m,b,j){var C,T=s(16);for(C=0;4>C;++C){var I=h[m+0+C]+h[m+12+C],D=h[m+4+C]+h[m+8+C],$=h[m+4+C]-h[m+8+C],H=h[m+0+C]-h[m+12+C];T[0+C]=I+D,T[8+C]=I-D,T[4+C]=H+$,T[12+C]=H-$}for(C=0;4>C;++C)I=(h=T[0+4*C]+3)+T[3+4*C],D=T[1+4*C]+T[2+4*C],$=T[1+4*C]-T[2+4*C],H=h-T[3+4*C],b[j+0]=I+D>>3,b[j+16]=H+$>>3,b[j+32]=I-D>>3,b[j+48]=H-$>>3,j+=64}function jo(h,m,b){var j,C=m-32,T=fi,I=255-h[C-1];for(j=0;j<b;++j){var D,$=T,H=I+h[m-1];for(D=0;D<b;++D)h[m+D]=$[H+h[C+D]];m+=32}}function iu(h,m){jo(h,m,4)}function Im(h,m){jo(h,m,8)}function Om(h,m){jo(h,m,16)}function Fm(h,m){var b;for(b=0;16>b;++b)r(h,m+32*b,h,m-32,16)}function su(h,m){var b;for(b=16;0<b;--b)i(h,m,h[m-1],16),m+=32}function ja(h,m,b){var j;for(j=0;16>j;++j)i(m,b+32*j,h,16)}function No(h,m){var b,j=16;for(b=0;16>b;++b)j+=h[m-1+32*b]+h[m+b-32];ja(j>>5,h,m)}function Dm(h,m){var b,j=8;for(b=0;16>b;++b)j+=h[m-1+32*b];ja(j>>4,h,m)}function Na(h,m){var b,j=8;for(b=0;16>b;++b)j+=h[m+b-32];ja(j>>4,h,m)}function ou(h,m){ja(128,h,m)}function bt(h,m,b){return h+2*m+b+2>>2}function Mm(h,m){var b,j=m-32;for(j=new Uint8Array([bt(h[j-1],h[j+0],h[j+1]),bt(h[j+0],h[j+1],h[j+2]),bt(h[j+1],h[j+2],h[j+3]),bt(h[j+2],h[j+3],h[j+4])]),b=0;4>b;++b)r(h,m+32*b,j,0,j.length)}function Bm(h,m){var b=h[m-1],j=h[m-1+32],C=h[m-1+64],T=h[m-1+96];Se(h,m+0,16843009*bt(h[m-1-32],b,j)),Se(h,m+32,16843009*bt(b,j,C)),Se(h,m+64,16843009*bt(j,C,T)),Se(h,m+96,16843009*bt(C,T,T))}function Um(h,m){var b,j=4;for(b=0;4>b;++b)j+=h[m+b-32]+h[m-1+32*b];for(j>>=3,b=0;4>b;++b)i(h,m+32*b,j,4)}function $m(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],T=h[m-1-32],I=h[m+0-32],D=h[m+1-32],$=h[m+2-32],H=h[m+3-32];h[m+0+96]=bt(j,C,h[m-1+96]),h[m+1+96]=h[m+0+64]=bt(b,j,C),h[m+2+96]=h[m+1+64]=h[m+0+32]=bt(T,b,j),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=bt(I,T,b),h[m+3+64]=h[m+2+32]=h[m+1+0]=bt(D,I,T),h[m+3+32]=h[m+2+0]=bt($,D,I),h[m+3+0]=bt(H,$,D)}function Hs(h,m){var b=h[m+1-32],j=h[m+2-32],C=h[m+3-32],T=h[m+4-32],I=h[m+5-32],D=h[m+6-32],$=h[m+7-32];h[m+0+0]=bt(h[m+0-32],b,j),h[m+1+0]=h[m+0+32]=bt(b,j,C),h[m+2+0]=h[m+1+32]=h[m+0+64]=bt(j,C,T),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=bt(C,T,I),h[m+3+32]=h[m+2+64]=h[m+1+96]=bt(T,I,D),h[m+3+64]=h[m+2+96]=bt(I,D,$),h[m+3+96]=bt(D,$,$)}function Ws(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],T=h[m-1-32],I=h[m+0-32],D=h[m+1-32],$=h[m+2-32],H=h[m+3-32];h[m+0+0]=h[m+1+64]=T+I+1>>1,h[m+1+0]=h[m+2+64]=I+D+1>>1,h[m+2+0]=h[m+3+64]=D+$+1>>1,h[m+3+0]=$+H+1>>1,h[m+0+96]=bt(C,j,b),h[m+0+64]=bt(j,b,T),h[m+0+32]=h[m+1+96]=bt(b,T,I),h[m+1+32]=h[m+2+96]=bt(T,I,D),h[m+2+32]=h[m+3+96]=bt(I,D,$),h[m+3+32]=bt(D,$,H)}function zm(h,m){var b=h[m+0-32],j=h[m+1-32],C=h[m+2-32],T=h[m+3-32],I=h[m+4-32],D=h[m+5-32],$=h[m+6-32],H=h[m+7-32];h[m+0+0]=b+j+1>>1,h[m+1+0]=h[m+0+64]=j+C+1>>1,h[m+2+0]=h[m+1+64]=C+T+1>>1,h[m+3+0]=h[m+2+64]=T+I+1>>1,h[m+0+32]=bt(b,j,C),h[m+1+32]=h[m+0+96]=bt(j,C,T),h[m+2+32]=h[m+1+96]=bt(C,T,I),h[m+3+32]=h[m+2+96]=bt(T,I,D),h[m+3+64]=bt(I,D,$),h[m+3+96]=bt(D,$,H)}function qm(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],T=h[m-1+96];h[m+0+0]=b+j+1>>1,h[m+2+0]=h[m+0+32]=j+C+1>>1,h[m+2+32]=h[m+0+64]=C+T+1>>1,h[m+1+0]=bt(b,j,C),h[m+3+0]=h[m+1+32]=bt(j,C,T),h[m+3+32]=h[m+1+64]=bt(C,T,T),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=T}function El(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],T=h[m-1+96],I=h[m-1-32],D=h[m+0-32],$=h[m+1-32],H=h[m+2-32];h[m+0+0]=h[m+2+32]=b+I+1>>1,h[m+0+32]=h[m+2+64]=j+b+1>>1,h[m+0+64]=h[m+2+96]=C+j+1>>1,h[m+0+96]=T+C+1>>1,h[m+3+0]=bt(D,$,H),h[m+2+0]=bt(I,D,$),h[m+1+0]=h[m+3+32]=bt(b,I,D),h[m+1+32]=h[m+3+64]=bt(j,b,I),h[m+1+64]=h[m+3+96]=bt(C,j,b),h[m+1+96]=bt(T,C,j)}function au(h,m){var b;for(b=0;8>b;++b)r(h,m+32*b,h,m-32,8)}function Aa(h,m){var b;for(b=0;8>b;++b)i(h,m,h[m-1],8),m+=32}function Cl(h,m,b){var j;for(j=0;8>j;++j)i(m,b+32*j,h,8)}function Pl(h,m){var b,j=8;for(b=0;8>b;++b)j+=h[m+b-32]+h[m-1+32*b];Cl(j>>4,h,m)}function Vm(h,m){var b,j=4;for(b=0;8>b;++b)j+=h[m+b-32];Cl(j>>3,h,m)}function lu(h,m){var b,j=4;for(b=0;8>b;++b)j+=h[m-1+32*b];Cl(j>>3,h,m)}function cu(h,m){Cl(128,h,m)}function Ea(h,m,b){var j=h[m-b],C=h[m+0],T=3*(C-j)+Hm[1020+h[m-2*b]-h[m+b]],I=Ch[112+(T+4>>3)];h[m-b]=fi[255+j+Ch[112+(T+3>>3)]],h[m+0]=fi[255+C-I]}function Ca(h,m,b,j){var C=h[m+0],T=h[m+b];return Di[255+h[m-2*b]-h[m-b]]>j||Di[255+T-C]>j}function uu(h,m,b,j){return 4*Di[255+h[m-b]-h[m+0]]+Di[255+h[m-2*b]-h[m+b]]<=j}function Ll(h,m,b,j,C){var T=h[m-3*b],I=h[m-2*b],D=h[m-b],$=h[m+0],H=h[m+b],ne=h[m+2*b],pe=h[m+3*b];return 4*Di[255+D-$]+Di[255+I-H]>j?0:Di[255+h[m-4*b]-T]<=C&&Di[255+T-I]<=C&&Di[255+I-D]<=C&&Di[255+pe-ne]<=C&&Di[255+ne-H]<=C&&Di[255+H-$]<=C}function du(h,m,b,j){var C=2*j+1;for(j=0;16>j;++j)uu(h,m+j,b,C)&&Ea(h,m+j,b)}function Pa(h,m,b,j){var C=2*j+1;for(j=0;16>j;++j)uu(h,m+j*b,1,C)&&Ea(h,m+j*b,1)}function bh(h,m,b,j){var C;for(C=3;0<C;--C)du(h,m+=4*b,b,j)}function xh(h,m,b,j){var C;for(C=3;0<C;--C)Pa(h,m+=4,b,j)}function Gs(h,m,b,j,C,T,I,D){for(T=2*T+1;0<C--;){if(Ll(h,m,b,T,I))if(Ca(h,m,b,D))Ea(h,m,b);else{var $=h,H=m,ne=b,pe=$[H-2*ne],W=$[H-ne],re=$[H+0],ue=$[H+ne],ye=$[H+2*ne],fe=27*(xe=Hm[1020+3*(re-W)+Hm[1020+pe-ue]])+63>>7,we=18*xe+63>>7,xe=9*xe+63>>7;$[H-3*ne]=fi[255+$[H-3*ne]+xe],$[H-2*ne]=fi[255+pe+we],$[H-ne]=fi[255+W+fe],$[H+0]=fi[255+re-fe],$[H+ne]=fi[255+ue-we],$[H+2*ne]=fi[255+ye-xe]}m+=j}}function Ks(h,m,b,j,C,T,I,D){for(T=2*T+1;0<C--;){if(Ll(h,m,b,T,I))if(Ca(h,m,b,D))Ea(h,m,b);else{var $=h,H=m,ne=b,pe=$[H-ne],W=$[H+0],re=$[H+ne],ue=Ch[112+(4+(ye=3*(W-pe))>>3)],ye=Ch[112+(ye+3>>3)],fe=ue+1>>1;$[H-2*ne]=fi[255+$[H-2*ne]+fe],$[H-ne]=fi[255+pe+ye],$[H+0]=fi[255+W-ue],$[H+ne]=fi[255+re-fe]}m+=j}}function _h(h,m,b,j,C,T){Gs(h,m,b,1,16,j,C,T)}function Sh(h,m,b,j,C,T){Gs(h,m,1,b,16,j,C,T)}function La(h,m,b,j,C,T){var I;for(I=3;0<I;--I)Ks(h,m+=4*b,b,1,16,j,C,T)}function kh(h,m,b,j,C,T){var I;for(I=3;0<I;--I)Ks(h,m+=4,1,b,16,j,C,T)}function y(h,m,b,j,C,T,I,D){Gs(h,m,C,1,8,T,I,D),Gs(b,j,C,1,8,T,I,D)}function E(h,m,b,j,C,T,I,D){Gs(h,m,1,C,8,T,I,D),Gs(b,j,1,C,8,T,I,D)}function K(h,m,b,j,C,T,I,D){Ks(h,m+4*C,C,1,8,T,I,D),Ks(b,j+4*C,C,1,8,T,I,D)}function Q(h,m,b,j,C,T,I,D){Ks(h,m+4,1,C,8,T,I,D),Ks(b,j+4,1,C,8,T,I,D)}function le(){this.ba=new Ut,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function be(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function je(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ve(){this.ua=0,this.Wa=new ht,this.vb=new ht,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new Y}function Ze(){this.xb=this.a=0,this.l=new qn,this.ca=new Ut,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ve,this.ab=0,this.gc=o(4,je),this.Oc=0}function vt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new qn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xt(h,m,b,j,C,T,I){for(h=h==null?0:h[m+0],m=0;m<I;++m)C[T+m]=h+b[j+m]&255,h=C[T+m]}function Mt(h,m,b,j,C,T,I){var D;if(h==null)xt(null,null,b,j,C,T,I);else for(D=0;D<I;++D)C[T+D]=h[m+D]+b[j+D]&255}function yn(h,m,b,j,C,T,I){if(h==null)xt(null,null,b,j,C,T,I);else{var D,$=h[m+0],H=$,ne=$;for(D=0;D<I;++D)H=ne+($=h[m+D])-H,ne=b[j+D]+(-256&H?0>H?0:255:H)&255,H=$,C[T+D]=ne}}function Vn(h,m,b,j){var C=m.width,T=m.o;if(t(h!=null&&m!=null),0>b||0>=j||b+j>T)return null;if(!h.Cc){if(h.ga==null){var I;if(h.ga=new vt,(I=h.ga==null)||(I=m.width*m.o,t(h.Gb.length==0),h.Gb=s(I),h.Uc=0,h.Gb==null?I=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,I=1),I=!I),!I){I=h.ga;var D=h.Fa,$=h.P,H=h.qc,ne=h.mb,pe=h.nb,W=$+1,re=H-1,ue=I.l;if(t(D!=null&&ne!=null&&m!=null),Fo[0]=null,Fo[1]=xt,Fo[2]=Mt,Fo[3]=yn,I.ca=ne,I.tb=pe,I.c=m.width,I.i=m.height,t(0<I.c&&0<I.i),1>=H)m=0;else if(I.$a=3&D[$+0],I.Z=D[$+0]>>2&3,I.Lc=D[$+0]>>4&3,$=D[$+0]>>6&3,0>I.$a||1<I.$a||4<=I.Z||1<I.Lc||$)m=0;else if(ue.put=lt,ue.ac=si,ue.bc=Zi,ue.ma=I,ue.width=m.width,ue.height=m.height,ue.Da=m.Da,ue.v=m.v,ue.va=m.va,ue.j=m.j,ue.o=m.o,I.$a)e:{t(I.$a==1),m=es();t:for(;;){if(m==null){m=0;break e}if(t(I!=null),I.mc=m,m.c=I.c,m.i=I.i,m.l=I.l,m.l.ma=I,m.l.width=I.c,m.l.height=I.i,m.a=0,ie(m.m,D,W,re),!Ri(I.c,I.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Hr(m.s)?(I.ic=1,D=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(D),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(I.ic=0,m=ts(m,I.c)),!m))break t;m=1;break e}I.mc=null,m=0}else m=re>=I.c*I.i;I=!m}if(I)return null;h.ga.Lc!=1?h.Ga=0:j=T-b}t(h.ga!=null),t(b+j<=T);e:{if(m=(D=h.ga).c,T=D.l.o,D.$a==0){if(W=h.rc,re=h.Vc,ue=h.Fa,$=h.P+1+b*m,H=h.mb,ne=h.nb+b*m,t($<=h.P+h.qc),D.Z!=0)for(t(Fo[D.Z]!=null),I=0;I<j;++I)Fo[D.Z](W,re,ue,$,H,ne,m),W=H,re=ne,ne+=m,$+=m;else for(I=0;I<j;++I)r(H,ne,ue,$,m),W=H,re=ne,ne+=m,$+=m;h.rc=W,h.Vc=re}else{if(t(D.mc!=null),m=b+j,t((I=D.mc)!=null),t(m<=I.i),I.C>=m)m=1;else if(D.ic||Ii(),D.ic){D=I.V,W=I.Ba,re=I.c;var ye=I.i,fe=(ue=1,$=I.$/re,H=I.$%re,ne=I.m,pe=I.s,I.$),we=re*ye,xe=re*m,Ee=pe.wc,ke=fe<xe?Jn(pe,H,$):null;t(fe<=we),t(m<=ye),t(Hr(pe));t:for(;;){for(;!ne.h&&fe<xe;){if(H&Ee||(ke=Jn(pe,H,$)),t(ke!=null),oe(ne),256>(ye=ft(ke.G[0],ke.H[0],ne)))D[W+fe]=ye,++fe,++H>=re&&(H=0,++$<=m&&!($%16)&&li(I,$));else{if(!(280>ye)){ue=0;break t}ye=Vr(ye-256,ne);var et,ze=ft(ke.G[4],ke.H[4],ne);if(oe(ne),!(fe>=(ze=wr(re,ze=Vr(ze,ne)))&&we-fe>=ye)){ue=0;break t}for(et=0;et<ye;++et)D[W+fe+et]=D[W+fe+et-ze];for(fe+=ye,H+=ye;H>=re;)H-=re,++$<=m&&!($%16)&&li(I,$);fe<xe&&H&Ee&&(ke=Jn(pe,H,$))}t(ne.h==X(ne))}li(I,$>m?m:$);break t}!ue||ne.h&&fe<we?(ue=0,I.a=ne.h?5:3):I.$=fe,m=ue}else m=ci(I,I.V,I.Ba,I.c,I.i,m,So);if(!m){j=0;break e}}b+j>=T&&(h.Cc=1),j=1}if(!j)return null;if(h.Cc&&((j=h.ga)!=null&&(j.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*C}function sn(h,m,b,j,C,T){for(;0<C--;){var I,D=h,$=m+(b?1:0),H=h,ne=m+(b?0:3);for(I=0;I<j;++I){var pe=H[ne+4*I];pe!=255&&(pe*=32897,D[$+4*I+0]=D[$+4*I+0]*pe>>23,D[$+4*I+1]=D[$+4*I+1]*pe>>23,D[$+4*I+2]=D[$+4*I+2]*pe>>23)}m+=T}}function Yn(h,m,b,j,C){for(;0<j--;){var T;for(T=0;T<b;++T){var I=h[m+2*T+0],D=15&(H=h[m+2*T+1]),$=4369*D,H=(240&H|H>>4)*$>>16;h[m+2*T+0]=(240&I|I>>4)*$>>16&240|(15&I|I<<4)*$>>16>>4&15,h[m+2*T+1]=240&H|D}m+=C}}function Hn(h,m,b,j,C,T,I,D){var $,H,ne=255;for(H=0;H<C;++H){for($=0;$<j;++$){var pe=h[m+$];T[I+4*$]=pe,ne&=pe}m+=b,I+=D}return ne!=255}function ur(h,m,b,j,C){var T;for(T=0;T<C;++T)b[j+T]=h[m+T]>>8}function Ii(){_u=sn,R2=Yn,I2=Hn,O2=ur}function Gr(h,m,b){M[h]=function(j,C,T,I,D,$,H,ne,pe,W,re,ue,ye,fe,we,xe,Ee){var ke,et=Ee-1>>1,ze=D[$+0]|H[ne+0]<<16,kt=pe[W+0]|re[ue+0]<<16;t(j!=null);var We=3*ze+kt+131074>>2;for(m(j[C+0],255&We,We>>16,ye,fe),T!=null&&(We=3*kt+ze+131074>>2,m(T[I+0],255&We,We>>16,we,xe)),ke=1;ke<=et;++ke){var Lt=D[$+ke]|H[ne+ke]<<16,Xn=pe[W+ke]|re[ue+ke]<<16,jt=ze+Lt+kt+Xn+524296,Ge=jt+2*(Lt+kt)>>3;We=Ge+ze>>1,ze=(jt=jt+2*(ze+Xn)>>3)+Lt>>1,m(j[C+2*ke-1],255&We,We>>16,ye,fe+(2*ke-1)*b),m(j[C+2*ke-0],255&ze,ze>>16,ye,fe+(2*ke-0)*b),T!=null&&(We=jt+kt>>1,ze=Ge+Xn>>1,m(T[I+2*ke-1],255&We,We>>16,we,xe+(2*ke-1)*b),m(T[I+2*ke+0],255&ze,ze>>16,we,xe+(2*ke+0)*b)),ze=Lt,kt=Xn}1&Ee||(We=3*ze+kt+131074>>2,m(j[C+Ee-1],255&We,We>>16,ye,fe+(Ee-1)*b),T!=null&&(We=3*kt+ze+131074>>2,m(T[I+Ee-1],255&We,We>>16,we,xe+(Ee-1)*b)))}}function jh(){Mi[Ph]=QA,Mi[Lh]=W2,Mi[$2]=eE,Mi[Th]=G2,Mi[Rh]=K2,Mi[Wm]=J2,Mi[z2]=tE,Mi[Gm]=W2,Mi[Km]=G2,Mi[Ih]=K2,Mi[Jm]=J2}function Tl(h){return h&~nE?0>h?0:255:h>>Y2}function Ta(h,m){return Tl((19077*h>>8)+(26149*m>>8)-14234)}function Ao(h,m,b){return Tl((19077*h>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function Ra(h,m){return Tl((19077*h>>8)+(33050*m>>8)-17685)}function Ia(h,m,b,j,C){j[C+0]=Ta(h,b),j[C+1]=Ao(h,m,b),j[C+2]=Ra(h,m)}function Oa(h,m,b,j,C){j[C+0]=Ra(h,m),j[C+1]=Ao(h,m,b),j[C+2]=Ta(h,b)}function br(h,m,b,j,C){var T=Ao(h,m,b);m=T<<3&224|Ra(h,m)>>3,j[C+0]=248&Ta(h,b)|T>>5,j[C+1]=m}function Fa(h,m,b,j,C){var T=240&Ra(h,m)|15;j[C+0]=240&Ta(h,b)|Ao(h,m,b)>>4,j[C+1]=T}function Da(h,m,b,j,C){j[C+0]=255,Ia(h,m,b,j,C+1)}function hu(h,m,b,j,C){Oa(h,m,b,j,C),j[C+3]=255}function fu(h,m,b,j,C){Ia(h,m,b,j,C),j[C+3]=255}function Nn(h,m){return 0>h?0:h>m?m:h}function Js(h,m,b){M[h]=function(j,C,T,I,D,$,H,ne,pe){for(var W=ne+(-2&pe)*b;ne!=W;)m(j[C+0],T[I+0],D[$+0],H,ne),m(j[C+1],T[I+0],D[$+0],H,ne+b),C+=2,++I,++$,ne+=2*b;1&pe&&m(j[C+0],T[I+0],D[$+0],H,ne)}}function Rl(h,m,b){return b==0?h==0?m==0?6:5:m==0?4:0:b}function Nh(h,m,b,j,C){switch(h>>>30){case 3:$a(m,b,j,C,0);break;case 2:Fi(m,b,j,C);break;case 1:qt(m,b,j,C)}}function Oi(h,m){var b,j,C=m.M,T=m.Nb,I=h.oc,D=h.pc+40,$=h.oc,H=h.pc+584,ne=h.oc,pe=h.pc+600;for(b=0;16>b;++b)I[D+32*b-1]=129;for(b=0;8>b;++b)$[H+32*b-1]=129,ne[pe+32*b-1]=129;for(0<C?I[D-1-32]=$[H-1-32]=ne[pe-1-32]=129:(i(I,D-32-1,127,21),i($,H-32-1,127,9),i(ne,pe-32-1,127,9)),j=0;j<h.za;++j){var W=m.ya[m.aa+j];if(0<j){for(b=-1;16>b;++b)r(I,D+32*b-4,I,D+32*b+12,4);for(b=-1;8>b;++b)r($,H+32*b-4,$,H+32*b+4,4),r(ne,pe+32*b-4,ne,pe+32*b+4,4)}var re=h.Gd,ue=h.Hd+j,ye=W.ad,fe=W.Hc;if(0<C&&(r(I,D-32,re[ue].y,0,16),r($,H-32,re[ue].f,0,8),r(ne,pe-32,re[ue].ea,0,8)),W.Za){var we=I,xe=D-32+16;for(0<C&&(j>=h.za-1?i(we,xe,re[ue].y[15],4):r(we,xe,re[ue+1].y,0,4)),b=0;4>b;b++)we[xe+128+b]=we[xe+256+b]=we[xe+384+b]=we[xe+0+b];for(b=0;16>b;++b,fe<<=2)we=I,xe=D+X2[b],ns[W.Ob[b]](we,xe),Nh(fe,ye,16*+b,we,xe)}else if(we=Rl(j,C,W.Ob[0]),Oo[we](I,D),fe!=0)for(b=0;16>b;++b,fe<<=2)Nh(fe,ye,16*+b,I,D+X2[b]);for(b=W.Gc,we=Rl(j,C,W.Dd),Xs[we]($,H),Xs[we](ne,pe),fe=ye,we=$,xe=H,255&(W=0|b)&&(170&W?As(fe,256,we,xe):Qt(fe,256,we,xe)),W=ne,fe=pe,255&(b>>=8)&&(170&b?As(ye,320,W,fe):Qt(ye,320,W,fe)),C<h.Ub-1&&(r(re[ue].y,0,I,D+480,16),r(re[ue].f,0,$,H+224,8),r(re[ue].ea,0,ne,pe+224,8)),b=8*T*h.B,re=h.sa,ue=h.ta+16*j+16*T*h.R,ye=h.qa,W=h.ra+8*j+b,fe=h.Ha,we=h.Ia+8*j+b,b=0;16>b;++b)r(re,ue+b*h.R,I,D+32*b,16);for(b=0;8>b;++b)r(ye,W+b*h.B,$,H+32*b,8),r(fe,we+b*h.B,ne,pe+32*b,8)}}function Ma(h,m,b,j,C,T,I,D,$){var H=[0],ne=[0],pe=0,W=$!=null?$.kd:0,re=$??new be;if(h==null||12>b)return 7;re.data=h,re.w=m,re.ha=b,m=[m],b=[b],re.gb=[re.gb];e:{var ue=m,ye=b,fe=re.gb;if(t(h!=null),t(ye!=null),t(fe!=null),fe[0]=0,12<=ye[0]&&!n(h,ue[0],"RIFF")){if(n(h,ue[0]+8,"WEBP")){fe=3;break e}var we=ve(h,ue[0]+4);if(12>we||4294967286<we){fe=3;break e}if(W&&we>ye[0]-8){fe=7;break e}fe[0]=we,ue[0]+=12,ye[0]-=12}fe=0}if(fe!=0)return fe;for(we=0<re.gb[0],b=b[0];;){e:{var xe=h;ye=m,fe=b;var Ee=H,ke=ne,et=ue=[0];if((We=pe=[pe])[0]=0,8>fe[0])fe=7;else{if(!n(xe,ye[0],"VP8X")){if(ve(xe,ye[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var ze=ve(xe,ye[0]+8),kt=1+Le(xe,ye[0]+12);if(2147483648<=kt*(xe=1+Le(xe,ye[0]+15))){fe=3;break e}et!=null&&(et[0]=ze),Ee!=null&&(Ee[0]=kt),ke!=null&&(ke[0]=xe),ye[0]+=18,fe[0]-=18,We[0]=1}fe=0}}if(pe=pe[0],ue=ue[0],fe!=0)return fe;if(ye=!!(2&ue),!we&&pe)return 3;if(T!=null&&(T[0]=!!(16&ue)),I!=null&&(I[0]=ye),D!=null&&(D[0]=0),I=H[0],ue=ne[0],pe&&ye&&$==null){fe=0;break}if(4>b){fe=7;break}if(we&&pe||!we&&!pe&&!n(h,m[0],"ALPH")){b=[b],re.na=[re.na],re.P=[re.P],re.Sa=[re.Sa];e:{ze=h,fe=m,we=b;var We=re.gb;Ee=re.na,ke=re.P,et=re.Sa,kt=22,t(ze!=null),t(we!=null),xe=fe[0];var Lt=we[0];for(t(Ee!=null),t(et!=null),Ee[0]=null,ke[0]=null,et[0]=0;;){if(fe[0]=xe,we[0]=Lt,8>Lt){fe=7;break e}var Xn=ve(ze,xe+4);if(4294967286<Xn){fe=3;break e}var jt=8+Xn+1&-2;if(kt+=jt,0<We&&kt>We){fe=3;break e}if(!n(ze,xe,"VP8 ")||!n(ze,xe,"VP8L")){fe=0;break e}if(Lt[0]<jt){fe=7;break e}n(ze,xe,"ALPH")||(Ee[0]=ze,ke[0]=xe+8,et[0]=Xn),xe+=jt,Lt-=jt}}if(b=b[0],re.na=re.na[0],re.P=re.P[0],re.Sa=re.Sa[0],fe!=0)break}b=[b],re.Ja=[re.Ja],re.xa=[re.xa];e:if(We=h,fe=m,we=b,Ee=re.gb[0],ke=re.Ja,et=re.xa,ze=fe[0],xe=!n(We,ze,"VP8 "),kt=!n(We,ze,"VP8L"),t(We!=null),t(we!=null),t(ke!=null),t(et!=null),8>we[0])fe=7;else{if(xe||kt){if(We=ve(We,ze+4),12<=Ee&&We>Ee-12){fe=3;break e}if(W&&We>we[0]-8){fe=7;break e}ke[0]=We,fe[0]+=8,we[0]-=8,et[0]=kt}else et[0]=5<=we[0]&&We[ze+0]==47&&!(We[ze+4]>>5),ke[0]=we[0];fe=0}if(b=b[0],re.Ja=re.Ja[0],re.xa=re.xa[0],m=m[0],fe!=0)break;if(4294967286<re.Ja)return 3;if(D==null||ye||(D[0]=re.xa?2:1),I=[I],ue=[ue],re.xa){if(5>b){fe=7;break}D=I,W=ue,ye=T,h==null||5>b?h=0:5<=b&&h[m+0]==47&&!(h[m+4]>>5)?(we=[0],We=[0],Ee=[0],ie(ke=new z,h,m,b),Xi(ke,we,We,Ee)?(D!=null&&(D[0]=we[0]),W!=null&&(W[0]=We[0]),ye!=null&&(ye[0]=Ee[0]),h=1):h=0):h=0}else{if(10>b){fe=7;break}D=ue,h==null||10>b||!Ss(h,m+3,b-3)?h=0:(W=h[m+0]|h[m+1]<<8|h[m+2]<<16,ye=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&W||3<(W>>1&7)||!(W>>4&1)||W>>5>=re.Ja||!ye||!h?h=0:(I&&(I[0]=ye),D&&(D[0]=h),h=1))}if(!h||(I=I[0],ue=ue[0],pe&&(H[0]!=I||ne[0]!=ue)))return 3;$!=null&&($[0]=re,$.offset=m-$.w,t(4294967286>m-$.w),t($.offset==$.ha-b));break}return fe==0||fe==7&&pe&&$==null?(T!=null&&(T[0]|=re.na!=null&&0<re.na.length),j!=null&&(j[0]=I),C!=null&&(C[0]=ue),0):fe}function pu(h,m,b){var j=m.width,C=m.height,T=0,I=0,D=j,$=C;if(m.Da=h!=null&&0<h.Da,m.Da&&(D=h.cd,$=h.bd,T=h.v,I=h.j,11>b||(T&=-2,I&=-2),0>T||0>I||0>=D||0>=$||T+D>j||I+$>C))return 0;if(m.v=T,m.j=I,m.va=T+D,m.o=I+$,m.U=D,m.T=$,m.da=h!=null&&0<h.da,m.da){if(!rt(D,$,b=[h.ib],T=[h.hb]))return 0;m.ib=b[0],m.hb=T[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*j/4&&m.hb<3*C/4,m.Kb=0),1}function mu(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function Eo(h,m,b,j){if(j==null||0>=h||0>=m)return 2;if(b!=null){if(b.Da){var C=b.cd,T=b.bd,I=-2&b.v,D=-2&b.j;if(0>I||0>D||0>=C||0>=T||I+C>h||D+T>m)return 2;h=C,m=T}if(b.da){if(!rt(h,m,C=[b.ib],T=[b.hb]))return 2;h=C[0],m=T[0]}}j.width=h,j.height=m;e:{var $=j.width,H=j.height;if(h=j.S,0>=$||0>=H||!(h>=Ph&&13>h))h=2;else{if(0>=j.Rd&&j.sd==null){I=T=C=m=0;var ne=(D=$*Q2[h])*H;if(11>h||(T=(H+1)/2*(m=($+1)/2),h==12&&(I=(C=$)*H)),(H=s(ne+2*T+I))==null){h=1;break e}j.sd=H,11>h?(($=j.f.RGBA).eb=H,$.fb=0,$.A=D,$.size=ne):(($=j.f.kb).y=H,$.O=0,$.fa=D,$.Fd=ne,$.f=H,$.N=0+ne,$.Ab=m,$.Cd=T,$.ea=H,$.W=0+ne+T,$.Db=m,$.Ed=T,h==12&&($.F=H,$.J=0+ne+2*T),$.Tc=I,$.lb=C)}if(m=1,C=j.S,T=j.width,I=j.height,C>=Ph&&13>C)if(11>C)h=j.f.RGBA,m&=(D=Math.abs(h.A))*(I-1)+T<=h.size,m&=D>=T*Q2[C],m&=h.eb!=null;else{h=j.f.kb,D=(T+1)/2,ne=(I+1)/2,$=Math.abs(h.fa),H=Math.abs(h.Ab);var pe=Math.abs(h.Db),W=Math.abs(h.lb),re=W*(I-1)+T;m&=$*(I-1)+T<=h.Fd,m&=H*(ne-1)+D<=h.Cd,m=(m&=pe*(ne-1)+D<=h.Ed)&$>=T&H>=D&pe>=D,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,C==12&&(m&=W>=T,m&=re<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||b!=null&&b.fd&&(h=mu(j)),h}var Ba=64,di=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hi=24,Co=32,Ys=8,Po=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Oe("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(h){return h},M.Predictor2=function(h,m,b){return m[b+0]},M.Predictor3=function(h,m,b){return m[b+1]},M.Predictor4=function(h,m,b){return m[b-1]},M.Predictor5=function(h,m,b){return Ke(Ke(h,m[b+1]),m[b+0])},M.Predictor6=function(h,m,b){return Ke(h,m[b-1])},M.Predictor7=function(h,m,b){return Ke(h,m[b+0])},M.Predictor8=function(h,m,b){return Ke(m[b-1],m[b+0])},M.Predictor9=function(h,m,b){return Ke(m[b+0],m[b+1])},M.Predictor10=function(h,m,b){return Ke(Ke(h,m[b-1]),Ke(m[b+0],m[b+1]))},M.Predictor11=function(h,m,b){var j=m[b+0];return 0>=Ie(j>>24&255,h>>24&255,(m=m[b-1])>>24&255)+Ie(j>>16&255,h>>16&255,m>>16&255)+Ie(j>>8&255,h>>8&255,m>>8&255)+Ie(255&j,255&h,255&m)?j:h},M.Predictor12=function(h,m,b){var j=m[b+0];return(At((h>>24&255)+(j>>24&255)-((m=m[b-1])>>24&255))<<24|At((h>>16&255)+(j>>16&255)-(m>>16&255))<<16|At((h>>8&255)+(j>>8&255)-(m>>8&255))<<8|At((255&h)+(255&j)-(255&m)))>>>0},M.Predictor13=function(h,m,b){var j=m[b-1];return(Ae((h=Ke(h,m[b+0]))>>24&255,j>>24&255)<<24|Ae(h>>16&255,j>>16&255)<<16|Ae(h>>8&255,j>>8&255)<<8|Ae(255&h,255&j))>>>0};var gu=M.PredictorAdd0;M.PredictorAdd1=yt,Oe("Predictor2","PredictorAdd2"),Oe("Predictor3","PredictorAdd3"),Oe("Predictor4","PredictorAdd4"),Oe("Predictor5","PredictorAdd5"),Oe("Predictor6","PredictorAdd6"),Oe("Predictor7","PredictorAdd7"),Oe("Predictor8","PredictorAdd8"),Oe("Predictor9","PredictorAdd9"),Oe("Predictor10","PredictorAdd10"),Oe("Predictor11","PredictorAdd11"),Oe("Predictor12","PredictorAdd12"),Oe("Predictor13","PredictorAdd13");var Il=M.PredictorAdd2;Qe("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Rn,Ah=M.ColorIndexInverseTransform,js=M.MapARGB,Ns=M.VP8LColorIndexInverseTransformAlpha,vu=M.MapAlpha,yu=M.VP8LPredictorsAdd=[];yu.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var wu,bu,Lo,To,Ro,Ua,Io,$a,Fi,As,qt,Qt,In,Zn,Zs,xu,Ol,Eh,A2,E2,C2,P2,L2,T2,_u,R2,I2,O2,F2=s(511),D2=s(2041),M2=s(225),B2=s(767),U2=0,Hm=D2,Ch=M2,fi=B2,Di=F2,Ph=0,Lh=1,$2=2,Th=3,Rh=4,Wm=5,z2=6,Gm=7,Km=8,Ih=9,Jm=10,BA=[2,3,7],UA=[3,3,11],q2=[280,256,256,256,40],$A=[0,1,1,1,0],zA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],VA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],HA=8,Ym=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Zm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Su=null,WA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],GA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],V2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],KA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],JA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],YA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ZA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oo=[],ns=[],Xs=[],XA=1,H2=2,Fo=[],Mi=[];Gr("UpsampleRgbLinePair",Ia,3),Gr("UpsampleBgrLinePair",Oa,3),Gr("UpsampleRgbaLinePair",fu,4),Gr("UpsampleBgraLinePair",hu,4),Gr("UpsampleArgbLinePair",Da,4),Gr("UpsampleRgba4444LinePair",Fa,2),Gr("UpsampleRgb565LinePair",br,2);var QA=M.UpsampleRgbLinePair,eE=M.UpsampleBgrLinePair,W2=M.UpsampleRgbaLinePair,G2=M.UpsampleBgraLinePair,K2=M.UpsampleArgbLinePair,J2=M.UpsampleRgba4444LinePair,tE=M.UpsampleRgb565LinePair,Oh=16,Fh=1<<Oh-1,ku=-227,Xm=482,Y2=6,nE=(256<<Y2)-1,Z2=0,rE=s(256),iE=s(256),sE=s(256),oE=s(256),aE=s(Xm-ku),lE=s(Xm-ku);Js("YuvToRgbRow",Ia,3),Js("YuvToBgrRow",Oa,3),Js("YuvToRgbaRow",fu,4),Js("YuvToBgraRow",hu,4),Js("YuvToArgbRow",Da,4),Js("YuvToRgba4444Row",Fa,2),Js("YuvToRgb565Row",br,2);var X2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Dh=[0,2,8],cE=[8,7,6,4,4,2,2,2,1,1,1,1],uE=1;this.WebPDecodeRGBA=function(h,m,b,j,C){var T=Lh,I=new le,D=new Ut;I.ba=D,D.S=T,D.width=[D.width],D.height=[D.height];var $=D.width,H=D.height,ne=new ut;if(ne==null||h==null)var pe=2;else t(ne!=null),pe=Ma(h,m,b,ne.width,ne.height,ne.Pd,ne.Qd,ne.format,null);if(pe!=0?$=0:($!=null&&($[0]=ne.width[0]),H!=null&&(H[0]=ne.height[0]),$=1),$){D.width=D.width[0],D.height=D.height[0],j!=null&&(j[0]=D.width),C!=null&&(C[0]=D.height);e:{if(j=new qn,(C=new be).data=h,C.w=m,C.ha=b,C.kd=1,m=[0],t(C!=null),((h=Ma(C.data,C.w,C.ha,null,null,null,m,null,C))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(t(I!=null),j.data=C.data,j.w=C.w+C.offset,j.ha=C.ha-C.offset,j.put=lt,j.ac=si,j.bc=Zi,j.ma=I,C.xa){if((h=es())==null){I=1;break e}if(function(W,re){var ue=[0],ye=[0],fe=[0];t:for(;;){if(W==null)return 0;if(re==null)return W.a=2,0;if(W.l=re,W.a=0,ie(W.m,re.data,re.w,re.ha),!Xi(W.m,ue,ye,fe)){W.a=3;break t}if(W.xb=H2,re.width=ue[0],re.height=ye[0],!Ri(ue[0],ye[0],1,W,null))break t;return 1}return t(W.a!=0),0}(h,j)){if(j=(m=Eo(j.width,j.height,I.Oa,I.ba))==0){t:{j=h;n:for(;;){if(j==null){j=0;break t}if(t(j.s.yc!=null),t(j.s.Ya!=null),t(0<j.s.Wb),t((b=j.l)!=null),t((C=b.ma)!=null),j.xb!=0){if(j.ca=C.ba,j.tb=C.tb,t(j.ca!=null),!pu(C.Oa,b,Th)){j.a=2;break n}if(!ts(j,b.width)||b.da)break n;if((b.da||wt(j.ca.S))&&Ii(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Ii()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!Z(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!ci(j,j.V,j.Ba,j.c,j.i,b.o,ai))break n;C.Dc=j.Ma,j=1;break t}t(j.a!=0),j=0}j=!j}j&&(m=h.a)}else m=h.a}else{if((h=new sr)==null){I=1;break e}if(h.Fa=C.na,h.P=C.P,h.qc=C.Sa,Wr(h,j)){if((m=Eo(j.width,j.height,I.Oa,I.ba))==0){if(h.Aa=0,b=I.Oa,t((C=h)!=null),b!=null){if(0<($=0>($=b.Md)?0:100<$?255:255*$/100)){for(H=ne=0;4>H;++H)12>(pe=C.pb[H]).lc&&(pe.ia=$*cE[0>pe.lc?0:pe.lc]>>3),ne|=pe.ia;ne&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=b.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}(function(W,re){if(W==null)return 0;if(re==null)return Ht(W,2,"NULL VP8Io parameter in VP8Decode().");if(!W.cb&&!Wr(W,re))return 0;if(t(W.cb),re.ac==null||re.ac(re)){re.ob&&(W.L=0);var ue=Dh[W.L];if(W.L==2?(W.yb=0,W.zb=0):(W.yb=re.v-ue>>4,W.zb=re.j-ue>>4,0>W.yb&&(W.yb=0),0>W.zb&&(W.zb=0)),W.Va=re.o+15+ue>>4,W.Hb=re.va+15+ue>>4,W.Hb>W.za&&(W.Hb=W.za),W.Va>W.Ub&&(W.Va=W.Ub),0<W.L){var ye=W.ed;for(ue=0;4>ue;++ue){var fe;if(W.Qa.Cb){var we=W.Qa.Lb[ue];W.Qa.Fb||(we+=ye.Tb)}else we=ye.Tb;for(fe=0;1>=fe;++fe){var xe=W.gd[ue][fe],Ee=we;if(ye.Pc&&(Ee+=ye.vd[0],fe&&(Ee+=ye.od[0])),0<(Ee=0>Ee?0:63<Ee?63:Ee)){var ke=Ee;0<ye.wb&&(ke=4<ye.wb?ke>>2:ke>>1)>9-ye.wb&&(ke=9-ye.wb),1>ke&&(ke=1),xe.dd=ke,xe.tc=2*Ee+ke,xe.ld=40<=Ee?2:15<=Ee?1:0}else xe.tc=0;xe.La=fe}}}ue=0}else Ht(W,6,"Frame setup failed"),ue=W.a;if(ue=ue==0){if(ue){W.$c=0,0<W.Aa||(W.Ic=uE);t:{ue=W.Ic,ye=4*(ke=W.za);var et=32*ke,ze=ke+1,kt=0<W.L?ke*(0<W.Aa?2:1):0,We=(W.Aa==2?2:1)*ke;if((xe=ye+832+(fe=3*(16*ue+Dh[W.L])/2*et)+(we=W.Fa!=null&&0<W.Fa.length?W.Kc.c*W.Kc.i:0))!=xe)ue=0;else{if(xe>W.Vb){if(W.Vb=0,W.Ec=s(xe),W.Fc=0,W.Ec==null){ue=Ht(W,1,"no memory during frame initialization.");break t}W.Vb=xe}xe=W.Ec,Ee=W.Fc,W.Ac=xe,W.Bc=Ee,Ee+=ye,W.Gd=o(et,Re),W.Hd=0,W.rb=o(ze+1,$e),W.sb=1,W.wa=kt?o(kt,_e):null,W.Y=0,W.D.Nb=0,W.D.wa=W.wa,W.D.Y=W.Y,0<W.Aa&&(W.D.Y+=ke),t(!0),W.oc=xe,W.pc=Ee,Ee+=832,W.ya=o(We,Be),W.aa=0,W.D.ya=W.ya,W.D.aa=W.aa,W.Aa==2&&(W.D.aa+=ke),W.R=16*ke,W.B=8*ke,ke=(et=Dh[W.L])*W.R,et=et/2*W.B,W.sa=xe,W.ta=Ee+ke,W.qa=W.sa,W.ra=W.ta+16*ue*W.R+et,W.Ha=W.qa,W.Ia=W.ra+8*ue*W.B+et,W.$c=0,Ee+=fe,W.mb=we?xe:null,W.nb=we?Ee:null,t(Ee+we<=W.Fc+W.Vb),rn(W),i(W.Ac,W.Bc,0,ye),ue=1}}if(ue){if(re.ka=0,re.y=W.sa,re.O=W.ta,re.f=W.qa,re.N=W.ra,re.ea=W.Ha,re.Vd=W.Ia,re.fa=W.R,re.Rc=W.B,re.F=null,re.J=0,!U2){for(ue=-255;255>=ue;++ue)F2[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)D2[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)M2[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)B2[255+ue]=0>ue?0:255<ue?255:ue;U2=1}Io=wh,$a=Tm,As=Rm,qt=ks,Qt=yh,Fi=Lm,In=_h,Zn=Sh,Zs=y,xu=E,Ol=La,Eh=kh,A2=K,E2=Q,C2=du,P2=Pa,L2=bh,T2=xh,ns[0]=Um,ns[1]=iu,ns[2]=Mm,ns[3]=Bm,ns[4]=$m,ns[5]=Ws,ns[6]=Hs,ns[7]=zm,ns[8]=El,ns[9]=qm,Oo[0]=No,Oo[1]=Om,Oo[2]=Fm,Oo[3]=su,Oo[4]=Dm,Oo[5]=Na,Oo[6]=ou,Xs[0]=Pl,Xs[1]=Im,Xs[2]=au,Xs[3]=Aa,Xs[4]=lu,Xs[5]=Vm,Xs[6]=cu,ue=1}else ue=0}ue&&(ue=function(Lt,Xn){for(Lt.M=0;Lt.M<Lt.Va;++Lt.M){var jt,Ge=Lt.Jc[Lt.M&Lt.Xb],Fe=Lt.m,On=Lt;for(jt=0;jt<On.za;++jt){var St=Fe,It=On,un=It.Ac,dr=It.Bc+4*jt,Ir=It.zc,An=It.ya[It.aa+jt];if(It.Qa.Bb?An.$b=me(St,It.Pa.jb[0])?2+me(St,It.Pa.jb[2]):me(St,It.Pa.jb[1]):An.$b=0,It.kc&&(An.Ad=me(St,It.Bd)),An.Za=!me(St,145)+0,An.Za){var xr=An.Ob,Or=0;for(It=0;4>It;++It){var Qn,Ot=Ir[0+It];for(Qn=0;4>Qn;++Qn){Ot=JA[un[dr+Qn]][Ot];for(var Wt=V2[me(St,Ot[0])];0<Wt;)Wt=V2[2*Wt+me(St,Ot[Wt])];Ot=-Wt,un[dr+Qn]=Ot}r(xr,Or,un,dr,4),Or+=4,Ir[0+It]=Ot}}else Ot=me(St,156)?me(St,128)?1:3:me(St,163)?2:0,An.Ob[0]=Ot,i(un,dr,Ot,4),i(Ir,0,Ot,4);An.Dd=me(St,142)?me(St,114)?me(St,183)?1:3:2:0}if(On.m.Ka)return Ht(Lt,7,"Premature end-of-partition0 encountered.");for(;Lt.ja<Lt.za;++Lt.ja){if(On=Ge,St=(Fe=Lt).rb[Fe.sb-1],un=Fe.rb[Fe.sb+Fe.ja],jt=Fe.ya[Fe.aa+Fe.ja],dr=Fe.kc?jt.Ad:0)St.la=un.la=0,jt.Za||(St.Na=un.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var En,Gt;if(St=un,un=On,dr=Fe.Pa.Xc,Ir=Fe.ya[Fe.aa+Fe.ja],An=Fe.pb[Ir.$b],It=Ir.ad,xr=0,Or=Fe.rb[Fe.sb-1],Ot=Qn=0,i(It,xr,0,384),Ir.Za)var hr=0,rs=dr[3];else{Wt=s(16);var Fn=St.Na+Or.Na;if(Fn=Su(un,dr[1],Fn,An.Eb,0,Wt,0),St.Na=Or.Na=(0<Fn)+0,1<Fn)Io(Wt,0,It,xr);else{var Kr=Wt[0]+3>>3;for(Wt=0;256>Wt;Wt+=16)It[xr+Wt]=Kr}hr=1,rs=dr[0]}var en=15&St.la,er=15&Or.la;for(Wt=0;4>Wt;++Wt){var pi=1&er;for(Kr=Gt=0;4>Kr;++Kr)en=en>>1|(pi=(Fn=Su(un,rs,Fn=pi+(1&en),An.Sc,hr,It,xr))>hr)<<7,Gt=Gt<<2|(3<Fn?3:1<Fn?2:It[xr+0]!=0),xr+=16;en>>=4,er=er>>1|pi<<7,Qn=(Qn<<8|Gt)>>>0}for(rs=en,hr=er>>4,En=0;4>En;En+=2){for(Gt=0,en=St.la>>4+En,er=Or.la>>4+En,Wt=0;2>Wt;++Wt){for(pi=1&er,Kr=0;2>Kr;++Kr)Fn=pi+(1&en),en=en>>1|(pi=0<(Fn=Su(un,dr[2],Fn,An.Qc,0,It,xr)))<<3,Gt=Gt<<2|(3<Fn?3:1<Fn?2:It[xr+0]!=0),xr+=16;en>>=2,er=er>>1|pi<<5}Ot|=Gt<<4*En,rs|=en<<4<<En,hr|=(240&er)<<En}St.la=rs,Or.la=hr,Ir.Hc=Qn,Ir.Gc=Ot,Ir.ia=43690&Ot?0:An.ia,dr=!(Qn|Ot)}if(0<Fe.L&&(Fe.wa[Fe.Y+Fe.ja]=Fe.gd[jt.$b][jt.Za],Fe.wa[Fe.Y+Fe.ja].La|=!dr),On.Ka)return Ht(Lt,7,"Premature end-of-file encountered.")}if(rn(Lt),Fe=Xn,On=1,jt=(Ge=Lt).D,St=0<Ge.L&&Ge.M>=Ge.zb&&Ge.M<=Ge.Va,Ge.Aa==0)t:{if(jt.M=Ge.M,jt.uc=St,Oi(Ge,jt),On=1,jt=(Gt=Ge.D).Nb,St=(Ot=Dh[Ge.L])*Ge.R,un=Ot/2*Ge.B,Wt=16*jt*Ge.R,Kr=8*jt*Ge.B,dr=Ge.sa,Ir=Ge.ta-St+Wt,An=Ge.qa,It=Ge.ra-un+Kr,xr=Ge.Ha,Or=Ge.Ia-un+Kr,er=(en=Gt.M)==0,Qn=en>=Ge.Va-1,Ge.Aa==2&&Oi(Ge,Gt),Gt.uc)for(pi=(Fn=Ge).D.M,t(Fn.D.uc),Gt=Fn.yb;Gt<Fn.Hb;++Gt){hr=Gt,rs=pi;var Fr=(mi=(fr=Fn).D).Nb;En=fr.R;var mi=mi.wa[mi.Y+hr],gi=fr.sa,Jr=fr.ta+16*Fr*En+16*hr,vi=mi.dd,on=mi.tc;if(on!=0)if(t(3<=on),fr.L==1)0<hr&&P2(gi,Jr,En,on+4),mi.La&&T2(gi,Jr,En,on),0<rs&&C2(gi,Jr,En,on+4),mi.La&&L2(gi,Jr,En,on);else{var yi=fr.B,is=fr.qa,za=fr.ra+8*Fr*yi+8*hr,Qs=fr.Ha,fr=fr.Ia+8*Fr*yi+8*hr;Fr=mi.ld,0<hr&&(Zn(gi,Jr,En,on+4,vi,Fr),xu(is,za,Qs,fr,yi,on+4,vi,Fr)),mi.La&&(Eh(gi,Jr,En,on,vi,Fr),E2(is,za,Qs,fr,yi,on,vi,Fr)),0<rs&&(In(gi,Jr,En,on+4,vi,Fr),Zs(is,za,Qs,fr,yi,on+4,vi,Fr)),mi.La&&(Ol(gi,Jr,En,on,vi,Fr),A2(is,za,Qs,fr,yi,on,vi,Fr))}}if(Ge.ia&&alert("todo:DitherRow"),Fe.put!=null){if(Gt=16*en,en=16*(en+1),er?(Fe.y=Ge.sa,Fe.O=Ge.ta+Wt,Fe.f=Ge.qa,Fe.N=Ge.ra+Kr,Fe.ea=Ge.Ha,Fe.W=Ge.Ia+Kr):(Gt-=Ot,Fe.y=dr,Fe.O=Ir,Fe.f=An,Fe.N=It,Fe.ea=xr,Fe.W=Or),Qn||(en-=Ot),en>Fe.o&&(en=Fe.o),Fe.F=null,Fe.J=null,Ge.Fa!=null&&0<Ge.Fa.length&&Gt<en&&(Fe.J=Vn(Ge,Fe,Gt,en-Gt),Fe.F=Ge.mb,Fe.F==null&&Fe.F.length==0)){On=Ht(Ge,3,"Could not decode alpha data.");break t}Gt<Fe.j&&(Ot=Fe.j-Gt,Gt=Fe.j,t(!(1&Ot)),Fe.O+=Ge.R*Ot,Fe.N+=Ge.B*(Ot>>1),Fe.W+=Ge.B*(Ot>>1),Fe.F!=null&&(Fe.J+=Fe.width*Ot)),Gt<en&&(Fe.O+=Fe.v,Fe.N+=Fe.v>>1,Fe.W+=Fe.v>>1,Fe.F!=null&&(Fe.J+=Fe.v),Fe.ka=Gt-Fe.j,Fe.U=Fe.va-Fe.v,Fe.T=en-Gt,On=Fe.put(Fe))}jt+1!=Ge.Ic||Qn||(r(Ge.sa,Ge.ta-St,dr,Ir+16*Ge.R,St),r(Ge.qa,Ge.ra-un,An,It+8*Ge.B,un),r(Ge.Ha,Ge.Ia-un,xr,Or+8*Ge.B,un))}if(!On)return Ht(Lt,6,"Output aborted.")}return 1}(W,re)),re.bc!=null&&re.bc(re),ue&=1}return ue?(W.cb=0,ue):0})(h,j)||(m=h.a)}}else m=h.a}m==0&&I.Oa!=null&&I.Oa.fd&&(m=mu(I.ba))}I=m}T=I!=0?null:11>T?D.f.RGBA.eb:D.f.kb.y}else T=null;return T};var Q2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(M,G){for(var P="",L=0;L<4;L++)P+=String.fromCharCode(M[G++]);return P}function d(M,G){return M[G+0]|M[G+1]<<8}function p(M,G){return(M[G+0]|M[G+1]<<8|M[G+2]<<16)>>>0}function g(M,G){return(M[G+0]|M[G+1]<<8|M[G+2]<<16|M[G+3]<<24)>>>0}new l;var f=[0],w=[0],S=[],k=new l,v=e,x=function(M,G){var P={},L=0,Y=!1,V=0,ae=0;if(P.frames=[],!function(A,z){for(var B=0;B<4;B++)if(A[z+B]!="RIFF".charCodeAt(B))return!0;return!1}(M,G)){for(g(M,G+=4),G+=8;G<M.length;){var de=c(M,G),ce=g(M,G+=4);G+=4;var J=ce+(1&ce);switch(de){case"VP8 ":case"VP8L":P.frames[L]===void 0&&(P.frames[L]={}),(se=P.frames[L]).src_off=Y?ae:G-8,se.src_size=V+ce+8,L++,Y&&(Y=!1,V=0,ae=0);break;case"VP8X":(se=P.header={}).feature_flags=M[G];var ie=G+4;se.canvas_width=1+p(M,ie),ie+=3,se.canvas_height=1+p(M,ie),ie+=3;break;case"ALPH":Y=!0,V=J+8,ae=G-8;break;case"ANIM":(se=P.header).bgcolor=g(M,G),ie=G+4,se.loop_count=d(M,ie),ie+=2;break;case"ANMF":var te,se;(se=P.frames[L]={}).offset_x=2*p(M,G),G+=3,se.offset_y=2*p(M,G),G+=3,se.width=1+p(M,G),G+=3,se.height=1+p(M,G),G+=3,se.duration=p(M,G),G+=3,te=M[G++],se.dispose=1&te,se.blend=te>>1&1}de!="ANMF"&&(G+=J)}return P}}(v,0);x.response=v,x.rgbaoutput=!0,x.dataurl=!1;var _=x.header?x.header:null,N=x.frames?x.frames:null;if(_){_.loop_counter=_.loop_count,f=[_.canvas_height],w=[_.canvas_width];for(var O=0;O<N.length&&N[O].blend!=0;O++);}var U=N[0],q=k.WebPDecodeRGBA(v,U.src_off,U.src_size,w,f);U.rgba=q,U.imgwidth=w[0],U.imgheight=f[0];for(var F=0;F<w[0]*f[0]*4;F++)S[F]=q[F];return this.width=w,this.height=f,this.data=S,this}(function(e){var t,n,r,i,s,o,a,l,c,d=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new l,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new o,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new o,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=A;Object.defineProperty(this,"pdf",{get:function(){return z}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(ve){B=!!ve}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(ve){X=!!ve}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(ve){isNaN(ve)||(ee=ve)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(ve){isNaN(ve)||(oe=ve)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ve){var Z;typeof ve=="number"?Z=[ve,ve,ve,ve]:((Z=new Array(4))[0]=ve[0],Z[1]=ve.length>=2?ve[1]:Z[0],Z[2]=ve.length>=3?ve[2]:Z[0],Z[3]=ve.length>=4?ve[3]:Z[1]),c.margin=Z}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(ve){ge=ve}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(ve){he=ve}});var me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return me},set:function(ve){me=ve}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ve){ve instanceof d&&(c=ve)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ve){c.path=ve}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(ve){Se=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var Z;Z=g(ve),this.ctx.fillStyle=Z.style,this.ctx.isFillTransparent=Z.a===0,this.ctx.fillOpacity=Z.a,this.pdf.setFillColor(Z.r,Z.g,Z.b,{a:Z.a}),this.pdf.setTextColor(Z.r,Z.g,Z.b,{a:Z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var Z=g(ve);this.ctx.strokeStyle=Z.style,this.ctx.isStrokeTransparent=Z.a===0,this.ctx.strokeOpacity=Z.a,Z.a===0?this.pdf.setDrawColor(255,255,255):(Z.a,this.pdf.setDrawColor(Z.r,Z.g,Z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Pe=null,Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(ve){Pe=null,Le=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var Z;if(this.ctx.font=ve,(Z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var st=Z[1];Z[2];var ht=Z[3],rt=Z[4];Z[5];var Ne=Z[6],Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rt)[2];rt=Math.floor(Me==="px"?parseFloat(rt)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(rt)*this.pdf.getFontSize():parseFloat(rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rt);var Oe=function(He){var Qe,Zt,Rt=[],Je=He.trim();if(Je==="")return Ag;if(Je in b_)return[b_[Je]];for(;Je!=="";){switch(Zt=null,Qe=(Je=__(Je)).charAt(0)){case'"':case"'":Zt=Y9(Je.substring(1),Qe);break;default:Zt=Z9(Je)}if(Zt===null||(Rt.push(Zt[0]),(Je=__(Zt[1]))!==""&&Je.charAt(0)!==","))return Ag;Je=Je.replace(/^,/,"")}return Rt}(Ne);if(this.fontFaces){var ot=function(He,Qe){if(Pe===null){var Zt=function(Rt){var Je=[];return Object.keys(Rt).forEach(function(gt){Rt[gt].forEach(function(Vt){var at=null;switch(Vt){case"bold":at={family:gt,weight:"bold"};break;case"italic":at={family:gt,style:"italic"};break;case"bolditalic":at={family:gt,weight:"bold",style:"italic"};break;case"":case"normal":at={family:gt}}at!==null&&(at.ref={name:gt,style:Vt},Je.push(at))})}),Je}(He.getFontList());Pe=function(Rt){for(var Je={},gt=0;gt<Rt.length;++gt){var Vt=Ng(Rt[gt]),at=Vt.family,Et=Vt.stretch,wt=Vt.style,vn=Vt.weight;Je[at]=Je[at]||{},Je[at][Et]=Je[at][Et]||{},Je[at][Et][wt]=Je[at][Et][wt]||{},Je[at][Et][wt][vn]=Vt}return Je}(Zt.concat(Qe))}return Pe}(this.pdf,this.fontFaces),Ke=Oe.map(function(He){return{family:He,stretch:"normal",weight:ht,style:st}}),At=function(He,Qe,Zt){for(var Rt=(Zt=Zt||{}).defaultFontFamily||"times",Je=Object.assign({},J9,Zt.genericFontFamilies||{}),gt=null,Vt=null,at=0;at<Qe.length;++at)if(Je[(gt=Ng(Qe[at])).family]&&(gt.family=Je[gt.family]),He.hasOwnProperty(gt.family)){Vt=He[gt.family];break}if(!(Vt=Vt||He[Rt]))throw new Error("Could not find a font-family for the rule '"+x_(gt)+"' and default family '"+Rt+"'.");if(Vt=function(Et,wt){if(wt[Et])return wt[Et];var vn=vv[Et],jn=vn<=vv.normal?-1:1,Ut=w_(wt,aA,vn,jn);if(!Ut)throw new Error("Could not find a matching font-stretch value for "+Et);return Ut}(gt.stretch,Vt),Vt=function(Et,wt){if(wt[Et])return wt[Et];for(var vn=oA[Et],jn=0;jn<vn.length;++jn)if(wt[vn[jn]])return wt[vn[jn]];throw new Error("Could not find a matching font-style for "+Et)}(gt.style,Vt),!(Vt=function(Et,wt){if(wt[Et])return wt[Et];if(Et===400&&wt[500])return wt[500];if(Et===500&&wt[400])return wt[400];var vn=K9[Et],jn=w_(wt,lA,vn,Et<400?-1:1);if(!jn)throw new Error("Could not find a matching font-weight for value "+Et);return jn}(gt.weight,Vt)))throw new Error("Failed to resolve a font for the rule '"+x_(gt)+"'.");return Vt}(ot,Ke);this.pdf.setFont(At.ref.name,At.ref.style)}else{var Ae="";(ht==="bold"||parseInt(ht,10)>=700||st==="bold")&&(Ae="bold"),st==="italic"&&(Ae+="italic"),Ae.length===0&&(Ae="normal");for(var Ie="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<Oe.length;mt++){if(this.pdf.internal.getFont(Oe[mt],Ae,{noFallback:!0,disableWarning:!0})!==void 0){Ie=Oe[mt];break}if(Ae==="bolditalic"&&this.pdf.internal.getFont(Oe[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ie=Oe[mt],Ae="bold";else if(this.pdf.internal.getFont(Oe[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ie=Oe[mt],Ae="normal";break}}if(Ie===""){for(var tt=0;tt<Oe.length;tt++)if(yt[Oe[tt]]){Ie=yt[Oe[tt]];break}}Ie=Ie===""?"Times":Ie,this.pdf.setFont(Ie,Ae)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};p.prototype.setLineDash=function(A){this.lineDash=A},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){N.call(this,"fill",!1)},p.prototype.stroke=function(){N.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(A,z){if(isNaN(A)||isNaN(z))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new o(A,z));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(A,z)},p.prototype.closePath=function(){var A=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Jt(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){A=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(A.x,A.y)},p.prototype.lineTo=function(A,z){if(isNaN(A)||isNaN(z))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new o(A,z));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(B.x,B.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},p.prototype.quadraticCurveTo=function(A,z,B,X){if(isNaN(B)||isNaN(X)||isNaN(A)||isNaN(z))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new o(B,X)),oe=this.ctx.transform.applyToPoint(new o(A,z));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},p.prototype.bezierCurveTo=function(A,z,B,X,ee,oe){if(isNaN(ee)||isNaN(oe)||isNaN(A)||isNaN(z)||isNaN(B)||isNaN(X))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new o(ee,oe)),he=this.ctx.transform.applyToPoint(new o(A,z)),me=this.ctx.transform.applyToPoint(new o(B,X));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:me.x,y2:me.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},p.prototype.arc=function(A,z,B,X,ee,oe){if(isNaN(A)||isNaN(z)||isNaN(B)||isNaN(X)||isNaN(ee))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new o(A,z));A=ge.x,z=ge.y;var he=this.ctx.transform.applyToPoint(new o(0,B)),me=this.ctx.transform.applyToPoint(new o(0,0));B=Math.sqrt(Math.pow(he.x-me.x,2)+Math.pow(he.y-me.y,2))}Math.abs(ee-X)>=2*Math.PI&&(X=0,ee=2*Math.PI),this.path.push({type:"arc",x:A,y:z,radius:B,startAngle:X,endAngle:ee,counterclockwise:oe})},p.prototype.arcTo=function(A,z,B,X,ee){throw new Error("arcTo not implemented.")},p.prototype.rect=function(A,z,B,X){if(isNaN(A)||isNaN(z)||isNaN(B)||isNaN(X))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,z),this.lineTo(A+B,z),this.lineTo(A+B,z+X),this.lineTo(A,z+X),this.lineTo(A,z),this.lineTo(A+B,z),this.lineTo(A,z)},p.prototype.fillRect=function(A,z,B,X){if(isNaN(A)||isNaN(z)||isNaN(B)||isNaN(X))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,z,B,X),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},p.prototype.strokeRect=function(A,z,B,X){if(isNaN(A)||isNaN(z)||isNaN(B)||isNaN(X))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(A,z,B,X),this.stroke())},p.prototype.clearRect=function(A,z,B,X){if(isNaN(A)||isNaN(z)||isNaN(B)||isNaN(X))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,z,B,X))},p.prototype.save=function(A){A=typeof A!="boolean"||A;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},p.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(z),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(A){var z,B,X,ee;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))z=0,B=0,X=0,ee=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(oe!==null)z=parseInt(oe[1]),B=parseInt(oe[2]),X=parseInt(oe[3]),ee=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)z=parseInt(oe[1]),B=parseInt(oe[2]),X=parseInt(oe[3]),ee=parseFloat(oe[4]);else{if(ee=1,typeof A=="string"&&A.charAt(0)!=="#"){var ge=new QN(A);A=ge.ok?ge.toHex():"#000000"}A.length===4?(z=A.substring(1,2),z+=z,B=A.substring(2,3),B+=B,X=A.substring(3,4),X+=X):(z=A.substring(1,3),B=A.substring(3,5),X=A.substring(5,7)),z=parseInt(z,16),B=parseInt(B,16),X=parseInt(X,16)}}return{r:z,g:B,b:X,a:ee,style:A}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(A,z,B,X){if(isNaN(z)||isNaN(B)||typeof A!="string")throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!f.call(this)){var ee=J(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;L.call(this,{text:A,x:z,y:B,scale:oe,angle:ee,align:this.textAlign,maxWidth:X})}},p.prototype.strokeText=function(A,z,B,X){if(isNaN(z)||isNaN(B)||typeof A!="string")throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){X=isNaN(X)?void 0:X;var ee=J(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;L.call(this,{text:A,x:z,y:B,scale:oe,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:X})}},p.prototype.measureText=function(A){if(typeof A!="string")throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,B=this.pdf.internal.scaleFactor,X=z.internal.getFontSize(),ee=z.getStringUnitWidth(A)*X/z.internal.scaleFactor;return new function(oe){var ge=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this}({width:ee*=Math.round(96*B/72*1e4)/1e4})},p.prototype.scale=function(A,z){if(isNaN(A)||isNaN(z))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new l(A,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},p.prototype.rotate=function(A){if(isNaN(A))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.translate=function(A,z){if(isNaN(A)||isNaN(z))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new l(1,0,0,1,A,z);this.ctx.transform=this.ctx.transform.multiply(B)},p.prototype.transform=function(A,z,B,X,ee,oe){if(isNaN(A)||isNaN(z)||isNaN(B)||isNaN(X)||isNaN(ee)||isNaN(oe))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new l(A,z,B,X,ee,oe);this.ctx.transform=this.ctx.transform.multiply(ge)},p.prototype.setTransform=function(A,z,B,X,ee,oe){A=isNaN(A)?1:A,z=isNaN(z)?0:z,B=isNaN(B)?0:B,X=isNaN(X)?1:X,ee=isNaN(ee)?0:ee,oe=isNaN(oe)?0:oe,this.ctx.transform=new l(A,z,B,X,ee,oe)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(A,z,B,X,ee,oe,ge,he,me){var Se=this.pdf.getImageProperties(A),Pe=1,Le=1,ve=1,Z=1;X!==void 0&&he!==void 0&&(ve=he/X,Z=me/ee,Pe=Se.width/X*he/X,Le=Se.height/ee*me/ee),oe===void 0&&(oe=z,ge=B,z=0,B=0),X!==void 0&&he===void 0&&(he=X,me=ee),X===void 0&&he===void 0&&(he=Se.width,me=Se.height);for(var st,ht=this.ctx.transform.decompose(),rt=J(ht.rotate.shx),Ne=new l,Me=(Ne=(Ne=(Ne=Ne.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new a(oe-z*ve,ge-B*Z,X*Pe,ee*Le)),Oe=k.call(this,Me),ot=[],Ke=0;Ke<Oe.length;Ke+=1)ot.indexOf(Oe[Ke])===-1&&ot.push(Oe[Ke]);if(_(ot),this.autoPaging)for(var At=ot[0],Ae=ot[ot.length-1],Ie=At;Ie<Ae+1;Ie++){this.pdf.setPage(Ie);var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=Ie===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=Ie===1?0:tt+(Ie-2)*He;if(this.ctx.clip_path.length!==0){var Zt=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(st,this.posX+this.margin[3],-Qe+mt+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=Zt}var Rt=JSON.parse(JSON.stringify(Me));Rt=x([Rt],this.posX+this.margin[3],-Qe+mt+this.ctx.prevPageLastElemOffset)[0];var Je=(Ie>At||Ie<Ae)&&S.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,He,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,rt),Je&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(A,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,rt)};var k=function(A,z,B){var X=[];z=z||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":X.push(Math.floor((A.y+ee)/B)+1);break;case"arc":X.push(Math.floor((A.y+ee-A.radius)/B)+1),X.push(Math.floor((A.y+ee+A.radius)/B)+1);break;case"qct":var oe=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);X.push(Math.floor((oe.y+ee)/B)+1),X.push(Math.floor((oe.y+oe.h+ee)/B)+1);break;case"bct":var ge=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);X.push(Math.floor((ge.y+ee)/B)+1),X.push(Math.floor((ge.y+ge.h+ee)/B)+1);break;case"rect":X.push(Math.floor((A.y+ee)/B)+1),X.push(Math.floor((A.y+A.h+ee)/B)+1)}for(var he=0;he<X.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<X[he];)v.call(this);return X},v=function(){var A=this.fillStyle,z=this.strokeStyle,B=this.font,X=this.lineCap,ee=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=z,this.font=B,this.lineCap=X,this.lineWidth=ee,this.lineJoin=oe},x=function(A,z,B){for(var X=0;X<A.length;X++)switch(A[X].type){case"bct":A[X].x2+=z,A[X].y2+=B;case"qct":A[X].x1+=z,A[X].y1+=B;default:A[X].x+=z,A[X].y+=B}return A},_=function(A){return A.sort(function(z,B){return z-B})},N=function(A,z){for(var B,X,ee=this.fillStyle,oe=this.strokeStyle,ge=this.lineCap,he=this.lineWidth,me=Math.abs(he*this.ctx.transform.scaleX),Se=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),ve=[],Z=0;Z<Le.length;Z++)if(Le[Z].x!==void 0)for(var st=k.call(this,Le[Z]),ht=0;ht<st.length;ht+=1)ve.indexOf(st[ht])===-1&&ve.push(st[ht]);for(var rt=0;rt<ve.length;rt++)for(;this.pdf.internal.getNumberOfPages()<ve[rt];)v.call(this);if(_(ve),this.autoPaging)for(var Ne=ve[0],Me=ve[ve.length-1],Oe=Ne;Oe<Me+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ee,this.strokeStyle=oe,this.lineCap=ge,this.lineWidth=me,this.lineJoin=Se;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=Oe===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ae=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=Oe===1?0:At+(Oe-2)*Ae;if(this.ctx.clip_path.length!==0){var yt=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(B,this.posX+this.margin[3],-Ie+Ke+this.ctx.prevPageLastElemOffset),O.call(this,A,!0),this.path=yt}if(X=JSON.parse(JSON.stringify(Pe)),this.path=x(X,this.posX+this.margin[3],-Ie+Ke+this.ctx.prevPageLastElemOffset),z===!1||Oe===0){var mt=(Oe>Ne||Oe<Me)&&S.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Ae,null).clip().discardPath()),O.call(this,A,z),mt&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=me,O.call(this,A,z),this.lineWidth=he;this.path=Pe},O=function(A,z){if((A!=="stroke"||z||!w.call(this))&&(A==="stroke"||z||!f.call(this))){for(var B,X,ee=[],oe=this.path,ge=0;ge<oe.length;ge++){var he=oe[ge];switch(he.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:he,deltas:[],abs:[]});break;case"lt":var me=ee.length;if(oe[ge-1]&&!isNaN(oe[ge-1].x)&&(B=[he.x-oe[ge-1].x,he.y-oe[ge-1].y],me>0)){for(;me>=0;me--)if(ee[me-1].close!==!0&&ee[me-1].begin!==!0){ee[me-1].deltas.push(B),ee[me-1].abs.push(he);break}}break;case"bct":B=[he.x1-oe[ge-1].x,he.y1-oe[ge-1].y,he.x2-oe[ge-1].x,he.y2-oe[ge-1].y,he.x-oe[ge-1].x,he.y-oe[ge-1].y],ee[ee.length-1].deltas.push(B);break;case"qct":var Se=oe[ge-1].x+2/3*(he.x1-oe[ge-1].x),Pe=oe[ge-1].y+2/3*(he.y1-oe[ge-1].y),Le=he.x+2/3*(he.x1-he.x),ve=he.y+2/3*(he.y1-he.y),Z=he.x,st=he.y;B=[Se-oe[ge-1].x,Pe-oe[ge-1].y,Le-oe[ge-1].x,ve-oe[ge-1].y,Z-oe[ge-1].x,st-oe[ge-1].y],ee[ee.length-1].deltas.push(B);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(he)}}X=z?null:A==="stroke"?"stroke":"fill";for(var ht=!1,rt=0;rt<ee.length;rt++)if(ee[rt].arc)for(var Ne=ee[rt].abs,Me=0;Me<Ne.length;Me++){var Oe=Ne[Me];Oe.type==="arc"?F.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,z,!ht):Y.call(this,Oe.x,Oe.y),ht=!0}else if(ee[rt].close===!0)this.pdf.internal.out("h"),ht=!1;else if(ee[rt].begin!==!0){var ot=ee[rt].start.x,Ke=ee[rt].start.y;V.call(this,ee[rt].deltas,ot,Ke),ht=!0}X&&M.call(this,X),z&&G.call(this)}},U=function(A){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-B;case"top":return A+z-B;case"hanging":return A+z-2*B;case"middle":return A+z/2-B;default:return A}},q=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(z,B){this.colorStops.push([z,B])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(A,z,B,X,ee,oe,ge,he,me){for(var Se=de.call(this,B,X,ee,oe),Pe=0;Pe<Se.length;Pe++){var Le=Se[Pe];Pe===0&&(me?P.call(this,Le.x1+A,Le.y1+z):Y.call(this,Le.x1+A,Le.y1+z)),ae.call(this,A,z,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}he?G.call(this):M.call(this,ge)},M=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(A,z){this.pdf.internal.out(n(A)+" "+r(z)+" m")},L=function(A){var z;switch(A.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var B=this.pdf.getTextDimensions(A.text),X=U.call(this,A.y),ee=q.call(this,X)-B.h,oe=this.ctx.transform.applyToPoint(new o(A.x,X)),ge=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var me,Se,Pe,Le=this.ctx.transform.applyToRectangle(new a(A.x,X,B.w,B.h)),ve=he.applyToRectangle(new a(A.x,ee,B.w,B.h)),Z=k.call(this,ve),st=[],ht=0;ht<Z.length;ht+=1)st.indexOf(Z[ht])===-1&&st.push(Z[ht]);if(_(st),this.autoPaging)for(var rt=st[0],Ne=st[st.length-1],Me=rt;Me<Ne+1;Me++){this.pdf.setPage(Me);var Oe=Me===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[2],At=Ke-this.margin[0],Ae=this.pdf.internal.pageSize.width-this.margin[1],Ie=Ae-this.margin[3],yt=Me===1?0:ot+(Me-2)*At;if(this.ctx.clip_path.length!==0){var mt=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(me,this.posX+this.margin[3],-1*yt+Oe),O.call(this,"fill",!0),this.path=mt}var tt=x([JSON.parse(JSON.stringify(ve))],this.posX+this.margin[3],-yt+Oe+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*A.scale),Pe=this.lineWidth,this.lineWidth=Pe*A.scale);var He=this.autoPaging!=="text";if(He||tt.y+tt.h<=Ke){if(He||tt.y>=Oe&&tt.x<=Ae){var Qe=He?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||Ae-tt.x)[0],Zt=x([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-yt+Oe+this.ctx.prevPageLastElemOffset)[0],Rt=He&&(Me>rt||Me<Ne)&&S.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,At,null).clip().discardPath()),this.pdf.text(Qe,Zt.x,Zt.y,{angle:A.angle,align:z,renderingMode:A.renderingMode}),Rt&&this.pdf.restoreGraphicsState()}}else tt.y<Ke&&(this.ctx.prevPageLastElemOffset+=Ke-tt.y);A.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Pe)}else A.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*A.scale),Pe=this.lineWidth,this.lineWidth=Pe*A.scale),this.pdf.text(A.text,oe.x+this.posX,oe.y+this.posY,{angle:A.angle,align:z,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Pe)},Y=function(A,z,B,X){B=B||0,X=X||0,this.pdf.internal.out(n(A+B)+" "+r(z+X)+" l")},V=function(A,z,B){return this.pdf.lines(A,z,B,null,null)},ae=function(A,z,B,X,ee,oe,ge,he){this.pdf.internal.out([t(i(B+A)),t(s(X+z)),t(i(ee+A)),t(s(oe+z)),t(i(ge+A)),t(s(he+z)),"c"].join(" "))},de=function(A,z,B,X){for(var ee=2*Math.PI,oe=Math.PI/2;z>B;)z-=ee;var ge=Math.abs(B-z);ge<ee&&X&&(ge=ee-ge);for(var he=[],me=X?-1:1,Se=z;ge>1e-5;){var Pe=Se+me*Math.min(ge,oe);he.push(ce.call(this,A,Se,Pe)),ge-=Math.abs(Pe-Se),Se=Pe}return he},ce=function(A,z,B){var X=(B-z)/2,ee=A*Math.cos(X),oe=A*Math.sin(X),ge=ee,he=-oe,me=ge*ge+he*he,Se=me+ge*ee+he*oe,Pe=4/3*(Math.sqrt(2*me*Se)-Se)/(ge*oe-he*ee),Le=ge-Pe*he,ve=he+Pe*ge,Z=Le,st=-ve,ht=X+z,rt=Math.cos(ht),Ne=Math.sin(ht);return{x1:A*Math.cos(z),y1:A*Math.sin(z),x2:Le*rt-ve*Ne,y2:Le*Ne+ve*rt,x3:Z*rt-st*Ne,y3:Z*Ne+st*rt,x4:A*Math.cos(B),y4:A*Math.sin(B)}},J=function(A){return 180*A/Math.PI},ie=function(A,z,B,X,ee,oe){var ge=A+.5*(B-A),he=z+.5*(X-z),me=ee+.5*(B-ee),Se=oe+.5*(X-oe),Pe=Math.min(A,ee,ge,me),Le=Math.max(A,ee,ge,me),ve=Math.min(z,oe,he,Se),Z=Math.max(z,oe,he,Se);return new a(Pe,ve,Le-Pe,Z-ve)},te=function(A,z,B,X,ee,oe,ge,he){var me,Se,Pe,Le,ve,Z,st,ht,rt,Ne,Me,Oe,ot,Ke,At=B-A,Ae=X-z,Ie=ee-B,yt=oe-X,mt=ge-ee,tt=he-oe;for(Se=0;Se<41;Se++)rt=(st=(Pe=A+(me=Se/40)*At)+me*((ve=B+me*Ie)-Pe))+me*(ve+me*(ee+me*mt-ve)-st),Ne=(ht=(Le=z+me*Ae)+me*((Z=X+me*yt)-Le))+me*(Z+me*(oe+me*tt-Z)-ht),Se==0?(Me=rt,Oe=Ne,ot=rt,Ke=Ne):(Me=Math.min(Me,rt),Oe=Math.min(Oe,Ne),ot=Math.max(ot,rt),Ke=Math.max(Ke,Ne));return new a(Math.round(Me),Math.round(Oe),Math.round(ot-Me),Math.round(Ke-Oe))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,z,B=(A=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:z}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(Xe.API),function(e){var t=function(o){var a,l,c,d,p,g,f,w,S,k;for(l=[],c=0,d=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;d>c;c+=4)(p=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(k=p%85))/85)-(S=p%85))/85)-(w=p%85))/85)-(f=p%85))/85)%85,l.push(g+33,f+33,w+33,S+33,k+33)):l.push(122);return function(v,x){for(var _=x;_>0;_--)v.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,c,d,p,g=String,f="length",w=255,S="charCodeAt",k="slice",v="replace";for(o[k](-2),o=o[k](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],d=0,p=(o+=a="uuuuu"[k](o[f]%5||5))[f];p>d;d+=5)l=52200625*(o[S](d)-33)+614125*(o[S](d+1)-33)+7225*(o[S](d+2)-33)+85*(o[S](d+3)-33)+(o[S](d+4)-33),c.push(w&l>>24,w&l>>16,w&l>>8,w&l);return function(x,_){for(var N=_;N>0;N--)x.pop()}(c,a[f]),g.fromCharCode.apply(g,c)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=iv(a)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(o,a){var l=0,c=o||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Xe.API),function(e){e.loadFile=function(t,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,g=0,f=function(w){var S=w.length,k=[],v=String.fromCharCode;for(g=0;g<S;g+=1)k.push(v(255&w.charCodeAt(g)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(f(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return f(p.responseText)}(i,s,o)}catch{}return a}(t,n,r)},e.loadImageFile=e.loadFile}(Xe.API),function(e){function t(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):ed(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):ed(()=>import("./purify.es-96e69d58.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Jt(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},s=function a(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(a(p,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},o=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),c);return(d=d.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var w=d[f],S=w.src.find(function(k){return k.format==="truetype"});S&&c.addFont(S.url,w.ref.name,w.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var c=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(a=a||Xe.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,c,d){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,c,d){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(d,p){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,d),g}).then(d,p).then(function(g){return c.updateProgress(1),g})})},o.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var d=this;a&&(a=a.bind(d)),l&&(l=l.bind(d));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),g=c.call(p,a,l);return o.convert(g,d.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Xe.getPageSize=function(a,l,c){if(Jt(a)==="object"){var d=a;a=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var w,S=0,k=0;if(f.hasOwnProperty(g))S=f[g][1]/p,k=f[g][0]/p;else try{S=c[1],k=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",k>S&&(w=k,k=S,S=w);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",S>k&&(w=k,k=S,S=w)}return{width:k,height:S,unit:l,k:p,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Ng):null;var c=new o(l);return l.worker?c:c.from(a).doCallback()}}(Xe.API),Xe.API.addJS=function(e){return k_=e,this.internal.events.subscribe("postPutResources",function(){Lf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Lf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),S_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+k_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Lf!==void 0&&S_!==void 0&&this.internal.out("/Names <</JavaScript "+Lf+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var g=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Xe.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(p){for(var g,f=256*p.charCodeAt(4)+p.charCodeAt(5),w=p.length,S={width:0,height:0,numcomponents:1},k=4;k<w;k+=2){if(k+=f,t.indexOf(p.charCodeAt(k+1))!==-1){g=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),S={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:g,numcomponents:p.charCodeAt(k+9)};break}f=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Xe.API),Xe.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,s=I9(e,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,c=s.palette,d=s.depth;i=c&&l===1?function(F){for(var M=F.width,G=F.height,P=F.data,L=F.palette,Y=F.depth,V=!1,ae=[],de=[],ce=void 0,J=!1,ie=0,te=0;te<L.length;te++){var se=yx(L[te],4),A=se[0],z=se[1],B=se[2],X=se[3];ae.push(A,z,B),X!=null&&(X===0?(ie++,de.length<1&&de.push(te)):X<255&&(J=!0))}if(J||ie>1){V=!0,de=void 0;var ee=M*G;ce=new Uint8Array(ee);for(var oe=new DataView(P.buffer),ge=0;ge<ee;ge++){var he=Eg(oe,ge,Y),me=yx(L[he],4)[3];ce[ge]=me}}else ie===0&&(de=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:V?8:void 0,colorBytes:P,alphaBytes:ce,needSMask:V,palette:ae,mask:de}}(s):l===2||l===4?function(F){for(var M=F.data,G=F.width,P=F.height,L=F.channels,Y=F.depth,V=L===2?"DeviceGray":"DeviceRGB",ae=L-1,de=G*P,ce=ae,J=de*ce,ie=1*de,te=Math.ceil(J*Y/8),se=Math.ceil(ie*Y/8),A=new Uint8Array(te),z=new Uint8Array(se),B=new DataView(M.buffer),X=new DataView(A.buffer),ee=new DataView(z.buffer),oe=!1,ge=0;ge<de;ge++){for(var he=ge*L,me=0;me<ce;me++)R_(X,Eg(B,he+me,Y),ge*ce+me,Y);var Se=Eg(B,he+ce,Y);Se<(1<<Y)-1&&(oe=!0),R_(ee,Se,1*ge,Y)}return{colorSpace:V,colorsPerPixel:ae,sMaskBitsPerComponent:oe?Y:void 0,colorBytes:A,alphaBytes:z,needSMask:oe}}(s):function(F){var M=F.data,G=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:M instanceof Uint16Array?function(P){for(var L=P.length,Y=new Uint8Array(2*L),V=new DataView(Y.buffer,Y.byteOffset,Y.byteLength),ae=0;ae<L;ae++)V.setUint16(2*ae,P[ae],!1);return Y}(M):M,needSMask:!1}}(s);var p,g,f,w=i,S=w.colorSpace,k=w.colorsPerPixel,v=w.sMaskBitsPerComponent,x=w.colorBytes,_=w.alphaBytes,N=w.needSMask,O=w.palette,U=w.mask,q=null;return r!==Xe.API.image_compression.NONE&&typeof iv=="function"?(q=function(F){var M;switch(F){case Xe.API.image_compression.FAST:M=11;break;case Xe.API.image_compression.MEDIUM:M=13;break;case Xe.API.image_compression.SLOW:M=14;break;default:M=12}return M}(r),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(q," /Colors ").concat(k," /BitsPerComponent ").concat(d," /Columns ").concat(o),e=E_(x,Math.ceil(o*k*d/8),k,d,r),N&&(f=E_(_,Math.ceil(o*v/8),1,v,r))):(p=void 0,g=void 0,e=x,N&&(f=_)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:e,index:t,filter:p,decodeParameters:g,transparency:U,palette:O,sMask:f,predictor:q,width:o,height:a,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:S}}},function(e){e.processGIF89A=function(t,n,r,i){var s=new tB(t),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new Cg(100).encode(c,100);return e.processJPEG.call(this,d,n,r,i)},e.processGIF87A=e.processGIF89A}(Xe.API),os.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},os.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){tn.log("bit decode error:"+n)}},os.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},os.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},os.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},os.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,a=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=e}},os.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/t*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=e}},os.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},os.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},os.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new os(t,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Cg(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(Xe.API),O_.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new O_(t),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Cg(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(Xe.API),Xe.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],g=r[c+2],f=r[c+3];s[a++]=d,s[a++]=p,s[a++]=g,o[l++]=f}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:w,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Xe.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wl=Xe.API,Tf=Wl.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=t.doKerning!==!1,g=0,f=e.length,w=0,S=a[0]||l,k=[];for(n=0;n<f;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(g=p&&Jt(c[r])==="object"&&!isNaN(parseInt(c[r][w],10))?c[r][w]/d:0,k.push((a[r]||S)/l+g)),w=r;return k},j_=Wl.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Wl.processArabic&&(e=Wl.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Tf.apply(this,arguments).reduce(function(s,o){return s+o},0)},N_=function(e,t,n,r){for(var i=[],s=0,o=e.length,a=0;s!==o&&a+t[s]<n;)a+=t[s],s++;i.push(e.slice(0,s));var l=s;for(a=0;s!==o;)a+t[s]>r&&(i.push(e.slice(l,s)),a=0,l=s),a+=t[s],s++;return l!==s&&i.push(e.slice(l,s)),i},A_=function(e,t,n){n||(n={});var r,i,s,o,a,l,c,d=[],p=[d],g=n.textIndent||0,f=0,w=0,S=e.split(" "),k=Tf.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),x=[];S.map(function(N){(N=N.split(/\s*\n/)).length>1?x=x.concat(N.map(function(O,U){return(U&&O.length?`
`:"")+O})):x.push(N[0])}),S=x,l=j_.apply(this,[v,n])}for(s=0,o=S.length;s<o;s++){var _=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),_=1),g+f+(w=(i=Tf.apply(this,[r,n])).reduce(function(N,O){return N+O},0))>t||_){if(w>t){for(a=N_.apply(this,[r,i,t-(g+f),t]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);w=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(N,O){return N+O},0)}else d=[r];p.push(d),g=w+l,f=k}else d.push(r),g+=f+w,f=k}return c=l?function(N,O){return(O?v:"")+N.join(" ")}:function(N){return N.join(" ")},p.map(c)},Wl.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(A_.apply(this,[r[a],o,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=t[s],i[t[s]]=n[s];var o=function(g){return"0x"+parseInt(g,10).toString(16)},a=e.__fontmetrics__.compress=function(g){var f,w,S,k,v=["{"];for(var x in g){if(f=g[x],isNaN(parseInt(x,10))?w="'"+x+"'":(x=parseInt(x,10),w=(w=o(x).slice(2)).slice(0,-1)+i[w.slice(-1)]),typeof f=="number")f<0?(S=o(f).slice(3),k="-"):(S=o(f).slice(2),k=""),S=k+S.slice(0,-1)+i[S.slice(-1)];else{if(Jt(f)!=="object")throw new Error("Don't know what to do with value type "+Jt(f)+".");S=a(f)}v.push(w+S)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,w,S,k,v={},x=1,_=v,N=[],O="",U="",q=g.length-1,F=1;F<q;F+=1)(k=g[F])=="'"?f?(S=f.join(""),f=void 0):f=[]:f?f.push(k):k=="{"?(N.push([_,S]),_={},S=void 0):k=="}"?((w=N.pop())[0][w[1]]=_,S=void 0,_=w[0]):k=="-"?x=-1:S===void 0?r.hasOwnProperty(k)?(O+=r[k],S=parseInt(O,16)*x,x=1,O=""):O+=k:r.hasOwnProperty(k)?(U+=r[k],_[S]=parseInt(U,16)*x,x=1,S=void 0,U=""):U+=k;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var f=g.font,w=p.Unicode[f.postScriptName];w&&(f.metadata.Unicode={},f.metadata.Unicode.widths=w.widths,f.metadata.Unicode.kerning=w.kerning);var S=d.Unicode[f.postScriptName];S&&(f.metadata.Unicode.encoding=S,f.encoding=S.codePages[0])}])}(Xe.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(np(a)),o.metadata=e.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Xe),Xe.API.addSvgAsImage=function(e,t,n,r,i,s,o,a){if(isNaN(t)||isNaN(n))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(pt.canvg?Promise.resolve(pt.canvg):ed(()=>import("./index.es-58b4e0e4.js"),["assets/index.es-58b4e0e4.js","assets/preload-helper-8235fac6.js"])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),t,n,r,i,o,a)})},Xe.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Xe.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function g(w,S){var k,v=!1;for(k=0;k<w.length;k+=1)w[k]===S&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=a.length;for(p=0;p<f;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Jt(e)==="object"){for(i in e)if(s=e[i],g(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&g(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,S=[];for(w in n)n[w].explicitSet===!0&&(n[w].type==="name"?S.push("/"+w+" /"+n[w].value):S.push("/"+w+" "+n[w].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Xe.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,g=s.length;p<g;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(a=Object.keys(s).sort(function(f,w){return f-w})).length;p<g;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,g=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",w=0;w<g.length;w++)f+=String.fromCharCode(g[w]);var S=c();d({data:f,addLength1:!0,objectId:S}),l("endobj");var k=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var v=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Zl(a.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Zl(a.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+e.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+Zl(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,g="",f=0;f<p.length;f++)g+=String.fromCharCode(p[f]);var w=c();d({data:g,addLength1:!0,objectId:w}),l("endobj");var S=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var k=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+w+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Zl(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var v=0;v<a.metadata.hmtx.widths.length;v++)a.metadata.hmtx.widths[v]=parseInt(a.metadata.hmtx.widths[v]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Zl(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},g=p.pdfEscape,f=p.activeFontKey,w=p.fonts,S=f,k="",v=0,x="",_=w[S].encoding;if(w[S].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(x=a,S=f,Array.isArray(a)&&(x=a[0]),v=0;v<x.length;v+=1)w[S].metadata.hasOwnProperty("cmap")&&(o=w[S].metadata.cmap.unicode.codeMap[x[v].charCodeAt(0)]),o||x[v].charCodeAt(0)<256&&w[S].metadata.hasOwnProperty("Unicode")?k+=x[v]:k+="";var N="";return parseInt(S.slice(1))<14||_==="WinAnsiEncoding"?N=g(k,S).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(N=n(k,w[S])),p.isHex=!0,{text:N,x:l,y:c,options:d,mutex:p}};t.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Xe),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Xe.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,_=0;this.__bidiEngine__={};var N=function(P){var L=P.charCodeAt(),Y=L>>8,V=S[Y];return V!==void 0?p[256*V+(255&L)]:Y===252||Y===253?"AL":v.test(Y)?"L":Y===8?"R":"N"},O=function(P){for(var L,Y=0;Y<P.length;Y++){if((L=N(P.charAt(Y)))==="L")return!1;if(L==="R")return!0}return!1},U=function(P,L,Y,V){var ae,de,ce,J,ie=L[V];switch(ie){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(ie="AN");break;case"AL":x=!0,ie="R";break;case"WS":case"BN":ie="N";break;case"CS":V<1||V+1>=L.length||(ae=Y[V-1])!=="EN"&&ae!=="AN"||(de=L[V+1])!=="EN"&&de!=="AN"?ie="N":x&&(de="AN"),ie=de===ae?de:"N";break;case"ES":ie=(ae=V>0?Y[V-1]:"B")==="EN"&&V+1<L.length&&L[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&Y[V-1]==="EN"){ie="EN";break}if(x){ie="N";break}for(ce=V+1,J=L.length;ce<J&&L[ce]==="ET";)ce++;ie=ce<J&&L[ce]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(J=L.length,ce=V+1;ce<J&&L[ce]==="NSM";)ce++;if(ce<J){var te=P[V],se=te>=1425&&te<=2303||te===64286;if(ae=L[ce],se&&(ae==="R"||ae==="AL")){ie="R";break}}}ie=V<1||(ae=L[V-1])==="B"?"N":Y[V-1];break;case"B":x=!1,i=!0,ie=_;break;case"S":s=!0,ie="N"}return ie},q=function(P,L,Y){var V=P.split("");return Y&&F(V,Y,{hiLevel:_}),V.reverse(),L&&L.reverse(),V.join("")},F=function(P,L,Y){var V,ae,de,ce,J,ie=-1,te=P.length,se=0,A=[],z=_?f:g,B=[];for(x=!1,i=!1,s=!1,ae=0;ae<te;ae++)B[ae]=N(P[ae]);for(de=0;de<te;de++){if(J=se,A[de]=U(P,B,A,de),V=240&(se=z[J][w[A[de]]]),se&=15,L[de]=ce=z[se][5],V>0)if(V===16){for(ae=ie;ae<de;ae++)L[ae]=1;ie=-1}else ie=-1;if(z[se][6])ie===-1&&(ie=de);else if(ie>-1){for(ae=ie;ae<de;ae++)L[ae]=ce;ie=-1}B[de]==="B"&&(L[de]=0),Y.hiLevel|=ce}s&&function(X,ee,oe){for(var ge=0;ge<oe;ge++)if(X[ge]==="S"){ee[ge]=_;for(var he=ge-1;he>=0&&X[he]==="WS";he--)ee[he]=_}}(B,L,te)},M=function(P,L,Y,V,ae){if(!(ae.hiLevel<P)){if(P===1&&_===1&&!i)return L.reverse(),void(Y&&Y.reverse());for(var de,ce,J,ie,te=L.length,se=0;se<te;){if(V[se]>=P){for(J=se+1;J<te&&V[J]>=P;)J++;for(ie=se,ce=J-1;ie<ce;ie++,ce--)de=L[ie],L[ie]=L[ce],L[ce]=de,Y&&(de=Y[ie],Y[ie]=Y[ce],Y[ce]=de);se=J}se++}}},G=function(P,L,Y){var V=P.split(""),ae={hiLevel:_};return Y||(Y=[]),F(V,Y,ae),function(de,ce,J){if(J.hiLevel!==0&&d)for(var ie,te=0;te<de.length;te++)ce[te]===1&&(ie=k.indexOf(de[te]))>=0&&(de[te]=k[ie+1])}(V,Y,ae),M(2,V,L,Y,ae),M(1,V,L,Y,ae),V.join("")};return this.__bidiEngine__.doBidiReorder=function(P,L,Y){if(function(ae,de){if(de)for(var ce=0;ce<ae.length;ce++)de[ce]=ce;a===void 0&&(a=O(ae)),c===void 0&&(c=O(ae))}(P,L),o||!l||c)if(o&&l&&a^c)_=a?1:0,P=q(P,L,Y);else if(!o&&l&&c)_=a?1:0,P=G(P,L,Y),P=q(P,L);else if(!o||a||l||c){if(o&&!l&&a^c)P=q(P,L),a?(_=0,P=G(P,L,Y)):(_=1,P=G(P,L,Y),P=q(P,L));else if(o&&a&&!l&&c)_=1,P=G(P,L,Y),P=q(P,L);else if(!o&&!l&&a^c){var V=d;a?(_=1,P=G(P,L,Y),_=0,d=!1,P=G(P,L,Y),d=V):(_=0,P=G(P,L,Y),P=q(P,L),_=1,d=!1,P=G(P,L,Y),d=V,P=q(P,L))}}else _=0,P=G(P,L,Y);else _=a?1:0,P=G(P,L,Y);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,l=P.isOutputVisual,a=P.isInputRtl,c=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Xe),Xe.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new va(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new gB(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new nB(this.contents),this.head=new iB(this),this.name=new cB(this),this.cmap=new uA(this),this.toUnicode={},this.hhea=new sB(this),this.maxp=new uB(this),this.hmtx=new dB(this),this.post=new aB(this),this.os2=new oB(this),this.loca=new mB(this),this.glyf=new hB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)t=l[o],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,o,a;for(o=0,s=0,a=(t=""+t).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var xs,va=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,o,a,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),nB=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,o,a,l,c,d,p,g,f,w,S;for(S in f=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(f)/l),o=Math.floor(p/l),d=16*f-p,(i=new va).writeInt(this.scalarType),i.writeShort(f),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*f,c=i.pos+s,a=null,w=[],n)for(g=n[S],i.writeString(S),i.writeInt(e(g)),i.writeInt(c),i.writeInt(g.length),w=w.concat(g),S==="head"&&(a=c),c+=g.length;c%4;)w.push(0),c++;return i.write(w),r=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,o;for(n=dA.call(n);n.length%4;)n.push(0);for(s=new va(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),rB={}.hasOwnProperty,zs=function(e,t){for(var n in t)rB.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};xs=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var iB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new va).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),F_=function(){function e(t,n){var r,i,s,o,a,l,c,d,p,g,f,w,S,k,v,x,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(f=t.readUInt16(),g=f/2,t.pos+=6,s=function(){var N,O;for(O=[],l=N=0;0<=g?N<g:N>g;l=0<=g?++N:--N)O.push(t.readUInt16());return O}(),t.pos+=2,S=function(){var N,O;for(O=[],l=N=0;0<=g?N<g:N>g;l=0<=g?++N:--N)O.push(t.readUInt16());return O}(),c=function(){var N,O;for(O=[],l=N=0;0<=g?N<g:N>g;l=0<=g?++N:--N)O.push(t.readUInt16());return O}(),d=function(){var N,O;for(O=[],l=N=0;0<=g?N<g:N>g;l=0<=g?++N:--N)O.push(t.readUInt16());return O}(),i=(this.length-t.pos+this.offset)/2,a=function(){var N,O;for(O=[],l=N=0;0<=i?N<i:N>i;l=0<=i?++N:--N)O.push(t.readUInt16());return O}(),l=v=0,_=s.length;v<_;l=++v)for(k=s[l],r=x=w=S[l];w<=k?x<=k:x>=k;r=w<=k?++x:--x)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-w)-(g-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}t.pos=p}return e.encode=function(t,n){var r,i,s,o,a,l,c,d,p,g,f,w,S,k,v,x,_,N,O,U,q,F,M,G,P,L,Y,V,ae,de,ce,J,ie,te,se,A,z,B,X,ee,oe,ge,he,me,Se,Pe;switch(V=new va,o=Object.keys(t).sort(function(Le,ve){return Le-ve}),n){case"macroman":for(S=0,k=function(){var Le=[];for(w=0;w<256;++w)Le.push(0);return Le}(),x={0:0},s={},ae=0,ie=o.length;ae<ie;ae++)x[he=t[i=o[ae]]]==null&&(x[he]=++S),s[i]={old:t[i],new:x[t[i]]},k[i]=x[t[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(k),{charMap:s,subtable:V.data,maxGlyphID:S+1};case"unicode":for(L=[],p=[],_=0,x={},r={},v=c=null,de=0,te=o.length;de<te;de++)x[O=t[i=o[de]]]==null&&(x[O]=++_),r[i]={old:O,new:x[O]},a=x[O]-i,v!=null&&a===c||(v&&p.push(v),L.push(i),c=a),v=i;for(v&&p.push(v),p.push(65535),L.push(65535),G=2*(M=L.length),F=2*Math.pow(Math.log(M)/Math.LN2,2),g=Math.log(F/2)/Math.LN2,q=2*M-F,l=[],U=[],f=[],w=ce=0,se=L.length;ce<se;w=++ce){if(P=L[w],d=p[w],P===65535){l.push(0),U.push(0);break}if(P-(Y=r[P].new)>=32768)for(l.push(0),U.push(2*(f.length+M-w)),i=J=P;P<=d?J<=d:J>=d;i=P<=d?++J:--J)f.push(r[i].new);else l.push(Y-P),U.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*M+2*f.length),V.writeUInt16(0),V.writeUInt16(G),V.writeUInt16(F),V.writeUInt16(g),V.writeUInt16(q),oe=0,A=p.length;oe<A;oe++)i=p[oe],V.writeUInt16(i);for(V.writeUInt16(0),ge=0,z=L.length;ge<z;ge++)i=L[ge],V.writeUInt16(i);for(me=0,B=l.length;me<B;me++)a=l[me],V.writeUInt16(a);for(Se=0,X=U.length;Se<X;Se++)N=U[Se],V.writeUInt16(N);for(Pe=0,ee=f.length;Pe<ee;Pe++)S=f[Pe],V.writeUInt16(S);return{charMap:r,subtable:V.data,maxGlyphID:_+1}}},e}(),uA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new F_(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,i;return n==null&&(n="macroman"),r=F_.encode(t,n),(i=new va).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},e}(),sB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),oB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),aB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(t.readUInt32());return l}).call(this)}},e}(),lB=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,i,s,o,a,l,c,d,p,g;for(t.pos=this.offset,t.readShort(),n=t.readShort(),a=t.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(l={},s=d=0,p=r.length;d<p;s=++d)i=r[s],t.pos=i.offset,c=t.readString(i.length),o=new lB(c,i),l[g=i.nameID]==null&&(l[g]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),uB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),dB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,i,s,o,a,l;for(t.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)d.push(t.readInt16());return d}(),this.widths=(function(){var c,d,p,g;for(g=[],c=0,d=(p=this.metrics).length;c<d;c++)s=p[c],g.push(s.advance);return g}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),dA=[].slice,hB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,i,s,o,a,l,c,d,p;return t in this.cache?this.cache[t]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,o=(a=new va(n.read(i))).readShort(),c=a.readShort(),p=a.readShort(),l=a.readShort(),d=a.readShort(),this.cache[t]=o===-1?new pB(a,c,p,l,d):new fB(a,o,c,p,l,d),this.cache[t]))},e.prototype.encode=function(t,n,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=n.length;a<l;a++)i=t[n[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},e}(),fB=function(){function e(t,n,r,i,s,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),pB=function(){function e(t,n,r,i,s){var o,a;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new va(dA.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),mB=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return zs(e,xs),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var c=new Array(4*r.length),d=0;d<r.length;++d)c[4*d+3]=255&r[d],c[4*d+2]=(65280&r[d])>>8,c[4*d+1]=(16711680&r[d])>>16,c[4*d]=(4278190080&r[d])>>24;return c},e}(),gB=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,o,a,l;for(i={},o=0,a=t.length;o<a;o++)i[s=t[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,o,a,l,c,d,p,g,f,w,S,k,v;for(i in r=uA.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},v=r.charMap)f[(l=v[i]).old]=l.new;for(w in g=r.maxGlyphID,o)w in f||(f[w]=g++);return d=function(x){var _,N;for(_ in N={},x)N[x[_]]=_;return N}(f),p=Object.keys(d).sort(function(x,_){return x-_}),S=function(){var x,_,N;for(N=[],x=0,_=p.length;x<_;x++)a=p[x],N.push(d[a]);return N}(),s=this.font.glyf.encode(o,S,f),c=this.font.loca.encode(s.offsets,S),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e}();Xe.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(t.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+n},t}();async function vB(e,t){try{const n={id:e,prenom:t.firstName,nom:t.lastName},{data:r,error:i}=await Pt.from("profiles").upsert(n,{onConflict:"id",returning:"representation"}).select().single();if(i)throw new Error(`Erreur mise  jour profil: ${i.message}`);return r}catch(n){throw n}}async function yB(e){var t,n,r,i;try{const{data:s,error:o}=await Pt.from("profiles").select("prenom, nom").eq("id",e.id).single(),a={id:e.id,email:e.email,prenom:(s==null?void 0:s.prenom)||((t=e.user_metadata)==null?void 0:t.firstName)||((n=e.user_metadata)==null?void 0:n.prenom)||null,nom:(s==null?void 0:s.nom)||((r=e.user_metadata)==null?void 0:r.lastName)||((i=e.user_metadata)==null?void 0:i.nom)||null,last_login:new Date().toISOString()},{data:l,error:c}=await Pt.from("profiles").upsert(a,{onConflict:"id",returning:"representation"}).select().single();if(c)throw new Error(`Erreur sync profil: ${c.message}`);return l}catch(s){throw s}}function _2(){const[e,t]=R.useState(null),[n,r]=R.useState(!0);return R.useEffect(()=>{const i=async()=>{try{const{data:{session:o}}=await Pt.auth.getSession();if(!(o!=null&&o.user)){t(null),r(!1);return}try{await yB(o.user)}catch{}const a=o.user.email.split("@")[0],l={id:o.user.id,email:o.user.email,firstName:a,lastName:"",name:a},{data:c,error:d}=await Pt.from("profiles").select("*").eq("id",o.user.id).single();if(c){const p={...l,firstName:c.prenom||l.firstName,lastName:c.nom||"",name:`${c.prenom||l.firstName} ${c.nom||""}`.trim(),profile:c};t(p)}else t(l)}catch{t(null)}finally{r(!1)}};i();const{data:{subscription:s}}=Pt.auth.onAuthStateChange(async(o,a)=>{o==="SIGNED_IN"?i():o==="SIGNED_OUT"&&(t(null),r(!1))});return()=>s==null?void 0:s.unsubscribe()},[]),{user:e,loading:n}}function D_(e){return e.includes("security purposes")&&e.includes("request this")||e.includes("only request this after")?"Pour des raisons de scurit, vous ne pouvez faire cette demande que toutes les 60 secondes.":e.includes("Invalid email")?"Adresse email invalide.":e.includes("User not found")?"Aucun compte trouv avec cette adresse email.":e.includes("Too many requests")?"Trop de tentatives. Veuillez ressayer dans quelques minutes.":e}async function wB({email:e}){try{const{error:t}=await Pt.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});return t?{error:{message:D_(t.message)}}:{data:{message:"Email de rinitialisation envoy avec succs"}}}catch(t){return{error:{message:"Erreur lors de l'envoi de l'email de rinitialisation: "+D_(t.message)}}}}const ap=(e,t=null)=>{if(!e||!e.trim())return;const n=t?`email_history_${t}`:"email_history_guest",r=localStorage.getItem(n);let i=[];if(r)try{i=JSON.parse(r)}catch{}const s=[e,...i.filter(o=>o!==e)].slice(0,5);localStorage.setItem(n,JSON.stringify(s))},bB=e=>{const[t,n]=R.useState([]),[r,i]=R.useState(!1),[s,o]=R.useState([]);return R.useEffect(()=>{const d=e!=null&&e.id?`email_history_${e.id}`:"email_history_guest",p=localStorage.getItem(d);if(p)try{const g=JSON.parse(p);n(g)}catch{}},[e]),{showSuggestions:r,filteredEmails:s,saveEmail:d=>{if(!d||!d.trim())return;const p=e!=null&&e.id?`email_history_${e.id}`:"email_history_guest",g=[d,...t.filter(f=>f!==d)].slice(0,5);n(g),localStorage.setItem(p,JSON.stringify(g))},removeEmail:d=>{const p=e!=null&&e.id?`email_history_${e.id}`:"email_history_guest",g=t.filter(f=>f!==d);n(g),localStorage.setItem(p,JSON.stringify(g)),o(f=>f.filter(w=>w!==d))},filterEmails:d=>{if(!d||d.length<1){o([]),i(!1);return}const p=t.filter(g=>g.toLowerCase().startsWith(d.toLowerCase()));o(p),i(p.length>0)},hideSuggestions:()=>i(!1)}},gc=({value:e,onChange:t,placeholder:n,required:r,disabled:i,user:s,onEmailSubmit:o})=>{const{showSuggestions:a,filteredEmails:l,saveEmail:c,removeEmail:d,filterEmails:p,hideSuggestions:g}=bB(s),[f,w]=R.useState(e||""),[S,k]=R.useState(-1),v=R.useRef(null),x=R.useRef(null);R.useEffect(()=>{w(e||"")},[e]),R.useEffect(()=>{const U=q=>{x.current&&!x.current.contains(q.target)&&(g(),k(-1))};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[g]);const _=U=>{const q=U.target.value;w(q),t(U),p(q),k(-1)},N=U=>{var q;w(U),t({target:{value:U}}),g(),k(-1),(q=v.current)==null||q.focus()},O=U=>{if(!a||l.length===0){U.key==="Enter"&&o&&(c(f),o());return}switch(U.key){case"ArrowDown":U.preventDefault(),k(q=>q<l.length-1?q+1:q);break;case"ArrowUp":U.preventDefault(),k(q=>q>0?q-1:-1);break;case"Enter":U.preventDefault(),S>=0&&S<l.length?N(l[S]):o&&(c(f),o());break;case"Escape":g(),k(-1);break}};return u.jsxs("div",{className:"email-input-container",ref:x,children:[u.jsx("input",{ref:v,type:"email",value:f,onChange:_,onKeyDown:O,placeholder:n,required:r,disabled:i,autoComplete:"off"}),a&&l.length>0&&u.jsx("div",{className:"email-suggestions google-style",children:l.map((U,q)=>u.jsxs("div",{className:`email-suggestion-item ${q===S?"selected":""}`,onMouseEnter:()=>k(q),children:[u.jsx("div",{className:"email-suggestion-content",onClick:()=>N(U),children:U}),u.jsx("button",{type:"button",className:"email-suggestion-remove",onClick:F=>{F.stopPropagation(),d(U)},onMouseEnter:F=>F.stopPropagation(),title:"Supprimer cet email",children:""})]},q))})]})},xB=({isLoggedIn:e,onLogin:t,onLogout:n,onRegister:r,onOpenHistory:i,onOpenSubscription:s})=>{var Me,Oe,ot,Ke,At;const[o,a]=R.useState(!1),[l,c]=R.useState(!1),[d,p]=R.useState(!1),[g,f]=R.useState(!1),[w,S]=R.useState(""),[k,v]=R.useState(""),[x,_]=R.useState(""),[N,O]=R.useState(""),[U,q]=R.useState(""),[F,M]=R.useState(!1),{user:G,loading:P}=_2(),L=!!G&&!P,Y=R.useRef(null),[V,ae]=R.useState(""),[de,ce]=R.useState(""),[J,ie]=R.useState("");R.useState(!1),R.useState("");const[te,se]=R.useState(!1),[A,z]=R.useState(!1),[B,X]=R.useState(""),[ee,oe]=R.useState(!1),[ge,he]=R.useState(!1),[me,Se]=R.useState(!1),[Pe,Le]=R.useState(!1);R.useEffect(()=>{(async()=>{if(!G||!G.id){he(!1);return}try{const{data:Ie,error:yt}=await Pt.from("profiles").select("role").eq("id",G.id).single();if(yt){he(!1);return}const mt=(Ie==null?void 0:Ie.role)==="admin"||(Ie==null?void 0:Ie.role)==="super_admin";he(mt)}catch{he(!1)}})()},[G]);const ve=()=>ge,Z=async Ae=>{Ae.preventDefault(),q(""),M(!0);try{const{data:Ie,error:yt}=await Pt.auth.signInWithPassword({email:w.trim(),password:k.trim()});if(yt){q(yt.message==="Invalid login credentials"?"Email ou mot de passe incorrect":yt.message);return}Ie!=null&&Ie.user&&(ap(w.trim()),c(!1),a(!1),S(""),v(""),t&&t(Ie.user))}catch{q("Erreur de connexion. Vrifiez vos identifiants.")}finally{M(!1)}},st=async Ae=>{Ae.preventDefault(),q(""),M(!0);try{const{data:Ie,error:yt}=await Pt.auth.signUp({email:w.trim(),password:k.trim(),options:{data:{firstName:x.trim(),lastName:N.trim(),name:`${x.trim()} ${N.trim()}`}}});if(yt){q(yt.message==="User already registered"?"Un compte existe dj avec cet email":yt.message);return}Ie!=null&&Ie.user&&(ap(w.trim()),Ie.session?(p(!1),a(!1),S(""),v(""),_(""),O(""),r&&r(Ie.user)):q("Un email de confirmation a t envoy. Vrifiez votre bote mail."))}catch{q("Erreur d'inscription. Ressayez plus tard.")}finally{M(!1)}},ht=async()=>{try{const{error:Ae}=await Pt.auth.signOut();if(Ae){q("Erreur lors de la dconnexion");return}a(!1),f(!1),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("friday_supabase_user"),n&&n(),window.location.reload()}catch{q("Erreur lors de la dconnexion")}},rt=async Ae=>{Ae.preventDefault(),q(""),oe(!0),q(""),ap(B.trim());try{const{data:Ie,error:yt}=await wB({email:B.trim()});if(yt){oe(!1),q(yt.message||"Erreur lors de l'envoi de l'email");return}}catch{oe(!1),q("Erreur lors de l'envoi de l'email de rinitialisation")}},Ne=async()=>{if(!(!G||!G.id))try{const{data:Ae,error:Ie}=await Pt.from("profiles").select("*").eq("id",G.id).single();!Ie&&Ae&&(ie(Ae.email||G.email||""),ae(Ae.prenom||""),ce(Ae.nom||""))}catch{}};return R.useEffect(()=>{var Ae,Ie;G&&(ie(G.email||""),ae(G.firstName||((Ae=G.user_metadata)==null?void 0:Ae.firstName)||""),ce(G.lastName||((Ie=G.user_metadata)==null?void 0:Ie.lastName)||""))},[G]),R.useEffect(()=>{const Ae=Ie=>{Y.current&&!Y.current.contains(Ie.target)&&(a(!1),c(!1),p(!1),f(!1),z(!1),q(""))};return document.addEventListener("mousedown",Ae),()=>{document.removeEventListener("mousedown",Ae)}},[]),P?u.jsx("div",{className:"user-account",ref:Y,children:u.jsx("div",{className:"user-avatar",children:u.jsx("span",{children:""})})}):u.jsx("div",{className:"user-account",ref:Y,children:L?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"user-avatar",onClick:()=>a(!o),children:u.jsx("span",{className:"user-initial",children:((Oe=(Me=G==null?void 0:G.firstName)==null?void 0:Me.charAt(0))==null?void 0:Oe.toUpperCase())||((Ke=(ot=G==null?void 0:G.email)==null?void 0:ot.charAt(0))==null?void 0:Ke.toUpperCase())||""})}),u.jsx(Hi,{children:o&&u.jsxs(Te.div,{className:"user-dropdown",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[u.jsxs("div",{className:"user-info",children:[u.jsx("div",{className:"user-name",children:(G==null?void 0:G.firstName)||(G==null?void 0:G.name)||((At=G==null?void 0:G.email)==null?void 0:At.split("@")[0])}),u.jsx("div",{className:"user-email",children:G==null?void 0:G.email})]}),u.jsxs("div",{className:"dropdown-actions",children:[ve()&&u.jsx("button",{onClick:()=>{window.open("/ilmysv6iepwepoa4tj2k?auth=auto","_blank")},children:" Administration"}),u.jsx("button",{onClick:()=>{a(!1),f(!0)},children:"Mon profil"}),u.jsx("button",{onClick:()=>{a(!1),i&&i()},children:"Mon historique"}),u.jsx("button",{onClick:()=>{a(!1),s&&s()},children:"Mon abonnement"}),u.jsx("button",{onClick:ht,className:"logout-button",children:"Se dconnecter"})]})]})}),u.jsx(Hi,{children:g&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>f(!1),children:u.jsxs(Te.div,{className:"auth-form profile-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ae=>Ae.stopPropagation(),children:[u.jsx("h3",{children:"Mon profil"}),u.jsxs("form",{onSubmit:async Ae=>{Ae.preventDefault(),q("");try{await vB(G.id,{firstName:V.trim(),lastName:de.trim()}),await Ne(),se(!0),setTimeout(()=>se(!1),3e3)}catch(Ie){console.error("Erreur mise  jour profil:",Ie),q("Erreur lors de la mise  jour du profil")}},children:[u.jsx(gc,{value:J,onChange:Ae=>ie(Ae.target.value),placeholder:"Email",disabled:!0,user:G,onEmailSubmit:()=>{}}),u.jsx("input",{type:"text",placeholder:"Prnom",value:V,onChange:Ae=>ae(Ae.target.value)}),u.jsx("input",{type:"text",placeholder:"Nom",value:de,onChange:Ae=>ce(Ae.target.value)}),U&&u.jsx("div",{className:"error-message",children:U}),te&&u.jsx("div",{className:"success-message",children:"Profil mis  jour avec succs !"}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>f(!1),children:"Fermer"}),u.jsx("button",{type:"submit",children:"Mettre  jour"})]})]})]})})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"user-avatar",onClick:()=>a(!o),children:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),u.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),u.jsx(Hi,{children:o&&u.jsx(Te.div,{className:"user-dropdown",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:u.jsxs("div",{className:"dropdown-actions",children:[u.jsx("button",{onClick:()=>{a(!1),c(!0),q("")},children:"Se connecter"}),u.jsx("button",{onClick:()=>{a(!1),p(!0),q("")},children:"Crer un compte"})]})})}),u.jsxs(Hi,{children:[l&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>c(!1),children:u.jsxs(Te.div,{className:"auth-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ae=>Ae.stopPropagation(),children:[u.jsx("h3",{children:"Connexion"}),u.jsxs("form",{onSubmit:Z,children:[u.jsx(gc,{value:w,onChange:Ae=>S(Ae.target.value),placeholder:"Email",required:!0,disabled:F,user:null,onEmailSubmit:()=>{}}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:me?"text":"password",placeholder:"Mot de passe",value:k,onChange:Ae=>v(Ae.target.value),required:!0,disabled:F,className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>Se(!me),disabled:F,"aria-label":me?"Masquer le mot de passe":"Afficher le mot de passe",children:me?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),U&&u.jsx("div",{className:"error-message",children:U}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>{c(!1),p(!0),q("")},disabled:F,children:"Crer un compte"}),u.jsx("button",{type:"submit",disabled:F,children:F?"Connexion...":"Se connecter"})]}),u.jsx("button",{type:"button",className:"forgot-password-link",onClick:()=>{c(!1),z(!0),q("")},disabled:F,children:"Mot de passe oubli ?"})]})]})}),d&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>p(!1),children:u.jsxs(Te.div,{className:"auth-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ae=>Ae.stopPropagation(),children:[u.jsx("h3",{children:"Crer un compte"}),u.jsxs("form",{onSubmit:st,children:[u.jsx("input",{type:"text",placeholder:"Prnom",value:x,onChange:Ae=>_(Ae.target.value),required:!0,disabled:F}),u.jsx("input",{type:"text",placeholder:"Nom",value:N,onChange:Ae=>O(Ae.target.value),required:!0,disabled:F}),u.jsx(gc,{value:w,onChange:Ae=>S(Ae.target.value),placeholder:"Email",required:!0,disabled:F,user:null,onEmailSubmit:()=>{}}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:Pe?"text":"password",placeholder:"Mot de passe (min 6 caractres)",value:k,onChange:Ae=>v(Ae.target.value),required:!0,minLength:6,disabled:F,className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>Le(!Pe),disabled:F,"aria-label":Pe?"Masquer le mot de passe":"Afficher le mot de passe",children:Pe?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),U&&u.jsx("div",{className:"error-message",children:U}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>{p(!1),c(!0),q("")},disabled:F,children:"Dj un compte ?"}),u.jsx("button",{type:"submit",disabled:F,children:F?"Cration...":"Crer le compte"})]})]})]})}),A&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>z(!1),children:u.jsxs(Te.div,{className:"auth-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ae=>Ae.stopPropagation(),children:[u.jsx("h3",{children:"Rinitialiser le mot de passe"}),ee?u.jsxs("div",{className:"success-message",children:[u.jsxs("p",{children:["Un email de rinitialisation a t envoy  ",B]}),u.jsx("button",{onClick:()=>{z(!1),c(!0),oe(!1),X("")},children:"Retour  la connexion"})]}):u.jsxs("form",{onSubmit:rt,children:[u.jsx(gc,{value:B,onChange:Ae=>X(Ae.target.value),placeholder:"Votre email",required:!0,user:null,onEmailSubmit:()=>{}}),U&&u.jsx("div",{className:"error-message",children:U}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>{z(!1),c(!0),q("")},children:"Retour  la connexion"}),u.jsx("button",{type:"submit",children:"Envoyer le lien"})]})]})]})})]})]})})},_B=({isLoggedIn:e,onLogin:t,onLogout:n,onRegister:r,onOpenHistory:i,userId:s,onOpenSubscription:o})=>u.jsxs("header",{className:"header",children:[u.jsxs("div",{className:"header-content",children:[u.jsx(Te.div,{className:"logo",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.1},children:u.jsx("h1",{children:"HERBBIE"})}),u.jsx(Te.h2,{className:"tagline",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:"Offrez  vos enfants des crations ludiques et imaginatives personnalises !"})]}),u.jsx("div",{className:"user-account-container",children:u.jsx(xB,{isLoggedIn:e,onLogin:t,onLogout:n,onRegister:r,onOpenHistory:i,onOpenSubscription:o})})]});const SB="/api/features";let Xp=null,S2=0;const kB=3e3,jB={animation:{enabled:!0,name:"Dessin anim",icon:"",description:"Gnration de dessins anims personnaliss avec IA"},comic:{enabled:!0,name:"Bande dessine",icon:"",description:"Cration de bandes dessines avec bulles de dialogue"},coloring:{enabled:!0,name:"Coloriage",icon:"",description:"Pages de coloriage  imprimer pour les enfants"},audio:{enabled:!0,name:"Histoire",icon:"",description:"Histoires audio avec narration automatique"},rhyme:{enabled:!0,name:"Comptine",icon:"",description:"Comptines musicales avec paroles et mlodies"}},hA=async()=>{try{const e=await fetch(SB,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();return Xp=t,S2=Date.now(),t}else throw console.error("Erreur API lors du chargement des fonctionnalits:",e.status),new Error(`Erreur API: ${e.status}`)}catch(e){throw console.error("Erreur lors du chargement depuis l'API:",e),e}},NB=async()=>{try{const e=Date.now();return Xp&&e-S2<kB?Xp:await hA()}catch(e){return console.error("Erreur lors de la rcupration des fonctionnalits:",e),jB}},AB=async()=>{try{const e=await NB();return Object.entries(e).filter(([t,n])=>n.enabled).reduce((t,[n,r])=>(t[n]=r,t),{})}catch(e){return console.warn("Erreur lors de la rcupration des fonctionnalits actives:",e),{}}},EB=()=>{Xp=null,S2=0},CB=e=>{let t=null;const n=async()=>{try{EB();const i=await hA();JSON.stringify(i)!==JSON.stringify(t)&&e&&typeof e=="function"&&(t=i,e(i))}catch(i){console.error("Erreur lors de la vrification des changements:",i)}},r=setInterval(n,5e3);return n(),()=>{clearInterval(r)}},PB=({contentType:e,setContentType:t})=>{const[n,r]=R.useState({}),[i,s]=R.useState(!0);R.useEffect(()=>(o(),CB(async d=>{const p=Object.entries(d).filter(([g,f])=>f.enabled).reduce((g,[f,w])=>(g[f]=w,g),{});if(r(p),!p[e]&&e!=="animation"){const g=Object.keys(p).find(f=>p[f].enabled);g&&t(g)}})),[e,t]);const o=async()=>{try{s(!0);const c=await AB();r(c)}catch(c){console.error("Erreur lors du chargement des fonctionnalits:",c)}finally{s(!1)}},a=c=>{t(c)},l=Object.keys(n).length>0;return i?u.jsxs("div",{className:"content-type-selector",children:[u.jsx("h3",{children:"1. Choisissez le type de contenu"}),u.jsx("div",{className:"loading-message",children:u.jsx("p",{children:"Chargement des fonctionnalits..."})})]}):u.jsxs("div",{className:"content-type-selector",children:[u.jsx("h3",{children:"1. Choisissez le type de contenu"}),l?u.jsxs("div",{className:"content-type-options",children:[n.animation&&u.jsxs(Te.div,{className:`content-type-option animation-full-width ${e==="animation"?"selected":""}`,onClick:()=>a("animation"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Dessin anim"}),u.jsx("p",{children:"Crez un vritable dessin anim fluide et cohrent avec l'IA"})]})]}),n.comic&&u.jsxs(Te.div,{className:`content-type-option ${e==="comic"?"selected":""}`,onClick:()=>a("comic"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Bande dessine"}),u.jsx("p",{children:"Crez une vraie BD avec histoire cohrente et bulles de dialogue"})]})]}),n.coloring&&u.jsxs(Te.div,{className:`content-type-option ${e==="coloring"?"selected":""}`,onClick:()=>a("coloring"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Coloriage"}),u.jsx("p",{children:"Crez des dessins  colorier personnaliss en noir et blanc"})]})]}),n.audio&&u.jsxs(Te.div,{className:`content-type-option ${e==="audio"?"selected":""}`,onClick:()=>a("audio"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Histoire"}),u.jsx("p",{children:"Crez une histoire avec possibilit d'ajouter une narration audio"})]})]}),n.rhyme&&u.jsxs(Te.div,{className:`content-type-option ${e==="rhyme"?"selected":""}`,onClick:()=>a("rhyme"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Comptine"}),u.jsx("p",{children:"Crez une comptine musicale avec paroles et mlodie"})]})]})]}):u.jsx("div",{className:"no-features-message",children:u.jsx("p",{children:"Aucune fonctionnalit n'est actuellement disponible."})})]})};const LB=[{id:"lullaby",title:"Berceuse douce",description:"Mlodie apaisante pour s'endormir",emoji:"",musicStyle:"gentle lullaby"},{id:"animal",title:"Comptine animalire",description:"Animaux et leurs sons en musique",emoji:"",musicStyle:"playful with animal sounds"},{id:"counting",title:"Comptine  compter",description:"Apprendre les chiffres en chanson",emoji:"",musicStyle:"upbeat educational"},{id:"colors",title:"Comptine des couleurs",description:"Dcouvrir les couleurs en musique",emoji:"",musicStyle:"cheerful and colorful"},{id:"alphabet",title:"Comptine de l'alphabet",description:"Apprendre les lettres en chantant",emoji:"",musicStyle:"educational and catchy"},{id:"family",title:"Comptine familiale",description:"Chanson sur la famille et l'amour",emoji:"",musicStyle:"warm and loving"},{id:"nature",title:"Comptine de la nature",description:"Explorer plantes, arbres et fleurs",emoji:"",musicStyle:"peaceful and natural"},{id:"seasonal",title:"Comptine saisonnire",description:"Clbrer saisons et merveilles",emoji:"",musicStyle:"festive and warm"},{id:"movement",title:"Comptine de mouvement",description:"Bouger, sauter et danser",emoji:"",musicStyle:"energetic dance rhythm"},{id:"emotions",title:"Comptine des motions",description:"Comprendre et exprimer sentiments",emoji:"",musicStyle:"expressive and gentle"},{id:"shapes",title:"Comptine des formes",description:"Apprendre les formes gomtriques",emoji:"",musicStyle:"playful educational"}],TB=({selectedRhyme:e,setSelectedRhyme:t,customRhyme:n,setCustomRhyme:r})=>{const i=s=>{t(e===s?"":s)};return u.jsxs("div",{className:"musical-rhyme-selector",children:[u.jsx("h3",{children:"2. Choisissez un type de comptine"}),u.jsxs("div",{className:"rhyme-grid",children:[u.jsxs("div",{className:"rhyme-slot",children:[u.jsxs(Te.div,{className:`rhyme-card custom-rhyme ${e==="custom"?"selected":""}`,onClick:()=>i("custom"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"rhyme-emoji",children:""}),u.jsx("h4",{children:"Personnalis"}),u.jsx("p",{children:"Comptine avec prnom ou thme perso"})]}),e==="custom"&&u.jsx(Te.div,{className:"custom-rhyme-input inline-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("textarea",{id:"customRhyme",value:n,onChange:s=>r(s.target.value),placeholder:"Dcrivez votre type de comptine personnalise...",className:"custom-textarea"})})]}),LB.map(s=>u.jsx("div",{className:"rhyme-slot",children:u.jsxs(Te.div,{className:`rhyme-card ${e===s.id?"selected":""}`,onClick:()=>i(s.id),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"rhyme-emoji",children:s.emoji}),u.jsx("h4",{children:s.title}),u.jsx("p",{children:s.description})]})},s.id))]})]})};const RB=[{id:"magic",title:"Monde magique",description:"Fes, sorciers, cratures enchantes",emoji:""},{id:"dinosaurs",title:"Temps des dinosaures",description:"Dinosaures gentils, voyages dans le temps",emoji:""},{id:"space",title:"Voyage spatial",description:"Plantes, fuses, aliens sympathiques",emoji:""},{id:"adventure",title:"Aventure fantastique",description:"Rebondissements, magie, dcouvertes",emoji:""},{id:"animals",title:"Amis animaux",description:"Animaux qui parlent, aventures sauvages",emoji:""},{id:"underwater",title:"Monde sous-marin",description:"Ocans, cratures marines, trsors",emoji:""},{id:"forest",title:"Fort enchante",description:"Fort mystrieuse, surprises magiques",emoji:""},{id:"funny",title:"Histoire drle",description:"Contes amusants, rires garantis",emoji:""},{id:"mystery",title:"Petit mystre",description:"nigmes pour enfants, investigations",emoji:""},{id:"friendship",title:"Belle amiti",description:"Histoire sur l'amiti, entraide",emoji:""},{id:"learning",title:"Conte ducatif",description:"Leons importantes, apprentissage",emoji:""},{id:"bedtime",title:"Histoire du soir",description:"Contes apaisants, sommeil doux",emoji:""},{id:"robots",title:"Robots amis",description:"Robots gentils, inventions magiques",emoji:""},{id:"pirates",title:"Pirates courageux",description:"Bateaux pirates, trsors cachs",emoji:""}],IB=[{id:"female",name:"Voix fminine"},{id:"male",name:"Voix masculine"}],OB=({selectedAudioStory:e,setSelectedAudioStory:t,customAudioStory:n,setCustomAudioStory:r,selectedVoice:i,setSelectedVoice:s})=>{const[o,a]=R.useState(!1),l=f=>{e===f?(t(""),a(!1)):(t(f),f!=="custom"&&a(!1))},c=()=>{e==="custom"?(t(""),a(!1)):(t("custom"),a(!0))},d=[{id:"custom",title:"Personnalis",description:"Crez votre propre type d'histoire unique",emoji:"",isCustom:!0},...RB],p=f=>{r(f.target.value)},g=f=>{s(i===f?null:f)};return u.jsxs("div",{className:"audio-story-selector",children:[u.jsx("h3",{children:"2. Choisissez un type d'histoire"}),u.jsx("div",{className:"audio-story-grid",children:d.map(f=>u.jsxs("div",{className:"audio-story-slot",children:[u.jsxs(Te.div,{className:`audio-story-card ${f.isCustom?"custom-audio-story":""} ${e===f.id?"selected":""}`,onClick:()=>f.isCustom?c():l(f.id),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"audio-story-emoji",children:f.emoji}),u.jsx("h4",{children:f.title}),u.jsx("p",{children:f.description})]}),f.isCustom&&o&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input inline-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx(Te.textarea,{id:"customAudioStory",value:n,onChange:p,placeholder:"Ex: Un conte qui se droule dans un monde sous-marin avec des cratures magiques...",className:"custom-input",whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300,damping:10}})})]},f.id))}),u.jsxs("div",{className:"voice-selector-section",children:[u.jsx("h3",{children:"3. Choisissez une narration (optionnel)"}),u.jsx("div",{className:"voice-options",children:IB.map(f=>u.jsxs(Te.div,{className:`voice-option ${i===f.id?"selected":""}`,onClick:()=>g(f.id),whileHover:{scale:1.03},whileTap:{scale:.98},children:[u.jsx("div",{className:"voice-icon",children:f.id==="female"?"":""}),u.jsx("div",{className:"voice-details",children:u.jsx("h4",{children:f.name})})]},f.id))})]})]})};const FB=[{id:"space",title:"Aventure spatiale",description:"Une exploration de l'espace et des plantes lointaines",emoji:""},{id:"ocean",title:"Sous l'ocan",description:"Une aventure sous-marine avec des cratures fantastiques",emoji:""},{id:"dinosaur",title:"Monde des dinosaures",description:"Un voyage dans le temps  l'poque des dinosaures",emoji:""},{id:"fairy",title:"Conte de fes",description:"Une histoire magique avec des fes et des cratures enchantes",emoji:""},{id:"superhero",title:"Super-hros",description:"Une aventure o votre enfant devient un super-hros",emoji:""},{id:"jungle",title:"Aventure dans la jungle",description:"Une exploration de la jungle et ses animaux sauvages",emoji:""}],DB=({selectedStory:e,setSelectedStory:t,customStory:n,setCustomStory:r})=>{const[i,s]=R.useState(!1),o=c=>{t(c),c!=="custom"&&s(!1)},a=()=>{t("custom"),s(!0)},l=c=>{r(c.target.value)};return u.jsxs("div",{className:"story-selector",children:[u.jsx("h3",{children:"4. Choisissez un type d'histoire"}),u.jsxs("div",{className:"story-grid",children:[u.jsxs(Te.div,{className:`story-card custom-story ${e==="custom"?"selected":""}`,onClick:a,whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"story-emoji",children:""}),u.jsx("h4",{children:"Personnalis"}),u.jsx("p",{children:"Crez votre propre type d'histoire unique"})]}),FB.map(c=>u.jsxs(Te.div,{className:`story-card ${e===c.id?"selected":""}`,onClick:()=>o(c.id),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"story-emoji",children:c.emoji}),u.jsx("h4",{children:c.title}),u.jsx("p",{children:c.description})]},c.id))]}),i&&u.jsxs(Te.div,{className:"custom-story-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:[u.jsx("label",{htmlFor:"customStory",children:"Dcrivez votre type d'histoire"}),u.jsx(Te.textarea,{id:"customStory",value:n,onChange:l,placeholder:"Ex: Une aventure dans un monde de bonbons o les arbres sont en chocolat...",whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300,damping:10}})]})]})},Wn={}.VITE_API_BASE_URL||"",Rf={}.VITE_ANIMATION_API_BASE_URL||"https://da-production-6222.up.railway.app";const MB=({selectedTheme:e,setSelectedTheme:t,selectedDuration:n,setSelectedDuration:r,selectedStyle:i,setSelectedStyle:s,customStory:o,setCustomStory:a,characterImage:l,setCharacterImage:c})=>{const[d,p]=R.useState([]),[g,f]=R.useState([]);R.useEffect(()=>{p([{id:"custom",name:"Personnalis",description:"crivez votre propre histoire",emoji:""},{id:"space",name:"Espace",description:"Voyages spatiaux",emoji:""},{id:"ocean",name:"Sous-marin",description:"Exploration sous-marine",emoji:""},{id:"nature",name:"Nature",description:"Monde naturel",emoji:""},{id:"adventure",name:"Aventure",description:"Voyages et explorations",emoji:""},{id:"animals",name:"Animaux",description:"Histoires d'animaux mignons",emoji:""},{id:"magic",name:"Magie",description:"Monde magique et sortilges",emoji:""},{id:"friendship",name:"Amiti",description:"Histoires d'amiti",emoji:""},{id:"circus",name:"Cirque",description:"Spectacle de cirque magique",emoji:""}]),f([{value:30,label:"30 secondes"},{value:60,label:"1 minute"},{value:120,label:"2 minutes"},{value:180,label:"3 minutes"},{value:240,label:"4 minutes"},{value:300,label:"5 minutes"}])},[]);const w=[{id:"3d",name:"3D",description:"Animation 3D moderne",emoji:""},{id:"realistic",name:"Raliste",description:"Style cinmatographique",emoji:""},{id:"cartoon",name:"Cartoon",description:"Style dessin anim color",emoji:""},{id:"anime",name:"Anime",description:"Style manga japonais",emoji:"",useImage:!0,imagePath:"/assets/japan-flag.png"}],S=x=>{t(e===x?null:x)},k=x=>{r(n===x?null:x)},v=x=>{s(i===x?null:x)};return u.jsxs("div",{className:"animation-selector",children:[u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"2. Choisissez un thme pour votre dessin anim"}),u.jsx("div",{className:"themes-grid",children:d.map(x=>u.jsxs("div",{children:[u.jsxs(Te.div,{className:`theme-card ${e===x.id?"selected":""} ${x.id==="custom"?"custom-animation":""}`,onClick:()=>S(x.id),whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsx("div",{className:"theme-emoji",children:x.emoji}),u.jsxs("div",{className:"theme-content",children:[u.jsx("h5",{children:x.name}),u.jsx("p",{children:x.description})]})]}),x.id==="custom"&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("textarea",{className:"custom-story-textarea",value:o,onChange:_=>a(_.target.value),placeholder:"Il tait une fois... Racontez votre histoire ici. Plus elle est dtaille, plus l'animation sera riche et personnalise !",rows:4})})]},x.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"2. Choisissez la dure de l'animation"}),u.jsx("div",{className:"duration-options",children:g.map(x=>u.jsx(Te.div,{className:`duration-option ${n===x.value?"selected":""}`,onClick:()=>k(x.value),whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx("div",{className:"duration-label",children:x.label})},x.value))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"3. Choisissez un style visuel"}),u.jsx("div",{className:"style-options",children:w.map(x=>u.jsxs(Te.div,{className:`style-option ${i===x.id?"selected":""}`,onClick:()=>v(x.id),whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsxs("div",{className:"style-emoji",children:[x.useImage?u.jsx("img",{src:x.imagePath,alt:x.name,className:"style-flag-image",onError:_=>{_.target.style.display="none",_.target.nextSibling.style.display="block"}}):null,u.jsx("span",{style:{display:x.useImage?"none":"block"},children:x.emoji})]}),u.jsxs("div",{className:"style-content",children:[u.jsx("h5",{children:x.name}),u.jsx("p",{children:x.description})]})]},x.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"4. Personnage principal (optionnel)"}),u.jsx("p",{className:"section-description",children:"Uploadez une photo pour crer un personnage personnalis dans votre dessin anim"}),u.jsx("div",{className:"character-upload-container",children:l?u.jsxs("div",{className:"character-preview",children:[u.jsx("img",{src:l,alt:"Personnage",className:"character-image"}),u.jsx(Te.button,{className:"remove-character-btn",onClick:()=>c(null),whileHover:{scale:1.1},whileTap:{scale:.9},children:" Supprimer"})]}):u.jsxs(Te.label,{className:"character-upload-zone",whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsx("input",{type:"file",accept:"image/*",onChange:x=>{const _=x.target.files[0];if(_){const N=new FileReader;N.onloadend=()=>{c(N.result)},N.readAsDataURL(_)}},style:{display:"none"}}),u.jsx("div",{className:"upload-icon",children:""}),u.jsxs("div",{className:"upload-text",children:[u.jsx("strong",{children:"Cliquez pour uploader une photo"}),u.jsx("span",{children:"ou glissez-dposez une image ici"})]})]})})]})]})};const BB=({animationResult:e,onClose:t})=>{var F,M,G,P;const[n,r]=R.useState("video"),[i,s]=R.useState(null);if(!e)return null;const{status:o,clips:a=[],video_urls:l=[],scenes:c=[],generation_time:d,total_duration:p,successful_clips:g=0,fallback_clips:f=0,pipeline_type:w,scenes_count:S=0,video_count:k=0}=e,v=a.length>0?a:l.map((L,Y)=>({clip_url:L,status:"success",prompt:`Scne ${Y+1}`,duration:8})),x=v.some(L=>L.status==="success")||o==="completed"&&(e.final_video_url||((F=e.result)==null?void 0:F.final_video_url)),_=c||e.scenes_details||[],N=v.length||S||k,O=L=>{if(!L||isNaN(L))return"---";const Y=Math.floor(L/60),V=L%60;return Y>0?`${Y}m ${V}s`:`${V}s`},U=L=>{switch(L){case"success":return"#4CAF50";case"fallback":return"#FF9800";case"error":return"#F44336";default:return"#9E9E9E"}},q=L=>{switch(L){case"success":return"";case"fallback":return"";case"error":return"";default:return""}};return u.jsx(Te.div,{className:"animation-viewer-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:u.jsxs(Te.div,{className:"animation-viewer",initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},onClick:L=>L.stopPropagation(),transition:{type:"spring",damping:20,stiffness:300},children:[u.jsxs("div",{className:"viewer-header",children:[u.jsx("h2",{children:" Votre dessin anim IA"}),o&&u.jsxs("div",{className:"status-badge",style:{backgroundColor:U(o)},children:[q(o)," ",o==="generating_idea"?"Cration de l'ide...":o==="creating_scenes"?"Cration des scnes...":o==="generating_clips"?"Gnration vido...":o==="completed"?"Termin !":o==="failed"?"chou":o]}),u.jsx("button",{className:"close-button",onClick:t,children:""})]}),u.jsxs("div",{className:"animation-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Dure: ",O(p||e.duration)]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:[N," scnes"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:[g||N," russies"]})]}),f>0&&u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:[f," fallback"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Gnr en ",d?Math.round(d)+"s":"En cours..."]})]})]}),u.jsxs("div",{className:"viewer-tabs",children:[u.jsx("button",{className:`tab ${n==="video"?"active":""}`,onClick:()=>r("video"),children:" Vido"}),u.jsx("button",{className:`tab ${n==="scenes"?"active":""}`,onClick:()=>r("scenes"),children:" Scnes"}),u.jsx("button",{className:`tab ${n==="details"?"active":""}`,onClick:()=>r("details"),children:" Dtails"})]}),u.jsx("div",{className:"viewer-content",children:u.jsxs(Hi,{mode:"wait",children:[n==="video"&&u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"video-tab",children:x?u.jsx("div",{className:"video-player",children:e.final_video_url||(M=e.result)!=null&&M.final_video_url?u.jsxs("div",{className:"final-animation",children:[u.jsx("div",{className:"video-icon",children:""}),u.jsxs("h3",{children:[" ",e.title||"Votre dessin anim est prt !"]}),u.jsxs("p",{children:["Animation complte de ",O(p||e.duration)," avec ",g||N," scnes."]}),u.jsx("div",{className:"main-video-container",children:u.jsx("video",{src:e.final_video_url||((G=e.result)==null?void 0:G.final_video_url),className:"final-animation-video",controls:!0,autoPlay:!0,loop:!0,muted:!0,preload:"metadata",style:{width:"100%",maxWidth:"600px",height:"auto",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",margin:"1rem 0"},onLoadedData:()=>{},onError:L=>{L.target.style.display="none"}})}),u.jsx("div",{className:"video-controls",children:u.jsx("button",{className:"play-btn",onClick:()=>{var L;return window.open(e.final_video_url||((L=e.result)==null?void 0:L.final_video_url),"_blank")},style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},children:" Ouvrir en plein cran"})})]}):u.jsxs("div",{className:"animation-gallery",children:[u.jsx("div",{className:"video-icon",children:""}),u.jsx("h3",{children:" Votre dessin anim est prt !"}),u.jsxs("p",{children:["Animation de ",O(p)," gnre avec succs.",g>0&&` ${g} scnes cres avec l'IA.`]}),u.jsxs("div",{className:"scenes-gallery",children:[u.jsx("h4",{children:" Votre dessin anim en images :"}),u.jsx("div",{className:"gallery-grid",children:v.map((L,Y)=>{let V=null,ae=!1;return L.video_url&&L.type==="real_video"?(V=/^https?:\/\//i.test(L.video_url)?L.video_url:`${Rf}${L.video_url}`,ae=!0):L.demo_image_url?V=/^https?:\/\//i.test(L.demo_image_url)?L.demo_image_url:`${Rf}${L.demo_image_url}`:L.image_url?V=/^https?:\/\//i.test(L.image_url)?L.image_url:`${Rf}${L.image_url}`:L.video_url&&(V=/^https?:\/\//i.test(L.video_url)?L.video_url:`${Rf}${L.video_url}`),u.jsxs("div",{className:"scene-media-card",children:[ae?u.jsx("video",{src:V,className:"scene-video",controls:!0,loop:!0,muted:!0,preload:"metadata",onLoadedData:()=>{},onError:de=>{de.target.style.display="none",de.target.nextSibling.style.display="flex"}}):u.jsx("img",{src:V,alt:`Scne ${L.scene_number}`,className:"scene-image",onLoad:()=>{},onError:de=>{de.target.style.display="none",de.target.nextSibling.style.display="flex"}}),u.jsxs("div",{className:"scene-placeholder",style:{display:"none"},children:[u.jsx("span",{children:""}),u.jsxs("p",{children:["Scne ",L.scene_number]}),u.jsx("small",{children:L.type||"En cours..."})]}),u.jsxs("div",{className:"scene-info",children:[u.jsxs("span",{children:["Scne ",L.scene_number]}),u.jsx("span",{children:O(L.duration)}),L.type==="real_video"&&u.jsx("span",{className:"clip-type real",children:" Vido"}),L.type==="demo"&&u.jsx("span",{className:"clip-type demo",children:" Dmo"}),L.status==="success"&&u.jsx("span",{className:"clip-status success",children:""}),L.status==="fallback"&&u.jsx("span",{className:"clip-status fallback",children:""})]})]},Y)})}),u.jsx("div",{className:"gallery-summary",children:u.jsxs("p",{children:[u.jsx("strong",{children:" Votre animation complte :"}),N," scnes illustres reprsentant votre histoire. Chaque image correspond  un moment cl de votre rcit gnr par l'IA."]})})]}),v.filter(L=>L.status==="success").length>0&&u.jsxs("div",{className:"video-clips-list",children:[u.jsx("h4",{children:" Toutes les scnes gnres :"}),v.filter(L=>L.status==="success").map((L,Y)=>u.jsxs("div",{className:"clip-item",children:[u.jsxs("span",{children:[" Scne ",L.scene_number]}),u.jsx("span",{children:O(L.duration)}),L.type==="image"&&u.jsx("span",{className:"clip-type",children:" Image"})]},Y))]}),u.jsxs("div",{className:"video-actions",children:[u.jsx("button",{className:"download-btn",children:" Tlcharger"}),u.jsx("button",{className:"share-btn",children:" Partager"})]})]})}):u.jsxs("div",{className:"no-video",children:[u.jsx("div",{className:"no-video-icon",children:o==="completed"?"":""}),u.jsx("h3",{children:o==="completed"?"Animation termine !":"Gnration en cours..."}),u.jsx("p",{children:o==="completed"?"Votre animation a t gnre avec succs ! Thme: "+(e.theme||"N/A"):"La gnration vido peut prendre quelques minutes. Certaines scnes utilisent des modes de fallback."}),o==="completed"&&(e.final_video_url||((P=e.result)==null?void 0:P.final_video_url))&&u.jsx("div",{className:"video-controls",children:u.jsx("button",{className:"play-btn",onClick:()=>{var L;return window.open(e.final_video_url||((L=e.result)==null?void 0:L.final_video_url),"_blank")},children:" Voir l'animation"})})]})},"video"),n==="scenes"&&u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"scenes-tab",children:u.jsx("div",{className:"scenes-list",children:_.map((L,Y)=>{const V=v.find(ae=>ae.scene_number===L.scene_number);return u.jsxs(Te.div,{className:`scene-card ${i===Y?"selected":""}`,onClick:()=>s(i===Y?null:Y),whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsxs("div",{className:"scene-header",children:[u.jsxs("span",{className:"scene-number",children:["Scne ",L.scene_number]}),u.jsxs("div",{className:"scene-status",children:[u.jsx("span",{className:"status-icon",style:{color:U((V==null?void 0:V.status)||"pending")},children:q((V==null?void 0:V.status)||"pending")}),u.jsx("span",{className:"status-text",children:(V==null?void 0:V.status)||"pending"})]})]}),u.jsx("h4",{children:L.description}),u.jsxs("p",{children:[u.jsx("strong",{children:"Action:"})," ",L.action]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Dcor:"})," ",L.setting]}),u.jsxs("div",{className:"scene-duration",children:["Dure: ",O(L.duration)]}),i===Y&&V&&u.jsx(Te.div,{className:"scene-details",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:V.video_url&&u.jsx("div",{className:"clip-preview",children:u.jsxs("span",{children:[" Fichier: ",V.video_url]})})})]},L.scene_number)})})},"scenes"),n==="details"&&u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"details-tab",children:u.jsxs("div",{className:"technical-details",children:[u.jsx("h4",{children:" Dtails techniques"}),u.jsxs("div",{className:"detail-grid",children:[u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Pipeline:"}),u.jsx("span",{children:w||"custom_animation_ai"})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Statut:"}),u.jsx("span",{className:`status ${o}`,children:o})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Temps de gnration:"}),u.jsxs("span",{children:[Math.round(d),"s"]})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Scnes totales:"}),u.jsx("span",{children:N})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Scnes russies:"}),u.jsx("span",{children:g})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Dure totale:"}),u.jsx("span",{children:O(p)})]})]}),e.note&&u.jsxs("div",{className:"generation-note",children:[u.jsx("h5",{children:" Note de gnration"}),u.jsx("p",{children:e.note})]})]})},"details")]})})]})})};const UB=({customRequest:e,setCustomRequest:t})=>u.jsxs("div",{className:"custom-request",children:[u.jsx("h3",{children:"Demandes spcifiques (optionnel)"}),u.jsx("div",{className:"request-form",children:u.jsxs("div",{className:"input-group",children:[u.jsx("label",{htmlFor:"customRequest",children:"Avez-vous des demandes particulires ?"}),u.jsx(Te.textarea,{id:"customRequest",value:e,onChange:n=>t(n.target.value),placeholder:"Ex: En anglais, avec un chien bleu, inclure un message sur l'amiti...",rows:3,whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300,damping:10}})]})})]});const $B=({onGenerate:e,isGenerating:t,isDisabled:n,contentType:r,buttonText:i})=>{const s=()=>t?r==="rhyme"?"Cration de la comptine en cours...":r==="coloring"?"Cration du coloriage en cours...":r==="comic"?"Cration de la BD en cours...":r==="animation"?"Cration du dessin anim en cours...":"Cration du contenu en cours...":i||(r==="rhyme"?"Crer ma comptine":r==="coloring"?"Crer mon coloriage":r==="comic"?"Crer ma bande dessine":r==="animation"?"Crer mon dessin anim":r==="audio"?"Crer mon histoire":"Crer mon contenu");return u.jsxs("div",{className:"generate-button-container",children:[u.jsxs(Te.button,{className:"generate-button",onClick:e,disabled:n||t,whileHover:!n&&!t?{scale:1.03}:{},whileTap:!n&&!t?{scale:.98}:{},initial:{opacity:.9},animate:{opacity:n?.6:1,y:[0,t?-5:0,0]},transition:{duration:t?.5:.2,repeat:t?1/0:0},children:[t&&u.jsxs("div",{className:"button-loading-dots",children:[u.jsx("div",{className:"button-dot"}),u.jsx("div",{className:"button-dot"}),u.jsx("div",{className:"button-dot"})]}),u.jsx("span",{children:s()})]}),n&&!t&&u.jsx("p",{className:"generate-button-hint",children:r==="story"?"Veuillez remplir tous les champs requis pour crer votre BD":r==="rhyme"?"Veuillez slectionner un type de comptine pour continuer":r==="coloring"?"Veuillez slectionner un thme de coloriage pour continuer":r==="comic"?"Veuillez slectionner un thme, un style et un nombre de pages pour votre BD":r==="animation"?"Veuillez slectionner un thme et configurer votre animation":"Veuillez slectionner un type d'histoire (et une voix) pour continuer"})]})};async function zB(){var e;try{const{data:{session:t},error:n}=await Pt.auth.getSession();if((e=t==null?void 0:t.user)!=null&&e.id)return t.user.id;const r=localStorage.getItem("friday_user_cache");if(r){const i=JSON.parse(r);if(i.id)return i.id}return null}catch(t){return console.error("Erreur rcupration ID utilisateur:",t),null}}async function M_({type:e,title:t,data:n}){const r=await zB();if(!r)throw new Error("Utilisateur non connect");try{const i={user_id:r,type:e,title:t,data:{...n,created_via:"friday_web",timestamp:new Date().toISOString()}},{data:s,error:o}=await Pt.from("creations").insert([i]).select().single();if(o)throw console.error("Erreur Supabase lors de la cration:",o),new Error(`Erreur base de donnes: ${o.message}`);return s}catch(i){throw console.error("Erreur lors de la sauvegarde:",i),i}}async function qB(e){try{const{error:t}=await Pt.from("creations").delete().eq("id",e);if(t)throw console.error("Erreur Supabase lors de la suppression:",t),new Error(`Erreur base de donnes: ${t.message}`);return!0}catch(t){throw console.error("Erreur lors de la suppression:",t),t}}async function VB(e){return new Promise((t,n)=>{const r=new window.Image;r.crossOrigin="Anonymous",r.onload=function(){const i=document.createElement("canvas");i.width=r.width,i.height=r.height,i.getContext("2d").drawImage(r,0,0);const o=i.toDataURL("image/png");t({width:r.width,height:r.height,dataUrl:o})},r.onerror=n,r.src=e})}function HB(e,t=""){return(!e||e.trim()==="")&&(e={coloriage:"coloriage",comic:"bande_dessinee",comptine:"comptine",histoire:"histoire",animation:"animation"}[t]||"creation"),String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/gi,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").toLowerCase()}async function k2(e,t="coloriages"){const n=new Xe({orientation:"portrait",unit:"px",format:"a4"}),r=n.internal.pageSize.getWidth(),i=n.internal.pageSize.getHeight(),s=40,o=r-2*s,a=i-2*s,l=await Promise.all(e.map(async d=>{try{const p=d.image_url||d;return await VB(p)}catch(p){return console.warn("Erreur chargement image pour le PDF :",d,p),null}}));let c=!0;for(let d=0;d<l.length;d++){if(!l[d])continue;c||n.addPage(),c=!1;const{dataUrl:p,width:g,height:f}=l[d],w=g/f;let S=o,k=o/w;k>a&&(k=a,S=a*w);const v=(r-S)/2,x=(i-k)/2;n.addImage(p,"PNG",v,x,S,k)}n.save(`${HB(t)}.pdf`)}function WB(e){const[t,n]=R.useState([]),[r,i]=R.useState(!1),[s,o]=R.useState(null);return R.useEffect(()=>{if(!e){n([]),i(!1);return}(async()=>{i(!0);try{const{data:c,error:d}=await Pt.from("creations").select("*").eq("user_id",e).order("created_at",{ascending:!1});d?(console.error("Erreur rcupration crations:",d),o(d.message),n([])):(n(c||[]),o(null))}catch(c){console.error("Erreur critique rcupration crations:",c),o(c.message),n([])}finally{i(!1)}})()},[e]),{creations:t,loading:r,error:s,refreshCreations:async()=>{if(e){i(!0);try{const{data:l,error:c}=await Pt.from("creations").select("*").eq("user_id",e).order("created_at",{ascending:!1});c?o(c.message):(n(l||[]),o(null))}catch(l){o(l.message)}finally{i(!1)}}}}}const GB=({onClose:e,onSelect:t})=>{const{user:n}=_2(),{creations:r,loading:i,refreshCreations:s}=WB(n==null?void 0:n.id),o=async p=>{if(window.confirm("Supprimer cette cration ?"))try{const{error:f}=await qB(p);if(f){alert("Erreur lors de la suppression !");return}s()}catch(f){console.error("Erreur lors de la suppression:",f),alert("Erreur lors de la suppression !")}},a=p=>{const g=new Date(p);return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(g)},l=p=>{switch(p){case"story":return"";case"rhyme":return"";case"audio":return"";case"coloring":return"";case"crewai_animation":return"";case"animation":return"";default:return""}},c=p=>{switch(p){case"story":return"Bande dessine";case"rhyme":return"Comptine";case"audio":return"Histoire";case"coloring":return"Coloriage";case"crewai_animation":return"Dessin anim";case"animation":return"Dessin anim";default:return"Cration"}},d=p=>{var F;const g=p.content||((F=p.data)==null?void 0:F.content)||"";if(!g||typeof g!="string"){console.error(" Contenu invalide ou manquant pour le PDF.");return}const f=new Xe({orientation:"p",unit:"mm",format:"a4"}),w=40,S=210,k=297,v=12,x=Math.floor((k-w*2)/v),_=13;let N=p.title,O=g;g.startsWith("**")&&g.includes("**",2)&&(N=g.split("**")[1].trim(),O=g.replace(`**${N}**`,"").trim());const U=M=>new Promise(G=>{const P=new Image;P.crossOrigin="anonymous",P.src=M,P.onload=()=>G(P)});(async()=>{try{const M="/assets/fond.png?v=1";let G=null;try{G=await U(M)}catch{console.log(" Image de fond non disponible, PDF sans fond")}const P=f.splitTextToSize(O,150);let L=0;for(let Y=0;L<P.length;Y++){Y>0&&f.addPage(),G&&f.addImage(G,"PNG",0,0,S,k,void 0,"FAST"),Y===0&&(f.setFont("courier","bold"),f.setFontSize(22),f.setTextColor(110,50,230),f.text(N,S/2,w-20,{align:"center"})),f.setFont("courier","bold"),f.setFontSize(_),f.setTextColor(25,25,112);for(let V=0;V<x&&L<P.length;V++,L++){const ae=w+V*v;f.text(P[L],S/2,ae,{align:"center"})}f.setFontSize(11),f.setTextColor(106,90,205),f.text(`Page ${Y+1}`,S-15,290,{align:"right"})}}catch(M){console.error(" Erreur lors de la gnration du PDF:",M),f.setFontSize(22),f.setTextColor(110,50,230),f.setFont("courier","bold"),f.text(N,S/2,w-20,{align:"center"}),f.setFontSize(_),f.setTextColor(25,25,112),f.setFont("courier","bold");const G=f.splitTextToSize(O,150);for(let P=0;P<G.length;P++){const L=w+P*v;f.text(G[P],S/2,L,{align:"center"})}}})().then(()=>{const M=N.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),G=f.output("blob"),P=URL.createObjectURL(G),L=document.createElement("a");L.href=P,L.download=`${M}.pdf`,L.style.display="none",document.body.appendChild(L),L.click(),document.body.removeChild(L),setTimeout(()=>{URL.revokeObjectURL(P)},100)})};return u.jsxs(Te.div,{className:"history-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},onClick:p=>p.stopPropagation(),children:[u.jsxs("div",{className:"history-header",children:[u.jsx("h2",{children:"Historique de vos crations"}),u.jsx("button",{className:"close-button",onClick:e,children:""})]}),u.jsx("div",{className:"history-content",children:n?r.length===0&&!i?u.jsxs("div",{className:"empty-history",children:[u.jsx("p",{children:"Vous n'avez pas encore de crations"}),u.jsx("p",{className:"empty-subtext",children:"Vos crations apparatront ici une fois gnres"})]}):u.jsx("div",{className:"creations-list",children:r.map(p=>{var S,k,v,x,_,N,O,U,q,F,M,G,P,L,Y;const g=!!(p.audio_path||(S=p.data)!=null&&S.audio_path),f=!!(p.content||(k=p.data)!=null&&k.content),w=["creation-item",g?"has-audio":"",f?"has-text":""].filter(Boolean).join(" ");return u.jsxs(Te.div,{className:w,onClick:()=>t({...p,action:p.type==="coloring"?"showColoring":"showStory"}),whileHover:{scale:1.01},transition:{duration:.2},children:[u.jsx("div",{className:"creation-icon",children:l(p.type)}),"                  ",u.jsxs("div",{className:"creation-details",children:[u.jsx("h3",{children:p.title}),u.jsxs("div",{className:"creation-meta",children:[u.jsx("span",{className:"creation-type",children:c(p.type)}),u.jsx("span",{className:"creation-date",children:a(p.created_at)})]}),"                  ",(p.audio_path||((v=p.data)==null?void 0:v.audio_path))&&u.jsx("audio",{controls:!0,className:"creation-audio",src:`${Wn}/${p.audio_path||((x=p.data)==null?void 0:x.audio_path)}`}),u.jsxs("div",{className:"creation-actions",children:[p.type==="rhyme"&&(p.audio_path||((_=p.data)==null?void 0:_.audio_path))&&u.jsx("button",{className:"btn-pdf",onClick:async V=>{var ae,de;V.stopPropagation();try{const ce=`${Wn}/${p.audio_path||((ae=p.data)==null?void 0:ae.audio_path)}`,ie=await(await fetch(ce)).blob(),te=URL.createObjectURL(ie);let se=p.title||"Comptine";const A=p.content||((de=p.data)==null?void 0:de.content)||"";A&&A.startsWith("**")&&A.includes("**",2)&&(se=A.split("**")[1].trim());const z=se.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),B=document.createElement("a");B.href=te,B.download=`${z}.mp3`,B.style.display="none",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(te)}catch(ce){console.error("Erreur lors du tlchargement de la comptine:",ce),alert("Erreur lors du tlchargement. Veuillez ressayer.")}},children:" Tlcharger la comptine"}),p.type==="audio"&&(p.content||((N=p.data)==null?void 0:N.content))&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-pdf",onClick:V=>{V.stopPropagation(),d(p)},children:" Tlcharger le PDF"}),(p.audio_path||((O=p.data)==null?void 0:O.audio_path))&&(p.audio_generated||((U=p.data)==null?void 0:U.audio_generated))&&u.jsx("button",{className:"btn-audio",onClick:async V=>{var ae,de;V.stopPropagation();try{const ce=`${Wn}/${p.audio_path||((ae=p.data)==null?void 0:ae.audio_path)}`,ie=await(await fetch(ce)).blob(),te=URL.createObjectURL(ie);let se=p.title||"Histoire";const A=p.content||((de=p.data)==null?void 0:de.content)||"";A&&A.startsWith("**")&&A.includes("**",2)&&(se=A.split("**")[1].trim());const z=se.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),B=document.createElement("a");B.href=te,B.download=`${z}.mp3`,B.style.display="none",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(te)}catch(ce){console.error("Erreur lors du tlchargement audio:",ce),alert("Erreur lors du tlchargement. Veuillez ressayer.")}},children:" Tlcharger l'audio"})]}),(p.audio_path||((q=p.data)==null?void 0:q.audio_path))&&(p.audio_generated||((F=p.data)==null?void 0:F.audio_generated))&&p.type!=="rhyme"&&p.type!=="audio"&&u.jsx("a",{className:"btn-audio",href:`${Wn}/${p.audio_path||((M=p.data)==null?void 0:M.audio_path)}`,download:!0,onClick:V=>V.stopPropagation(),children:" Tlcharger l'audio"}),p.type==="coloring"&&(p.images||((G=p.data)==null?void 0:G.images))&&(((P=p.images)==null?void 0:P.length)>0||((Y=(L=p.data)==null?void 0:L.images)==null?void 0:Y.length)>0)&&u.jsx("button",{className:"btn-pdf",onClick:V=>{var ce;V.stopPropagation();const ae=p.title||(p.theme?`coloriages_${p.theme}`:"coloriages"),de=p.images||((ce=p.data)==null?void 0:ce.images)||[];k2(de,ae)},children:" Tlcharger le coloriage"}),u.jsx("button",{className:"btn-delete",onClick:V=>{V.stopPropagation(),o(p.id)},children:" Supprimer"})]})]})]},p.id)})}):u.jsx("div",{className:"empty-history",children:u.jsx("p",{children:"Connexion en cours..."})})})]})};const KB=({title:e,content:t,onClose:n,children:r})=>{const[i,s]=R.useState(!1),o=R.useRef(null),a=()=>{var c;document.fullscreenElement?(document.exitFullscreen(),s(!1)):((c=o.current)==null||c.requestFullscreen(),s(!0))},l=c=>{c.target.classList.contains("story-popup-overlay")&&n()};return u.jsx("div",{className:"story-popup-overlay",onClick:l,children:u.jsxs("div",{className:"story-popup-content",ref:o,children:[u.jsx("div",{className:"story-background"}),u.jsx("button",{className:"story-close-btn",onClick:n,children:""}),u.jsx("button",{className:"story-fullscreen-btn",onClick:a,children:i?" Quitter le plein cran":" Plein cran"}),u.jsxs("div",{className:"story-scroll",children:[e&&u.jsx("h2",{className:"story-title",children:e}),t&&typeof t=="string"?u.jsx("div",{className:"story-text",children:t}):r]})]})})};const JB=({selectedTheme:e,setSelectedTheme:t,customColoringTheme:n,setCustomColoringTheme:r,uploadedPhoto:i,setUploadedPhoto:s,withColoredModel:o,setWithColoredModel:a})=>{const[l,c]=R.useState(!1),[d,p]=R.useState(!1),[g,f]=R.useState(null),w=[{value:"upload_photo",label:"Ma Photo",icon:"",description:"Transformez votre photo en coloriage !",special:!0},{value:"custom",label:"Personnalis",icon:"",description:"Crez votre propre thme de coloriage"},{value:"animals",label:"Animaux",icon:"",description:"Chats, chiens, lions, lphants..."},{value:"dinosaurs",label:"Dinosaures",icon:"",description:"T-Rex, Triceratops, volcans..."},{value:"dragons",label:"Dragons",icon:"",description:"Dragons mignons, chevaliers..."},{value:"farm",label:"Ferme",icon:"",description:"Vache, cochon, poule, tracteur..."},{value:"fairies",label:"Fes & Licornes",icon:"",description:"Fes, licornes, chteaux magiques..."},{value:"princess",label:"Princesses",icon:"",description:"Princesses, robes, diadmes..."},{value:"mermaids",label:"Sirnes",icon:"",description:"Sirnes, coquillages, palais sous-marin..."},{value:"pirates",label:"Pirates",icon:"",description:"Bateaux pirates, trsors, perroquets..."},{value:"superheroes",label:"Super-hros",icon:"",description:"Hros masqus, super-pouvoirs..."},{value:"space",label:"Espace",icon:"",description:"Fuses, plantes, astronautes..."},{value:"robots",label:"Robots",icon:"",description:"Robots futuristes, androdes..."},{value:"vehicles",label:"Vhicules",icon:"",description:"Voitures, avions, trains, bateaux..."},{value:"nature",label:"Nature",icon:"",description:"Fleurs, arbres, papillons, paysages..."},{value:"ocean",label:"Ocan",icon:"",description:"Poissons, dauphins, coraux, tortues..."},{value:"seasons",label:"Saisons",icon:"",description:"Automne, hiver, printemps, t..."},{value:"sports",label:"Sports",icon:"",description:"Football, basketball, natation..."},{value:"fruits",label:"Fruits & Lgumes",icon:"",description:"Fruits rigolos, lgumes souriants..."},{value:"professions",label:"Mtiers",icon:"",description:"Mdecins, pompiers, cuisiniers..."},{value:"emotions",label:"motions",icon:"",description:"Visages joyeux, tristes, surpris..."}],S=_=>{e===_?(t(""),c(!1),p(!1)):(t(_),c(_==="custom"),p(_==="upload_photo"))},k=_=>{const N=_.target.files[0];if(N){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(N.type)){alert("Format de fichier non support. Utilisez JPG, PNG, GIF ou WebP.");return}if(N.size>5*1024*1024){alert("La photo est trop grande. Taille maximale : 5 MB");return}const U=new FileReader;U.onloadend=()=>{f(U.result)},U.readAsDataURL(N),s(N)}},v=_=>{a(o===_?null:_)},x=()=>{s(null),f(null);const _=document.getElementById("photo-upload-input");_&&(_.value="")};return u.jsxs("div",{className:"coloring-selector",children:[u.jsx("h3",{children:"2. Choisissez un thme pour vos coloriages"}),u.jsx("div",{className:"theme-grid",children:w.map((_,N)=>u.jsxs("div",{className:"theme-slot",children:[u.jsxs(Te.div,{className:`theme-option ${_.special?"photo-upload-option":""} ${_.value==="custom"?"custom-coloring":""} ${e===_.value?"selected":""}`,onClick:()=>S(_.value),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"theme-icon",children:_.icon}),u.jsxs("div",{className:"theme-info",children:[u.jsx("h4",{children:_.label}),u.jsx("p",{children:_.description})]})]}),_.special&&d&&e==="upload_photo"&&u.jsxs(Te.div,{className:"photo-upload-container inline-upload",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:[u.jsxs("div",{className:"upload-section",children:[u.jsx("p",{className:"upload-hint",children:"Formats accepts : JPG, PNG, GIF, WebP (max 5 MB)"}),u.jsx("input",{type:"file",id:"photo-upload-input",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:k,style:{display:"none"}}),g?u.jsx("div",{className:"photo-preview-container",children:u.jsx("img",{src:g,alt:"Aperu",className:"photo-preview"})}):u.jsxs("label",{htmlFor:"photo-upload-input",className:"upload-button",children:[u.jsx("span",{className:"upload-icon",children:""}),u.jsx("span",{children:"Choisir une photo"})]})]}),g&&u.jsx(Te.div,{className:"remove-photo-section",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:u.jsx("button",{onClick:x,className:"remove-photo-button",children:" Supprimer la photo"})})]}),_.value==="custom"&&l&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input inline-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("input",{type:"text",placeholder:"Dcrivez votre thme de coloriage personnalis...",value:n,onChange:O=>r(O.target.value),className:"custom-input"})})]},_.value))}),u.jsxs("div",{className:"model-choice-section",children:[u.jsx("h3",{children:"3. Voulez-vous un modle ?"}),u.jsxs("div",{className:"model-buttons",children:[u.jsxs(Te.button,{className:`model-btn ${o===!0?"active":""}`,onClick:()=>v(!0),whileHover:{y:-3},whileTap:{scale:.98},children:[u.jsx("span",{className:"model-icon",children:""}),u.jsx("span",{className:"model-label",children:"Avec modle"}),u.jsx("span",{className:"model-desc",children:"Inclut un exemple color en coin"})]}),u.jsxs(Te.button,{className:`model-btn ${o===!1?"active":""}`,onClick:()=>v(!1),whileHover:{y:-3},whileTap:{scale:.98},children:[u.jsx("span",{className:"model-icon",children:""}),u.jsx("span",{className:"model-label",children:"Sans modle"}),u.jsx("span",{className:"model-desc",children:"Coloriage pur, libert crative"})]})]})]})]})};const fA=({imageUrl:e,theme:t,onClose:n,onSave:r})=>{const i=R.useRef(null),[s,o]=R.useState(null),[a,l]=R.useState("#FF6B6B"),[c,d]=R.useState("bucket"),[p,g]=R.useState(!1),[f,w]=R.useState(1),[S,k]=R.useState(!1),[v,x]=R.useState(null),[_,N]=R.useState(null),O=["#FF6B6B","#FF4757","#FF6348","#FFA07A","#FF85C0","#FFB6C1","#FF1493","#DC143C","#F8B739","#FFA500","#FFD700","#F7DC6F","#FFDAB9","#FFE4B5","#F4A460","#FDB813","#52C41A","#98D8C8","#81C784","#00C853","#20B2AA","#3CB371","#90EE90","#7FFF00","#4ECDC4","#45B7D1","#85C1E9","#A8DADC","#00BFFF","#1E90FF","#4169E1","#6495ED","#BB8FCE","#9B59B6","#8B008B","#DA70D6","#E6E6FA","#DDA0DD","#BA55D3","#9370DB","#DDA15E","#BC6C25","#D2691E","#CD853F","#8B4513","#A0522D","#F5DEB3","#FAEBD7","#95A5A6","#7F8C8D","#BDC3C7","#ECF0F1","#D3D3D3","#C0C0C0","#A9A9A9","#808080","#E07A5F","#FF6B9D","#00D9FF","#FFEB3B","#FF5722","#8BC34A","#00BCD4","#E91E63"];R.useEffect(()=>{const te=i.current;if(!te)return;const se=te.getContext("2d",{willReadFrequently:!0});o(se);const A=new Image;A.crossOrigin="anonymous",A.onload=()=>{const z=window.innerWidth*.9,B=window.innerHeight*.7;let X=A.width,ee=A.height;X>z&&(ee=z/X*ee,X=z),ee>B&&(X=B/ee*X,ee=B),te.width=X,te.height=ee,se.drawImage(A,0,0,X,ee),x(se.getImageData(0,0,X,ee));const oe=se.createImageData(X,ee);N(oe),k(!0)},A.onerror=()=>{console.error("Erreur de chargement de l'image")},A.src=e},[e]);const U=(te,se,A)=>{if(!s||!v)return;const z=i.current,B=s.getImageData(0,0,z.width,z.height),X=B.data,ee=F(X,te,se,z.width),oe=G(A);if(P(ee,oe))return;const ge=[[te,se]],he=new Set;for(;ge.length>0;){const[me,Se]=ge.pop(),Pe=`${me},${Se}`;if(he.has(Pe)||me<0||me>=z.width||Se<0||Se>=z.height)continue;const Le=F(X,me,Se,z.width);L(Le)||P(Le,ee)&&(he.add(Pe),M(X,me,Se,z.width,oe),ge.push([me+1,Se]),ge.push([me-1,Se]),ge.push([me,Se+1]),ge.push([me,Se-1]))}s.putImageData(B,0,0)},q=(te,se)=>{if(!s||!v)return;const A=i.current,z=s.getImageData(0,0,A.width,A.height),B=z.data,X=v.data,ee=F(B,te,se,A.width);if(Y(ee))return;const oe=[[te,se]],ge=new Set;for(;oe.length>0;){const[he,me]=oe.pop(),Se=`${he},${me}`;if(ge.has(Se)||he<0||he>=A.width||me<0||me>=A.height)continue;const Pe=F(B,he,me,A.width);if(L(Pe)||!P(Pe,ee))continue;ge.add(Se);const Le=(me*A.width+he)*4;B[Le]=X[Le],B[Le+1]=X[Le+1],B[Le+2]=X[Le+2],B[Le+3]=X[Le+3],oe.push([he+1,me]),oe.push([he-1,me]),oe.push([he,me+1]),oe.push([he,me-1])}s.putImageData(z,0,0)},F=(te,se,A,z)=>{const B=(A*z+se)*4;return{r:te[B],g:te[B+1],b:te[B+2],a:te[B+3]}},M=(te,se,A,z,B)=>{const X=(A*z+se)*4;te[X]=B.r,te[X+1]=B.g,te[X+2]=B.b,te[X+3]=255},G=te=>{const se=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(te);return se?{r:parseInt(se[1],16),g:parseInt(se[2],16),b:parseInt(se[3],16),a:255}:{r:0,g:0,b:0,a:255}},P=(te,se,A=10)=>Math.abs(te.r-se.r)<=A&&Math.abs(te.g-se.g)<=A&&Math.abs(te.b-se.b)<=A,L=(te,se=50)=>te.r<se&&te.g<se&&te.b<se,Y=(te,se=240)=>te.r>se&&te.g>se&&te.b>se||te.a<10,V=te=>{if(!S)return;const se=i.current,A=se.getBoundingClientRect(),z=Math.floor((te.clientX-A.left)*(se.width/A.width)),B=Math.floor((te.clientY-A.top)*(se.height/A.height));c==="bucket"?U(z,B,a):c==="eraser"&&q(z,B)},ae=()=>{i.current.toBlob(se=>{const A=URL.createObjectURL(se),z=document.createElement("a");z.href=A;const X=(t||"coloriage").replace(/[^a-z0-9]/gi,"_").toLowerCase();z.download=`coloriages_${X}_colorie.png`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(A)})},de=te=>{te.target.classList.contains("coloring-canvas-overlay")&&n()},ce=()=>{!s||!v||s.putImageData(v,0,0)},J=()=>{w(te=>Math.min(te+.5,3)),g(!0)},ie=()=>{f>1&&(w(te=>Math.max(te-.5,1)),f-.5<=1&&g(!1))};return u.jsx("div",{className:"coloring-canvas-overlay",onClick:de,children:u.jsxs("div",{className:"coloring-canvas-container",children:[u.jsxs("div",{className:"coloring-toolbar-top",children:[u.jsx("h2",{className:"coloring-canvas-title",children:" Coloriez votre dessin"}),u.jsxs("div",{className:"coloring-zoom-controls",children:[u.jsx("button",{className:"coloring-zoom-btn",onClick:ie,disabled:f<=1,title:"Zoom arrire",children:""}),u.jsxs("span",{style:{color:"white",fontWeight:"bold",minWidth:"60px",textAlign:"center"},children:[Math.round(f*100),"%"]}),u.jsx("button",{className:"coloring-zoom-btn",onClick:J,disabled:f>=3,title:"Zoom avant",children:"+"})]}),u.jsxs("div",{className:"coloring-toolbar-actions",children:[u.jsx("button",{className:"coloring-btn coloring-reset-btn",onClick:ce,title:"Rinitialiser",children:" Rinitialiser"}),u.jsx("button",{className:"coloring-btn coloring-save-btn",onClick:ae,title:"Tlcharger",children:" Tlcharger"}),u.jsx("button",{className:"coloring-btn coloring-close-btn-top",onClick:n,title:"Fermer",children:""})]})]}),u.jsxs("div",{className:"coloring-canvas-wrapper",children:[u.jsx("canvas",{ref:i,onClick:V,className:`coloring-canvas ${p?"zoomed":""}`,style:{transform:`scale(${f})`}}),!S&&u.jsxs("div",{className:"coloring-loading",children:[u.jsx("div",{className:"coloring-spinner"}),u.jsx("p",{children:"Chargement du coloriage..."})]})]}),u.jsxs("div",{className:"coloring-toolbar-bottom",children:[u.jsxs("div",{className:"coloring-tools",children:[u.jsx("button",{className:`coloring-tool-btn ${c==="bucket"?"active":""}`,onClick:()=>d("bucket"),title:"Seau de peinture",children:""}),u.jsx("button",{className:`coloring-tool-btn ${c==="eraser"?"active":""}`,onClick:()=>d("eraser"),title:"Gomme",children:""})]}),u.jsx("div",{className:"coloring-palette",children:O.map((te,se)=>u.jsx("button",{className:`coloring-color-btn ${a===te&&c==="bucket"?"active":""}`,style:{backgroundColor:te},onClick:()=>{l(te),d("bucket")},title:te},se))})]})]})})},YB=({coloringResult:e,onClose:t,selectedTheme:n})=>{const[r,i]=R.useState(!1),[s,o]=R.useState(!1),a=R.useRef(null),l=()=>{var w;document.fullscreenElement?(document.exitFullscreen(),i(!1)):((w=a.current)==null||w.requestFullscreen(),i(!0))},c=w=>{w.target.classList.contains("coloring-popup-overlay")&&t()},d=()=>{if(e!=null&&e.images&&e.images.length>0){const w=e.title||(n?`coloriages_${n}`:"coloriages");k2(e.images,w)}else console.warn("Aucune image disponible pour le tlchargement PDF")};if(!e||!e.images||e.images.length===0)return null;const p=e.images[0],g=p.image_url||p,f=()=>{o(!0)};return u.jsx(u.Fragment,{children:s?u.jsx(fA,{imageUrl:g,onClose:()=>o(!1)}):u.jsx("div",{className:"coloring-popup-overlay",onClick:c,children:u.jsxs("div",{className:"coloring-popup-content",ref:a,children:[u.jsx("div",{className:"coloring-background"}),u.jsx("button",{className:"coloring-close-btn",onClick:t,children:""}),u.jsx("button",{className:"coloring-fullscreen-btn",onClick:l,children:r?" Quitter le plein cran":" Plein cran"}),u.jsxs("div",{className:"coloring-container",children:[u.jsx("h2",{className:"coloring-title",children:" Votre coloriage"}),u.jsx("div",{className:"coloring-image-wrapper",children:u.jsx("img",{src:g,alt:"Coloriage",className:"coloring-popup-image"})}),u.jsxs("div",{className:"coloring-popup-actions",children:[u.jsx("button",{className:"coloring-open-btn",onClick:f,children:" Colorier maintenant"}),u.jsx("button",{className:"coloring-download-btn",onClick:d,children:" Tlcharger le coloriage"})]})]})]})})})};const ZB=({selectedTheme:e,setSelectedTheme:t,selectedStyle:n,setSelectedStyle:r,numPages:i,setNumPages:s,customStory:o,setCustomStory:a,characterPhoto:l,setCharacterPhoto:c,onCharacterPhotoUpload:d})=>{const[p,g]=R.useState(!1),f=[{id:"custom",name:"Personnalis",icon:"",description:"Votre propre histoire"},{id:"espace",name:"Espace",icon:"",description:"Aventures spatiales"},{id:"pirates",name:"Pirates",icon:"",description:"Trsors et mers"},{id:"princesses",name:"Princesses",icon:"",description:"Chteaux magiques"},{id:"dinosaures",name:"Dinosaures",icon:"",description:"Monde prhistorique"},{id:"animaux",name:"Animaux",icon:"",description:"Animaux mignons"},{id:"superheros",name:"Super-hros",icon:"",description:"Pouvoirs incroyables"},{id:"foret",name:"Fort Magique",icon:"",description:"Fort enchante"},{id:"ecole",name:"cole",icon:"",description:"Aventures scolaires"}],w=[{id:"3d",name:"3D",icon:"",description:"Effets 3D modernes"},{id:"cartoon",name:"Cartoon",icon:"",description:"Color et enfantin"},{id:"manga",name:"Manga",icon:"",description:"Style japonais"},{id:"comics",name:"Comics Marvel",icon:"",description:"Style amricain"},{id:"realistic",name:"Raliste",icon:"",description:"Dtaill et raliste"},{id:"watercolor",name:"Aquarelle",icon:"",description:"Doux et artistique"}],S=[1,2,3,4,5],k=async v=>{const x=v.target.files[0];if(x){g(!0);try{await d(x)}catch(_){console.error("Erreur upload:",_),alert("Erreur lors de l'upload de la photo")}finally{g(!1)}}};return u.jsxs("div",{className:"comics-selector",children:[u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"2. Choisissez un thme pour votre bande dessine"}),u.jsx("div",{className:"theme-grid",children:f.map(v=>u.jsxs("div",{className:"theme-slot",children:[u.jsxs(Te.div,{className:`theme-card ${e===v.id?"selected":""} ${v.id==="custom"?"custom-theme":""}`,onClick:()=>t(e===v.id?null:v.id),whileHover:{scale:1.03},whileTap:{scale:.98},transition:{duration:.2},children:[u.jsx("div",{className:"theme-icon",children:v.icon}),u.jsx("div",{className:"theme-name",children:v.name}),u.jsx("div",{className:"theme-description",children:v.description})]}),v.id==="custom"&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("textarea",{className:"custom-input",placeholder:"Dcrivez votre histoire personnalise... (ex: Une petite fille qui dcouvre un monde magique dans son jardin)",value:o,onChange:x=>a(x.target.value),rows:3})})]},v.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"3. Choisissez un style de dessin"}),u.jsx("div",{className:"style-grid",children:w.map(v=>u.jsxs(Te.div,{className:`style-card ${n===v.id?"selected":""}`,onClick:()=>r(n===v.id?null:v.id),whileHover:{scale:1.03},whileTap:{scale:.98},transition:{duration:.2},children:[u.jsx("div",{className:"style-icon",children:v.icon}),u.jsx("div",{className:"style-name",children:v.name}),u.jsx("div",{className:"style-description",children:v.description})]},v.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"4. Nombre de pages"}),u.jsx("div",{className:"pages-selector",children:S.map(v=>u.jsxs(Te.button,{className:`page-btn ${i===v?"selected":""}`,onClick:()=>s(i===v?null:v),whileHover:{scale:1.03},whileTap:{scale:.98},transition:{duration:.2},children:[v," ",v===1?"page":"pages",u.jsxs("span",{className:"cases-info",children:["(",v*4," cases)"]})]},v))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"5. Personnage principal (optionnel)"}),u.jsxs("div",{className:"character-upload-section",children:[u.jsx("p",{className:"character-description",children:"Uploadez une photo pour crer un personnage ressemblant ! L'IA analysera la photo et crera un personnage de BD similaire."}),u.jsxs("div",{className:"upload-area",children:[u.jsx("input",{type:"file",id:"character-photo-upload",accept:"image/*",onChange:k,className:"file-input",disabled:p}),!l&&u.jsx("label",{htmlFor:"character-photo-upload",className:"upload-label",children:p?u.jsxs("div",{className:"uploading-state",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{children:"Upload en cours..."})]}):u.jsxs("div",{className:"upload-prompt",children:[u.jsx("span",{className:"upload-icon",children:""}),u.jsxs("div",{className:"upload-text",children:[u.jsx("strong",{children:"Cliquez pour uploader une photo"}),u.jsx("span",{children:"ou glissez-dposez une image ici"})]})]})})]}),l&&u.jsxs("div",{className:"photo-preview",children:[u.jsx("img",{src:l.url,alt:"Personnage upload"}),u.jsxs("div",{className:"photo-actions",children:[u.jsx("button",{className:"change-photo-btn",onClick:()=>document.getElementById("character-photo-upload").click(),children:" Changer"}),u.jsx("button",{className:"remove-photo-btn",onClick:()=>c(null),children:" Retirer"})]})]})]})]})]})};const XB=({comic:e,onClose:t,baseUrl:n})=>{const[r,i]=R.useState(0),[s,o]=R.useState(!1);if(!e||!e.pages||e.pages.length===0)return null;const a=e.pages[r],l=e.pages.length,c=()=>{r<l-1&&i(r+1)},d=()=>{r>0&&i(r-1)},p=()=>{const w=`${n}${a.image_url}`,S=document.createElement("a");S.href=w;const k=(e.title||"bande_dessinee").replace(/[^a-z0-9]/gi,"_").toLowerCase();S.download=`${k}_page_${r+1}.png`,document.body.appendChild(S),S.click(),document.body.removeChild(S)},g=()=>{e.pages.forEach((w,S)=>{setTimeout(()=>{const k=`${n}${w.image_url}`,v=document.createElement("a");v.href=k;const x=(e.title||"bande_dessinee").replace(/[^a-z0-9]/gi,"_").toLowerCase();v.download=`${x}_page_${S+1}.png`,document.body.appendChild(v),v.click(),document.body.removeChild(v)},S*500)})},f=()=>{o(!s)};return u.jsx(Hi,{children:u.jsx(Te.div,{className:"comics-popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:u.jsxs(Te.div,{className:`comics-popup-container ${s?"fullscreen":""}`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:w=>w.stopPropagation(),children:[u.jsxs("div",{className:"comics-popup-header",children:[u.jsxs("div",{className:"comic-title-section",children:[u.jsx("h2",{className:"comic-title",children:e.title}),u.jsx("p",{className:"comic-synopsis",children:e.synopsis}),u.jsxs("div",{className:"comic-meta",children:[u.jsxs("span",{className:"meta-item",children:[u.jsx("span",{className:"meta-icon",children:""}),e.art_style]}),u.jsxs("span",{className:"meta-item",children:[u.jsx("span",{className:"meta-icon",children:""}),l," ",l===1?"planche":"planches"]}),u.jsxs("span",{className:"meta-item",children:[u.jsx("span",{className:"meta-icon",children:""}),l*4," cases"]})]})]}),u.jsx("button",{className:"close-btn",onClick:t,children:""})]}),u.jsxs("div",{className:"comics-viewer",children:[u.jsx(Hi,{mode:"wait",children:u.jsxs(Te.div,{className:"page-display",initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},children:[u.jsx("img",{src:`${n}${a.image_url}`,alt:`Planche ${r+1}`,className:"page-image",onClick:f}),u.jsxs("div",{className:"page-info",children:["Planche ",r+1," / ",l]})]},r)}),l>1&&u.jsxs("div",{className:"page-navigation",children:[u.jsx("button",{className:"nav-btn prev-btn",onClick:d,disabled:r===0,children:" Prcdent"}),u.jsx("div",{className:"page-dots",children:e.pages.map((w,S)=>u.jsx("button",{className:`page-dot ${S===r?"active":""}`,onClick:()=>i(S),"aria-label":`Aller  la planche ${S+1}`},S))}),u.jsx("button",{className:"nav-btn next-btn",onClick:c,disabled:r===l-1,children:"Suivant "})]})]}),u.jsxs("div",{className:"comics-actions",children:[u.jsxs("button",{className:"action-btn secondary-btn",onClick:f,children:[u.jsx("span",{className:"btn-icon",children:s?"":""}),s?"Rduire":"Plein cran"]}),u.jsxs("button",{className:"action-btn primary-btn",onClick:p,children:[u.jsx("span",{className:"btn-icon",children:""}),"Tlcharger cette planche"]}),l>1&&u.jsxs("button",{className:"action-btn primary-btn",onClick:g,children:[u.jsx("span",{className:"btn-icon",children:""}),"Tlcharger toutes les planches"]})]}),l>1&&u.jsxs("div",{className:"thumbnails-section",children:[u.jsx("h4",{children:"Toutes les planches"}),u.jsx("div",{className:"thumbnails-grid",children:e.pages.map((w,S)=>u.jsxs(Te.div,{className:`thumbnail ${S===r?"active":""}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(S),children:[u.jsx("img",{src:`${n}${w.image_url}`,alt:`Miniature planche ${S+1}`}),u.jsxs("div",{className:"thumbnail-label",children:["Planche ",S+1]})]},S))})]})]})})})},QB=async(e,t,n,r={})=>{try{if(n==="fredagathe77@gmail.com")return{hasPermission:!0,reason:"admin_access",userRole:"admin",isAdmin:!0};const{data:i,error:s}=await Pt.from("profiles").select("role").eq("id",t).single();if((i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="free")return{hasPermission:!0,reason:(i==null?void 0:i.role)==="admin"?"admin_access":"free_access",userRole:i==null?void 0:i.role,isAdmin:(i==null?void 0:i.role)==="admin"};const{data:o,error:a}=await Pt.functions.invoke("check-permission",{body:{contentType:e,userId:t,userEmail:n,selectedDuration:r.duration,numPages:r.pages,selectedVoice:r.voice}});return a?(console.error("Erreur check-permission:",a),{hasPermission:!1,reason:"error",error:a,isAdmin:!1}):{...o,isAdmin:!1}}catch(i){return{hasPermission:!1,reason:"error",error:i,isAdmin:!1}}},eU=async(e,t,n,r={})=>{try{const i=Cm(e,r),{data:s,error:o}=await Pt.functions.invoke("create-payment",{body:{contentType:e,userId:t,userEmail:n,amount:i.amount,selectedDuration:r.duration,numPages:r.pages,selectedVoice:r.voice}});if(o)throw o;return s}catch(i){throw i}},Cm=(e,t={})=>{console.log(" getContentPrice appel:",{contentType:e,options:t});const n={comptine:{amount:149,name:"Comptine Musicale",currency:"EUR",display:"1,49"},histoire:{amount:49,name:"Histoire Texte",currency:"EUR",display:"0,49"},audio:{amount:79,name:"Histoire Audio",currency:"EUR",display:"0,79"},coloriage:{amount:99,name:"Coloriage Personnalis",currency:"EUR",display:"0,99"},coloring:{amount:99,name:"Coloriage personnalis",currency:"EUR",display:"0,99"},bd:{amount:149,name:"Page de Bande Dessine",currency:"EUR",display:"1,49"},comic:{amount:149,name:"Page de Bande Dessine",currency:"EUR",display:"1,49"},story:{amount:49,name:"Histoire Texte",currency:"EUR",display:"0,49"},rhyme:{amount:149,name:"Comptine musicale",currency:"EUR",display:"1,49"},animation:{amount:1299,name:"Animation IA 30s",currency:"EUR",display:"12,99"}};if(e==="histoire"||e==="story")return console.log(" Vrification voix pour histoire:",t.voice),t.voice&&(t.voice==="female"||t.voice==="male")?(console.log(" Histoire AUDIO dtecte"),{amount:79,name:"Histoire Audio",currency:"EUR",display:"0,79"}):(console.log(" Histoire TEXTE dtecte"),{amount:49,name:"Histoire Texte",currency:"EUR",display:"0,49"});if(e==="animation"&&t.duration){const r={30:{amount:1299,name:"Animation IA 30s",display:"12,99"},60:{amount:1999,name:"Animation IA 1min",display:"19,99"},120:{amount:2499,name:"Animation IA 2min",display:"24,99"},180:{amount:2999,name:"Animation IA 3min",display:"29,99"},240:{amount:3499,name:"Animation IA 4min",display:"34,99"},300:{amount:3999,name:"Animation IA 5min",display:"39,99"}},i=t.duration;if(r[i])return{...n[e],...r[i],currency:"EUR"}}if((e==="bd"||e==="comic")&&t.pages){const i=n[e].amount*t.pages,s=(i/100).toFixed(2).replace(".",",")+"";return{...n[e],amount:i,name:`${t.pages} page${t.pages>1?"s":""} de Bande Dessine`,display:s}}return n[e]||{amount:149,name:"Contenu Cratif",currency:"EUR",display:"1,49"}},pA=async(e,t)=>{try{if(t==="fredagathe77@gmail.com")return!0;const{data:n,error:r}=await Pt.from("profiles").select("role").eq("id",e).single();return r?!1:(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="free"}catch{return!1}},tU=async e=>{try{const{data:t,error:n}=await Pt.from("profiles").select("role").eq("id",e).single();return(t==null?void 0:t.role)||"user"}catch{return"user"}},mA=async(e,t,n,r)=>{try{const{data:i,error:s}=await Pt.from("generation_permissions").upsert({user_id:e,content_type:t,stripe_payment_intent_id:n,amount:r,status:"completed",created_at:new Date().toISOString()});if(s)throw s;return i}catch(i){throw i}},gA=async()=>{try{const{data:e,error:t}=await Pt.functions.invoke("manage-subscription",{body:{action:"get_plans"}});if(t)throw t;return e.plans||[]}catch(e){return console.error("Erreur rcupration plans:",e),[]}},vA=async e=>{try{const{data:t,error:n}=await Pt.functions.invoke("manage-subscription",{body:{action:"get_subscription",userId:e}});if(n)throw n;return t.subscription}catch(t){return console.error("Erreur rcupration abonnement:",t),null}},yA=async(e,t,n,r)=>{try{const{data:i,error:s}=await Pt.functions.invoke("manage-subscription",{body:{action:"create_subscription",planId:e,userId:t,paymentMethodId:n,userEmail:r}});if(s)throw s;return i}catch(i){throw console.error("Erreur cration abonnement:",i),i}},wA=async e=>{try{const{data:t,error:n}=await Pt.functions.invoke("manage-subscription",{body:{action:"cancel_subscription",userId:e}});if(n)throw n;return t}catch(t){throw console.error("Erreur annulation abonnement:",t),t}},nU=async(e,t,n,r={})=>{try{const{data:i,error:s}=await Pt.functions.invoke("deduct-tokens",{body:{userId:e,contentType:t,tokensUsed:n,selectedDuration:r.duration,numPages:r.pages,selectedVoice:r.voice,transactionId:r.transactionId||`txn_${Date.now()}`}});if(s)throw s;return i}catch(i){throw console.error("Erreur dduction tokens:",i),i}},bA=async e=>{try{const{data:t,error:n}=await Pt.from("user_tokens").select("*").eq("user_id",e).is("used_at",null).or("expires_at.is.null,expires_at.gte."+new Date().toISOString()).order("created_at",{ascending:!1});if(n)throw n;return{totalTokens:t.reduce((i,s)=>i+s.tokens_amount,0),tokens:t}}catch(t){return console.error("Erreur rcupration tokens:",t),{totalTokens:0,tokens:[]}}},rU=(e,t={},n=null)=>{var i;let r=1;if(n){const s=(i=n.subscription_plans)==null?void 0:i.name,o={Dcouverte:{histoire:3,audio:3,coloriage:2,bd:4,comptine:5,animation:10},Famille:{histoire:3,audio:3,coloriage:2,bd:3,comptine:4,animation:8},Cratif:{histoire:2,audio:2,coloriage:1,bd:2,comptine:3,animation:5},Institut:{histoire:1,audio:1,coloriage:1,bd:1,comptine:2,animation:3}};s&&o[s]&&(r=o[s][e]||1)}else r={histoire:1,audio:1,coloriage:1,bd:4,comptine:5,animation:10}[e]||1;if(e==="animation"&&t.duration){const s=t.duration;s===60?r=Math.ceil(r*1.5):s===120?r=Math.ceil(r*2.5):s===180?r=Math.ceil(r*4):s===240?r=Math.ceil(r*5):s===300&&(r=Math.ceil(r*6))}return(e==="bd"||e==="comic")&&t.pages&&(r=r*t.pages),r},iU=async(e,t=50)=>{try{const{data:n,error:r}=await Pt.from("user_tokens").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(r)throw r;return n||[]}catch(n){return console.error("Erreur rcupration historique tokens:",n),[]}},sU=Object.freeze(Object.defineProperty({__proto__:null,calculateTokenCost:rU,cancelSubscription:wA,checkPaymentPermission:QB,createPaymentSession:eU,createSubscription:yA,deductTokens:nU,getContentPrice:Cm,getSubscriptionPlans:gA,getTokenHistory:iU,getUserRole:tU,getUserSubscription:vA,getUserTokens:bA,grantPermission:mA,hasFreeAccess:pA},Symbol.toStringTag,{value:"Module"}));var xA="clover",oU=function(t){return t===3?"v3":t},_A="https://js.stripe.com",aU="".concat(_A,"/").concat(xA,"/stripe.js"),lU=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,cU=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,B_="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",uU=function(t){return lU.test(t)||cU.test(t)},dU=function(){for(var t=document.querySelectorAll('script[src^="'.concat(_A,'"]')),n=0;n<t.length;n++){var r=t[n];if(uU(r.src))return r}return null},U_=function(t){var n=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(aU).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},hU=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.3.0",startTime:n})},$u=null,If=null,Of=null,fU=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},pU=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},mU=function(t){return $u!==null?$u:($u=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(B_),window.Stripe){n(window.Stripe);return}try{var i=dU();if(i&&t)console.warn(B_);else if(!i)i=U_(t);else if(i&&Of!==null&&If!==null){var s;i.removeEventListener("load",Of),i.removeEventListener("error",If),(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=U_(t)}Of=pU(n,r),If=fU(r),i.addEventListener("load",Of),i.addEventListener("error",If)}catch(o){r(o);return}}),$u.catch(function(n){return $u=null,Promise.reject(n)}))},gU=function(t,n,r){if(t===null)return null;var i=n[0],s=i.match(/^pk_test/),o=oU(t.version),a=xA;s&&o!==a&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("8.3.0"," expected Stripe.js@").concat(a,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=t.apply(void 0,n);return hU(l,r),l},zu,SA=!1,kA=function(){return zu||(zu=mU(null).catch(function(t){return zu=null,Promise.reject(t)}),zu)};Promise.resolve().then(function(){return kA()}).catch(function(e){SA||console.warn(e)});var jA=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];SA=!0;var i=Date.now();return kA().then(function(s){return gU(s,n,i)})},NA={exports:{}},vU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yU=vU,wU=yU;function AA(){}function EA(){}EA.resetWarningCache=AA;var bU=function(){function e(r,i,s,o,a,l){if(l!==wU){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:EA,resetWarningCache:AA};return n.PropTypes=n,n};NA.exports=bU();var xU=NA.exports;const nn=bv(xU);function $_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function z_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$_(Object(n),!0).forEach(function(r){CA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lp(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lp=function(t){return typeof t}:lp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function CA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _U(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function SU(e,t){if(e==null)return{};var n=_U(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PA(e,t){return kU(e)||jU(e,t)||NU(e,t)||AU()}function kU(e){if(Array.isArray(e))return e}function jU(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function NU(e,t){if(e){if(typeof e=="string")return q_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q_(e,t)}}function q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dr=function(t,n,r){var i=!!r,s=Xt.useRef(r);Xt.useEffect(function(){s.current=r},[r]),Xt.useEffect(function(){if(!i||!t)return function(){};var o=function(){s.current&&s.current.apply(s,arguments)};return t.on(n,o),function(){t.off(n,o)}},[i,n,t,s])},yv=function(t){var n=Xt.useRef(t);return Xt.useEffect(function(){n.current=t},[t]),n.current},qc=function(t){return t!==null&&lp(t)==="object"},EU=function(t){return qc(t)&&typeof t.then=="function"},CU=function(t){return qc(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},V_="[object Object]",PU=function e(t,n){if(!qc(t)||!qc(n))return t===n;var r=Array.isArray(t),i=Array.isArray(n);if(r!==i)return!1;var s=Object.prototype.toString.call(t)===V_,o=Object.prototype.toString.call(n)===V_;if(s!==o)return!1;if(!s&&!r)return t===n;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(var c={},d=0;d<a.length;d+=1)c[a[d]]=!0;for(var p=0;p<l.length;p+=1)c[l[p]]=!0;var g=Object.keys(c);if(g.length!==a.length)return!1;var f=t,w=n,S=function(v){return e(f[v],w[v])};return g.every(S)},LA=function(t,n,r){return qc(t)?Object.keys(t).reduce(function(i,s){var o=!qc(n)||!PU(t[s],n[s]);return r.includes(s)?(o&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),i):o?z_(z_({},i||{}),{},CA({},s,t[s])):i},null):null},TA="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",H_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TA;if(t===null||CU(t))return t;throw new Error(n)},LU=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TA;if(EU(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(i){return H_(i,n)})};var r=H_(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},TU=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),t.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},Pm=Xt.createContext(null);Pm.displayName="ElementsContext";var RA=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},j2=function(t){var n=t.stripe,r=t.options,i=t.children,s=Xt.useMemo(function(){return LU(n)},[n]),o=Xt.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(r):null}}),a=PA(o,2),l=a[0],c=a[1];Xt.useEffect(function(){var g=!0,f=function(S){c(function(k){return k.stripe?k:{stripe:S,elements:S.elements(r)}})};return s.tag==="async"&&!l.stripe?s.stripePromise.then(function(w){w&&g&&f(w)}):s.tag==="sync"&&!l.stripe&&f(s.stripe),function(){g=!1}},[s,l,r]);var d=yv(n);Xt.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var p=yv(r);return Xt.useEffect(function(){if(l.elements){var g=LA(r,p,["clientSecret","fonts"]);g&&l.elements.update(g)}},[r,p,l.elements]),Xt.useEffect(function(){TU(l.stripe)},[l.stripe]),Xt.createElement(Pm.Provider,{value:l},i)};j2.propTypes={stripe:nn.any,options:nn.object};var RU=function(t){var n=Xt.useContext(Pm);return RA(n,t)},IA=function(){var t=RU("calls useElements()"),n=t.elements;return n};nn.func.isRequired;var OA=Xt.createContext(null);OA.displayName="CheckoutContext";nn.any,nn.shape({clientSecret:nn.oneOfType([nn.string,nn.instanceOf(Promise)]).isRequired,elementsOptions:nn.object}).isRequired;var wv=function(t){var n=Xt.useContext(OA),r=Xt.useContext(Pm);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}else return RA(r,t)},IU=["mode"],OU=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},ri=function(t,n){var r="".concat(OU(t),"Element"),i=function(l){var c=l.id,d=l.className,p=l.options,g=p===void 0?{}:p,f=l.onBlur,w=l.onFocus,S=l.onReady,k=l.onChange,v=l.onEscape,x=l.onClick,_=l.onLoadError,N=l.onLoaderStart,O=l.onNetworksChange,U=l.onConfirm,q=l.onCancel,F=l.onShippingAddressChange,M=l.onShippingRateChange,G=l.onSavedPaymentMethodRemove,P=l.onSavedPaymentMethodUpdate,L=wv("mounts <".concat(r,">")),Y="elements"in L?L.elements:null,V="checkoutState"in L?L.checkoutState:null,ae=(V==null?void 0:V.type)==="success"||(V==null?void 0:V.type)==="loading"?V.sdk:null,de=Xt.useState(null),ce=PA(de,2),J=ce[0],ie=ce[1],te=Xt.useRef(null),se=Xt.useRef(null);Dr(J,"blur",f),Dr(J,"focus",w),Dr(J,"escape",v),Dr(J,"click",x),Dr(J,"loaderror",_),Dr(J,"loaderstart",N),Dr(J,"networkschange",O),Dr(J,"confirm",U),Dr(J,"cancel",q),Dr(J,"shippingaddresschange",F),Dr(J,"shippingratechange",M),Dr(J,"savedpaymentmethodremove",G),Dr(J,"savedpaymentmethodupdate",P),Dr(J,"change",k);var A;S&&(t==="expressCheckout"?A=S:A=function(){S(J)}),Dr(J,"ready",A),Xt.useLayoutEffect(function(){if(te.current===null&&se.current!==null&&(Y||ae)){var B=null;if(ae)switch(t){case"payment":B=ae.createPaymentElement(g);break;case"address":if("mode"in g){var X=g.mode,ee=SU(g,IU);if(X==="shipping")B=ae.createShippingAddressElement(ee);else if(X==="billing")B=ae.createBillingAddressElement(ee);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":B=ae.createExpressCheckoutElement(g);break;case"currencySelector":B=ae.createCurrencySelectorElement();break;case"taxId":B=ae.createTaxIdElement(g);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else Y&&(B=Y.create(t,g));te.current=B,ie(B),B&&B.mount(se.current)}},[Y,ae,g]);var z=yv(g);return Xt.useEffect(function(){if(te.current){var B=LA(g,z,["paymentRequest"]);B&&"update"in te.current&&te.current.update(B)}},[g,z]),Xt.useLayoutEffect(function(){return function(){if(te.current&&typeof te.current.destroy=="function")try{te.current.destroy(),te.current=null}catch{}}},[]),Xt.createElement("div",{id:c,className:d,ref:se})},s=function(l){wv("mounts <".concat(r,">"));var c=l.id,d=l.className;return Xt.createElement("div",{id:c,className:d})},o=n?s:i;return o.propTypes={id:nn.string,className:nn.string,onChange:nn.func,onBlur:nn.func,onFocus:nn.func,onReady:nn.func,onEscape:nn.func,onClick:nn.func,onLoadError:nn.func,onLoaderStart:nn.func,onNetworksChange:nn.func,onConfirm:nn.func,onCancel:nn.func,onShippingAddressChange:nn.func,onShippingRateChange:nn.func,onSavedPaymentMethodRemove:nn.func,onSavedPaymentMethodUpdate:nn.func,options:nn.object},o.displayName=r,o.__elementType=t,o},ii=typeof window>"u",FU=Xt.createContext(null);FU.displayName="EmbeddedCheckoutProviderContext";var FA=function(){var t=wv("calls useStripe()"),n=t.stripe;return n};ri("auBankAccount",ii);var W_=ri("card",ii),G_=ri("cardNumber",ii),DU=ri("cardExpiry",ii),MU=ri("cardCvc",ii);ri("iban",ii);ri("payment",ii);ri("expressCheckout",ii);ri("paymentRequestButton",ii);ri("linkAuthentication",ii);ri("address",ii);ri("shippingAddress",ii);ri("paymentMethodMessaging",ii);ri("taxId",ii);const BU={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_STRIPE_PUBLISHABLE_KEY&&typeof{}.VITE_STRIPE_PUBLISHABLE_KEY=="string"&&{}.VITE_STRIPE_PUBLISHABLE_KEY.length>0?jA({}.VITE_STRIPE_PUBLISHABLE_KEY):Promise.resolve(null),UU=({contentType:e,userId:t,userEmail:n,onSuccess:r,onCancel:i,priceInfo:s})=>{const o=FA(),a=IA(),[l,c]=R.useState(!1),[d,p]=R.useState(null),[g,f]=R.useState(""),[w,S]=R.useState("");R.useEffect(()=>{o&&(async()=>{try{const{data:_,error:N}=await Pt.functions.invoke("create-payment",{body:{contentType:e,userId:t,userEmail:n,amount:s.amount,selectedDuration,numPages,selectedVoice}});if(N)throw console.error("Erreur Edge Function:",N),new Error("Erreur lors de la cration du paiement");if(!_.client_secret)throw new Error("Client secret manquant dans la rponse");f(_.client_secret)}catch(_){console.error(" Erreur cration Payment Intent:",_),p(_.message||"Erreur lors de l'initialisation du paiement")}})()},[e,s.amount,t,n,o]);const k=async x=>{if(x.preventDefault(),!o||!a){p("Stripe n'est pas encore charg. Veuillez patienter.");return}const _=a.getElement(G_);if(!_){p("lment numro de carte non trouv");return}c(!0),p(null);try{if(console.log(" Traitement paiement Stripe pour:",{contentType:e,userId:t,userEmail:n,amount:s.amount}),!w.trim())throw new Error("Veuillez saisir le nom du titulaire de la carte");const{error:N,paymentIntent:O}=await o.confirmCardPayment(g,{payment_method:{card:_,billing_details:{name:w.trim(),email:n}},return_url:window.location.origin});if(N)throw console.error("Erreur Stripe:",N),new Error(N.message||"Erreur lors du paiement");if(O.status==="succeeded"){console.log(" Paiement Stripe russi:",O);try{await mA(t,e,O.id,s.amount/100)}catch(U){console.error("Erreur lors de l'enregistrement de la permission:",U)}r({success:!0,contentType:e,amount:s.amount/100,paymentIntentId:O.id,stripePayment:!0})}else throw O.status==="requires_action"?new Error("Authentification supplmentaire requise. Veuillez ressayer."):new Error("Paiement non finalis. Veuillez vrifier votre carte.")}catch(N){console.error(" Erreur paiement Stripe:",N),p(N.message||"Erreur lors du paiement. Veuillez ressayer.")}finally{c(!1)}},v={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"},fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased"},invalid:{color:"#9e2146"}}};return u.jsxs("form",{onSubmit:k,className:"payment-form",children:[u.jsxs("div",{className:"payment-summary",children:[u.jsx("h3",{children:"Rcapitulatif de votre commande"}),u.jsxs("div",{className:"order-item",children:[u.jsx("span",{className:"item-name",children:s.name}),u.jsx("span",{className:"item-price",children:s.display})]}),u.jsxs("div",{className:"order-total",children:[u.jsx("span",{className:"total-label",children:"Total  payer :"}),u.jsx("span",{className:"total-amount",children:s.display})]})]}),u.jsxs("div",{className:"payment-method",children:[u.jsx("h3",{children:"Informations de paiement"}),u.jsxs("div",{className:"card-field",children:[u.jsx("label",{htmlFor:"cardholder-name",children:"Nom du titulaire"}),u.jsx("input",{id:"cardholder-name",type:"text",placeholder:"Jean Dupont",className:"card-input",value:w,onChange:x=>S(x.target.value),required:!0})]}),u.jsxs("div",{className:"card-field",children:[u.jsx("label",{children:"Numro de carte"}),u.jsx("div",{className:"card-element-container",children:u.jsx(G_,{options:v,className:"card-element"})})]}),u.jsxs("div",{className:"card-row",children:[u.jsxs("div",{className:"card-field",children:[u.jsx("label",{children:"Date d'expiration"}),u.jsx("div",{className:"card-element-container small",children:u.jsx(DU,{options:v,className:"card-element"})})]}),u.jsxs("div",{className:"card-field",children:[u.jsx("label",{children:"Code de scurit (CVC)"}),u.jsx("div",{className:"card-element-container small",children:u.jsx(MU,{options:v,className:"card-element"})})]})]})]}),d&&u.jsxs("div",{className:"payment-error",children:[u.jsx("span",{className:"error-icon",children:""}),d]}),u.jsxs("div",{className:"payment-actions",children:[u.jsx("button",{type:"button",onClick:i,className:"cancel-button",disabled:l,children:"Annuler"}),u.jsx("button",{type:"submit",className:"pay-button",disabled:!o||l,children:l?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"loading-spinner"}),"Traitement en cours..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"lock-icon",children:""}),"Payer ",s.display]})})]}),u.jsx("div",{className:"payment-security",children:u.jsxs("div",{className:"security-info",children:[u.jsx("span",{className:"security-icon",children:""}),u.jsx("small",{children:"Paiement scuris par Stripe"})]})})]})},$U=({contentType:e,selectedDuration:t,numPages:n,selectedVoice:r,userId:i,userEmail:s,onSuccess:o,onCancel:a})=>{let l={};e==="animation"?l.duration=t:(e==="comic"||e==="bd")&&(l.pages=n||1);const c=Cm(e,l),d=p=>{p.target===p.currentTarget&&a()};return R.useEffect(()=>{setTimeout(()=>{const g=document.querySelector(".stripe-payment-modal");g&&(g.style.overflowY="scroll",g.style.scrollbarWidth="auto",g.style.scrollbarColor="#6B4EFF transparent",g.style.setProperty("overflow-y","scroll","important"),g.style.setProperty("-webkit-overflow-scrolling","touch","important"))},100)},[]),u.jsx("div",{className:"payment-modal-overlay",onClick:d,children:u.jsxs(Te.div,{className:"payment-modal stripe-payment-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},children:[u.jsxs("div",{className:"payment-header",children:[u.jsx("h2",{children:" Paiement scuris"}),u.jsx("button",{className:"close-button",onClick:a,"aria-label":"Fermer",children:""})]}),u.jsx(j2,{stripe:BU,children:u.jsx(UU,{contentType:e,userId:i,userEmail:s,onSuccess:o,onCancel:a,priceInfo:c})})]})})};const zU={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_STRIPE_PUBLISHABLE_KEY&&typeof{}.VITE_STRIPE_PUBLISHABLE_KEY=="string"&&{}.VITE_STRIPE_PUBLISHABLE_KEY.length>0?jA({}.VITE_STRIPE_PUBLISHABLE_KEY):Promise.resolve(null),qU=({onSelectPlan:e,currentSubscription:t})=>{const[n,r]=R.useState([]),[i,s]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const l=await gA();r(l)}catch(l){console.error("Erreur chargement plans:",l)}finally{s(!1)}},a=l=>({Dcouverte:{tokens:"40 tokens/mois",features:["Histoires & Audio: 4 tokens","Coloriages: 3 tokens","BD: 5 tokens/page","Comptines: 6 tokens","Animations 30s: 12 tokens","Animations 1min: 18 tokens"],ideal:"Parfait pour dcouvrir Herbbie",economy:"conomisez jusqu' 85%"},Famille:{tokens:"120 tokens/mois",features:["Histoires & Audio: 4 tokens","Coloriages: 3 tokens","BD: 4 tokens/page","Comptines: 5 tokens","Animations 30s: 10 tokens","Animations 1min: 15 tokens"],ideal:"Pour les familles actives",economy:"conomisez jusqu' 87%"},Cratif:{tokens:"300 tokens/mois",features:["Histoires & Audio: 3 tokens","Coloriages: 2 tokens","BD: 3 tokens/page","Comptines: 4 tokens","Animations 30s: 8 tokens","Animations 1min: 12 tokens"],ideal:"Pour les crateurs intensifs",economy:"conomisez jusqu' 90%"},Institut:{tokens:"900 tokens/mois",features:["Histoires & Audio: 2 tokens","Coloriages: 1 token","BD: 2 tokens/page","Comptines: 3 tokens","Animations 30s: 6 tokens","Animations 1min: 9 tokens"],ideal:"Pour les coles et institutions",economy:"conomisez jusqu' 95%"}})[l]||{};return i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-600"})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(l=>{var p,g;const c=a(l.name),d=((p=t==null?void 0:t.subscription_plans)==null?void 0:p.name)===l.name;return u.jsxs(Te.div,{className:`relative bg-white rounded-xl p-6 border-2 transition-all duration-300 ${d?"border-violet-500 shadow-lg shadow-violet-200":"border-gray-200 hover:border-violet-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[d&&u.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:u.jsx("span",{className:"bg-violet-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Plan actuel"})}),u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l.name}),u.jsxs("div",{className:"text-3xl font-bold text-violet-600 mb-1",children:[(l.price_monthly/100).toFixed(2).replace(".",","),""]}),u.jsx("div",{className:"text-sm text-gray-500",children:"par mois"}),u.jsx("div",{className:"text-lg font-semibold text-gray-700 mt-2",children:c.tokens})]}),u.jsx("div",{className:"space-y-2 mb-6",children:(g=c.features)==null?void 0:g.map((f,w)=>u.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[u.jsx("span",{className:"text-green-500 mr-2",children:""}),f]},w))}),u.jsx("div",{className:"text-center mb-4",children:u.jsx("div",{className:"text-xs text-gray-500 italic",children:c.ideal})}),!d&&u.jsx("button",{onClick:()=>e(l),className:"w-full bg-violet-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-violet-700 transition-colors duration-200",children:"Choisir ce plan"}),d&&u.jsx("div",{className:"w-full bg-gray-100 text-gray-600 py-3 px-4 rounded-lg font-medium text-center",children:"Plan actif"})]},l.id)})})},VU=({selectedPlan:e,onSuccess:t,onCancel:n,userId:r,userEmail:i})=>{const s=FA(),o=IA(),[a,l]=R.useState(!1),[c,d]=R.useState(""),[p,g]=R.useState(null),f=async S=>{if(S.preventDefault(),!s||!o){g("Stripe n'est pas charg");return}if(!c.trim()){g("Le nom du titulaire de la carte est requis");return}l(!0),g(null);try{const k=o.getElement(W_),{error:v,paymentMethod:x}=await s.createPaymentMethod({type:"card",card:k,billing_details:{name:c.trim(),email:i}});if(v){g(v.message);return}const _=await yA(e.id,r,x.id,i);if(_.success){if(_.clientSecret){const{error:N}=await s.confirmCardPayment(_.clientSecret);if(N){g(N.message);return}}t()}else g(_.error||"Erreur lors de la cration de l'abonnement")}catch(k){console.error("Erreur abonnement:",k),g("Erreur lors de la cration de l'abonnement")}finally{l(!1)}},w={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"},fontFamily:"Inter, system-ui, sans-serif"},invalid:{color:"#9e2146"}}};return u.jsxs("form",{onSubmit:f,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["S'abonner  ",e.name]}),u.jsxs("div",{className:"bg-violet-50 p-4 rounded-lg mb-6",children:[u.jsxs("div",{className:"text-lg font-semibold text-violet-800",children:[(e.price_monthly/100).toFixed(2).replace(".",","),"/mois"]}),u.jsx("div",{className:"text-sm text-violet-600",children:"Factur mensuellement  Annulable  tout moment"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du titulaire de la carte"}),u.jsx("input",{type:"text",value:c,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500",placeholder:"Jean Dupont",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Informations de carte bancaire"}),u.jsx("div",{className:"border border-gray-300 rounded-md p-3 focus-within:ring-2 focus-within:ring-violet-500 focus-within:border-violet-500",children:u.jsx(W_,{options:w})})]}),p&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:u.jsx("div",{className:"text-red-800 text-sm",children:p})}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{type:"button",onClick:n,className:"flex-1 bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors duration-200",disabled:a,children:"Annuler"}),u.jsx("button",{type:"submit",className:"flex-1 bg-violet-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-violet-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a||!s,children:a?u.jsxs("div",{className:"flex items-center justify-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Traitement..."]}):`S'abonner pour ${(e.price_monthly/100).toFixed(2).replace(".",",")}/mois`})]}),u.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Vos informations de paiement sont scurises et cryptes. Vous pouvez annuler votre abonnement  tout moment."})]})},HU=({subscription:e,onCancel:t,onClose:n})=>{const[r,i]=R.useState(!1),[s,o]=R.useState(null);R.useEffect(()=>{a()},[]);const a=async()=>{try{const{totalTokens:d}=await bA(e.user_id);o({totalTokens:d})}catch(d){console.error("Erreur chargement tokens:",d)}},l=async()=>{if(confirm("tes-vous sr de vouloir annuler votre abonnement ? Il restera actif jusqu' la fin de la priode en cours.")){i(!0);try{await wA(e.user_id),alert("Votre abonnement a t annul. Il restera actif jusqu' la fin de la priode en cours."),t()}catch(d){console.error("Erreur annulation:",d),alert("Erreur lors de l'annulation de l'abonnement")}finally{i(!1)}}},c=d=>new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Gestion de l'abonnement"}),u.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[u.jsxs("div",{className:"text-green-800 font-medium",children:["Plan ",e.subscription_plans.name," actif"]}),u.jsxs("div",{className:"text-green-600 text-sm mt-1",children:["Prochaine facturation: ",c(e.current_period_end)]})]})]}),s&&u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[u.jsxs("div",{className:"text-blue-800 font-medium",children:["Tokens disponibles: ",s.totalTokens]}),u.jsxs("div",{className:"text-blue-600 text-sm mt-1",children:["Tokens utiliss ce mois: ",e.tokens_used_this_month||0]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Dtails de l'abonnement"}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[u.jsxs("div",{children:["Prix: ",(e.subscription_plans.price_monthly/100).toFixed(2).replace(".",","),"/mois"]}),u.jsxs("div",{children:["Dbut de priode: ",c(e.current_period_start)]}),u.jsxs("div",{children:["Fin de priode: ",c(e.current_period_end)]}),u.jsxs("div",{children:["Status: ",e.status==="active"?"Actif":e.status]})]})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors duration-200",children:"Fermer"}),u.jsx("button",{onClick:l,className:"flex-1 bg-red-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r||e.cancel_at_period_end,children:r?"Annulation...":"Annuler l'abonnement"})]}),e.cancel_at_period_end&&u.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:u.jsxs("div",{className:"text-orange-800 text-sm",children:[" Votre abonnement sera annul le ",c(e.current_period_end)]})})]})},WU=({isOpen:e,onClose:t,userId:n,userEmail:r})=>{const[i,s]=R.useState("plans"),[o,a]=R.useState(null),[l,c]=R.useState(null),[d,p]=R.useState(!0);R.useEffect(()=>{e&&n&&g()},[e,n]);const g=async()=>{try{const x=await vA(n);c(x)}catch(x){console.error("Erreur chargement abonnement:",x)}finally{p(!1)}},f=x=>{a(x),s("payment")},w=()=>{s("plans"),a(null),g(),alert(" Flicitations ! Votre abonnement a t activ avec succs.")},S=()=>{s("plans"),a(null)},k=()=>{s("plans"),a(null),t()};if(!e)return null;const v=u.jsx("div",{className:"subscription-modal-overlay",children:u.jsxs(Te.div,{className:"subscription-modal-content",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},children:[u.jsxs("div",{className:"subscription-modal-header",children:[u.jsx("h2",{children:l?"Mon abonnement":"Choisir un abonnement"}),u.jsx("button",{onClick:k,className:"subscription-modal-close","aria-label":"Fermer",children:""})]}),d?u.jsx("div",{className:"subscription-modal-loading",children:u.jsx("div",{className:"subscription-modal-spinner"})}):u.jsxs(u.Fragment,{children:[i==="plans"&&u.jsx(qU,{onSelectPlan:f,currentSubscription:l}),i==="payment"&&o&&u.jsx(j2,{stripe:zU,children:u.jsx(VU,{selectedPlan:o,onSuccess:w,onCancel:S,userId:n,userEmail:r})}),i==="management"&&l&&u.jsx(HU,{subscription:l,onCancel:g,onClose:k}),l&&i==="plans"&&u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:u.jsx("div",{className:"text-center",children:u.jsx("button",{onClick:()=>s("management"),className:"bg-violet-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-violet-700 transition-colors duration-200",children:"Grer mon abonnement"})})})]})]})});return Z6.createPortal(v,document.body)};const GU=({onLegalClick:e})=>u.jsx("footer",{className:"app-footer",children:u.jsxs("div",{className:"footer-content",children:[u.jsx("div",{className:"ai-notice",children:u.jsx("p",{children:"Les crations sont gnres par IA et peuvent contenir des erreurs."})}),u.jsxs("div",{className:"footer-links",children:[u.jsx("button",{className:"footer-link",onClick:()=>e("mentions"),children:"Mentions lgales"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("privacy"),children:"Confidentialit"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("cookies"),children:"Cookies"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("terms"),children:"CGU"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("contact"),children:"Contact"})]}),u.jsx("div",{className:"footer-info",children:u.jsxs("p",{children:[" ",new Date().getFullYear()," HERBBIE"]})})]})});const KU=({onClose:e,initialSection:t="mentions"})=>{const[n,r]=R.useState(t),[i,s]=R.useState({firstName:"",lastName:"",email:"",subject:"",message:""}),[o,a]=R.useState(!1),[l,c]=R.useState(""),d=[{id:"mentions",title:"Mentions Lgales",icon:""},{id:"privacy",title:"Confidentialit",icon:""},{id:"cookies",title:"Cookies",icon:""},{id:"terms",title:"Conditions d'utilisation",icon:""},{id:"contact",title:"Contact",icon:""}],p=()=>{switch(n){case"mentions":return g();case"privacy":return f();case"cookies":return w();case"terms":return S();case"contact":return x();default:return g()}},g=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Mentions Lgales"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Hbergement"}),u.jsxs("div",{className:"info-block",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Hbergeur :"})," Railway"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Adresse :"})," Railway, 1 Sentry Way, San Francisco, CA 94103, tats-Unis"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Site web :"})," ",u.jsx("a",{href:"https://railway.app",target:"_blank",rel:"noopener noreferrer",children:"railway.app"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Proprit intellectuelle"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"L'ensemble du contenu de ce site (textes, images, vidos, lments graphiques, logos, icnes, sons, logiciels) est la proprit exclusive de HERBBIE ou de ses partenaires, sauf mention contraire."}),u.jsx("p",{children:"Toute reproduction, distribution, modification ou exploitation commerciale, mme partielle, sans autorisation pralable crite de HERBBIE est strictement interdite et constituerait une contrefaon sanctionne par les articles L.335-2 et suivants du Code de la proprit intellectuelle."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Responsabilit"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE s'efforce d'assurer l'exactitude et la mise  jour des informations diffuses sur ce site, dont elle se rserve le droit de corriger,  tout moment et sans pravis, le contenu."}),u.jsx("p",{children:"Toutefois, HERBBIE ne peut garantir l'exactitude, la prcision ou l'exhaustivit des informations mises  disposition sur ce site. En consquence, HERBBIE dcline toute responsabilit :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Pour toute imprcision, inexactitude ou omission portant sur des informations disponibles sur le site"}),u.jsx("li",{children:"Pour tous dommages rsultant d'une intrusion frauduleuse d'un tiers ayant entran une modification des informations mises  disposition sur le site"}),u.jsx("li",{children:"Et plus gnralement pour tous dommages, directs ou indirects, quelles qu'en soient les causes, origines, natures ou consquences, provoqus  raison de l'accs de quiconque au site ou de l'impossibilit d'y accder"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Donnes personnelles"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Conformment  la loi n78-17 du 6 janvier 1978 relative  l'informatique, aux fichiers et aux liberts, vous disposez d'un droit d'accs, de rectification et de suppression des donnes vous concernant."}),u.jsxs("p",{children:["Pour exercer ce droit, vous pouvez nous contacter par email  l'adresse : ",u.jsx("span",{className:"email-protected personal-data",children:"contact@herbbie.com"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Cookies"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Le site HERBBIE utilise des cookies pour amliorer votre exprience utilisateur et raliser des statistiques de visite."}),u.jsx("p",{children:"Conformment  la rglementation, vous pouvez refuser le dpt de cookies en configurant votre navigateur."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"diteur du site"}),u.jsxs("div",{className:"info-block personal-data",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Dnomination sociale :"})," ",u.jsx("span",{className:"protect-personal-info",children:"HERBBIE"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Forme juridique :"})," ",u.jsx("span",{className:"protect-personal-info",children:"Auto-entreprise (en cours d'immatriculation)"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Adresse du sige social :"})," ",u.jsx("span",{className:"address-protected personal-data",children:"10 bis rue Flix Arnaudin, 40100 Dax"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Numro SIRET :"})," ",u.jsx("span",{className:"protect-personal-info",children:"En cours d'attribution"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Directeur de la publication :"})," ",u.jsx("span",{className:"name-protected personal-data",children:"Adrien Gaulin"})]})]})]})]}),f=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Politique de Confidentialit"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"1. Collecte des donnes personnelles"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Lors de votre utilisation du service HERBBIE, nous pouvons collecter les informations suivantes :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes de compte :"})," adresse email, nom d'utilisateur (si inscription)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes d'utilisation :"})," historique des crations, prfrences, statistiques d'usage"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes techniques :"})," adresse IP, type de navigateur, systme d'exploitation"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Contenu gnr :"})," les crations ralises via notre service (histoires, coloriages, etc.)"]})]}),u.jsx("p",{children:"La collecte de ces donnes est ncessaire pour :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Fournir nos services de gnration de contenu cratif"}),u.jsx("li",{children:"Amliorer la qualit de nos services"}),u.jsx("li",{children:"Assurer la scurit de la plateforme"}),u.jsx("li",{children:"Respecter nos obligations lgales"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"2. Utilisation des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Les donnes collectes sont utilises pour :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Fournir le service :"})," gnration de contenu personnalis, sauvegarde des crations"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Amlioration :"})," analyse des usages pour optimiser l'exprience utilisateur"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Communication :"})," envoi d'informations relatives au service, support client"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Scurit :"})," dtection et prvention des fraudes et activits malveillantes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Obligations lgales :"})," conservation des donnes requises par la loi"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"3. Partage des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE s'engage  ne pas vendre, louer ou commercialiser vos donnes personnelles."}),u.jsx("p",{children:"Les donnes peuvent tre partages uniquement dans les cas suivants :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Fournisseurs de services :"})," hbergeurs, prestataires techniques (sous contrat de confidentialit)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Obligations lgales :"})," sur demande des autorits comptentes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Protection des droits :"})," en cas de litige ou contentieux"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"4. Conservation des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Les donnes sont conserves pendant la dure ncessaire aux finalits pour lesquelles elles ont t collectes :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes de compte :"})," tant que le compte est actif + 3 ans aprs inactivation"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes d'utilisation :"})," 2 ans  compter de la collecte"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Contenu gnr :"})," tant que le compte est actif"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes de facturation :"})," 10 ans (obligation lgale)"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"5. Scurit des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE met en uvre des mesures techniques et organisationnelles appropries pour protger vos donnes personnelles contre :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"L'accs non autoris"}),u.jsx("li",{children:"L'utilisation illgitime"}),u.jsx("li",{children:"La perte ou destruction accidentelle"}),u.jsx("li",{children:"Toute forme de traitement illicite"})]}),u.jsx("p",{children:"Ces mesures incluent le chiffrement des donnes, des contrles d'accs stricts et des audits rguliers de scurit."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"6. Vos droits"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Conformment au RGPD, vous disposez des droits suivants :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Droit d'accs :"})," demander l'accs  vos donnes personnelles"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit de rectification :"})," demander la correction de donnes inexactes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit  l'effacement :"})," demander la suppression de vos donnes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit  la limitation :"})," demander la limitation du traitement"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit  la portabilit :"})," demander la rcupration de vos donnes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit d'opposition :"})," vous opposer au traitement de vos donnes"]})]}),u.jsxs("p",{children:["Pour exercer ces droits, contactez-nous  : ",u.jsx("span",{className:"email-protected personal-data",children:"contact@herbbie.com"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"7. Cookies et technologies similaires"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE utilise uniquement des cookies strictement essentiels au fonctionnement du service :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de session :"})," Maintien de votre connexion et scurit"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies d'authentification :"})," Mmorisation de votre identit"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de scurit :"})," Protection contre les menaces"]})]}),u.jsx("h4",{children:"Stockage et scurit des cookies :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Emplacement :"})," Stocks localement dans le navigateur (localStorage)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Dure de vie :"})," Sessions temporaires (supprims  la dconnexion)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Scurit :"})," Chiffrs et protgs contre les attaques CSRF"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Serveur :"})," Gestion automatique par Supabase avec scurit renforce"]})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Note :"})," Aucun cookie de fonctionnalit, analytique, de personnalisation ou publicitaire n'est utilis."]}),u.jsx("p",{children:"Les cookies essentiels sont automatiquement grs et exempts de consentement selon le RGPD."})]})]})]}),w=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Politique des Cookies"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"1. Qu'est-ce qu'un cookie ?"}),u.jsx("div",{className:"info-block",children:u.jsx("p",{children:"Un cookie est un petit fichier texte dpos sur votre terminal (ordinateur, tablette, smartphone) lors de la visite d'un site internet. Il permet de stocker des informations relatives  votre navigation et d'amliorer votre exprience utilisateur."})})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"2. Cookies utiliss par HERBBIE"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:u.jsx("strong",{children:"Conformment  la rglementation RGPD, HERBBIE utilise uniquement des cookies strictement essentiels ncessaires au fonctionnement du service."})}),u.jsx("h4",{children:"Cookies essentiels (obligatoires) :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de session :"})," Maintien de votre connexion et scurit pendant votre visite"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies d'authentification :"})," Mmorisation de votre identit pour viter de vous reconnecter"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de scurit :"})," Protection contre les attaques CSRF et autres menaces"]})]}),u.jsxs("div",{className:"alert alert-info",children:[u.jsx("strong",{children:"Note :"})," Aucun cookie de fonctionnalit, analytique, de personnalisation ou publicitaire n'est utilis sur ce site."]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"3. Gestion des cookies"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Les cookies essentiels utiliss par HERBBIE sont automatiquement grs et ne ncessitent pas d'action de votre part."}),u.jsx("h4",{children:"Via votre navigateur :"}),u.jsx("p",{children:"Si vous souhaitez supprimer les cookies essentiels (ce qui peut affecter le fonctionnement du site) :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Chrome :"})," Paramtres  Confidentialit et scurit  Cookies"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Firefox :"})," Prfrences  Vie prive et scurit  Cookies"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Safari :"})," Prfrences  Confidentialit  Grer les cookies"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Edge :"})," Paramtres  Cookies et autorisations de site"]})]}),u.jsx("h4",{children:"Dure de conservation :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de session :"})," Supprims automatiquement  la fermeture du navigateur"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies d'authentification :"})," Conservs pendant votre session active (maximum 24h)"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"4. Finalits des cookies"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE utilise uniquement des cookies essentiels pour :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Fonctionnement du service :"})," Maintien de la session utilisateur"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Scurit :"})," Scurisation des transactions et protection contre les menaces"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Prfrences essentielles :"})," Mmorisation des paramtres de base (langue)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Performance :"})," Optimisation du fonctionnement du site"]})]}),u.jsxs("div",{className:"alert alert-info",children:[u.jsx("strong",{children:"Note :"})," Aucun cookie n'est utilis pour l'analyse d'audience, le suivi utilisateur ou la personnalisation avance."]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"5. Cookies tiers"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE n'utilise pas de cookies tiers pour l'analyse, le suivi ou la publicit."}),u.jsx("p",{children:"Les services externes utiliss (comme les APIs d'IA) ne dposent pas de cookies sur votre navigateur."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"6. Consentement"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:u.jsx("strong",{children:"Conformment  la rglementation RGPD, les cookies essentiels utiliss par HERBBIE ne ncessitent pas de consentement explicite car ils sont strictement ncessaires au fonctionnement du service."})}),u.jsx("p",{children:"Ces cookies sont automatiquement activs pour garantir la scurit et le bon fonctionnement du site."}),u.jsx("p",{children:"Note : La dsactivation de ces cookies essentiels peut gravement affecter le fonctionnement du service."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"7. Mise  jour"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Cette politique des cookies peut tre mise  jour rgulirement pour reflter les volutions de nos services ou de la rglementation."}),u.jsx("p",{children:"La date de dernire modification est indique en bas de cette page."}),u.jsx("p",{children:"En cas de modification substantielle, nous vous en informerons via une notification sur le site."})]})]})]}),S=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Conditions d'utilisation"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"1. Objet du service"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE est une plateforme de gnration de contenu cratif destine aux enfants, utilisant l'intelligence artificielle pour crer :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Des histoires personnalises et ducatives"}),u.jsx("li",{children:"Des coloriages et activits cratives"}),u.jsx("li",{children:"Du contenu pdagogique adapt  chaque ge"}),u.jsx("li",{children:"Des expriences d'apprentissage ludiques"})]}),u.jsx("p",{children:"Le service est conu pour stimuler l'imagination et la crativit des enfants de manire scurise et ducative."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"2. Conditions d'accs"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"ge minimum :"}),u.jsx("p",{children:"Le service HERBBIE est accessible aux enfants de tous ges. Pour les enfants de moins de 13 ans, l'utilisation doit se faire sous la supervision d'un adulte responsable."}),u.jsx("h4",{children:"Inscription :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Les utilisateurs peuvent crer un compte gratuit"}),u.jsx("li",{children:"L'inscription ncessite une adresse email valide"}),u.jsx("li",{children:"Les mots de passe doivent tre scuriss"}),u.jsx("li",{children:"Une seule inscription par personne est autorise"})]}),u.jsx("h4",{children:"Utilisation acceptable :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Respect des autres utilisateurs"}),u.jsx("li",{children:"Utilisation dans un cadre ducatif et ludique"}),u.jsx("li",{children:"Interdiction de gnrer du contenu inappropri"}),u.jsx("li",{children:"Respect des droits d'auteur et proprit intellectuelle"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"3. Services et fonctionnalits"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Services gratuits :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Accs  un nombre limit de gnration par jour"}),u.jsx("li",{children:"Fonctionnalits de base de cration de contenu"}),u.jsx("li",{children:"Sauvegarde des crations pendant 30 jours"}),u.jsx("li",{children:"Support communautaire"})]}),u.jsx("h4",{children:"Services premium (optionnels) :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Gnrations illimites"}),u.jsx("li",{children:"Sauvegarde permanente des crations"}),u.jsx("li",{children:"Fonctionnalits avances"}),u.jsx("li",{children:"Support prioritaire"}),u.jsx("li",{children:"Contenu personnalis avanc"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"4. Rgles de conduite"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Interdictions :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Gnrer du contenu violent, haineux ou inappropri"}),u.jsx("li",{children:"Utiliser le service pour harceler ou intimider"}),u.jsx("li",{children:"Tenter de contourner les limitations techniques"}),u.jsx("li",{children:"Partager des informations personnelles d'autrui"}),u.jsx("li",{children:"Utiliser le service  des fins commerciales sans autorisation"}),u.jsx("li",{children:"Copier ou reproduire le contenu gnr par d'autres utilisateurs"})]}),u.jsx("h4",{children:"Obligations des utilisateurs :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Fournir des informations exactes lors de l'inscription"}),u.jsx("li",{children:"Respecter les droits d'auteur et la proprit intellectuelle"}),u.jsx("li",{children:"Signaler tout contenu inappropri"}),u.jsx("li",{children:"Maintenir la confidentialit de leurs identifiants"}),u.jsx("li",{children:"Utiliser le service de manire responsable"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"5. Proprit intellectuelle"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Contenu gnr :"}),u.jsx("p",{children:"Le contenu cr via HERBBIE appartient  l'utilisateur qui l'a gnr. L'utilisateur peut :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Tlcharger et utiliser ses crations  des fins personnelles"}),u.jsx("li",{children:"Partager ses crations dans un cadre familial ou ducatif"}),u.jsx("li",{children:"Modifier ses propres crations"})]}),u.jsx("h4",{children:"Plateforme HERBBIE :"}),u.jsx("p",{children:"Tous les lments de la plateforme (interface, algorithmes, design, etc.) restent la proprit exclusive de HERBBIE."}),u.jsx("h4",{children:"Contenu tiers :"}),u.jsx("p",{children:"Certains lments peuvent tre soumis  des licences tierces (polices, images, sons). L'utilisation doit respecter ces licences."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"6. Limitation de responsabilit"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE s'efforce de fournir un service de qualit, mais ne peut garantir :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"La disponibilit permanente du service (maintenance, pannes)"}),u.jsx("li",{children:"L'absence totale de bugs ou erreurs"}),u.jsx("li",{children:"L'adquation du contenu gnr  tous les besoins"}),u.jsx("li",{children:"La scurit absolue contre les cyberattaques"})]}),u.jsx("p",{children:"En aucun cas HERBBIE ne pourra tre tenu responsable :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Des dommages indirects ou conscutifs  l'utilisation du service"}),u.jsx("li",{children:"De la perte de donnes ou de crations"}),u.jsx("li",{children:"Des interruptions de service non planifies"}),u.jsx("li",{children:"Des actes de tiers (piratage, virus, etc.)"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"7. Rsiliation"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Par l'utilisateur :"}),u.jsx("p",{children:"L'utilisateur peut rsilier son compte  tout moment via les paramtres de son profil."}),u.jsx("h4",{children:"Par HERBBIE :"}),u.jsx("p",{children:"HERBBIE peut suspendre ou rsilier un compte en cas de :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Violation grave des conditions d'utilisation"}),u.jsx("li",{children:"Utilisation abusive du service"}),u.jsx("li",{children:"Non-paiement des services premium"}),u.jsx("li",{children:"Inactivit prolonge (plus de 2 ans)"})]}),u.jsx("h4",{children:"Consquences de la rsiliation :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Accs immdiat au service suspendu"}),u.jsx("li",{children:"Conservation des donnes pendant 30 jours"}),u.jsx("li",{children:"Suppression dfinitive aprs ce dlai"}),u.jsx("li",{children:"Possibilit de ractivation sous conditions"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"8. Modification des conditions"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE se rserve le droit de modifier ces conditions d'utilisation  tout moment."}),u.jsx("p",{children:"Les modifications seront notifies aux utilisateurs par email ou notification sur le site."}),u.jsx("p",{children:"La poursuite de l'utilisation du service aprs notification vaut acceptation des nouvelles conditions."}),u.jsx("p",{children:"En cas de dsaccord avec les modifications, l'utilisateur peut rsilier son compte."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"9. Droit applicable"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Ces conditions d'utilisation sont rgies par le droit franais."}),u.jsx("p",{children:"Tout litige relatif  l'interprtation ou l'excution de ces conditions sera soumis aux tribunaux comptents du ressort de Paris."}),u.jsx("p",{children:"En cas de traduction de ces conditions, seule la version franaise fait foi."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"10. Contact"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Pour toute question relative  ces conditions d'utilisation :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Email :"})," ",u.jsx("span",{className:"email-protected personal-data",children:"contact@herbbie.com"})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Objet :"}),' "Question CGU"']}),u.jsxs("li",{children:[u.jsx("strong",{children:"Dlai de rponse :"})," 48-72 heures"]})]})]})]})]}),k=(_,N)=>{s(O=>({...O,[_]:N}))},v=async _=>{_.preventDefault(),a(!0),c("");try{const N=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:i.firstName,lastName:i.lastName,email:i.email,subject:i.subject,message:i.message})});if(!N.ok){const U=await N.json();throw new Error(U.detail||"Erreur lors de l'envoi du message")}const O=await N.json();c(" Votre message a t envoy avec succs ! Nous vous rpondrons dans les plus brefs dlais."),s({firstName:"",lastName:"",email:"",subject:"",message:""})}catch(N){c(` Erreur lors de l'envoi : ${N.message}`)}finally{a(!1)}},x=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Contact"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:" Formulaire de contact"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Vous pouvez nous contacter directement en remplissant le formulaire ci-dessous :"}),u.jsxs("form",{className:"contact-form",onSubmit:v,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-firstName",children:"Prnom *"}),u.jsx("input",{type:"text",id:"contact-firstName",value:i.firstName,onChange:_=>k("firstName",_.target.value),required:!0,placeholder:"Votre prnom"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-lastName",children:"Nom *"}),u.jsx("input",{type:"text",id:"contact-lastName",value:i.lastName,onChange:_=>k("lastName",_.target.value),required:!0,placeholder:"Votre nom de famille"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-email",children:"Email *"}),u.jsx(gc,{value:i.email,onChange:_=>k("email",_.target.value),placeholder:"votre.email@exemple.com",required:!0,user:null,onEmailSubmit:()=>{}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-subject",children:"Sujet *"}),u.jsxs("select",{id:"contact-subject",value:i.subject,onChange:_=>k("subject",_.target.value),required:!0,children:[u.jsx("option",{value:"",children:"Choisissez un sujet"}),u.jsx("option",{value:"Support technique",children:" Support technique"}),u.jsx("option",{value:"Question gnrale",children:" Question gnrale"}),u.jsx("option",{value:"Partenariat",children:" Partenariat"}),u.jsx("option",{value:"Signaler un bug",children:" Signaler un bug"}),u.jsx("option",{value:"Suggestion",children:" Suggestion"}),u.jsx("option",{value:"Autre",children:" Autre"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-message",children:"Message *"}),u.jsx("textarea",{id:"contact-message",value:i.message,onChange:_=>k("message",_.target.value),required:!0,placeholder:"Dcrivez votre demande en dtail...",rows:"5"})]}),l&&u.jsx("div",{className:`submit-message ${l.includes("")?"success":"error"}`,children:l}),u.jsx("button",{type:"submit",className:"contact-submit-btn",disabled:o,children:o?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"spinner"}),"Envoi en cours..."]}):u.jsx(u.Fragment,{children:" Envoyer l'email"})})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Informations de contact"}),u.jsxs("div",{className:"info-block personal-data",children:[u.jsxs("p",{children:[u.jsx("strong",{children:" Email :"})," ",u.jsx("a",{href:"mailto:contact@herbbie.com",className:"email-protected",children:u.jsx("span",{className:"personal-data",children:"contact@herbbie.com"})})]}),u.jsxs("p",{children:[u.jsx("strong",{children:" Nom de l'entreprise :"})," ",u.jsx("span",{className:"protect-personal-info",children:"HERBBIE"})]})]})]})]});return u.jsx(Te.div,{className:"legal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:e,children:u.jsxs(Te.div,{className:"legal-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},onClick:_=>_.stopPropagation(),children:[u.jsxs("div",{className:"legal-header",children:[u.jsx("h1",{children:" Informations Lgales"}),u.jsx("button",{className:"close-button",onClick:e,children:""})]}),u.jsxs("div",{className:"legal-body",children:[u.jsx("nav",{className:"legal-nav",children:d.map(_=>u.jsxs("button",{className:`nav-item ${n===_.id?"active":""}`,onClick:()=>r(_.id),children:[u.jsx("span",{className:"nav-icon",children:_.icon}),u.jsx("span",{className:"nav-title",children:_.title})]},_.id))}),u.jsx("div",{className:"legal-main",children:u.jsx(Hi,{mode:"wait",children:u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:p()},n)})})]})]})})};const JU=()=>{const[e,t]=R.useState([]);return R.useEffect(()=>{const n=r=>{const i=Math.random()*1799.5+.5;setTimeout(()=>{const s={id:Date.now()+r,index:r,duration:Math.random()*2+1};t(o=>[...o,s]),setTimeout(()=>{t(o=>o.filter(a=>a.id!==s.id))},s.duration*1e3),n(r)},i*1e3)};for(let r=0;r<10;r++)setTimeout(()=>n(r),Math.random()*5e3);return()=>{t([])}},[]),u.jsx("section",{className:"shooting-stars-container",children:e.map(n=>u.jsx("span",{className:`shooting-star star-${n.index+1}`,style:{animationDuration:`${n.duration}s`}},n.id))})},Gl=(e,t,n="")=>{const r={comptine:{animaux:["Les Amis de la Fort","La Danse des Animaux","Mes Amis les Animaux","Le Grand Bal des Animaux"],nature:["Les Fleurs Magiques","L'Aventure dans les Bois","Les Secrets du Jardin","La Fte de la Nature"],transport:["Le Train des Copains","L'Aventure en Voiture","Le Voyage Fantastique","En Route pour l'Aventure"],couleurs:["L'Arc-en-Ciel Magique","Le Monde des Couleurs","La Danse des Couleurs","Mon Joli Tableau"],famille:["Ma Famille d'Amour","Tous Ensemble","Les Clins de Famille","Mon Coeur de Famille"],default:["Ma Jolie Comptine","Chanson du Bonheur","Ma Petite Mlodie","Comptine Rigolote"]},histoire:{aventure:["La Grande Aventure","Voyage Extraordinaire","Mission Secrte","L'Aventure Fantastique"],animaux:["Les Amis de la Fort","L'Histoire des Petits Animaux","Mes Copains Animaux","La Famille Animaux"],magie:["Le Monde Magique","L'Aventure Enchante","Le Secret Magique","La Fe et ses Amis"],amiti:["Les Meilleurs Amis","Une Belle Amiti","Copains pour la Vie","L'Amiti Magique"],espace:["Voyage dans les toiles","L'Aventure Spatiale","Les Amis de l'Espace","Mission sur la Lune"],default:["Mon Belle Histoire","Conte Merveilleux","Histoire Fantastique","Rcit d'Aventure"]},coloriage:{animaux:["Mes Amis Animaux","Zoo Rigolo","Famille Animaux","Copains de la Fort"],licorne:["Licorne Magique","Princesse Licorne","Pays des Licornes","Licorne Arc-en-Ciel"],dinosaures:["Dino Rigolo","Mes Amis Dinosaures","Parc des Dinosaures","T-Rex et ses Copains"],nature:["Jardin Fleuri","Fort Enchante","Promenade Nature","Fleurs et Papillons"],espace:["Voyage Spatial","Plantes Rigolotes","Astronaute en Mission","toiles et Fuses"],vhicules:["Mes Voitures","Garage Rigolo","Course Automobile","Train et Avions"],default:["Mon Coloriage","Dessin Rigolo","Art Cratif","Belle Image"]},animation:{aventure:["Mon Dessin Anim","Animation Magique","Film d'Aventure","Cinma Fantastique"],animaux:["Mes Amis Anims","Zoo en Mouvement","Aventures Animales","Cirque des Animaux"],magie:["Monde Enchant","Magie en Mouvement","Film de Fe","Animation Magique"],espace:["Voyage Anim","Aventure Spatiale","Film de l'Espace","Mission Animation"],nature:["Fort Anime","Jardin en Mouvement","Nature Vivante","Fleurs Dansantes"],default:["Mon Film IA","Dessin Anim IA","Animation Crative","Film Personnalis"]}},i=r[e]||r.histoire,s=i[t]||i.default||i.aventure,o=Math.floor(Math.random()*s.length);return s[o]};function YU(e,t=600){const n=e.split(new RegExp("(?<=[.?!])\\s+")),r=[];let i="";for(const s of n)(i+s).length>t?(r.push(i.trim()),i=s+" "):i+=s+" ";return i.trim()&&r.push(i.trim()),r}function ZU(){const[e,t]=R.useState("animation"),[n,r]=R.useState(null),[i,s]=R.useState(""),[o,a]=R.useState(!0),[l,c]=R.useState(""),[d,p]=R.useState(""),[g,f]=R.useState(null),[w,S]=R.useState(""),[k,v]=R.useState(null),[x,_]=R.useState(""),[N,O]=R.useState(!1),[U,q]=R.useState(null);R.useState(!1);const[F,M]=R.useState(!1),[G,P]=R.useState(!1),[L,Y]=R.useState(!1),[V,ae]=R.useState(!1),[de,ce]=R.useState(null),[J,ie]=R.useState(""),[te,se]=R.useState(null),[A,z]=R.useState(null),[B,X]=R.useState(null),[ee,oe]=R.useState(null),[ge,he]=R.useState(null),[me,Se]=R.useState(null),[Pe,Le]=R.useState(""),[ve,Z]=R.useState(null),[st,ht]=R.useState(null),[rt,Ne]=R.useState(!1);R.useEffect(()=>{e==="comic"&&(he(null),Se(null))},[e]);const[Me,Oe]=R.useState(null),[ot,Ke]=R.useState(30),[At,Ae]=R.useState(null),[Ie,yt]=R.useState(""),[mt,tt]=R.useState(null),[He,Qe]=R.useState(null),[Zt,Rt]=R.useState(null),[Je,gt]=R.useState(!1),[Vt,at]=R.useState(!1),[Et,wt]=R.useState(null);R.useState("user"),R.useState(!1);const[vn,jn]=R.useState("Gnrer"),[Ut,ut]=R.useState(!1),[Dt,_s]=R.useState(!1),[ir,Yi]=R.useState("mentions"),si=De=>new Promise(_e=>setTimeout(_e,De)),lt=async(De,{intervalMs:_e=5e3,maxAttempts:$e=240}={})=>{let Nt=0;for(;Nt<$e;){try{const Be=await fetch(`${Wn}/status/${De}`);if(Be.ok){const nt=await Be.json();if((nt==null?void 0:nt.type)==="result"){const Re=nt.data;if((Re==null?void 0:Re.status)==="completed"&&Re!=null&&Re.clips&&Re.clips.length>0)return Re;if((Re==null?void 0:Re.status)==="failed")throw new Error((Re==null?void 0:Re.error_message)||"Gnration choue")}}}catch{}Nt+=1,await si(_e)}throw new Error("Timeout de gnration de l'animation")},Zi=async(De,{intervalMs:_e=5e3,maxAttempts:$e=180}={})=>{let Nt=0;for(;Nt<$e;){try{const Be=await fetch(`${Wn}/status_comic/${De}`);if(Be.ok){const nt=await Be.json();if((nt==null?void 0:nt.type)==="result"){const Re=nt.data;if(((Re==null?void 0:Re.status)==="completed"||(Re==null?void 0:Re.status)==="success")&&Re!=null&&Re.pages&&Re.pages.length>0)return Re;if((Re==null?void 0:Re.status)==="failed")throw new Error((Re==null?void 0:Re.error)||"Gnration choue")}}}catch{}Nt+=1,await si(_e)}throw new Error("Timeout de gnration de la BD")},Xi=async De=>{try{const _e=new FormData;_e.append("file",De);const $e=await fetch(`${Wn}/upload_character_photo/`,{method:"POST",body:_e});if(!$e.ok)throw new Error(`Erreur upload : ${$e.status}`);const Nt=await $e.json();return Z(Nt),Nt}catch(_e){throw _e}},[Vr,wr]=R.useState(null),{user:ft,loading:zn}=_2(),[Jn,oi]=R.useState(!1),[ai,Hr]=R.useState(!1);R.useMemo(()=>e==="audio"&&(U!=null&&U.content)?YU(U.content):[],[U,e]);const[Qi,li]=R.useState(0);R.useEffect(()=>{window.location.hash==="#historique"&&oi(!0);const De=()=>{oi(window.location.hash==="#historique")};return window.addEventListener("hashchange",De),()=>window.removeEventListener("hashchange",De)},[]),R.useEffect(()=>{(async()=>{if(ft){const _e=await pA(ft.id,ft.email);Hr(_e),es(_e)}else Hr(!1),es(!1)})()},[ft,e]),R.useEffect(()=>{r(null),s(""),a(!0),c(""),p(""),f(null),S(""),v(null),ce(null),ie(""),se(null),X(null),oe(null),he(null),Se(null),Le(""),Z(null),ht(null),Oe(null),Ke(30),Ae(null),yt(""),Qe(null),q(null),z(null),Rt(null),wr(null)},[e]);const ci=async De=>{ae(!1),setTimeout(()=>{ae(!0),O(!1)},5e4)};R.useEffect(()=>{e==="animation"&&!Me&&Oe(null)},[e,Me]);const Rr=Me||"space",es=De=>{if(console.log(" updateButtonText appel:",{adminStatus:De,contentType:e,selectedVoice:k,selectedDuration:ot,numPages:me}),De)jn("Gnrer Gratuitement");else{let _e={};e==="animation"?_e.duration=ot:e==="comic"||e==="bd"?_e.pages=me||1:(e==="histoire"||e==="story"||e==="audio")&&(_e.voice=k),console.log(" Options pour getContentPrice:",{contentType:e,options:_e});const $e=Cm(e,_e);console.log(" Prix calcul:",$e),jn(`Acheter pour ${$e.display}`)}};R.useEffect(()=>{es(ai)},[k,ot,me,e,ai]);const Ri=async()=>{if(!ft){alert("Vous devez tre connect pour gnrer du contenu");return}if(ai){ts();return}try{const De={};e==="animation"?De.selectedDuration=ot:e==="comic"||e==="bd"?De.numPages=me||1:(e==="histoire"||e==="story"||e==="audio")&&(De.selectedVoice=k);const{data:_e,error:$e}=await Pt.functions.invoke("check-permission",{body:{contentType:e,userId:ft.id,userEmail:ft.email,...De}});if($e){console.error("Erreur vrification permission:",$e),alert("Erreur lors de la vrification des permissions. Veuillez ressayer.");return}if(_e.hasPermission)ts();else{wt(e),at(!0);return}}catch(De){console.error("Erreur lors de l'appel  check-permission:",De),alert("Erreur de vrification des permissions. Veuillez ressayer.");return}},ts=async()=>{var De;if(O(!0),q(null),!zn)try{let _e=null;if(e==="rhyme"){const Be={theme:n==="custom"?i:n,custom_request:x,language:"fr"},nt=await fetch(`${Wn}/generate_rhyme/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(!nt.ok)throw new Error(`Erreur HTTP : ${nt.status}`);_e=await nt.json()}else if(e==="audio"||e==="histoire"&&k){const Be={story_type:g==="custom"?w:g,voice:k,custom_request:x},nt=await fetch(`${Wn}/generate_audio_story/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(!nt.ok)throw new Error(`Erreur HTTP : ${nt.status}`);_e=await nt.json()}else if(e==="histoire"){let Be;if(He&&He!=="custom"?Be={space:"Une aventure spatiale extraordinaire o un enfant explore les plantes lointaines et rencontre des aliens amicaux.",ocean:"Une exploration sous-marine magique avec des cratures marines colores et des trsors cachs au fond de l'ocan.",dinosaur:"Un voyage dans le temps  l'poque des dinosaures o un enfant devient ami avec un dinosaure gentil et dcouvre un monde prhistorique.",fairy:"Un conte de fes enchanteur avec des fes bienveillantes, des chteaux magiques et des aventures pleines de poussire de fe.",superhero:"Une histoire de super-hros o un enfant dcouvre ses pouvoirs extraordinaires et sauve la ville avec courage et bont.",jungle:"Une aventure dans la jungle tropicale remplie d'animaux exotiques, de plantes mystrieuses et de dcouvertes passionnantes."}[He]||`Une belle histoire sur le thme ${He}`:Be=Ie,!Be||Be.trim().length<10)throw new Error("L'histoire doit contenir au moins 10 caractres");const nt={story_type:He==="custom"?"custom":He,content:Be,custom_request:x},Re=await fetch(`${Wn}/generate_story/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(!Re.ok)throw new Error(`Erreur HTTP : ${Re.status}`);_e=await Re.json()}else if(e==="coloring")if(te){const Be=new FormData;Be.append("file",te);const nt=await fetch(`${Wn}/upload_photo_for_coloring/`,{method:"POST",body:Be});if(!nt.ok)throw new Error(`Erreur upload : ${nt.status}`);const $t={photo_path:(await nt.json()).file_path,with_colored_model:B},qn=await fetch(`${Wn}/convert_photo_to_coloring/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($t)});if(!qn.ok)throw new Error(`Erreur conversion : ${qn.status}`);const sr=await qn.json();z(sr),_e=sr}else{const Be={theme:de,with_colored_model:B};de==="custom"&&J.trim()&&(Be.custom_prompt=J.trim());const nt=await fetch(`${Wn}/generate_coloring/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(!nt.ok)throw new Error(`Erreur HTTP : ${nt.status}`);const Re=await nt.json();z(Re),_e=Re}else if(e==="comic"){const Be={theme:ee==="custom"?Pe:ee,art_style:ge||"cartoon",num_pages:me||1};ee==="custom"&&Pe.trim()&&(Be.custom_prompt=Pe.trim()),ve&&ve.file_path&&(Be.character_photo_path=ve.file_path);const nt=await fetch(`${Wn}/generate_comic/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(!nt.ok)throw new Error(`Erreur HTTP : ${nt.status}`);const Re=await nt.json();let $t=Re;const qn=Re==null?void 0:Re.task_id,sr=(Re==null?void 0:Re.status)==="success"&&(Re==null?void 0:Re.pages)&&Re.pages.length>0;qn&&!sr&&($t=await Zi(qn)),$t!=null&&$t.pages&&$t.pages.length>0&&(ht($t),_e=$t)}else if(e==="animation"){let Be;const nt=Me||"space";if(nt&&nt!=="custom"?Be={magie:"Une histoire magique avec des cratures fantastiques dans un monde enchant",aventure:"Une grande aventure pleine de dcouvertes et de rebondissements",animaux:"Une histoire mettant en scne des animaux adorables et leurs aventures",espace:"Un voyage extraordinaire  travers les toiles et les plantes",nature:"Une exploration merveilleuse de la nature et de ses secrets",amiti:"Une belle histoire d'amiti et de solidarit",famille:"Une histoire touchante sur les liens familiaux"}[nt]||`Une belle histoire sur le thme ${nt}`:Be=Ie,!Be||Be.trim().length<10)throw new Error("L'histoire doit contenir au moins 10 caractres");const $t={magie:"magic",aventure:"adventure",animaux:"animals",espace:"space",nature:"nature",amiti:"friendship",famille:"friendship"}[nt]||nt||"adventure",qn={theme:$t,duration:Number(ot),custom_prompt:Be||void 0},sr=ot||30,Ht=`${Wn}/generate-quick?theme=${encodeURIComponent($t)}&duration=${sr}&style=${At||"cartoon"}&custom_prompt=${encodeURIComponent(Be||"")}`,Wr=await fetch(Ht,{method:"GET",headers:{Accept:"application/json"}});if(!Wr.ok){const zt=await Wr.text();throw new Error(`Erreur HTTP ${Wr.status}: ${zt}`)}const cn=await Wr.json();let rn=cn;const Tn=cn==null?void 0:cn.task_id,ui=(cn==null?void 0:cn.status)==="completed"&&((cn==null?void 0:cn.final_video_url)||(((De=cn==null?void 0:cn.clips)==null?void 0:De.length)||0)>0);Tn&&!ui&&(rn=await lt(Tn)),(rn==null?void 0:rn.status)==="completed"&&(rn!=null&&rn.clips)&&rn.clips.length>0&&(Rt(rn),gt(!0),_e=rn)}if(q(_e),li(0),e==="rhyme"&&_e.task_id){Al(_e.task_id);return}let $e;e==="rhyme"?_e.title&&!_e.title.includes("gnre")?$e=_e.title+(_e.has_music?" ":""):$e=Gl("comptine",n==="custom"?"default":n)+(_e.has_music?" ":""):e==="audio"?_e.title&&!_e.title.includes("gnre")?$e=_e.title:$e=Gl("histoire",g==="custom"?"default":g):e==="coloring"?$e=(_e==null?void 0:_e.title)||Gl("coloriage",de):e==="comic"?$e=(st==null?void 0:st.title)||"Ma Bande Dessine ":e==="animation"?$e=(_e==null?void 0:_e.title)||Gl("animation",Rr||"aventure"):e==="histoire"&&($e=(_e==null?void 0:_e.title)||Gl("histoire",He==="custom"?"default":He)),wr($e);let Nt;e==="coloring"?Nt={id:Date.now().toString(),type:e,title:$e,createdAt:new Date().toISOString(),content:_e?`${_e.total_images} coloriage(s) gnr(s)`:"Coloriage gnr",theme:de,images:(_e==null?void 0:_e.images)||[],metadata:(_e==null?void 0:_e.metadata)||{}}:e==="comic"?Nt={id:Date.now().toString(),type:e,title:$e,createdAt:new Date().toISOString(),content:st?`BD de ${st.total_pages} planche(s) - ${st.total_pages*4} cases`:"Bande dessine gnre",theme:ee,pages:(st==null?void 0:st.pages)||[],comic_data:st||{}}:e==="animation"?Nt={id:Date.now().toString(),type:e,title:$e,createdAt:new Date().toISOString(),content:_e?`Animation de ${_e.actual_duration}s avec ${_e.total_scenes} scnes`:"Animation gnre",theme:Rr,clips:(_e==null?void 0:_e.clips)||[],animation_data:_e||{}}:e==="histoire"?Nt={id:Date.now().toString(),type:e,title:$e,createdAt:new Date().toISOString(),content:(_e==null?void 0:_e.content)||_e||"Histoire gnre...",story_type:He==="custom"?"custom":He}:Nt={id:Date.now().toString(),type:e,title:$e,createdAt:new Date().toISOString(),content:(_e==null?void 0:_e.content)||_e||"Contenu gnr...",audio_path:(_e==null?void 0:_e.audio_path)||null};try{await M_({type:e,title:$e,data:Nt})}catch{}if(!ai&&_e)try{const{calculateTokenCost:Be,deductTokens:nt}=await ed(()=>Promise.resolve().then(()=>sU),void 0);let Re={};e==="animation"?Re.duration=ot:(e==="comic"||e==="bd")&&(Re.pages=me||1),(e==="audio"||e==="histoire"&&k)&&(Re.voice=k);const $t=Be(e,Re),qn=await nt(ft.id,e,$t,{...Re,transactionId:`gen_${Date.now()}_${e}`});console.log(" Tokens dduits avec succs:",qn)}catch(Be){console.error(" Erreur lors de la dduction des tokens:",Be)}O(!1)}catch(_e){alert(` Erreur lors de la gnration : ${_e.message}

 Conseil : Vrifiez que les cls API sont configures dans le fichier .env du serveur.`),O(!1)}},So=De=>{var _e,$e,Nt,Be,nt;De.action==="showStory"?(q({title:De.title,content:De.content||((_e=De.data)==null?void 0:_e.content)||"",type:De.type}),M(!0)):De.action==="showColoring"?(z({success:!0,theme:De.theme||(($e=De.data)==null?void 0:$e.theme)||"coloriage",images:De.images||((Nt=De.data)==null?void 0:Nt.images)||[],total_images:(De.images||((Be=De.data)==null?void 0:Be.images)||[]).length,metadata:De.metadata||((nt=De.data)==null?void 0:nt.metadata)||{}}),P(!0)):(oi(!1),window.location.hash="")},qs=()=>{oi(!1),window.location.hash=""},ko=()=>{if(e==="rhyme"){if(!n||n==="custom"&&!i.trim())return!1}else if(e==="audio"){if(!g||g==="custom"&&!w.trim())return!1}else if(e==="coloring"){if(!de&&!te||de==="custom"&&!J.trim()||B===null)return!1}else if(e==="comic"){if(!ee||!ge||!me||ee==="custom"&&!Pe.trim())return!1}else if(e==="animation"){if(!Me&&!Ie.trim()||Me==="custom"&&!Ie.trim()||Me==="custom"&&Ie.trim().length<10)return!1}else if(e==="histoire"&&(!He||He==="custom"&&!Ie.trim()||He==="custom"&&Ie.trim().length<10))return!1;return!0},Vs={hidden:{opacity:0,height:0,marginBottom:0},visible:{opacity:1,height:"auto",marginBottom:"1rem"},exit:{opacity:0,height:0,marginBottom:0}},ka=async(De,_e)=>{if(!(!_e||typeof _e!="string"))try{const $e=new Xe({orientation:"p",unit:"mm",format:"a4"}),Nt=50,Be=210,nt=297,Re=6,$t=Math.floor((nt-Nt-30)/Re),qn=rn=>new Promise((Tn,ui)=>{const zt=new Image;zt.crossOrigin="anonymous",zt.onload=()=>Tn(zt),zt.onerror=()=>ui(new Error("Impossible de charger l'image de fond")),zt.src=rn});let sr=null;try{sr=await qn("/assets/fond.png?v=1")}catch{}let Ht=De;_e.startsWith("**")&&_e.includes("**",2)&&(Ht=_e.split("**")[1].trim(),_e=_e.replace(`**${Ht}**`,"").trim());const Ss=$e.splitTextToSize(_e,150);let Wr=0;for(let rn=0;Wr<Ss.length;rn++){if(rn>0&&$e.addPage(),sr)try{$e.addImage(sr,"PNG",0,0,Be,nt,void 0,"FAST")}catch{}rn===0&&($e.setFont("courier","bold"),$e.setFontSize(18),$e.setTextColor(110,50,230),$e.text(Ht,Be/2,Nt-20,{align:"center"})),$e.setFont("courier","bold"),$e.setFontSize(10),$e.setTextColor(25,25,112);for(let Tn=0;Tn<$t&&Wr<Ss.length;Tn++,Wr++){const ui=Nt+Tn*Re;$e.text(Ss[Wr],Be/2,ui,{align:"center"})}$e.setFontSize(8),$e.setTextColor(106,90,205),$e.text(`Page ${rn+1}`,Be-15,nt-10,{align:"right"})}const cn=Ht.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");$e.save(`${cn}.pdf`)}catch{alert("Erreur lors de la gnration du PDF. Veuillez ressayer.")}},Al=async(De,_e=40,$e=5e3)=>{let Nt=0;const Be=async()=>{try{const Re=await(await fetch(`${Wn}/check_task_status/${De}`)).json();if(Re.status==="completed")return q($t=>{const qn={...$t,audio_path:Re.audio_path,suno_url:Re.suno_url,title:Re.title||$t.title,has_music:!0,service:"suno"},sr=Re.title||$t.title||Gl("comptine",n==="custom"?"default":n)+" ";wr(sr);const Ht={id:Date.now().toString(),type:"rhyme",title:sr,createdAt:new Date().toISOString(),content:$t.content||$t.rhyme||"Comptine gnre",audio_path:Re.audio_path,suno_url:Re.suno_url};return M_({type:"rhyme",title:sr,data:Ht}).catch(Ss=>{}),qn}),Re.suno_url?(ci(Re.suno_url),!0):(O(!1),!0);if(Re.status==="failed")return q($t=>({...$t,music_error:Re.error,has_music:!1})),O(!1),!0;if(Re.status!=="processing"){if(Nt>=_e-1)return O(!1),alert(" La gnration de musique prend plus de temps que prvu. Veuillez vrifier votre historique dans quelques minutes."),!0}return Nt++,setTimeout(Be,$e),!1}catch{return Nt++,Nt<_e&&setTimeout(Be,$e),!1}};await Be()};return u.jsxs("div",{className:"app-container",children:[u.jsx(_B,{isLoggedIn:!!ft,onOpenHistory:()=>oi(!0),userId:ft==null?void 0:ft.id,onOpenSubscription:()=>ut(!0)}),u.jsx(JU,{}),u.jsx("main",{className:"main-content",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs(Te.div,{className:"creation-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["          ",u.jsx(PB,{contentType:e,setContentType:t}),"          ",u.jsx(Hi,{mode:"wait",children:e==="rhyme"?u.jsx(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{width:"100%"},children:u.jsx(TB,{selectedRhyme:n,setSelectedRhyme:r,customRhyme:i,setCustomRhyme:s})},"rhyme-selector"):e==="audio"?u.jsx(Te.div,{variants:Vs,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(OB,{selectedAudioStory:g,setSelectedAudioStory:f,customAudioStory:w,setCustomAudioStory:S,selectedVoice:k,setSelectedVoice:v})},"audio-story-selector"):e==="coloring"?u.jsxs(Te.div,{variants:Vs,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:["                ",u.jsx(JB,{selectedTheme:de,setSelectedTheme:ce,customColoringTheme:J,setCustomColoringTheme:ie,uploadedPhoto:te,setUploadedPhoto:se,withColoredModel:B,setWithColoredModel:X})]},"coloring-selector"):e==="comic"?u.jsx(Te.div,{variants:Vs,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(ZB,{selectedTheme:ee,setSelectedTheme:oe,selectedStyle:ge,setSelectedStyle:he,numPages:me,setNumPages:Se,customStory:Pe,setCustomStory:Le,characterPhoto:ve,setCharacterPhoto:Z,onCharacterPhotoUpload:Xi})},"comics-selector"):e==="animation"?u.jsx(Te.div,{variants:Vs,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(MB,{selectedTheme:Me,setSelectedTheme:Oe,selectedDuration:ot,setSelectedDuration:Ke,selectedStyle:At,setSelectedStyle:Ae,customStory:Ie,setCustomStory:yt,characterImage:mt,setCharacterImage:tt})},"animation-selector"):e==="histoire"?u.jsx(Te.div,{variants:Vs,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(DB,{selectedStory:He,setSelectedStory:Qe,customStory:Ie,setCustomStory:yt})},"story-selector"):null}),"          ",u.jsx(UB,{customRequest:x,setCustomRequest:_,stepNumber:e==="coloring"?4:3}),u.jsx($B,{onGenerate:Ri,isGenerating:N,isDisabled:!ko(),contentType:e,buttonText:vn})]}),u.jsx("div",{className:"preview-column",children:u.jsx(Te.div,{className:"preview-panel",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:u.jsx("div",{className:"preview-container",children:u.jsx("div",{className:`preview ${U?"":"empty"}`,children:u.jsx(Hi,{mode:"wait",children:N?u.jsxs(Te.div,{className:"generating-animation",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[u.jsxs("div",{className:"loading-dots",children:[u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"})]}),"      ",u.jsxs("p",{children:["        ",e==="rhyme"?"Votre comptine est en cours de cration...":e==="audio"?"Cration de l'histoire en cours...":e==="histoire"?"Cration de votre histoire en cours...":e==="coloring"?"Votre coloriage est en cours de cration...":e==="comic"?"Cration de votre bande dessine en cours...":e==="animation"?"Cration de votre dessin anim en cours...":"Gnration en cours..."]})]},"generating"):A&&e==="coloring"?u.jsxs(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[u.jsx("button",{onClick:()=>P(!0),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Ouvrir le coloriage"}),u.jsx("button",{onClick:()=>Y(!0),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Colorier maintenant"}),u.jsx("button",{onClick:()=>{if(A!=null&&A.images){const De=`coloriages_${A.theme||de||"generes"}`;k2(A.images,De)}},style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Tlcharger le coloriage"})]},"coloring-result"):st&&e==="comic"?u.jsxs(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem",padding:"1rem"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[u.jsx("h3",{style:{color:"var(--primary)",marginBottom:"0.5rem"},children:st.title||"Votre Bande Dessine"}),u.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[st.total_pages," ",st.total_pages===1?"planche":"planches","  ",st.total_pages*4," cases"]})]}),u.jsx("button",{onClick:()=>Ne(!0),style:{padding:"0.8rem 2rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",boxShadow:"0 4px 12px rgba(245, 240, 255, 0.3)",transition:"all 0.2s ease"},onMouseOver:De=>De.target.style.transform="translateY(-2px)",onMouseOut:De=>De.target.style.transform="translateY(0)",children:" Lire la bande dessine"})]},"comics-result"):U&&e==="rhyme"&&U.suno_url&&V?u.jsx(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs("div",{style:{height:"300px",maxWidth:"500px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.8rem",padding:"0.5rem",overflowY:"auto"},children:[U.suno_url&&V&&u.jsx(u.Fragment,{children:u.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"15px",border:"2px solid #dee2e6",width:"100%",maxWidth:"100%",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",overflow:"hidden"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"9px 50px 0px"},children:u.jsx("h4",{style:{margin:0,fontSize:"15px",color:"#333",fontWeight:"600"},children:"Votre comptine est prte !"})}),u.jsx("audio",{controls:!0,preload:"metadata",controlsList:"nodownload",style:{width:"100%",outline:"none"},src:U.suno_url,children:"Votre navigateur ne supporte pas l'lment audio."})]})}),U.suno_url&&V&&u.jsx(u.Fragment,{children:u.jsx("button",{onClick:async()=>{if(U.suno_url&&V)try{const De=await fetch(U.suno_url);if(!De.ok)throw new Error(`Erreur HTTP: ${De.status}`);const _e=await De.blob();if(_e.size===0)throw new Error("Fichier audio indisponible");const $e=window.URL.createObjectURL(_e),Nt=(Vr||U.title||"comptine").replace(/[^a-z0-9]/gi,"_").toLowerCase(),Be=document.createElement("a");Be.href=$e,Be.download=`${Nt}.mp3`,Be.style.display="none",document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),setTimeout(()=>window.URL.revokeObjectURL($e),100)}catch(De){alert(`Erreur lors du tlchargement: ${De.message}`)}},disabled:!V,style:{padding:"0.8rem 2rem",backgroundColor:V?"#6B4EFF":"#ccc",color:V?"#fff":"#666",border:"none",borderRadius:"10px",cursor:V?"pointer":"not-allowed",fontWeight:"600",fontSize:"14px",marginTop:"0.8rem",boxShadow:V?"0 4px 12px rgba(245, 240, 255, 0.3)":"none",transition:"all 0.3s ease"},onMouseOver:De=>V&&(De.target.style.transform="translateY(-2px)"),onMouseOut:De=>V&&(De.target.style.transform="translateY(0)"),children:V?" Tlcharger":" Prparation du tlchargement..."})})]})},"rhyme-result"):U&&e==="audio"?u.jsx(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs("div",{style:{height:"300px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",padding:"1rem",overflowY:"auto"},children:[U.audio_path&&u.jsx("div",{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",padding:"22px",borderRadius:"15px",border:"2px solid #dee2e6",width:"100%",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:u.jsx("audio",{controls:!0,preload:"metadata",controlsList:"nodownload",style:{width:"100%",height:"40px",outline:"none"},src:`${Wn}/audio/${U.audio_path.split("/").pop()}`,children:"Votre navigateur ne supporte pas l'lment audio."})}),u.jsxs("div",{style:{display:"flex",gap:"1rem",width:"100%",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>M(!0),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Ouvrir l'histoire"}),u.jsx("button",{onClick:()=>ka(U.title,U.content),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Tlcharger l'histoire"}),U.audio_path&&u.jsx("button",{onClick:async()=>{try{const De=U.audio_path.split("/").pop(),_e=`${Wn}/audio/${De}?download=true`,$e=(U.title||"Histoire").replace(/[^a-z0-9]/gi,"_").toLowerCase(),Nt=await fetch(_e);if(!Nt.ok)throw new Error(`Erreur HTTP: ${Nt.status}`);const Be=await Nt.blob(),nt=window.URL.createObjectURL(Be),Re=document.createElement("a");Re.href=nt,Re.download=`${$e}.mp3`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re),setTimeout(()=>{window.URL.revokeObjectURL(nt)},100)}catch{try{const _e=U.audio_path.split("/").pop(),$e=`${Wn}/audio/${_e}?download=true`;window.open($e,"_blank")}catch{alert("Erreur lors du tlchargement. Veuillez ressayer.")}}},style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Tlcharger l'audio"})]})]})},"audio-story-result"):u.jsxs(Te.div,{className:"preview-placeholder",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:["  ",!(U!=null&&U.content)&&!A&&u.jsxs("div",{className:"empty-preview",children:["    ",u.jsx("p",{children:e==="rhyme"?"Votre comptine apparatra ici":e==="audio"||e==="histoire"?"Votre histoire apparatra ici":e==="coloring"?"Votre coloriage apparatra ici":e==="comic"?"Votre bande dessine apparatra ici":e==="animation"?"Votre dessin anim apparatra ici":"Votre contenu apparatra ici"})]})]},"placeholder")})})})})})]})}),u.jsx(Hi,{children:Jn&&u.jsx(Te.div,{className:"history-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:qs,children:u.jsx(GB,{onClose:qs,onSelect:So})})}),F&&u.jsx(KB,{title:U.title,content:U.content,onClose:()=>M(!1)}),"    ",G&&u.jsx(YB,{coloringResult:A,selectedTheme:de,onClose:()=>P(!1)}),L&&u.jsx(fA,{imageUrl:(()=>{var _e;const De=(_e=A==null?void 0:A.images)==null?void 0:_e[0];return De?De.image_url||De:void 0})(),theme:(A==null?void 0:A.theme)||de,onClose:()=>Y(!1)}),rt&&u.jsx(XB,{comic:st,onClose:()=>Ne(!1),baseUrl:Wn}),Je&&u.jsx(BB,{animationResult:Zt,onClose:()=>gt(!1)}),Vt&&u.jsx($U,{contentType:Et,selectedDuration:ot,numPages:me,selectedVoice:k,userId:ft==null?void 0:ft.id,userEmail:ft==null?void 0:ft.email,onSuccess:De=>{at(!1),setTimeout(()=>{ts()},500)},onCancel:()=>{at(!1)}}),Ut&&u.jsx(WU,{isOpen:Ut,onClose:()=>ut(!1),userId:ft==null?void 0:ft.id,userEmail:ft==null?void 0:ft.email}),u.jsx(GU,{onLegalClick:De=>{_s(!0),Yi(De)}}),u.jsx(Hi,{children:Dt&&u.jsx(KU,{onClose:()=>_s(!1),initialSection:ir})})]})}const K_=["fredagathe77@gmail.com","admin@herbbie.com"],qu="herbbie_admin_session",Wa={initAuthListener(e){const t=()=>{const r=this.getStoredSession();r&&r.user?e({user:r.user,isAdmin:r.isAdmin,session:r}):e(null)};t();const n=r=>{r.key===qu&&t()};return window.addEventListener("storage",n),{unsubscribe:()=>{window.removeEventListener("storage",n)}}},async signIn(e,t){try{if(!K_.includes(e))throw new Error("Accs refus. Seuls les administrateurs peuvent accder  ce panneau.");const n={id:"admin-"+Date.now(),email:e,user_metadata:{full_name:e==="fredagathe77@gmail.com"?"Admin Principal":"Administrateur"}},r={user:n,access_token:"admin-token-"+Date.now(),token_type:"bearer",expires_at:Date.now()+24*60*60*1e3};return this.storeSession({user:n,isAdmin:!0,session:r}),{user:n,session:r,isAdmin:!0}}catch(n){throw console.error("Erreur de connexion:",n),n}},async signOut(){try{localStorage.removeItem(qu)}catch(e){throw console.error("Erreur de dconnexion:",e),e}},async getCurrentUser(){try{const e=this.getStoredSession();return e&&e.user?{user:e.user,isAdmin:e.isAdmin}:null}catch(e){return console.error("Erreur lors de la rcupration de l'utilisateur:",e),null}},async checkUserIsAdmin(e){try{return!e||!e.email?!1:K_.includes(e.email)}catch(t){return console.error("Erreur lors de la vrification du rle admin:",t),!1}},async authenticateWithToken(e){try{if(!e||!e.includes("admin"))return console.warn("Token invalide"),!1;const t={id:"admin-auto-"+Date.now(),email:"admin@herbbie.com",user_metadata:{full_name:"Administrateur Auto"}},n={user:t,access_token:e,token_type:"bearer",expires_at:Date.now()+24*60*60*1e3};return this.storeSession({user:t,isAdmin:!0,session:n}),{user:t,isAdmin:!0,session:n}}catch(t){return console.error("Erreur authentification automatique:",t),!1}},async getCurrentSession(){try{return this.getStoredSession()}catch(e){return console.error("Erreur lors de la rcupration de la session:",e),null}},storeSession(e){try{localStorage.setItem(qu,JSON.stringify(e))}catch(t){console.error("Erreur lors du stockage de la session:",t)}},getStoredSession(){try{const e=localStorage.getItem(qu);if(e){const t=JSON.parse(e);if(t.session&&t.session.expires_at>Date.now())return t;localStorage.removeItem(qu)}}catch(e){console.error("Erreur lors de la rcupration de la session:",e)}return null}},DA=R.createContext(),MA=()=>{const e=R.useContext(DA);if(!e)throw new Error("useAuth doit tre utilis dans un AuthProvider");return e},XU=({children:e})=>{const[t,n]=R.useState(null),[r,i]=R.useState(!1),[s,o]=R.useState(!0),[a,l]=R.useState(null);R.useEffect(()=>{let g;return(async()=>{try{const w=await Wa.getCurrentSession();if(w!=null&&w.user){const S=await Wa.checkUserIsAdmin(w.user);n(w.user),i(S),l(w)}}catch(w){console.error("Erreur lors de l'initialisation de l'authentification:",w)}finally{o(!1)}g=Wa.initAuthListener(async w=>{w?(n(w.user),i(w.isAdmin),l(w.session)):(n(null),i(!1),l(null)),o(!1)})})(),()=>{g&&g.unsubscribe()}},[]);const p={user:t,isAdmin:r,loading:s,session:a,signIn:async(g,f)=>{o(!0);try{const w=await Wa.signIn(g,f);return w&&(n(w.user),i(w.isAdmin),l(w.session)),w}catch(w){throw w}finally{o(!1)}},signOut:async()=>{o(!0);try{await Wa.signOut(),n(null),i(!1),l(null)}catch(g){throw console.error("Erreur lors de la dconnexion:",g),g}finally{o(!1)}},authenticateWithToken:Wa.authenticateWithToken.bind(Wa),isAuthenticated:!!t&&r};return u.jsx(DA.Provider,{value:p,children:e})};const QU=()=>{const[e,t]=R.useState(""),[n,r]=R.useState(""),[i,s]=R.useState(""),[o,a]=R.useState(!1),[l,c]=R.useState(!1),{signIn:d}=MA(),p=async g=>{g.preventDefault(),s(""),a(!0);try{await d(e,n),ap(e.trim())}catch(f){s(f.message||"Erreur de connexion")}finally{a(!1)}};return u.jsx("div",{className:"login-container",children:u.jsxs(Te.div,{className:"login-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"login-header",children:[u.jsx("div",{className:"login-logo",children:u.jsxs("div",{className:"login-logo-text",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("span",{children:"Administration"})]})}),u.jsx("h2",{children:"Connexion Administrateur"}),u.jsx("p",{children:"Accs rserv aux administrateurs HERBBIE"})]}),u.jsxs("form",{className:"login-form",onSubmit:p,children:[i&&u.jsxs(Te.div,{className:"login-error",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:[u.jsx("span",{children:""})," ",i]}),u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"email",children:"Email administrateur"}),u.jsx(gc,{value:e,onChange:g=>t(g.target.value),placeholder:"admin@herbbie.com",required:!0,disabled:o,user:null,onEmailSubmit:()=>{}})]}),u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"password",children:"Mot de passe"}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:g=>r(g.target.value),placeholder:"",required:!0,disabled:o,autoComplete:"current-password",className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>c(!l),disabled:o,"aria-label":l?"Masquer le mot de passe":"Afficher le mot de passe",children:l?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),u.jsx("button",{type:"submit",className:"login-button",disabled:o||!e||!n,children:o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"login-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),u.jsx("div",{className:"login-footer",children:u.jsx("p",{children:" Accs scuris - Seuls les administrateurs peuvent se connecter"})})]})})},N2="/api/features",e$=async()=>{try{const e=await fetch(N2,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok)return await e.json();throw console.error("Erreur lors de la rcupration des fonctionnalits:",e.statusText),new Error(`Erreur API: ${e.status}`)}catch(e){throw console.error("Erreur lors de la rcupration des fonctionnalits:",e),e}},t$=async(e,t)=>{try{const n=await fetch(`${N2}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})});if(n.ok)return(await n.json()).features;throw console.error("Erreur lors de la mise  jour:",n.statusText),new Error(`Erreur API: ${n.status}`)}catch(n){throw console.error("Erreur lors de la mise  jour de la fonctionnalit:",n),n}},n$=async()=>{try{const e=await fetch(`${N2}/reset`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok)return(await e.json()).features;throw console.error("Erreur lors de la rinitialisation:",e.statusText),new Error(`Erreur API: ${e.status}`)}catch(e){throw console.error("Erreur lors de la rinitialisation:",e),e}},r$=async()=>{try{return await e$()}catch(e){throw e}},i$=async(e,t)=>{try{const n=await t$(e,t);return window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:n})),n}catch(n){throw n}},s$=async()=>{try{const e=await n$();return window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:e})),e}catch(e){throw console.error("Erreur lors de la rinitialisation des fonctionnalits:",e),e}};const o$=()=>{const[e,t]=R.useState({}),[n,r]=R.useState(!0),[i,s]=R.useState(null);R.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const g=await r$();t(g)}catch(g){console.error("Erreur lors du chargement des fonctionnalits:",g),c("Erreur lors du chargement des fonctionnalits","error")}finally{r(!1)}},a=async g=>{var f,w;try{const S=((f=e[g])==null?void 0:f.enabled)||!1,k=await i$(g,!S);if(k){t(k),window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:k}));const v=S?"dsactive":"active";c(`Fonctionnalit ${(w=e[g])==null?void 0:w.name} ${v}`,"success")}else c("Erreur lors de la mise  jour","error")}catch(S){console.error("Erreur lors de la mise  jour:",S),c("Erreur lors de la mise  jour","error")}},l=async()=>{try{const g=await s$();g?(t(g),window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:g})),c("Toutes les fonctionnalits ont t rinitialises","success")):c("Erreur lors de la rinitialisation","error")}catch(g){console.error("Erreur lors de la rinitialisation:",g),c("Erreur lors de la rinitialisation","error")}},c=(g,f="info")=>{s({message:g,type:f}),setTimeout(()=>s(null),3e3)},d=()=>Object.values(e).filter(g=>g.enabled).length,p=()=>Object.keys(e).length;return n?u.jsxs("div",{className:"admin-loading",children:[u.jsx("div",{className:"admin-loading-spinner"}),u.jsx("span",{children:"Chargement des fonctionnalits..."})]}):u.jsxs("div",{className:"feature-manager-container",children:[i&&u.jsx(Te.div,{className:`admin-notification ${i.type} show`,initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},children:i.message}),u.jsxs("div",{className:"feature-manager-header",children:[u.jsxs("div",{className:"feature-manager-stats",children:[u.jsxs("div",{className:"feature-stat",children:[u.jsx("span",{className:"feature-stat-number",children:d()}),u.jsx("span",{className:"feature-stat-label",children:"Actives"})]}),u.jsxs("div",{className:"feature-stat",children:[u.jsx("span",{className:"feature-stat-number",children:p()}),u.jsx("span",{className:"feature-stat-label",children:"Total"})]}),u.jsxs("div",{className:"feature-stat",children:[u.jsxs("span",{className:"feature-stat-number",children:[Math.round(d()/p()*100),"%"]}),u.jsx("span",{className:"feature-stat-label",children:"Taux d'activation"})]})]}),u.jsx("div",{className:"feature-manager-actions",children:u.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:l,children:" Rinitialiser"})})]}),u.jsx("div",{className:"feature-manager-grid",children:Object.entries(e).map(([g,f])=>u.jsxs(Te.div,{className:"feature-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[u.jsxs("div",{className:"feature-card-header",children:[u.jsxs("div",{className:"feature-info",children:[u.jsx("span",{className:"feature-icon",children:a$(g)}),u.jsxs("div",{className:"feature-details",children:[u.jsx("h3",{className:"feature-name",children:f.name}),u.jsx("span",{className:`feature-status ${f.enabled?"enabled":"disabled"}`,children:f.enabled?"Active":"Dsactive"})]})]}),u.jsxs("label",{className:"feature-toggle",children:[u.jsx("input",{type:"checkbox",checked:f.enabled,onChange:()=>a(g)}),u.jsx("span",{className:"toggle-slider"})]})]}),u.jsx("div",{className:"feature-card-body",children:u.jsx("p",{className:"feature-description",children:l$(g)})})]},g))}),u.jsx("div",{className:"feature-manager-info",children:u.jsxs("div",{className:"admin-card",children:[u.jsx("div",{className:"admin-card-header",children:u.jsx("h3",{children:" Informations"})}),u.jsxs("div",{className:"admin-card-body",children:[u.jsx("p",{children:"Les fonctionnalits actives sont visibles pour tous les utilisateurs de HERBBIE. Les modifications sont appliques immdiatement."}),u.jsxs("ul",{className:"feature-info-list",children:[u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Dessin anim"})," : Gnration de vidos animes"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Bande dessine"})," : Cration de BD avec bulles"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Coloriage"})," : Pages de coloriage  imprimer"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Histoire"})," : Contes audio avec narration"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Comptine"})," : Chansons avec musique gnre"]})]})]})]})})]})},a$=e=>({animation:"",comic:"",coloring:"",audio:"",rhyme:""})[e]||"",l$=e=>({animation:"Gnration de dessins anims personnaliss avec IA",comic:"Cration de bandes dessines avec bulles de dialogue",coloring:"Pages de coloriage  imprimer pour les enfants",audio:"Histoires audio avec narration automatique",rhyme:"Comptines musicales avec paroles et mlodies"})[e]||"Fonctionnalit de cration de contenu",c$=()=>{const{user:e,isAdmin:t,loading:n,signOut:r}=MA(),[i]=vL(),s=gy(),o=i.get("auth"),[a,l]=Xt.useState(!1);return R.useEffect(()=>{o==="auto"?(l(!0),window.history.replaceState({},"","/ilmysv6iepwepoa4tj2k")):!o&&!a&&localStorage.removeItem("herbbie_admin_session")},[o]),R.useEffect(()=>{const d=document.title;return document.title="HERBBIE - Administration",()=>{document.title=d}},[]),R.useEffect(()=>{const d=()=>{l(!1),localStorage.removeItem("herbbie_admin_session"),document.title="HERBBIE"};return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[]),n&&!a?u.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:u.jsx("div",{children:"Chargement..."})}):a||e&&t?u.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"40px 20px"},children:u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[u.jsx("h1",{style:{color:"white",textAlign:"center",marginBottom:"40px",fontSize:"2.5em"},children:" Gestion des Fonctionnalits Herbbie"}),u.jsx(o$,{}),u.jsxs("div",{style:{marginTop:"40px",textAlign:"center",display:"flex",gap:"15px",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("a",{href:"/",onClick:d=>{d.preventDefault(),localStorage.removeItem("herbbie_admin_session"),window.location.href="/"},style:{color:"white",textDecoration:"none",padding:"12px 30px",background:"rgba(255,255,255,0.2)",borderRadius:"25px",display:"inline-block",transition:"all 0.3s ease",cursor:"pointer"},children:" Retour  Herbbie"}),u.jsx("button",{onClick:async()=>{await r(),localStorage.removeItem("herbbie_admin_session"),s("/ilmysv6iepwepoa4tj2k")},style:{color:"white",border:"none",padding:"12px 30px",background:"rgba(255,0,0,0.3)",borderRadius:"25px",cursor:"pointer",fontSize:"16px",fontWeight:"500",transition:"all 0.3s ease"},children:" Dconnexion"})]})]})}):u.jsx(QU,{})},u$=()=>u.jsx(XU,{children:u.jsx(c$,{})});const d$=()=>{const[e,t]=R.useState(""),[n,r]=R.useState(""),[i,s]=R.useState(""),[o,a]=R.useState(!1),[l,c]=R.useState(!1),[d,p]=R.useState(!1),[g,f]=R.useState(!1),[w,S]=R.useState(!1),[k,v]=R.useState(!1);R.useEffect(()=>{let _,N;return(async()=>{await new Promise(F=>setTimeout(F,500));const{data:{session:U}}=await Pt.auth.getSession();if(U){p(!0);return}_=setTimeout(async()=>{const{data:{session:F}}=await Pt.auth.getSession();F||f(!0)},15e3);const{data:{subscription:q}}=Pt.auth.onAuthStateChange(async(F,M)=>{(F==="PASSWORD_RECOVERY"||F==="SIGNED_IN"||F==="INITIAL_SESSION")&&M&&(p(!0),f(!1),_&&clearTimeout(_))});N=q})(),()=>{_&&clearTimeout(_),N&&N.unsubscribe()}},[]);const x=async _=>{if(_.preventDefault(),s(""),c(!0),e.length<6){s("Le mot de passe doit contenir au moins 6 caractres"),c(!1);return}if(e!==n){s("Les mots de passe ne correspondent pas"),c(!1);return}try{const{error:N}=await Pt.auth.updateUser({password:e});N?s(N.message):(a(!0),setTimeout(()=>{window.location.href="/"},3e3))}catch{s("Une erreur est survenue lors de la mise  jour du mot de passe")}c(!1)};return o?u.jsx("div",{className:"reset-password-page",children:u.jsx(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:u.jsxs("div",{className:"success-message",children:[u.jsx("div",{className:"success-icon",children:""}),u.jsx("h2",{children:"Mot de passe mis  jour !"}),u.jsx("p",{children:"Votre mot de passe a t chang avec succs."}),u.jsx("p",{children:"Vous serez redirig vers la page d'accueil dans quelques secondes..."})]})})}):g?u.jsx("div",{className:"reset-password-page",children:u.jsxs(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"reset-password-header",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("h2",{children:"Erreur de lien"})]}),u.jsxs("div",{className:"error-message",children:[u.jsx("div",{className:"error-icon",children:""}),u.jsx("h3",{children:"Lien de rinitialisation invalide"}),u.jsx("p",{children:"Ce lien de rinitialisation de mot de passe n'est pas valide ou a expir."}),u.jsx("p",{children:"Veuillez demander un nouveau lien de rinitialisation."})]}),u.jsx("div",{className:"reset-password-footer",children:u.jsx("a",{href:"/",children:"Retour  l'accueil"})})]})}):d?u.jsx("div",{className:"reset-password-page",children:u.jsxs(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"reset-password-header",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("h2",{children:"Rinitialiser votre mot de passe"})]}),u.jsxs("form",{onSubmit:x,className:"reset-password-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"newPassword",children:"Nouveau mot de passe"}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:w?"text":"password",id:"newPassword",value:e,onChange:_=>t(_.target.value),placeholder:"Entrez votre nouveau mot de passe",required:!0,minLength:"6",className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>S(!w),"aria-label":w?"Masquer le mot de passe":"Afficher le mot de passe",children:w?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:k?"text":"password",id:"confirmPassword",value:n,onChange:_=>r(_.target.value),placeholder:"Confirmez votre nouveau mot de passe",required:!0,minLength:"6",className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>v(!k),"aria-label":k?"Masquer le mot de passe":"Afficher le mot de passe",children:k?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),i&&u.jsx("div",{className:"error-message",children:i}),u.jsx("button",{type:"submit",className:"reset-button",disabled:l,children:l?"Mise  jour...":"Mettre  jour le mot de passe"})]}),u.jsx("div",{className:"reset-password-footer",children:u.jsx("a",{href:"/",children:"Retour  l'accueil"})})]})}):u.jsx("div",{className:"reset-password-page",children:u.jsxs(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"reset-password-header",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("h2",{children:"Rinitialiser votre mot de passe"})]}),u.jsxs("div",{className:"waiting-message",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Vrification de votre lien de rinitialisation..."}),u.jsx("p",{className:"waiting-subtitle",children:"Si cette page ne se met pas  jour automatiquement, assurez-vous d'avoir cliqu sur le lien complet dans votre email."})]}),u.jsx("div",{className:"reset-password-footer",children:u.jsx("a",{href:"/",children:"Retour  l'accueil"})})]})})};Pg.createRoot(document.getElementById("root")).render(u.jsx(Xt.StrictMode,{children:u.jsx(hL,{children:u.jsxs($P,{children:[u.jsx(Kf,{path:"/",element:u.jsx(ZU,{})}),u.jsx(Kf,{path:"/ilmysv6iepwepoa4tj2k",element:u.jsx(u$,{})}),u.jsx(Kf,{path:"/reset-password",element:u.jsx(d$,{})})]})})}));export{Jt as _,p$ as c,bv as g};
