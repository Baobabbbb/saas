(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const $6="modulepreload",z6=function(e){return"/"+e},e2={},Hh=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=z6(s),s in e2)return;e2[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const p=i[d];if(p.href===s&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":$6,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((d,p)=>{c.addEventListener("load",d),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const V6="modulepreload",H6=function(e){return"/"+e},t2={},Wh=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=H6(i),i in t2)return;t2[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(n)for(let l=r.length-1;l>=0;l--){const c=r[l];if(c.href===i&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":V6,s||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),s)return new Promise((l,c)=>{o.addEventListener("load",l),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const W6="modulepreload",K6=function(e){return"/"+e},n2={},Kh=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=K6(i),i in n2)return;n2[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(n)for(let l=r.length-1;l>=0;l--){const c=r[l];if(c.href===i&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":W6,s||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),s)return new Promise((l,c)=>{o.addEventListener("load",l),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var G6=Object.defineProperty,Y6=(e,t,n)=>t in e?G6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kt=(e,t,n)=>(Y6(e,typeof t!="symbol"?t+"":t,n),n);function X6(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var PM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function J6(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Rx={exports:{}},cp={},Ox={exports:{}},At={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var pd=Symbol.for("react.element"),Q6=Symbol.for("react.portal"),Z6=Symbol.for("react.fragment"),eN=Symbol.for("react.strict_mode"),tN=Symbol.for("react.profiler"),nN=Symbol.for("react.provider"),rN=Symbol.for("react.context"),iN=Symbol.for("react.forward_ref"),sN=Symbol.for("react.suspense"),aN=Symbol.for("react.memo"),oN=Symbol.for("react.lazy"),r2=Symbol.iterator;function lN(e){return e===null||typeof e!="object"?null:(e=r2&&e[r2]||e["@@iterator"],typeof e=="function"?e:null)}var Ix={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fx=Object.assign,Dx={};function vc(e,t,n){this.props=e,this.context=t,this.refs=Dx,this.updater=n||Ix}vc.prototype.isReactComponent={};vc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mx(){}Mx.prototype=vc.prototype;function m1(e,t,n){this.props=e,this.context=t,this.refs=Dx,this.updater=n||Ix}var g1=m1.prototype=new Mx;g1.constructor=m1;Fx(g1,vc.prototype);g1.isPureReactComponent=!0;var i2=Array.isArray,Bx=Object.prototype.hasOwnProperty,v1={current:null},Ux={key:!0,ref:!0,__self:!0,__source:!0};function qx(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Bx.call(t,r)&&!Ux.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:pd,type:e,key:s,ref:a,props:i,_owner:v1.current}}function cN(e,t){return{$$typeof:pd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function y1(e){return typeof e=="object"&&e!==null&&e.$$typeof===pd}function uN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var s2=/\/+/g;function mm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uN(""+e.key):t.toString(36)}function Gh(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case pd:case Q6:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+mm(a,0):r,i2(i)?(n="",e!=null&&(n=e.replace(s2,"$&/")+"/"),Gh(i,t,n,"",function(c){return c})):i!=null&&(y1(i)&&(i=cN(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(s2,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",i2(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+mm(s,o);a+=Gh(s,t,n,l,i)}else if(l=lN(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+mm(s,o++),a+=Gh(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function th(e,t,n){if(e==null)return e;var r=[],i=0;return Gh(e,r,"","",function(s){return t.call(n,s,i++)}),r}function dN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dr={current:null},Yh={transition:null},hN={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:Yh,ReactCurrentOwner:v1};function $x(){throw Error("act(...) is not supported in production builds of React.")}At.Children={map:th,forEach:function(e,t,n){th(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return th(e,function(){t++}),t},toArray:function(e){return th(e,function(t){return t})||[]},only:function(e){if(!y1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};At.Component=vc;At.Fragment=Z6;At.Profiler=tN;At.PureComponent=m1;At.StrictMode=eN;At.Suspense=sN;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hN;At.act=$x;At.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fx({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=v1.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Bx.call(t,l)&&!Ux.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:pd,type:e.type,key:i,ref:s,props:r,_owner:a}};At.createContext=function(e){return e={$$typeof:rN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nN,_context:e},e.Consumer=e};At.createElement=qx;At.createFactory=function(e){var t=qx.bind(null,e);return t.type=e,t};At.createRef=function(){return{current:null}};At.forwardRef=function(e){return{$$typeof:iN,render:e}};At.isValidElement=y1;At.lazy=function(e){return{$$typeof:oN,_payload:{_status:-1,_result:e},_init:dN}};At.memo=function(e,t){return{$$typeof:aN,type:e,compare:t===void 0?null:t}};At.startTransition=function(e){var t=Yh.transition;Yh.transition={};try{e()}finally{Yh.transition=t}};At.unstable_act=$x;At.useCallback=function(e,t){return Dr.current.useCallback(e,t)};At.useContext=function(e){return Dr.current.useContext(e)};At.useDebugValue=function(){};At.useDeferredValue=function(e){return Dr.current.useDeferredValue(e)};At.useEffect=function(e,t){return Dr.current.useEffect(e,t)};At.useId=function(){return Dr.current.useId()};At.useImperativeHandle=function(e,t,n){return Dr.current.useImperativeHandle(e,t,n)};At.useInsertionEffect=function(e,t){return Dr.current.useInsertionEffect(e,t)};At.useLayoutEffect=function(e,t){return Dr.current.useLayoutEffect(e,t)};At.useMemo=function(e,t){return Dr.current.useMemo(e,t)};At.useReducer=function(e,t,n){return Dr.current.useReducer(e,t,n)};At.useRef=function(e){return Dr.current.useRef(e)};At.useState=function(e){return Dr.current.useState(e)};At.useSyncExternalStore=function(e,t,n){return Dr.current.useSyncExternalStore(e,t,n)};At.useTransition=function(){return Dr.current.useTransition()};At.version="18.3.1";Ox.exports=At;var T=Ox.exports;const Gt=p1(T);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var fN=T,pN=Symbol.for("react.element"),mN=Symbol.for("react.fragment"),gN=Object.prototype.hasOwnProperty,vN=fN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yN={key:!0,ref:!0,__self:!0,__source:!0};function zx(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)gN.call(t,r)&&!yN.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:pN,type:e,key:s,ref:a,props:i,_owner:vN.current}}cp.Fragment=mN;cp.jsx=zx;cp.jsxs=zx;Rx.exports=cp;var u=Rx.exports,L0={},Vx={exports:{}},xi={},Hx={exports:{}},Wx={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(e){function t(X,ae){var re=X.length;X.push(ae);e:for(;0<re;){var ie=re-1>>>1,N=X[ie];if(0<i(N,ae))X[ie]=ae,X[re]=N,re=ie;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],re=X.pop();if(re!==ae){X[0]=re;e:for(var ie=0,N=X.length,M=N>>>1;ie<M;){var $=2*(ie+1)-1,Q=X[$],te=$+1,oe=X[te];if(0>i(Q,re))te<N&&0>i(oe,Q)?(X[ie]=oe,X[te]=re,ie=te):(X[ie]=Q,X[$]=re,ie=$);else if(te<N&&0>i(oe,re))X[ie]=oe,X[te]=re,ie=te;else break e}}return ae}function i(X,ae){var re=X.sortIndex-ae.sortIndex;return re!==0?re:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,p=null,g=3,f=!1,_=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(X){for(var ae=n(c);ae!==null;){if(ae.callback===null)r(c);else if(ae.startTime<=X)r(c),ae.sortIndex=ae.expirationTime,t(l,ae);else break;ae=n(c)}}function E(X){if(S=!1,w(X),!_)if(n(l)!==null)_=!0,le(B);else{var ae=n(c);ae!==null&&de(E,ae.startTime-X)}}function B(X,ae){_=!1,S&&(S=!1,y(F),F=-1),f=!0;var re=g;try{for(w(ae),p=n(l);p!==null&&(!(p.expirationTime>ae)||X&&!R());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,g=p.priorityLevel;var N=ie(p.expirationTime<=ae);ae=e.unstable_now(),typeof N=="function"?p.callback=N:p===n(l)&&r(l),w(ae)}else r(l);p=n(l)}if(p!==null)var M=!0;else{var $=n(c);$!==null&&de(E,$.startTime-ae),M=!1}return M}finally{p=null,g=re,f=!1}}var q=!1,z=null,F=-1,I=5,J=-1;function R(){return!(e.unstable_now()-J<I)}function P(){if(z!==null){var X=e.unstable_now();J=X;var ae=!0;try{ae=z(!0,X)}finally{ae?K():(q=!1,z=null)}}else q=!1}var K;if(typeof x=="function")K=function(){x(P)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=P,K=function(){Z.postMessage(null)}}else K=function(){k(P,0)};function le(X){z=X,q||(q=!0,K())}function de(X,ae){F=k(function(){X(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){_||f||(_=!0,le(B))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(X){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var re=g;g=ae;try{return X()}finally{g=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var re=g;g=X;try{return ae()}finally{g=re}},e.unstable_scheduleCallback=function(X,ae,re){var ie=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ie+re:ie):re=ie,X){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=re+N,X={id:d++,callback:ae,priorityLevel:X,startTime:re,expirationTime:N,sortIndex:-1},re>ie?(X.sortIndex=re,t(c,X),n(l)===null&&X===n(c)&&(S?(y(F),F=-1):S=!0,de(E,re-ie))):(X.sortIndex=N,t(l,X),_||f||(_=!0,le(B))),X},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(X){var ae=g;return function(){var re=g;g=ae;try{return X.apply(this,arguments)}finally{g=re}}}})(Wx);Hx.exports=Wx;var bN=Hx.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var wN=T,bi=bN;function Ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kx=new Set,Uu={};function Zo(e,t){sc(e,t),sc(e+"Capture",t)}function sc(e,t){for(Uu[e]=t,e=0;e<t.length;e++)Kx.add(t[e])}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T0=Object.prototype.hasOwnProperty,xN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a2={},o2={};function _N(e){return T0.call(o2,e)?!0:T0.call(a2,e)?!1:xN.test(e)?o2[e]=!0:(a2[e]=!0,!1)}function SN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kN(e,t,n,r){if(t===null||typeof t>"u"||SN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mr(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fr[e]=new Mr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fr[t]=new Mr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fr[e]=new Mr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fr[e]=new Mr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fr[e]=new Mr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fr[e]=new Mr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fr[e]=new Mr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fr[e]=new Mr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fr[e]=new Mr(e,5,!1,e.toLowerCase(),null,!1,!1)});var b1=/[\-:]([a-z])/g;function w1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b1,w1);fr[t]=new Mr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b1,w1);fr[t]=new Mr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b1,w1);fr[t]=new Mr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fr[e]=new Mr(e,1,!1,e.toLowerCase(),null,!1,!1)});fr.xlinkHref=new Mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fr[e]=new Mr(e,1,!1,e.toLowerCase(),null,!0,!0)});function x1(e,t,n,r){var i=fr.hasOwnProperty(t)?fr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kN(t,n,i,r)&&(n=null),r||i===null?_N(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var la=wN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nh=Symbol.for("react.element"),Cl=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),_1=Symbol.for("react.strict_mode"),R0=Symbol.for("react.profiler"),Gx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),S1=Symbol.for("react.forward_ref"),O0=Symbol.for("react.suspense"),I0=Symbol.for("react.suspense_list"),k1=Symbol.for("react.memo"),Ta=Symbol.for("react.lazy"),Xx=Symbol.for("react.offscreen"),l2=Symbol.iterator;function Zc(e){return e===null||typeof e!="object"?null:(e=l2&&e[l2]||e["@@iterator"],typeof e=="function"?e:null)}var _n=Object.assign,gm;function fu(e){if(gm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);gm=t&&t[1]||""}return`
`+gm+e}var vm=!1;function ym(e,t){if(!e||vm)return"";vm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{vm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fu(e):""}function jN(e){switch(e.tag){case 5:return fu(e.type);case 16:return fu("Lazy");case 13:return fu("Suspense");case 19:return fu("SuspenseList");case 0:case 2:case 15:return e=ym(e.type,!1),e;case 11:return e=ym(e.type.render,!1),e;case 1:return e=ym(e.type,!0),e;default:return""}}function F0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pl:return"Fragment";case Cl:return"Portal";case R0:return"Profiler";case _1:return"StrictMode";case O0:return"Suspense";case I0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yx:return(e.displayName||"Context")+".Consumer";case Gx:return(e._context.displayName||"Context")+".Provider";case S1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k1:return t=e.displayName||null,t!==null?t:F0(e.type)||"Memo";case Ta:t=e._payload,e=e._init;try{return F0(e(t))}catch{}}return null}function NN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F0(t);case 8:return t===_1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ga(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EN(e){var t=Jx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rh(e){e._valueTracker||(e._valueTracker=EN(e))}function Qx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jx(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function D0(e,t){var n=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function c2(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ga(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zx(e,t){t=t.checked,t!=null&&x1(e,"checked",t,!1)}function M0(e,t){Zx(e,t);var n=Ga(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?B0(e,t.type,n):t.hasOwnProperty("defaultValue")&&B0(e,t.type,Ga(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function u2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function B0(e,t,n){(t!=="number"||xf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pu=Array.isArray;function Gl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ga(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function U0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function d2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ce(92));if(pu(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ga(n)}}function e_(e,t){var n=Ga(t.value),r=Ga(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function h2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function t_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?t_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ih,n_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ih=ih||document.createElement("div"),ih.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ih.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AN=["Webkit","ms","Moz","O"];Object.keys(xu).forEach(function(e){AN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xu[t]=xu[e]})});function r_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xu.hasOwnProperty(e)&&xu[e]?(""+t).trim():t+"px"}function i_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=r_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var CN=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $0(e,t){if(t){if(CN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ce(62))}}function z0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V0=null;function j1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var H0=null,Yl=null,Xl=null;function f2(e){if(e=vd(e)){if(typeof H0!="function")throw Error(Ce(280));var t=e.stateNode;t&&(t=pp(t),H0(e.stateNode,e.type,t))}}function s_(e){Yl?Xl?Xl.push(e):Xl=[e]:Yl=e}function a_(){if(Yl){var e=Yl,t=Xl;if(Xl=Yl=null,f2(e),t)for(e=0;e<t.length;e++)f2(t[e])}}function o_(e,t){return e(t)}function l_(){}var bm=!1;function c_(e,t,n){if(bm)return e(t,n);bm=!0;try{return o_(e,t,n)}finally{bm=!1,(Yl!==null||Xl!==null)&&(l_(),a_())}}function $u(e,t){var n=e.stateNode;if(n===null)return null;var r=pp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ce(231,t,typeof n));return n}var W0=!1;if(na)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){W0=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{W0=!1}function PN(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var _u=!1,_f=null,Sf=!1,K0=null,LN={onError:function(e){_u=!0,_f=e}};function TN(e,t,n,r,i,s,a,o,l){_u=!1,_f=null,PN.apply(LN,arguments)}function RN(e,t,n,r,i,s,a,o,l){if(TN.apply(this,arguments),_u){if(_u){var c=_f;_u=!1,_f=null}else throw Error(Ce(198));Sf||(Sf=!0,K0=c)}}function el(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function u_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p2(e){if(el(e)!==e)throw Error(Ce(188))}function ON(e){var t=e.alternate;if(!t){if(t=el(e),t===null)throw Error(Ce(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return p2(i),e;if(s===r)return p2(i),t;s=s.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?e:t}function d_(e){return e=ON(e),e!==null?h_(e):null}function h_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=h_(e);if(t!==null)return t;e=e.sibling}return null}var f_=bi.unstable_scheduleCallback,m2=bi.unstable_cancelCallback,IN=bi.unstable_shouldYield,FN=bi.unstable_requestPaint,In=bi.unstable_now,DN=bi.unstable_getCurrentPriorityLevel,N1=bi.unstable_ImmediatePriority,p_=bi.unstable_UserBlockingPriority,kf=bi.unstable_NormalPriority,MN=bi.unstable_LowPriority,m_=bi.unstable_IdlePriority,up=null,ks=null;function BN(e){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(up,e,void 0,(e.current.flags&128)===128)}catch{}}var is=Math.clz32?Math.clz32:$N,UN=Math.log,qN=Math.LN2;function $N(e){return e>>>=0,e===0?32:31-(UN(e)/qN|0)|0}var sh=64,ah=4194304;function mu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=mu(o):(s&=a,s!==0&&(r=mu(s)))}else a=n&~i,a!==0?r=mu(a):s!==0&&(r=mu(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-is(t),i=1<<n,r|=e[n],t&=~i;return r}function zN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-is(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=zN(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function G0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function g_(){var e=sh;return sh<<=1,!(sh&4194240)&&(sh=64),e}function wm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function md(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-is(t),e[t]=n}function HN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-is(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function E1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-is(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Wt=0;function v_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var y_,A1,b_,w_,x_,Y0=!1,oh=[],Ua=null,qa=null,$a=null,zu=new Map,Vu=new Map,Oa=[],WN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g2(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":zu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(t.pointerId)}}function tu(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=vd(t),t!==null&&A1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function KN(e,t,n,r,i){switch(t){case"focusin":return Ua=tu(Ua,e,t,n,r,i),!0;case"dragenter":return qa=tu(qa,e,t,n,r,i),!0;case"mouseover":return $a=tu($a,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return zu.set(s,tu(zu.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vu.set(s,tu(Vu.get(s)||null,e,t,n,r,i)),!0}return!1}function __(e){var t=Do(e.target);if(t!==null){var n=el(t);if(n!==null){if(t=n.tag,t===13){if(t=u_(n),t!==null){e.blockedOn=t,x_(e.priority,function(){b_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=X0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);V0=r,n.target.dispatchEvent(r),V0=null}else return t=vd(n),t!==null&&A1(t),e.blockedOn=n,!1;t.shift()}return!0}function v2(e,t,n){Xh(e)&&n.delete(t)}function GN(){Y0=!1,Ua!==null&&Xh(Ua)&&(Ua=null),qa!==null&&Xh(qa)&&(qa=null),$a!==null&&Xh($a)&&($a=null),zu.forEach(v2),Vu.forEach(v2)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,Y0||(Y0=!0,bi.unstable_scheduleCallback(bi.unstable_NormalPriority,GN)))}function Hu(e){function t(i){return nu(i,e)}if(0<oh.length){nu(oh[0],e);for(var n=1;n<oh.length;n++){var r=oh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ua!==null&&nu(Ua,e),qa!==null&&nu(qa,e),$a!==null&&nu($a,e),zu.forEach(t),Vu.forEach(t),n=0;n<Oa.length;n++)r=Oa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Oa.length&&(n=Oa[0],n.blockedOn===null);)__(n),n.blockedOn===null&&Oa.shift()}var Jl=la.ReactCurrentBatchConfig,Nf=!0;function YN(e,t,n,r){var i=Wt,s=Jl.transition;Jl.transition=null;try{Wt=1,C1(e,t,n,r)}finally{Wt=i,Jl.transition=s}}function XN(e,t,n,r){var i=Wt,s=Jl.transition;Jl.transition=null;try{Wt=4,C1(e,t,n,r)}finally{Wt=i,Jl.transition=s}}function C1(e,t,n,r){if(Nf){var i=X0(e,t,n,r);if(i===null)Pm(e,t,r,Ef,n),g2(e,r);else if(KN(i,e,t,n,r))r.stopPropagation();else if(g2(e,r),t&4&&-1<WN.indexOf(e)){for(;i!==null;){var s=vd(i);if(s!==null&&y_(s),s=X0(e,t,n,r),s===null&&Pm(e,t,r,Ef,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pm(e,t,r,null,n)}}var Ef=null;function X0(e,t,n,r){if(Ef=null,e=j1(r),e=Do(e),e!==null)if(t=el(e),t===null)e=null;else if(n=t.tag,n===13){if(e=u_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ef=e,null}function S_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DN()){case N1:return 1;case p_:return 4;case kf:case MN:return 16;case m_:return 536870912;default:return 16}default:return 16}}var Da=null,P1=null,Jh=null;function k_(){if(Jh)return Jh;var e,t=P1,n=t.length,r,i="value"in Da?Da.value:Da.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Jh=i.slice(e,1<r?1-r:void 0)}function Qh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lh(){return!0}function y2(){return!1}function _i(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lh:y2,this.isPropagationStopped=y2,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),t}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L1=_i(yc),gd=_n({},yc,{view:0,detail:0}),JN=_i(gd),xm,_m,ru,dp=_n({},gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ru&&(ru&&e.type==="mousemove"?(xm=e.screenX-ru.screenX,_m=e.screenY-ru.screenY):_m=xm=0,ru=e),xm)},movementY:function(e){return"movementY"in e?e.movementY:_m}}),b2=_i(dp),QN=_n({},dp,{dataTransfer:0}),ZN=_i(QN),eE=_n({},gd,{relatedTarget:0}),Sm=_i(eE),tE=_n({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),nE=_i(tE),rE=_n({},yc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iE=_i(rE),sE=_n({},yc,{data:0}),w2=_i(sE),aE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lE[e])?!!t[e]:!1}function T1(){return cE}var uE=_n({},gd,{key:function(e){if(e.key){var t=aE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T1,charCode:function(e){return e.type==="keypress"?Qh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dE=_i(uE),hE=_n({},dp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x2=_i(hE),fE=_n({},gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T1}),pE=_i(fE),mE=_n({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),gE=_i(mE),vE=_n({},dp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yE=_i(vE),bE=[9,13,27,32],R1=na&&"CompositionEvent"in window,Su=null;na&&"documentMode"in document&&(Su=document.documentMode);var wE=na&&"TextEvent"in window&&!Su,j_=na&&(!R1||Su&&8<Su&&11>=Su),_2=String.fromCharCode(32),S2=!1;function N_(e,t){switch(e){case"keyup":return bE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ll=!1;function xE(e,t){switch(e){case"compositionend":return E_(t);case"keypress":return t.which!==32?null:(S2=!0,_2);case"textInput":return e=t.data,e===_2&&S2?null:e;default:return null}}function _E(e,t){if(Ll)return e==="compositionend"||!R1&&N_(e,t)?(e=k_(),Jh=P1=Da=null,Ll=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return j_&&t.locale!=="ko"?null:t.data;default:return null}}var SE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SE[e.type]:t==="textarea"}function A_(e,t,n,r){s_(r),t=Af(t,"onChange"),0<t.length&&(n=new L1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ku=null,Wu=null;function kE(e){B_(e,0)}function hp(e){var t=Ol(e);if(Qx(t))return e}function jE(e,t){if(e==="change")return t}var C_=!1;if(na){var km;if(na){var jm="oninput"in document;if(!jm){var j2=document.createElement("div");j2.setAttribute("oninput","return;"),jm=typeof j2.oninput=="function"}km=jm}else km=!1;C_=km&&(!document.documentMode||9<document.documentMode)}function N2(){ku&&(ku.detachEvent("onpropertychange",P_),Wu=ku=null)}function P_(e){if(e.propertyName==="value"&&hp(Wu)){var t=[];A_(t,Wu,e,j1(e)),c_(kE,t)}}function NE(e,t,n){e==="focusin"?(N2(),ku=t,Wu=n,ku.attachEvent("onpropertychange",P_)):e==="focusout"&&N2()}function EE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hp(Wu)}function AE(e,t){if(e==="click")return hp(t)}function CE(e,t){if(e==="input"||e==="change")return hp(t)}function PE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var as=typeof Object.is=="function"?Object.is:PE;function Ku(e,t){if(as(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!T0.call(t,i)||!as(e[i],t[i]))return!1}return!0}function E2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A2(e,t){var n=E2(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=E2(n)}}function L_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?L_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function T_(){for(var e=window,t=xf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xf(e.document)}return t}function O1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LE(e){var t=T_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&L_(n.ownerDocument.documentElement,n)){if(r!==null&&O1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=A2(n,s);var a=A2(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TE=na&&"documentMode"in document&&11>=document.documentMode,Tl=null,J0=null,ju=null,Q0=!1;function C2(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Q0||Tl==null||Tl!==xf(r)||(r=Tl,"selectionStart"in r&&O1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ju&&Ku(ju,r)||(ju=r,r=Af(J0,"onSelect"),0<r.length&&(t=new L1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Tl)))}function ch(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rl={animationend:ch("Animation","AnimationEnd"),animationiteration:ch("Animation","AnimationIteration"),animationstart:ch("Animation","AnimationStart"),transitionend:ch("Transition","TransitionEnd")},Nm={},R_={};na&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function fp(e){if(Nm[e])return Nm[e];if(!Rl[e])return e;var t=Rl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in R_)return Nm[e]=t[n];return e}var O_=fp("animationend"),I_=fp("animationiteration"),F_=fp("animationstart"),D_=fp("transitionend"),M_=new Map,P2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Za(e,t){M_.set(e,t),Zo(t,[e])}for(var Em=0;Em<P2.length;Em++){var Am=P2[Em],RE=Am.toLowerCase(),OE=Am[0].toUpperCase()+Am.slice(1);Za(RE,"on"+OE)}Za(O_,"onAnimationEnd");Za(I_,"onAnimationIteration");Za(F_,"onAnimationStart");Za("dblclick","onDoubleClick");Za("focusin","onFocus");Za("focusout","onBlur");Za(D_,"onTransitionEnd");sc("onMouseEnter",["mouseout","mouseover"]);sc("onMouseLeave",["mouseout","mouseover"]);sc("onPointerEnter",["pointerout","pointerover"]);sc("onPointerLeave",["pointerout","pointerover"]);Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IE=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function L2(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,RN(r,t,void 0,e),e.currentTarget=null}function B_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;L2(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;L2(i,o,c),s=l}}}if(Sf)throw e=K0,Sf=!1,K0=null,e}function on(e,t){var n=t[rg];n===void 0&&(n=t[rg]=new Set);var r=e+"__bubble";n.has(r)||(U_(t,e,2,!1),n.add(r))}function Cm(e,t,n){var r=0;t&&(r|=4),U_(n,e,r,t)}var uh="_reactListening"+Math.random().toString(36).slice(2);function Gu(e){if(!e[uh]){e[uh]=!0,Kx.forEach(function(n){n!=="selectionchange"&&(IE.has(n)||Cm(n,!1,e),Cm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uh]||(t[uh]=!0,Cm("selectionchange",!1,t))}}function U_(e,t,n,r){switch(S_(t)){case 1:var i=YN;break;case 4:i=XN;break;default:i=C1}n=i.bind(null,t,n,e),i=void 0,!W0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Pm(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Do(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}c_(function(){var c=s,d=j1(n),p=[];e:{var g=M_.get(e);if(g!==void 0){var f=L1,_=e;switch(e){case"keypress":if(Qh(n)===0)break e;case"keydown":case"keyup":f=dE;break;case"focusin":_="focus",f=Sm;break;case"focusout":_="blur",f=Sm;break;case"beforeblur":case"afterblur":f=Sm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=b2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ZN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=pE;break;case O_:case I_:case F_:f=nE;break;case D_:f=gE;break;case"scroll":f=JN;break;case"wheel":f=yE;break;case"copy":case"cut":case"paste":f=iE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=x2}var S=(t&4)!==0,k=!S&&e==="scroll",y=S?g!==null?g+"Capture":null:g;S=[];for(var x=c,w;x!==null;){w=x;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=$u(x,y),E!=null&&S.push(Yu(x,E,w)))),k)break;x=x.return}0<S.length&&(g=new f(g,_,null,n,d),p.push({event:g,listeners:S}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",g&&n!==V0&&(_=n.relatedTarget||n.fromElement)&&(Do(_)||_[ra]))break e;if((f||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,f?(_=n.relatedTarget||n.toElement,f=c,_=_?Do(_):null,_!==null&&(k=el(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(f=null,_=c),f!==_)){if(S=b2,E="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(S=x2,E="onPointerLeave",y="onPointerEnter",x="pointer"),k=f==null?g:Ol(f),w=_==null?g:Ol(_),g=new S(E,x+"leave",f,n,d),g.target=k,g.relatedTarget=w,E=null,Do(d)===c&&(S=new S(y,x+"enter",_,n,d),S.target=w,S.relatedTarget=k,E=S),k=E,f&&_)t:{for(S=f,y=_,x=0,w=S;w;w=ml(w))x++;for(w=0,E=y;E;E=ml(E))w++;for(;0<x-w;)S=ml(S),x--;for(;0<w-x;)y=ml(y),w--;for(;x--;){if(S===y||y!==null&&S===y.alternate)break t;S=ml(S),y=ml(y)}S=null}else S=null;f!==null&&T2(p,g,f,S,!1),_!==null&&k!==null&&T2(p,k,_,S,!0)}}e:{if(g=c?Ol(c):window,f=g.nodeName&&g.nodeName.toLowerCase(),f==="select"||f==="input"&&g.type==="file")var B=jE;else if(k2(g))if(C_)B=CE;else{B=EE;var q=NE}else(f=g.nodeName)&&f.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=AE);if(B&&(B=B(e,c))){A_(p,B,n,d);break e}q&&q(e,g,c),e==="focusout"&&(q=g._wrapperState)&&q.controlled&&g.type==="number"&&B0(g,"number",g.value)}switch(q=c?Ol(c):window,e){case"focusin":(k2(q)||q.contentEditable==="true")&&(Tl=q,J0=c,ju=null);break;case"focusout":ju=J0=Tl=null;break;case"mousedown":Q0=!0;break;case"contextmenu":case"mouseup":case"dragend":Q0=!1,C2(p,n,d);break;case"selectionchange":if(TE)break;case"keydown":case"keyup":C2(p,n,d)}var z;if(R1)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Ll?N_(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(j_&&n.locale!=="ko"&&(Ll||F!=="onCompositionStart"?F==="onCompositionEnd"&&Ll&&(z=k_()):(Da=d,P1="value"in Da?Da.value:Da.textContent,Ll=!0)),q=Af(c,F),0<q.length&&(F=new w2(F,e,null,n,d),p.push({event:F,listeners:q}),z?F.data=z:(z=E_(n),z!==null&&(F.data=z)))),(z=wE?xE(e,n):_E(e,n))&&(c=Af(c,"onBeforeInput"),0<c.length&&(d=new w2("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=z))}B_(p,t)})}function Yu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Af(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$u(e,n),s!=null&&r.unshift(Yu(e,s,i)),s=$u(e,t),s!=null&&r.push(Yu(e,s,i))),e=e.return}return r}function ml(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function T2(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=$u(n,s),l!=null&&a.unshift(Yu(n,l,o))):i||(l=$u(n,s),l!=null&&a.push(Yu(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var FE=/\r\n?/g,DE=/\u0000|\uFFFD/g;function R2(e){return(typeof e=="string"?e:""+e).replace(FE,`
`).replace(DE,"")}function dh(e,t,n){if(t=R2(t),R2(e)!==t&&n)throw Error(Ce(425))}function Cf(){}var Z0=null,eg=null;function tg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ng=typeof setTimeout=="function"?setTimeout:void 0,ME=typeof clearTimeout=="function"?clearTimeout:void 0,O2=typeof Promise=="function"?Promise:void 0,BE=typeof queueMicrotask=="function"?queueMicrotask:typeof O2<"u"?function(e){return O2.resolve(null).then(e).catch(UE)}:ng;function UE(e){setTimeout(function(){throw e})}function Lm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Hu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hu(t)}function za(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function I2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var bc=Math.random().toString(36).slice(2),_s="__reactFiber$"+bc,Xu="__reactProps$"+bc,ra="__reactContainer$"+bc,rg="__reactEvents$"+bc,qE="__reactListeners$"+bc,$E="__reactHandles$"+bc;function Do(e){var t=e[_s];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ra]||n[_s]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=I2(e);e!==null;){if(n=e[_s])return n;e=I2(e)}return t}e=n,n=e.parentNode}return null}function vd(e){return e=e[_s]||e[ra],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ol(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ce(33))}function pp(e){return e[Xu]||null}var ig=[],Il=-1;function eo(e){return{current:e}}function cn(e){0>Il||(e.current=ig[Il],ig[Il]=null,Il--)}function rn(e,t){Il++,ig[Il]=e.current,e.current=t}var Ya={},Er=eo(Ya),Yr=eo(!1),Wo=Ya;function ac(e,t){var n=e.type.contextTypes;if(!n)return Ya;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Xr(e){return e=e.childContextTypes,e!=null}function Pf(){cn(Yr),cn(Er)}function F2(e,t,n){if(Er.current!==Ya)throw Error(Ce(168));rn(Er,t),rn(Yr,n)}function q_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Ce(108,NN(e)||"Unknown",i));return _n({},n,r)}function Lf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ya,Wo=Er.current,rn(Er,e),rn(Yr,Yr.current),!0}function D2(e,t,n){var r=e.stateNode;if(!r)throw Error(Ce(169));n?(e=q_(e,t,Wo),r.__reactInternalMemoizedMergedChildContext=e,cn(Yr),cn(Er),rn(Er,e)):cn(Yr),rn(Yr,n)}var Gs=null,mp=!1,Tm=!1;function $_(e){Gs===null?Gs=[e]:Gs.push(e)}function zE(e){mp=!0,$_(e)}function to(){if(!Tm&&Gs!==null){Tm=!0;var e=0,t=Wt;try{var n=Gs;for(Wt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gs=null,mp=!1}catch(i){throw Gs!==null&&(Gs=Gs.slice(e+1)),f_(N1,to),i}finally{Wt=t,Tm=!1}}return null}var Fl=[],Dl=0,Tf=null,Rf=0,Ri=[],Oi=0,Ko=null,Xs=1,Js="";function Ao(e,t){Fl[Dl++]=Rf,Fl[Dl++]=Tf,Tf=e,Rf=t}function z_(e,t,n){Ri[Oi++]=Xs,Ri[Oi++]=Js,Ri[Oi++]=Ko,Ko=e;var r=Xs;e=Js;var i=32-is(r)-1;r&=~(1<<i),n+=1;var s=32-is(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xs=1<<32-is(t)+i|n<<i|r,Js=s+e}else Xs=1<<s|n<<i|r,Js=e}function I1(e){e.return!==null&&(Ao(e,1),z_(e,1,0))}function F1(e){for(;e===Tf;)Tf=Fl[--Dl],Fl[Dl]=null,Rf=Fl[--Dl],Fl[Dl]=null;for(;e===Ko;)Ko=Ri[--Oi],Ri[Oi]=null,Js=Ri[--Oi],Ri[Oi]=null,Xs=Ri[--Oi],Ri[Oi]=null}var vi=null,mi=null,fn=!1,rs=null;function V_(e,t){var n=Ii(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function M2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vi=e,mi=za(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vi=e,mi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ko!==null?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ii(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vi=e,mi=null,!0):!1;default:return!1}}function sg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ag(e){if(fn){var t=mi;if(t){var n=t;if(!M2(e,t)){if(sg(e))throw Error(Ce(418));t=za(n.nextSibling);var r=vi;t&&M2(e,t)?V_(r,n):(e.flags=e.flags&-4097|2,fn=!1,vi=e)}}else{if(sg(e))throw Error(Ce(418));e.flags=e.flags&-4097|2,fn=!1,vi=e}}}function B2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vi=e}function hh(e){if(e!==vi)return!1;if(!fn)return B2(e),fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tg(e.type,e.memoizedProps)),t&&(t=mi)){if(sg(e))throw H_(),Error(Ce(418));for(;t;)V_(e,t),t=za(t.nextSibling)}if(B2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mi=za(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mi=null}}else mi=vi?za(e.stateNode.nextSibling):null;return!0}function H_(){for(var e=mi;e;)e=za(e.nextSibling)}function oc(){mi=vi=null,fn=!1}function D1(e){rs===null?rs=[e]:rs.push(e)}var VE=la.ReactCurrentBatchConfig;function iu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,e))}return e}function fh(e,t){throw e=Object.prototype.toString.call(t),Error(Ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function U2(e){var t=e._init;return t(e._payload)}function W_(e){function t(y,x){if(e){var w=y.deletions;w===null?(y.deletions=[x],y.flags|=16):w.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Ka(y,x),y.index=0,y.sibling=null,y}function s(y,x,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<x?(y.flags|=2,x):w):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,x,w,E){return x===null||x.tag!==6?(x=Bm(w,y.mode,E),x.return=y,x):(x=i(x,w),x.return=y,x)}function l(y,x,w,E){var B=w.type;return B===Pl?d(y,x,w.props.children,E,w.key):x!==null&&(x.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ta&&U2(B)===x.type)?(E=i(x,w.props),E.ref=iu(y,x,w),E.return=y,E):(E=af(w.type,w.key,w.props,null,y.mode,E),E.ref=iu(y,x,w),E.return=y,E)}function c(y,x,w,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Um(w,y.mode,E),x.return=y,x):(x=i(x,w.children||[]),x.return=y,x)}function d(y,x,w,E,B){return x===null||x.tag!==7?(x=zo(w,y.mode,E,B),x.return=y,x):(x=i(x,w),x.return=y,x)}function p(y,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Bm(""+x,y.mode,w),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nh:return w=af(x.type,x.key,x.props,null,y.mode,w),w.ref=iu(y,null,x),w.return=y,w;case Cl:return x=Um(x,y.mode,w),x.return=y,x;case Ta:var E=x._init;return p(y,E(x._payload),w)}if(pu(x)||Zc(x))return x=zo(x,y.mode,w,null),x.return=y,x;fh(y,x)}return null}function g(y,x,w,E){var B=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return B!==null?null:o(y,x,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nh:return w.key===B?l(y,x,w,E):null;case Cl:return w.key===B?c(y,x,w,E):null;case Ta:return B=w._init,g(y,x,B(w._payload),E)}if(pu(w)||Zc(w))return B!==null?null:d(y,x,w,E,null);fh(y,w)}return null}function f(y,x,w,E,B){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,o(x,y,""+E,B);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nh:return y=y.get(E.key===null?w:E.key)||null,l(x,y,E,B);case Cl:return y=y.get(E.key===null?w:E.key)||null,c(x,y,E,B);case Ta:var q=E._init;return f(y,x,w,q(E._payload),B)}if(pu(E)||Zc(E))return y=y.get(w)||null,d(x,y,E,B,null);fh(x,E)}return null}function _(y,x,w,E){for(var B=null,q=null,z=x,F=x=0,I=null;z!==null&&F<w.length;F++){z.index>F?(I=z,z=null):I=z.sibling;var J=g(y,z,w[F],E);if(J===null){z===null&&(z=I);break}e&&z&&J.alternate===null&&t(y,z),x=s(J,x,F),q===null?B=J:q.sibling=J,q=J,z=I}if(F===w.length)return n(y,z),fn&&Ao(y,F),B;if(z===null){for(;F<w.length;F++)z=p(y,w[F],E),z!==null&&(x=s(z,x,F),q===null?B=z:q.sibling=z,q=z);return fn&&Ao(y,F),B}for(z=r(y,z);F<w.length;F++)I=f(z,y,F,w[F],E),I!==null&&(e&&I.alternate!==null&&z.delete(I.key===null?F:I.key),x=s(I,x,F),q===null?B=I:q.sibling=I,q=I);return e&&z.forEach(function(R){return t(y,R)}),fn&&Ao(y,F),B}function S(y,x,w,E){var B=Zc(w);if(typeof B!="function")throw Error(Ce(150));if(w=B.call(w),w==null)throw Error(Ce(151));for(var q=B=null,z=x,F=x=0,I=null,J=w.next();z!==null&&!J.done;F++,J=w.next()){z.index>F?(I=z,z=null):I=z.sibling;var R=g(y,z,J.value,E);if(R===null){z===null&&(z=I);break}e&&z&&R.alternate===null&&t(y,z),x=s(R,x,F),q===null?B=R:q.sibling=R,q=R,z=I}if(J.done)return n(y,z),fn&&Ao(y,F),B;if(z===null){for(;!J.done;F++,J=w.next())J=p(y,J.value,E),J!==null&&(x=s(J,x,F),q===null?B=J:q.sibling=J,q=J);return fn&&Ao(y,F),B}for(z=r(y,z);!J.done;F++,J=w.next())J=f(z,y,F,J.value,E),J!==null&&(e&&J.alternate!==null&&z.delete(J.key===null?F:J.key),x=s(J,x,F),q===null?B=J:q.sibling=J,q=J);return e&&z.forEach(function(P){return t(y,P)}),fn&&Ao(y,F),B}function k(y,x,w,E){if(typeof w=="object"&&w!==null&&w.type===Pl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case nh:e:{for(var B=w.key,q=x;q!==null;){if(q.key===B){if(B=w.type,B===Pl){if(q.tag===7){n(y,q.sibling),x=i(q,w.props.children),x.return=y,y=x;break e}}else if(q.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ta&&U2(B)===q.type){n(y,q.sibling),x=i(q,w.props),x.ref=iu(y,q,w),x.return=y,y=x;break e}n(y,q);break}else t(y,q);q=q.sibling}w.type===Pl?(x=zo(w.props.children,y.mode,E,w.key),x.return=y,y=x):(E=af(w.type,w.key,w.props,null,y.mode,E),E.ref=iu(y,x,w),E.return=y,y=E)}return a(y);case Cl:e:{for(q=w.key;x!==null;){if(x.key===q)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(y,x.sibling),x=i(x,w.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else t(y,x);x=x.sibling}x=Um(w,y.mode,E),x.return=y,y=x}return a(y);case Ta:return q=w._init,k(y,x,q(w._payload),E)}if(pu(w))return _(y,x,w,E);if(Zc(w))return S(y,x,w,E);fh(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,w),x.return=y,y=x):(n(y,x),x=Bm(w,y.mode,E),x.return=y,y=x),a(y)):n(y,x)}return k}var lc=W_(!0),K_=W_(!1),Of=eo(null),If=null,Ml=null,M1=null;function B1(){M1=Ml=If=null}function U1(e){var t=Of.current;cn(Of),e._currentValue=t}function og(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ql(e,t){If=e,M1=Ml=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gr=!0),e.firstContext=null)}function Mi(e){var t=e._currentValue;if(M1!==e)if(e={context:e,memoizedValue:t,next:null},Ml===null){if(If===null)throw Error(Ce(308));Ml=e,If.dependencies={lanes:0,firstContext:e}}else Ml=Ml.next=e;return t}var Mo=null;function q1(e){Mo===null?Mo=[e]:Mo.push(e)}function G_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,q1(t)):(n.next=i.next,i.next=n),t.interleaved=n,ia(e,r)}function ia(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ra=!1;function $1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Va(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ia(e,n)}return i=r.interleaved,i===null?(t.next=t,q1(r)):(t.next=i.next,i.next=t),r.interleaved=t,ia(e,n)}function Zh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,E1(e,n)}}function q2(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ff(e,t,n,r){var i=e.updateQueue;Ra=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;a=0,d=c=l=null,o=s;do{var g=o.lane,f=o.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var _=e,S=o;switch(g=t,f=n,S.tag){case 1:if(_=S.payload,typeof _=="function"){p=_.call(f,p,g);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=S.payload,g=typeof _=="function"?_.call(f,p,g):_,g==null)break e;p=_n({},p,g);break e;case 2:Ra=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[o]:g.push(o))}else f={eventTime:f,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=f,l=p):d=d.next=f,a|=g;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;g=o,o=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Yo|=a,e.lanes=a,e.memoizedState=p}}function $2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ce(191,i));i.call(r)}}}var yd={},js=eo(yd),Ju=eo(yd),Qu=eo(yd);function Bo(e){if(e===yd)throw Error(Ce(174));return e}function z1(e,t){switch(rn(Qu,t),rn(Ju,e),rn(js,yd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:q0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=q0(t,e)}cn(js),rn(js,t)}function cc(){cn(js),cn(Ju),cn(Qu)}function X_(e){Bo(Qu.current);var t=Bo(js.current),n=q0(t,e.type);t!==n&&(rn(Ju,e),rn(js,n))}function V1(e){Ju.current===e&&(cn(js),cn(Ju))}var yn=eo(0);function Df(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rm=[];function H1(){for(var e=0;e<Rm.length;e++)Rm[e]._workInProgressVersionPrimary=null;Rm.length=0}var ef=la.ReactCurrentDispatcher,Om=la.ReactCurrentBatchConfig,Go=0,wn=null,er=null,rr=null,Mf=!1,Nu=!1,Zu=0,HE=0;function vr(){throw Error(Ce(321))}function W1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!as(e[n],t[n]))return!1;return!0}function K1(e,t,n,r,i,s){if(Go=s,wn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ef.current=e===null||e.memoizedState===null?YE:XE,e=n(r,i),Nu){s=0;do{if(Nu=!1,Zu=0,25<=s)throw Error(Ce(301));s+=1,rr=er=null,t.updateQueue=null,ef.current=JE,e=n(r,i)}while(Nu)}if(ef.current=Bf,t=er!==null&&er.next!==null,Go=0,rr=er=wn=null,Mf=!1,t)throw Error(Ce(300));return e}function G1(){var e=Zu!==0;return Zu=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?wn.memoizedState=rr=e:rr=rr.next=e,rr}function Bi(){if(er===null){var e=wn.alternate;e=e!==null?e.memoizedState:null}else e=er.next;var t=rr===null?wn.memoizedState:rr.next;if(t!==null)rr=t,er=e;else{if(e===null)throw Error(Ce(310));er=e,e={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},rr===null?wn.memoizedState=rr=e:rr=rr.next=e}return rr}function ed(e,t){return typeof t=="function"?t(e):t}function Im(e){var t=Bi(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=er,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var d=c.lane;if((Go&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=p,a=r):l=l.next=p,wn.lanes|=d,Yo|=d}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,as(r,t.memoizedState)||(Gr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,wn.lanes|=s,Yo|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fm(e){var t=Bi(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);as(s,t.memoizedState)||(Gr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function J_(){}function Q_(e,t){var n=wn,r=Bi(),i=t(),s=!as(r.memoizedState,i);if(s&&(r.memoizedState=i,Gr=!0),r=r.queue,Y1(t3.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||rr!==null&&rr.memoizedState.tag&1){if(n.flags|=2048,td(9,e3.bind(null,n,r,i,t),void 0,null),sr===null)throw Error(Ce(349));Go&30||Z_(n,t,i)}return i}function Z_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=wn.updateQueue,t===null?(t={lastEffect:null,stores:null},wn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function e3(e,t,n,r){t.value=n,t.getSnapshot=r,n3(t)&&r3(e)}function t3(e,t,n){return n(function(){n3(t)&&r3(e)})}function n3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!as(e,n)}catch{return!0}}function r3(e){var t=ia(e,1);t!==null&&ss(t,e,1,-1)}function z2(e){var t=xs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ed,lastRenderedState:e},t.queue=e,e=e.dispatch=GE.bind(null,wn,e),[t.memoizedState,e]}function td(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=wn.updateQueue,t===null?(t={lastEffect:null,stores:null},wn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function i3(){return Bi().memoizedState}function tf(e,t,n,r){var i=xs();wn.flags|=e,i.memoizedState=td(1|t,n,void 0,r===void 0?null:r)}function gp(e,t,n,r){var i=Bi();r=r===void 0?null:r;var s=void 0;if(er!==null){var a=er.memoizedState;if(s=a.destroy,r!==null&&W1(r,a.deps)){i.memoizedState=td(t,n,s,r);return}}wn.flags|=e,i.memoizedState=td(1|t,n,s,r)}function V2(e,t){return tf(8390656,8,e,t)}function Y1(e,t){return gp(2048,8,e,t)}function s3(e,t){return gp(4,2,e,t)}function a3(e,t){return gp(4,4,e,t)}function o3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function l3(e,t,n){return n=n!=null?n.concat([e]):null,gp(4,4,o3.bind(null,t,e),n)}function X1(){}function c3(e,t){var n=Bi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function u3(e,t){var n=Bi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function d3(e,t,n){return Go&21?(as(n,t)||(n=g_(),wn.lanes|=n,Yo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gr=!0),e.memoizedState=n)}function WE(e,t){var n=Wt;Wt=n!==0&&4>n?n:4,e(!0);var r=Om.transition;Om.transition={};try{e(!1),t()}finally{Wt=n,Om.transition=r}}function h3(){return Bi().memoizedState}function KE(e,t,n){var r=Wa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},f3(e))p3(t,n);else if(n=G_(e,t,n,r),n!==null){var i=Fr();ss(n,e,r,i),m3(n,t,r)}}function GE(e,t,n){var r=Wa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(f3(e))p3(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,as(o,a)){var l=t.interleaved;l===null?(i.next=i,q1(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=G_(e,t,i,r),n!==null&&(i=Fr(),ss(n,e,r,i),m3(n,t,r))}}function f3(e){var t=e.alternate;return e===wn||t!==null&&t===wn}function p3(e,t){Nu=Mf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function m3(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,E1(e,n)}}var Bf={readContext:Mi,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},YE={readContext:Mi,useCallback:function(e,t){return xs().memoizedState=[e,t===void 0?null:t],e},useContext:Mi,useEffect:V2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tf(4194308,4,o3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tf(4194308,4,e,t)},useInsertionEffect:function(e,t){return tf(4,2,e,t)},useMemo:function(e,t){var n=xs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=KE.bind(null,wn,e),[r.memoizedState,e]},useRef:function(e){var t=xs();return e={current:e},t.memoizedState=e},useState:z2,useDebugValue:X1,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=z2(!1),t=e[0];return e=WE.bind(null,e[1]),xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=wn,i=xs();if(fn){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=t(),sr===null)throw Error(Ce(349));Go&30||Z_(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,V2(t3.bind(null,r,s,e),[e]),r.flags|=2048,td(9,e3.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=xs(),t=sr.identifierPrefix;if(fn){var n=Js,r=Xs;n=(r&~(1<<32-is(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=HE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XE={readContext:Mi,useCallback:c3,useContext:Mi,useEffect:Y1,useImperativeHandle:l3,useInsertionEffect:s3,useLayoutEffect:a3,useMemo:u3,useReducer:Im,useRef:i3,useState:function(){return Im(ed)},useDebugValue:X1,useDeferredValue:function(e){var t=Bi();return d3(t,er.memoizedState,e)},useTransition:function(){var e=Im(ed)[0],t=Bi().memoizedState;return[e,t]},useMutableSource:J_,useSyncExternalStore:Q_,useId:h3,unstable_isNewReconciler:!1},JE={readContext:Mi,useCallback:c3,useContext:Mi,useEffect:Y1,useImperativeHandle:l3,useInsertionEffect:s3,useLayoutEffect:a3,useMemo:u3,useReducer:Fm,useRef:i3,useState:function(){return Fm(ed)},useDebugValue:X1,useDeferredValue:function(e){var t=Bi();return er===null?t.memoizedState=e:d3(t,er.memoizedState,e)},useTransition:function(){var e=Fm(ed)[0],t=Bi().memoizedState;return[e,t]},useMutableSource:J_,useSyncExternalStore:Q_,useId:h3,unstable_isNewReconciler:!1};function Zi(e,t){if(e&&e.defaultProps){t=_n({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function lg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_n({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vp={isMounted:function(e){return(e=e._reactInternals)?el(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fr(),i=Wa(e),s=Qs(r,i);s.payload=t,n!=null&&(s.callback=n),t=Va(e,s,i),t!==null&&(ss(t,e,i,r),Zh(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fr(),i=Wa(e),s=Qs(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Va(e,s,i),t!==null&&(ss(t,e,i,r),Zh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fr(),r=Wa(e),i=Qs(n,r);i.tag=2,t!=null&&(i.callback=t),t=Va(e,i,r),t!==null&&(ss(t,e,r,n),Zh(t,e,r))}};function H2(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ku(n,r)||!Ku(i,s):!0}function g3(e,t,n){var r=!1,i=Ya,s=t.contextType;return typeof s=="object"&&s!==null?s=Mi(s):(i=Xr(t)?Wo:Er.current,r=t.contextTypes,s=(r=r!=null)?ac(e,i):Ya),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vp,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function W2(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vp.enqueueReplaceState(t,t.state,null)}function cg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},$1(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Mi(s):(s=Xr(t)?Wo:Er.current,i.context=ac(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(lg(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vp.enqueueReplaceState(i,i.state,null),Ff(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function uc(e,t){try{var n="",r=t;do n+=jN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Dm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ug(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var QE=typeof WeakMap=="function"?WeakMap:Map;function v3(e,t,n){n=Qs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qf||(qf=!0,bg=r),ug(e,t)},n}function y3(e,t,n){n=Qs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ug(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ug(e,t),typeof r!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function K2(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new QE;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=hA.bind(null,e,t,n),t.then(e,e))}function G2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Y2(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qs(-1,1),t.tag=2,Va(n,t,1))),n.lanes|=1),e)}var ZE=la.ReactCurrentOwner,Gr=!1;function Or(e,t,n,r){t.child=e===null?K_(t,null,n,r):lc(t,e.child,n,r)}function X2(e,t,n,r,i){n=n.render;var s=t.ref;return Ql(t,i),r=K1(e,t,n,r,s,i),n=G1(),e!==null&&!Gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sa(e,t,i)):(fn&&n&&I1(t),t.flags|=1,Or(e,t,r,i),t.child)}function J2(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!iv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,b3(e,t,s,r,i)):(e=af(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ku,n(a,r)&&e.ref===t.ref)return sa(e,t,i)}return t.flags|=1,e=Ka(s,r),e.ref=t.ref,e.return=t,t.child=e}function b3(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Ku(s,r)&&e.ref===t.ref)if(Gr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Gr=!0);else return t.lanes=e.lanes,sa(e,t,i)}return dg(e,t,n,r,i)}function w3(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Ul,hi),hi|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rn(Ul,hi),hi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,rn(Ul,hi),hi|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,rn(Ul,hi),hi|=r;return Or(e,t,i,n),t.child}function x3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dg(e,t,n,r,i){var s=Xr(n)?Wo:Er.current;return s=ac(t,s),Ql(t,i),n=K1(e,t,n,r,s,i),r=G1(),e!==null&&!Gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sa(e,t,i)):(fn&&r&&I1(t),t.flags|=1,Or(e,t,n,i),t.child)}function Q2(e,t,n,r,i){if(Xr(n)){var s=!0;Lf(t)}else s=!1;if(Ql(t,i),t.stateNode===null)nf(e,t),g3(t,n,r),cg(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mi(c):(c=Xr(n)?Wo:Er.current,c=ac(t,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&W2(t,a,r,c),Ra=!1;var g=t.memoizedState;a.state=g,Ff(t,r,a,i),l=t.memoizedState,o!==r||g!==l||Yr.current||Ra?(typeof d=="function"&&(lg(t,n,d,r),l=t.memoizedState),(o=Ra||H2(t,n,o,r,g,l,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Y_(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Zi(t.type,o),a.props=c,p=t.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mi(l):(l=Xr(n)?Wo:Er.current,l=ac(t,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||g!==l)&&W2(t,a,r,l),Ra=!1,g=t.memoizedState,a.state=g,Ff(t,r,a,i);var _=t.memoizedState;o!==p||g!==_||Yr.current||Ra?(typeof f=="function"&&(lg(t,n,f,r),_=t.memoizedState),(c=Ra||H2(t,n,c,r,g,_,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),a.props=r,a.state=_,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return hg(e,t,n,r,s,i)}function hg(e,t,n,r,i,s){x3(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&D2(t,n,!1),sa(e,t,s);r=t.stateNode,ZE.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=lc(t,e.child,null,s),t.child=lc(t,null,o,s)):Or(e,t,o,s),t.memoizedState=r.state,i&&D2(t,n,!0),t.child}function _3(e){var t=e.stateNode;t.pendingContext?F2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&F2(e,t.context,!1),z1(e,t.containerInfo)}function Z2(e,t,n,r,i){return oc(),D1(i),t.flags|=256,Or(e,t,n,r),t.child}var fg={dehydrated:null,treeContext:null,retryLane:0};function pg(e){return{baseLanes:e,cachePool:null,transitions:null}}function S3(e,t,n){var r=t.pendingProps,i=yn.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),rn(yn,i&1),e===null)return ag(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=wp(a,r,0,null),e=zo(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=pg(n),t.memoizedState=fg,e):J1(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return eA(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ka(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ka(o,s):(s=zo(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?pg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=fg,r}return s=e.child,e=s.sibling,r=Ka(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function J1(e,t){return t=wp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ph(e,t,n,r){return r!==null&&D1(r),lc(t,e.child,null,n),e=J1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eA(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Dm(Error(Ce(422))),ph(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=wp({mode:"visible",children:r.children},i,0,null),s=zo(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&lc(t,e.child,null,a),t.child.memoizedState=pg(a),t.memoizedState=fg,s);if(!(t.mode&1))return ph(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Ce(419)),r=Dm(s,r,void 0),ph(e,t,a,r)}if(o=(a&e.childLanes)!==0,Gr||o){if(r=sr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ia(e,i),ss(r,e,i,-1))}return rv(),r=Dm(Error(Ce(421))),ph(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fA.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,mi=za(i.nextSibling),vi=t,fn=!0,rs=null,e!==null&&(Ri[Oi++]=Xs,Ri[Oi++]=Js,Ri[Oi++]=Ko,Xs=e.id,Js=e.overflow,Ko=t),t=J1(t,r.children),t.flags|=4096,t)}function e5(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),og(e.return,t,n)}function Mm(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function k3(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Or(e,t,r.children,n),r=yn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&e5(e,n,t);else if(e.tag===19)e5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(rn(yn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Df(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Mm(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Df(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Mm(t,!0,n,null,s);break;case"together":Mm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ce(153));if(t.child!==null){for(e=t.child,n=Ka(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ka(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function tA(e,t,n){switch(t.tag){case 3:_3(t),oc();break;case 5:X_(t);break;case 1:Xr(t.type)&&Lf(t);break;case 4:z1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;rn(Of,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(rn(yn,yn.current&1),t.flags|=128,null):n&t.child.childLanes?S3(e,t,n):(rn(yn,yn.current&1),e=sa(e,t,n),e!==null?e.sibling:null);rn(yn,yn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return k3(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(yn,yn.current),r)break;return null;case 22:case 23:return t.lanes=0,w3(e,t,n)}return sa(e,t,n)}var j3,mg,N3,E3;j3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mg=function(){};N3=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Bo(js.current);var s=null;switch(n){case"input":i=D0(e,i),r=D0(e,r),s=[];break;case"select":i=_n({},i,{value:void 0}),r=_n({},r,{value:void 0}),s=[];break;case"textarea":i=U0(e,i),r=U0(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cf)}$0(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&on("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};E3=function(e,t,n,r){n!==r&&(t.flags|=4)};function su(e,t){if(!fn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nA(e,t,n){var r=t.pendingProps;switch(F1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(t),null;case 1:return Xr(t.type)&&Pf(),yr(t),null;case 3:return r=t.stateNode,cc(),cn(Yr),cn(Er),H1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rs!==null&&(_g(rs),rs=null))),mg(e,t),yr(t),null;case 5:V1(t);var i=Bo(Qu.current);if(n=t.type,e!==null&&t.stateNode!=null)N3(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ce(166));return yr(t),null}if(e=Bo(js.current),hh(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_s]=t,r[Xu]=s,e=(t.mode&1)!==0,n){case"dialog":on("cancel",r),on("close",r);break;case"iframe":case"object":case"embed":on("load",r);break;case"video":case"audio":for(i=0;i<gu.length;i++)on(gu[i],r);break;case"source":on("error",r);break;case"img":case"image":case"link":on("error",r),on("load",r);break;case"details":on("toggle",r);break;case"input":c2(r,s),on("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},on("invalid",r);break;case"textarea":d2(r,s),on("invalid",r)}$0(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&dh(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&dh(r.textContent,o,e),i=["children",""+o]):Uu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&on("scroll",r)}switch(n){case"input":rh(r),u2(r,s,!0);break;case"textarea":rh(r),h2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cf)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=t_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[_s]=t,e[Xu]=r,j3(e,t,!1,!1),t.stateNode=e;e:{switch(a=z0(n,r),n){case"dialog":on("cancel",e),on("close",e),i=r;break;case"iframe":case"object":case"embed":on("load",e),i=r;break;case"video":case"audio":for(i=0;i<gu.length;i++)on(gu[i],e);i=r;break;case"source":on("error",e),i=r;break;case"img":case"image":case"link":on("error",e),on("load",e),i=r;break;case"details":on("toggle",e),i=r;break;case"input":c2(e,r),i=D0(e,r),on("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_n({},r,{value:void 0}),on("invalid",e);break;case"textarea":d2(e,r),i=U0(e,r),on("invalid",e);break;default:i=r}$0(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?i_(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&n_(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qu(e,l):typeof l=="number"&&qu(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&on("scroll",e):l!=null&&x1(e,s,l,a))}switch(n){case"input":rh(e),u2(e,r,!1);break;case"textarea":rh(e),h2(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ga(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Gl(e,!!r.multiple,s,!1):r.defaultValue!=null&&Gl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Cf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yr(t),null;case 6:if(e&&t.stateNode!=null)E3(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ce(166));if(n=Bo(Qu.current),Bo(js.current),hh(t)){if(r=t.stateNode,n=t.memoizedProps,r[_s]=t,(s=r.nodeValue!==n)&&(e=vi,e!==null))switch(e.tag){case 3:dh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&dh(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_s]=t,t.stateNode=r}return yr(t),null;case 13:if(cn(yn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fn&&mi!==null&&t.mode&1&&!(t.flags&128))H_(),oc(),t.flags|=98560,s=!1;else if(s=hh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Ce(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[_s]=t}else oc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yr(t),s=!1}else rs!==null&&(_g(rs),rs=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||yn.current&1?tr===0&&(tr=3):rv())),t.updateQueue!==null&&(t.flags|=4),yr(t),null);case 4:return cc(),mg(e,t),e===null&&Gu(t.stateNode.containerInfo),yr(t),null;case 10:return U1(t.type._context),yr(t),null;case 17:return Xr(t.type)&&Pf(),yr(t),null;case 19:if(cn(yn),s=t.memoizedState,s===null)return yr(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)su(s,!1);else{if(tr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Df(e),a!==null){for(t.flags|=128,su(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return rn(yn,yn.current&1|2),t.child}e=e.sibling}s.tail!==null&&In()>dc&&(t.flags|=128,r=!0,su(s,!1),t.lanes=4194304)}else{if(!r)if(e=Df(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),su(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!fn)return yr(t),null}else 2*In()-s.renderingStartTime>dc&&n!==1073741824&&(t.flags|=128,r=!0,su(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=In(),t.sibling=null,n=yn.current,rn(yn,r?n&1|2:n&1),t):(yr(t),null);case 22:case 23:return nv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?hi&1073741824&&(yr(t),t.subtreeFlags&6&&(t.flags|=8192)):yr(t),null;case 24:return null;case 25:return null}throw Error(Ce(156,t.tag))}function rA(e,t){switch(F1(t),t.tag){case 1:return Xr(t.type)&&Pf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cc(),cn(Yr),cn(Er),H1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return V1(t),null;case 13:if(cn(yn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ce(340));oc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(yn),null;case 4:return cc(),null;case 10:return U1(t.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var mh=!1,jr=!1,iA=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Bl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){En(e,t,r)}else n.current=null}function A3(e,t,n){try{n()}catch(r){En(e,t,r)}}var t5=!1;function sA(e,t){if(Z0=Nf,e=T_(),O1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,d=0,p=e,g=null;t:for(;;){for(var f;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(f=p.firstChild)!==null;)g=p,p=f;for(;;){if(p===e)break t;if(g===n&&++c===i&&(o=a),g===s&&++d===r&&(l=a),(f=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=f}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(eg={focusedElem:e,selectionRange:n},Nf=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){t=qe;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var S=_.memoizedProps,k=_.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?S:Zi(t.type,S),k);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(E){En(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}return _=t5,t5=!1,_}function Eu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&A3(t,n,s)}i=i.next}while(i!==r)}}function yp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function C3(e){var t=e.alternate;t!==null&&(e.alternate=null,C3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_s],delete t[Xu],delete t[rg],delete t[qE],delete t[$E])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function P3(e){return e.tag===5||e.tag===3||e.tag===4}function n5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||P3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cf));else if(r!==4&&(e=e.child,e!==null))for(vg(e,t,n),e=e.sibling;e!==null;)vg(e,t,n),e=e.sibling}function yg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(yg(e,t,n),e=e.sibling;e!==null;)yg(e,t,n),e=e.sibling}var ur=null,ts=!1;function Ea(e,t,n){for(n=n.child;n!==null;)L3(e,t,n),n=n.sibling}function L3(e,t,n){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(up,n)}catch{}switch(n.tag){case 5:jr||Bl(n,t);case 6:var r=ur,i=ts;ur=null,Ea(e,t,n),ur=r,ts=i,ur!==null&&(ts?(e=ur,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ur.removeChild(n.stateNode));break;case 18:ur!==null&&(ts?(e=ur,n=n.stateNode,e.nodeType===8?Lm(e.parentNode,n):e.nodeType===1&&Lm(e,n),Hu(e)):Lm(ur,n.stateNode));break;case 4:r=ur,i=ts,ur=n.stateNode.containerInfo,ts=!0,Ea(e,t,n),ur=r,ts=i;break;case 0:case 11:case 14:case 15:if(!jr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&A3(n,t,a),i=i.next}while(i!==r)}Ea(e,t,n);break;case 1:if(!jr&&(Bl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){En(n,t,o)}Ea(e,t,n);break;case 21:Ea(e,t,n);break;case 22:n.mode&1?(jr=(r=jr)||n.memoizedState!==null,Ea(e,t,n),jr=r):Ea(e,t,n);break;default:Ea(e,t,n)}}function r5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new iA),t.forEach(function(r){var i=pA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:ur=o.stateNode,ts=!1;break e;case 3:ur=o.stateNode.containerInfo,ts=!0;break e;case 4:ur=o.stateNode.containerInfo,ts=!0;break e}o=o.return}if(ur===null)throw Error(Ce(160));L3(s,a,i),ur=null,ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){En(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)T3(t,e),t=t.sibling}function T3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gi(t,e),ys(e),r&4){try{Eu(3,e,e.return),yp(3,e)}catch(S){En(e,e.return,S)}try{Eu(5,e,e.return)}catch(S){En(e,e.return,S)}}break;case 1:Gi(t,e),ys(e),r&512&&n!==null&&Bl(n,n.return);break;case 5:if(Gi(t,e),ys(e),r&512&&n!==null&&Bl(n,n.return),e.flags&32){var i=e.stateNode;try{qu(i,"")}catch(S){En(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Zx(i,s),z0(o,a);var c=z0(o,s);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?i_(i,p):d==="dangerouslySetInnerHTML"?n_(i,p):d==="children"?qu(i,p):x1(i,d,p,c)}switch(o){case"input":M0(i,s);break;case"textarea":e_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Gl(i,!!s.multiple,f,!1):g!==!!s.multiple&&(s.defaultValue!=null?Gl(i,!!s.multiple,s.defaultValue,!0):Gl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xu]=s}catch(S){En(e,e.return,S)}}break;case 6:if(Gi(t,e),ys(e),r&4){if(e.stateNode===null)throw Error(Ce(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(S){En(e,e.return,S)}}break;case 3:if(Gi(t,e),ys(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hu(t.containerInfo)}catch(S){En(e,e.return,S)}break;case 4:Gi(t,e),ys(e);break;case 13:Gi(t,e),ys(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ev=In())),r&4&&r5(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(jr=(c=jr)||d,Gi(t,e),jr=c):Gi(t,e),ys(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(qe=e,d=e.child;d!==null;){for(p=qe=d;qe!==null;){switch(g=qe,f=g.child,g.tag){case 0:case 11:case 14:case 15:Eu(4,g,g.return);break;case 1:Bl(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(S){En(r,n,S)}}break;case 5:Bl(g,g.return);break;case 22:if(g.memoizedState!==null){s5(p);continue}}f!==null?(f.return=g,qe=f):s5(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=r_("display",a))}catch(S){En(e,e.return,S)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(S){En(e,e.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gi(t,e),ys(e),r&4&&r5(e);break;case 21:break;default:Gi(t,e),ys(e)}}function ys(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(P3(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qu(i,""),r.flags&=-33);var s=n5(e);yg(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=n5(e);vg(e,o,a);break;default:throw Error(Ce(161))}}catch(l){En(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aA(e,t,n){qe=e,R3(e)}function R3(e,t,n){for(var r=(e.mode&1)!==0;qe!==null;){var i=qe,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||mh;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||jr;o=mh;var c=jr;if(mh=a,(jr=l)&&!c)for(qe=i;qe!==null;)a=qe,l=a.child,a.tag===22&&a.memoizedState!==null?a5(i):l!==null?(l.return=a,qe=l):a5(i);for(;s!==null;)qe=s,R3(s),s=s.sibling;qe=i,mh=o,jr=c}i5(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,qe=s):i5(e)}}function i5(e){for(;qe!==null;){var t=qe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jr||yp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!jr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Zi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&$2(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$2(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Hu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}jr||t.flags&512&&gg(t)}catch(g){En(t,t.return,g)}}if(t===e){qe=null;break}if(n=t.sibling,n!==null){n.return=t.return,qe=n;break}qe=t.return}}function s5(e){for(;qe!==null;){var t=qe;if(t===e){qe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,qe=n;break}qe=t.return}}function a5(e){for(;qe!==null;){var t=qe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yp(4,t)}catch(l){En(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){En(t,i,l)}}var s=t.return;try{gg(t)}catch(l){En(t,s,l)}break;case 5:var a=t.return;try{gg(t)}catch(l){En(t,a,l)}}}catch(l){En(t,t.return,l)}if(t===e){qe=null;break}var o=t.sibling;if(o!==null){o.return=t.return,qe=o;break}qe=t.return}}var oA=Math.ceil,Uf=la.ReactCurrentDispatcher,Q1=la.ReactCurrentOwner,Di=la.ReactCurrentBatchConfig,Ft=0,sr=null,zn=null,hr=0,hi=0,Ul=eo(0),tr=0,nd=null,Yo=0,bp=0,Z1=0,Au=null,Kr=null,ev=0,dc=1/0,Ws=null,qf=!1,bg=null,Ha=null,gh=!1,Ma=null,$f=0,Cu=0,wg=null,rf=-1,sf=0;function Fr(){return Ft&6?In():rf!==-1?rf:rf=In()}function Wa(e){return e.mode&1?Ft&2&&hr!==0?hr&-hr:VE.transition!==null?(sf===0&&(sf=g_()),sf):(e=Wt,e!==0||(e=window.event,e=e===void 0?16:S_(e.type)),e):1}function ss(e,t,n,r){if(50<Cu)throw Cu=0,wg=null,Error(Ce(185));md(e,n,r),(!(Ft&2)||e!==sr)&&(e===sr&&(!(Ft&2)&&(bp|=n),tr===4&&Ia(e,hr)),Jr(e,r),n===1&&Ft===0&&!(t.mode&1)&&(dc=In()+500,mp&&to()))}function Jr(e,t){var n=e.callbackNode;VN(e,t);var r=jf(e,e===sr?hr:0);if(r===0)n!==null&&m2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&m2(n),t===1)e.tag===0?zE(o5.bind(null,e)):$_(o5.bind(null,e)),BE(function(){!(Ft&6)&&to()}),n=null;else{switch(v_(r)){case 1:n=N1;break;case 4:n=p_;break;case 16:n=kf;break;case 536870912:n=m_;break;default:n=kf}n=q3(n,O3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function O3(e,t){if(rf=-1,sf=0,Ft&6)throw Error(Ce(327));var n=e.callbackNode;if(Zl()&&e.callbackNode!==n)return null;var r=jf(e,e===sr?hr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=zf(e,r);else{t=r;var i=Ft;Ft|=2;var s=F3();(sr!==e||hr!==t)&&(Ws=null,dc=In()+500,$o(e,t));do try{uA();break}catch(o){I3(e,o)}while(1);B1(),Uf.current=s,Ft=i,zn!==null?t=0:(sr=null,hr=0,t=tr)}if(t!==0){if(t===2&&(i=G0(e),i!==0&&(r=i,t=xg(e,i))),t===1)throw n=nd,$o(e,0),Ia(e,r),Jr(e,In()),n;if(t===6)Ia(e,r);else{if(i=e.current.alternate,!(r&30)&&!lA(i)&&(t=zf(e,r),t===2&&(s=G0(e),s!==0&&(r=s,t=xg(e,s))),t===1))throw n=nd,$o(e,0),Ia(e,r),Jr(e,In()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Ce(345));case 2:Co(e,Kr,Ws);break;case 3:if(Ia(e,r),(r&130023424)===r&&(t=ev+500-In(),10<t)){if(jf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Fr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ng(Co.bind(null,e,Kr,Ws),t);break}Co(e,Kr,Ws);break;case 4:if(Ia(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-is(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=In()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oA(r/1960))-r,10<r){e.timeoutHandle=ng(Co.bind(null,e,Kr,Ws),r);break}Co(e,Kr,Ws);break;case 5:Co(e,Kr,Ws);break;default:throw Error(Ce(329))}}}return Jr(e,In()),e.callbackNode===n?O3.bind(null,e):null}function xg(e,t){var n=Au;return e.current.memoizedState.isDehydrated&&($o(e,t).flags|=256),e=zf(e,t),e!==2&&(t=Kr,Kr=n,t!==null&&_g(t)),e}function _g(e){Kr===null?Kr=e:Kr.push.apply(Kr,e)}function lA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!as(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ia(e,t){for(t&=~Z1,t&=~bp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-is(t),r=1<<n;e[n]=-1,t&=~r}}function o5(e){if(Ft&6)throw Error(Ce(327));Zl();var t=jf(e,0);if(!(t&1))return Jr(e,In()),null;var n=zf(e,t);if(e.tag!==0&&n===2){var r=G0(e);r!==0&&(t=r,n=xg(e,r))}if(n===1)throw n=nd,$o(e,0),Ia(e,t),Jr(e,In()),n;if(n===6)throw Error(Ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Co(e,Kr,Ws),Jr(e,In()),null}function tv(e,t){var n=Ft;Ft|=1;try{return e(t)}finally{Ft=n,Ft===0&&(dc=In()+500,mp&&to())}}function Xo(e){Ma!==null&&Ma.tag===0&&!(Ft&6)&&Zl();var t=Ft;Ft|=1;var n=Di.transition,r=Wt;try{if(Di.transition=null,Wt=1,e)return e()}finally{Wt=r,Di.transition=n,Ft=t,!(Ft&6)&&to()}}function nv(){hi=Ul.current,cn(Ul)}function $o(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ME(n)),zn!==null)for(n=zn.return;n!==null;){var r=n;switch(F1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pf();break;case 3:cc(),cn(Yr),cn(Er),H1();break;case 5:V1(r);break;case 4:cc();break;case 13:cn(yn);break;case 19:cn(yn);break;case 10:U1(r.type._context);break;case 22:case 23:nv()}n=n.return}if(sr=e,zn=e=Ka(e.current,null),hr=hi=t,tr=0,nd=null,Z1=bp=Yo=0,Kr=Au=null,Mo!==null){for(t=0;t<Mo.length;t++)if(n=Mo[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Mo=null}return e}function I3(e,t){do{var n=zn;try{if(B1(),ef.current=Bf,Mf){for(var r=wn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mf=!1}if(Go=0,rr=er=wn=null,Nu=!1,Zu=0,Q1.current=null,n===null||n.return===null){tr=1,nd=t,zn=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=hr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=G2(a);if(f!==null){f.flags&=-257,Y2(f,a,o,s,t),f.mode&1&&K2(s,c,t),t=f,l=c;var _=t.updateQueue;if(_===null){var S=new Set;S.add(l),t.updateQueue=S}else _.add(l);break e}else{if(!(t&1)){K2(s,c,t),rv();break e}l=Error(Ce(426))}}else if(fn&&o.mode&1){var k=G2(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Y2(k,a,o,s,t),D1(uc(l,o));break e}}s=l=uc(l,o),tr!==4&&(tr=2),Au===null?Au=[s]:Au.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=v3(s,l,t);q2(s,y);break e;case 1:o=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ha===null||!Ha.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=y3(s,o,t);q2(s,E);break e}}s=s.return}while(s!==null)}M3(n)}catch(B){t=B,zn===n&&n!==null&&(zn=n=n.return);continue}break}while(1)}function F3(){var e=Uf.current;return Uf.current=Bf,e===null?Bf:e}function rv(){(tr===0||tr===3||tr===2)&&(tr=4),sr===null||!(Yo&268435455)&&!(bp&268435455)||Ia(sr,hr)}function zf(e,t){var n=Ft;Ft|=2;var r=F3();(sr!==e||hr!==t)&&(Ws=null,$o(e,t));do try{cA();break}catch(i){I3(e,i)}while(1);if(B1(),Ft=n,Uf.current=r,zn!==null)throw Error(Ce(261));return sr=null,hr=0,tr}function cA(){for(;zn!==null;)D3(zn)}function uA(){for(;zn!==null&&!IN();)D3(zn)}function D3(e){var t=U3(e.alternate,e,hi);e.memoizedProps=e.pendingProps,t===null?M3(e):zn=t,Q1.current=null}function M3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=rA(n,t),n!==null){n.flags&=32767,zn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tr=6,zn=null;return}}else if(n=nA(n,t,hi),n!==null){zn=n;return}if(t=t.sibling,t!==null){zn=t;return}zn=t=e}while(t!==null);tr===0&&(tr=5)}function Co(e,t,n){var r=Wt,i=Di.transition;try{Di.transition=null,Wt=1,dA(e,t,n,r)}finally{Di.transition=i,Wt=r}return null}function dA(e,t,n,r){do Zl();while(Ma!==null);if(Ft&6)throw Error(Ce(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ce(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(HN(e,s),e===sr&&(zn=sr=null,hr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gh||(gh=!0,q3(kf,function(){return Zl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Di.transition,Di.transition=null;var a=Wt;Wt=1;var o=Ft;Ft|=4,Q1.current=null,sA(e,n),T3(n,e),LE(eg),Nf=!!Z0,eg=Z0=null,e.current=n,aA(n),FN(),Ft=o,Wt=a,Di.transition=s}else e.current=n;if(gh&&(gh=!1,Ma=e,$f=i),s=e.pendingLanes,s===0&&(Ha=null),BN(n.stateNode),Jr(e,In()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qf)throw qf=!1,e=bg,bg=null,e;return $f&1&&e.tag!==0&&Zl(),s=e.pendingLanes,s&1?e===wg?Cu++:(Cu=0,wg=e):Cu=0,to(),null}function Zl(){if(Ma!==null){var e=v_($f),t=Di.transition,n=Wt;try{if(Di.transition=null,Wt=16>e?16:e,Ma===null)var r=!1;else{if(e=Ma,Ma=null,$f=0,Ft&6)throw Error(Ce(331));var i=Ft;for(Ft|=4,qe=e.current;qe!==null;){var s=qe,a=s.child;if(qe.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(qe=c;qe!==null;){var d=qe;switch(d.tag){case 0:case 11:case 15:Eu(8,d,s)}var p=d.child;if(p!==null)p.return=d,qe=p;else for(;qe!==null;){d=qe;var g=d.sibling,f=d.return;if(C3(d),d===c){qe=null;break}if(g!==null){g.return=f,qe=g;break}qe=f}}}var _=s.alternate;if(_!==null){var S=_.child;if(S!==null){_.child=null;do{var k=S.sibling;S.sibling=null,S=k}while(S!==null)}}qe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,qe=a;else e:for(;qe!==null;){if(s=qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eu(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,qe=y;break e}qe=s.return}}var x=e.current;for(qe=x;qe!==null;){a=qe;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,qe=w;else e:for(a=x;qe!==null;){if(o=qe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:yp(9,o)}}catch(B){En(o,o.return,B)}if(o===a){qe=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,qe=E;break e}qe=o.return}}if(Ft=i,to(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(up,e)}catch{}r=!0}return r}finally{Wt=n,Di.transition=t}}return!1}function l5(e,t,n){t=uc(n,t),t=v3(e,t,1),e=Va(e,t,1),t=Fr(),e!==null&&(md(e,1,t),Jr(e,t))}function En(e,t,n){if(e.tag===3)l5(e,e,n);else for(;t!==null;){if(t.tag===3){l5(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ha===null||!Ha.has(r))){e=uc(n,e),e=y3(t,e,1),t=Va(t,e,1),e=Fr(),t!==null&&(md(t,1,e),Jr(t,e));break}}t=t.return}}function hA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Fr(),e.pingedLanes|=e.suspendedLanes&n,sr===e&&(hr&n)===n&&(tr===4||tr===3&&(hr&130023424)===hr&&500>In()-ev?$o(e,0):Z1|=n),Jr(e,t)}function B3(e,t){t===0&&(e.mode&1?(t=ah,ah<<=1,!(ah&130023424)&&(ah=4194304)):t=1);var n=Fr();e=ia(e,t),e!==null&&(md(e,t,n),Jr(e,n))}function fA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),B3(e,n)}function pA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(t),B3(e,n)}var U3;U3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yr.current)Gr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Gr=!1,tA(e,t,n);Gr=!!(e.flags&131072)}else Gr=!1,fn&&t.flags&1048576&&z_(t,Rf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nf(e,t),e=t.pendingProps;var i=ac(t,Er.current);Ql(t,n),i=K1(null,t,r,e,i,n);var s=G1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xr(r)?(s=!0,Lf(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$1(t),i.updater=vp,t.stateNode=i,i._reactInternals=t,cg(t,r,e,n),t=hg(null,t,r,!0,s,n)):(t.tag=0,fn&&s&&I1(t),Or(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(nf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=gA(r),e=Zi(r,e),i){case 0:t=dg(null,t,r,e,n);break e;case 1:t=Q2(null,t,r,e,n);break e;case 11:t=X2(null,t,r,e,n);break e;case 14:t=J2(null,t,r,Zi(r.type,e),n);break e}throw Error(Ce(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),dg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),Q2(e,t,r,i,n);case 3:e:{if(_3(t),e===null)throw Error(Ce(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Y_(e,t),Ff(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=uc(Error(Ce(423)),t),t=Z2(e,t,r,n,i);break e}else if(r!==i){i=uc(Error(Ce(424)),t),t=Z2(e,t,r,n,i);break e}else for(mi=za(t.stateNode.containerInfo.firstChild),vi=t,fn=!0,rs=null,n=K_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oc(),r===i){t=sa(e,t,n);break e}Or(e,t,r,n)}t=t.child}return t;case 5:return X_(t),e===null&&ag(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,tg(r,i)?a=null:s!==null&&tg(r,s)&&(t.flags|=32),x3(e,t),Or(e,t,a,n),t.child;case 6:return e===null&&ag(t),null;case 13:return S3(e,t,n);case 4:return z1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lc(t,null,r,n):Or(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),X2(e,t,r,i,n);case 7:return Or(e,t,t.pendingProps,n),t.child;case 8:return Or(e,t,t.pendingProps.children,n),t.child;case 12:return Or(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,rn(Of,r._currentValue),r._currentValue=a,s!==null)if(as(s.value,a)){if(s.children===i.children&&!Yr.current){t=sa(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),og(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ce(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),og(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Or(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ql(t,n),i=Mi(i),r=r(i),t.flags|=1,Or(e,t,r,n),t.child;case 14:return r=t.type,i=Zi(r,t.pendingProps),i=Zi(r.type,i),J2(e,t,r,i,n);case 15:return b3(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),nf(e,t),t.tag=1,Xr(r)?(e=!0,Lf(t)):e=!1,Ql(t,n),g3(t,r,i),cg(t,r,i,n),hg(null,t,r,!0,e,n);case 19:return k3(e,t,n);case 22:return w3(e,t,n)}throw Error(Ce(156,t.tag))};function q3(e,t){return f_(e,t)}function mA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(e,t,n,r){return new mA(e,t,n,r)}function iv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gA(e){if(typeof e=="function")return iv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===S1)return 11;if(e===k1)return 14}return 2}function Ka(e,t){var n=e.alternate;return n===null?(n=Ii(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function af(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")iv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Pl:return zo(n.children,i,s,t);case _1:a=8,i|=8;break;case R0:return e=Ii(12,n,t,i|2),e.elementType=R0,e.lanes=s,e;case O0:return e=Ii(13,n,t,i),e.elementType=O0,e.lanes=s,e;case I0:return e=Ii(19,n,t,i),e.elementType=I0,e.lanes=s,e;case Xx:return wp(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gx:a=10;break e;case Yx:a=9;break e;case S1:a=11;break e;case k1:a=14;break e;case Ta:a=16,r=null;break e}throw Error(Ce(130,e==null?e:typeof e,""))}return t=Ii(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function zo(e,t,n,r){return e=Ii(7,e,r,t),e.lanes=n,e}function wp(e,t,n,r){return e=Ii(22,e,r,t),e.elementType=Xx,e.lanes=n,e.stateNode={isHidden:!1},e}function Bm(e,t,n){return e=Ii(6,e,null,t),e.lanes=n,e}function Um(e,t,n){return t=Ii(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wm(0),this.expirationTimes=wm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sv(e,t,n,r,i,s,a,o,l){return e=new vA(e,t,n,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ii(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$1(s),e}function yA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $3(e){if(!e)return Ya;e=e._reactInternals;e:{if(el(e)!==e||e.tag!==1)throw Error(Ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ce(171))}if(e.tag===1){var n=e.type;if(Xr(n))return q_(e,n,t)}return t}function z3(e,t,n,r,i,s,a,o,l){return e=sv(n,r,!0,e,i,s,a,o,l),e.context=$3(null),n=e.current,r=Fr(),i=Wa(n),s=Qs(r,i),s.callback=t??null,Va(n,s,i),e.current.lanes=i,md(e,i,r),Jr(e,r),e}function xp(e,t,n,r){var i=t.current,s=Fr(),a=Wa(i);return n=$3(n),t.context===null?t.context=n:t.pendingContext=n,t=Qs(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Va(i,t,a),e!==null&&(ss(e,i,a,s),Zh(e,i,a)),a}function Vf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function c5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function av(e,t){c5(e,t),(e=e.alternate)&&c5(e,t)}function bA(){return null}var V3=typeof reportError=="function"?reportError:function(e){console.error(e)};function ov(e){this._internalRoot=e}_p.prototype.render=ov.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ce(409));xp(e,t,null,null)};_p.prototype.unmount=ov.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xo(function(){xp(null,e,null,null)}),t[ra]=null}};function _p(e){this._internalRoot=e}_p.prototype.unstable_scheduleHydration=function(e){if(e){var t=w_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oa.length&&t!==0&&t<Oa[n].priority;n++);Oa.splice(n,0,e),n===0&&__(e)}};function lv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function u5(){}function wA(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Vf(a);s.call(c)}}var a=z3(t,r,e,0,null,!1,!1,"",u5);return e._reactRootContainer=a,e[ra]=a.current,Gu(e.nodeType===8?e.parentNode:e),Xo(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=Vf(l);o.call(c)}}var l=sv(e,0,!1,null,null,!1,!1,"",u5);return e._reactRootContainer=l,e[ra]=l.current,Gu(e.nodeType===8?e.parentNode:e),Xo(function(){xp(t,l,n,r)}),l}function kp(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Vf(a);o.call(l)}}xp(t,a,e,i)}else a=wA(n,t,e,i,r);return Vf(a)}y_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mu(t.pendingLanes);n!==0&&(E1(t,n|1),Jr(t,In()),!(Ft&6)&&(dc=In()+500,to()))}break;case 13:Xo(function(){var r=ia(e,1);if(r!==null){var i=Fr();ss(r,e,1,i)}}),av(e,1)}};A1=function(e){if(e.tag===13){var t=ia(e,134217728);if(t!==null){var n=Fr();ss(t,e,134217728,n)}av(e,134217728)}};b_=function(e){if(e.tag===13){var t=Wa(e),n=ia(e,t);if(n!==null){var r=Fr();ss(n,e,t,r)}av(e,t)}};w_=function(){return Wt};x_=function(e,t){var n=Wt;try{return Wt=e,t()}finally{Wt=n}};H0=function(e,t,n){switch(t){case"input":if(M0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=pp(r);if(!i)throw Error(Ce(90));Qx(r),M0(r,i)}}}break;case"textarea":e_(e,n);break;case"select":t=n.value,t!=null&&Gl(e,!!n.multiple,t,!1)}};o_=tv;l_=Xo;var xA={usingClientEntryPoint:!1,Events:[vd,Ol,pp,s_,a_,tv]},au={findFiberByHostInstance:Do,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_A={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:la.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=d_(e),e===null?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||bA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{up=vh.inject(_A),ks=vh}catch{}}xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xA;xi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lv(t))throw Error(Ce(200));return yA(e,t,null,n)};xi.createRoot=function(e,t){if(!lv(e))throw Error(Ce(299));var n=!1,r="",i=V3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=sv(e,1,!1,null,null,n,!1,r,i),e[ra]=t.current,Gu(e.nodeType===8?e.parentNode:e),new ov(t)};xi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ce(188)):(e=Object.keys(e).join(","),Error(Ce(268,e)));return e=d_(t),e=e===null?null:e.stateNode,e};xi.flushSync=function(e){return Xo(e)};xi.hydrate=function(e,t,n){if(!Sp(t))throw Error(Ce(200));return kp(null,e,t,!0,n)};xi.hydrateRoot=function(e,t,n){if(!lv(e))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=V3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=z3(t,null,e,1,n??null,i,!1,s,a),e[ra]=t.current,Gu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new _p(t)};xi.render=function(e,t,n){if(!Sp(t))throw Error(Ce(200));return kp(null,e,t,!1,n)};xi.unmountComponentAtNode=function(e){if(!Sp(e))throw Error(Ce(40));return e._reactRootContainer?(Xo(function(){kp(null,null,e,!1,function(){e._reactRootContainer=null,e[ra]=null})}),!0):!1};xi.unstable_batchedUpdates=tv;xi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sp(n))throw Error(Ce(200));if(e==null||e._reactInternals===void 0)throw Error(Ce(38));return kp(e,t,n,!1,r)};xi.version="18.3.1-next-f1338f8080-20240426";function H3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H3)}catch(e){console.error(e)}}H3(),Vx.exports=xi;var W3=Vx.exports;const SA=p1(W3);var d5=W3;L0.createRoot=d5.createRoot,L0.hydrateRoot=d5.hydrateRoot;const kA="modulepreload",jA=function(e){return"/"+e},h5={},Pu=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=jA(i),i in h5)return;h5[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(n)for(let l=r.length-1;l>=0;l--){const c=r[l];if(c.href===i&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":kA,s||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),s)return new Promise((l,c)=>{o.addEventListener("load",l),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var f5="popstate";function NA(e={}){function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return Sg("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rd(i)}return AA(t,n,null,e)}function xn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function os(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EA(){return Math.random().toString(36).substring(2,10)}function p5(e,t){return{usr:e.state,key:e.key,idx:t}}function Sg(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?wc(t):t,state:n,key:t&&t.key||r||EA()}}function rd({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function wc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function AA(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=d();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function d(){return(a.state||{idx:null}).idx}function p(){o="POP";let k=d(),y=k==null?null:k-c;c=k,l&&l({action:o,location:S.location,delta:y})}function g(k,y){o="PUSH";let x=Sg(S.location,k,y);n&&n(x,k),c=d()+1;let w=p5(x,c),E=S.createHref(x);try{a.pushState(w,"",E)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(E)}s&&l&&l({action:o,location:S.location,delta:1})}function f(k,y){o="REPLACE";let x=Sg(S.location,k,y);n&&n(x,k),c=d();let w=p5(x,c),E=S.createHref(x);a.replaceState(w,"",E),s&&l&&l({action:o,location:S.location,delta:0})}function _(k){return CA(k)}let S={get action(){return o},get location(){return e(i,a)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(f5,p),l=k,()=>{i.removeEventListener(f5,p),l=null}},createHref(k){return t(i,k)},createURL:_,encodeLocation(k){let y=_(k);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:f,go(k){return a.go(k)}};return S}function CA(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:rd(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function K3(e,t,n="/"){return PA(e,t,n,!1)}function PA(e,t,n,r){let i=typeof t=="string"?wc(t):t,s=aa(i.pathname||"/",n);if(s==null)return null;let a=G3(e);LA(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=$A(s);o=UA(a[l],c,r)}return o}function G3(e,t=[],n=[],r="",i=!1){let s=(a,o,l=i,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;xn(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let p=Zs([r,d.relativePath]),g=n.concat(d);a.children&&a.children.length>0&&(xn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),G3(a.children,t,g,p,l)),!(a.path==null&&!a.index)&&t.push({path:p,score:MA(p,a.index),routesMeta:g})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of Y3(a.path))s(a,o,!0,c)}),t}function Y3(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Y3(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function LA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:BA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var TA=/^:[\w-]+$/,RA=3,OA=2,IA=1,FA=10,DA=-2,m5=e=>e==="*";function MA(e,t){let n=e.split("/"),r=n.length;return n.some(m5)&&(r+=DA),t&&(r+=OA),n.filter(i=>!m5(i)).reduce((i,s)=>i+(TA.test(s)?RA:s===""?IA:FA),r)}function BA(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function UA(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",p=Hf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=Hf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Zs([s,p.pathname]),pathnameBase:WA(Zs([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Zs([s,p.pathnameBase]))}return a}function Hf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=qA(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:d},p)=>{if(c==="*"){let f=o[p]||"";a=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}const g=o[p];return d&&!g?l[c]=void 0:l[c]=(g||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:a,pattern:e}}function qA(e,t=!1,n=!0){os(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,o)=>(r.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function $A(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return os(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function aa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function zA(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?wc(e):e;return{pathname:n?n.startsWith("/")?n:VA(n,t):t,search:KA(r),hash:GA(i)}}function VA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function qm(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function X3(e){let t=HA(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function J3(e,t,n,r=!1){let i;typeof e=="string"?i=wc(e):(i={...e},xn(!i.pathname||!i.pathname.includes("?"),qm("?","pathname","search",i)),xn(!i.pathname||!i.pathname.includes("#"),qm("#","pathname","hash",i)),xn(!i.search||!i.search.includes("#"),qm("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}o=p>=0?t[p]:"/"}let l=zA(i,o),c=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Zs=e=>e.join("/").replace(/\/\/+/g,"/"),WA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,GA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function YA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Q3=["POST","PUT","PATCH","DELETE"];new Set(Q3);var XA=["GET",...Q3];new Set(XA);var xc=T.createContext(null);xc.displayName="DataRouter";var jp=T.createContext(null);jp.displayName="DataRouterState";T.createContext(!1);var Z3=T.createContext({isTransitioning:!1});Z3.displayName="ViewTransition";var JA=T.createContext(new Map);JA.displayName="Fetchers";var QA=T.createContext(null);QA.displayName="Await";var As=T.createContext(null);As.displayName="Navigation";var bd=T.createContext(null);bd.displayName="Location";var ca=T.createContext({outlet:null,matches:[],isDataRoute:!1});ca.displayName="Route";var cv=T.createContext(null);cv.displayName="RouteError";function ZA(e,{relative:t}={}){xn(wd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(As),{hash:i,pathname:s,search:a}=xd(e,{relative:t}),o=s;return n!=="/"&&(o=s==="/"?n:Zs([n,s])),r.createHref({pathname:o,search:a,hash:i})}function wd(){return T.useContext(bd)!=null}function no(){return xn(wd(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(bd).location}var e4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function t4(e){T.useContext(As).static||T.useLayoutEffect(e)}function uv(){let{isDataRoute:e}=T.useContext(ca);return e?h8():e8()}function e8(){xn(wd(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(xc),{basename:t,navigator:n}=T.useContext(As),{matches:r}=T.useContext(ca),{pathname:i}=no(),s=JSON.stringify(X3(r)),a=T.useRef(!1);return t4(()=>{a.current=!0}),T.useCallback((o,l={})=>{if(os(a.current,e4),!a.current)return;if(typeof o=="number"){n.go(o);return}let c=J3(o,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Zs([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}T.createContext(null);function xd(e,{relative:t}={}){let{matches:n}=T.useContext(ca),{pathname:r}=no(),i=JSON.stringify(X3(n));return T.useMemo(()=>J3(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function t8(e,t){return n4(e,t)}function n4(e,t,n,r,i){var s;xn(wd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(As),{matches:o}=T.useContext(ca),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let w=g&&g.path||"";r4(d,!g||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=no(),_;if(t){let w=typeof t=="string"?wc(t):t;xn(p==="/"||((s=w.pathname)==null?void 0:s.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${w.pathname}" was given in the \`location\` prop.`),_=w}else _=f;let S=_.pathname||"/",k=S;if(p!=="/"){let w=p.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=K3(e,{pathname:k});os(g||y!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),os(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=a8(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Zs([p,a.encodeLocation?a.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?p:Zs([p,a.encodeLocation?a.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,i);return t&&x?T.createElement(bd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},x):x}function n8(){let e=d8(),t=YA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:s},"ErrorBoundary")," or"," ",T.createElement("code",{style:s},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:i},n):null,a)}var r8=T.createElement(n8,null),i8=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?T.createElement(ca.Provider,{value:this.props.routeContext},T.createElement(cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function s8({routeContext:e,match:t,children:n}){let r=T.useContext(xc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(ca.Provider,{value:e},n)}function a8(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=n==null?void 0:n.errors;if(a!=null){let c=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);xn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:p,errors:g}=n,f=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,p)=>{let g,f=!1,_=null,S=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,_=d.route.errorElement||r8,o&&(l<0&&p===0?(r4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,S=null):l===p&&(f=!0,S=d.route.hydrateFallbackElement||null)));let k=t.concat(s.slice(0,p+1)),y=()=>{let x;return g?x=_:f?x=S:d.route.Component?x=T.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,T.createElement(s8,{match:d,routeContext:{outlet:c,matches:k,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?T.createElement(i8,{location:n.location,revalidation:n.revalidation,component:_,error:g,children:y(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:r}):y()},null)}function dv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o8(e){let t=T.useContext(xc);return xn(t,dv(e)),t}function l8(e){let t=T.useContext(jp);return xn(t,dv(e)),t}function c8(e){let t=T.useContext(ca);return xn(t,dv(e)),t}function hv(e){let t=c8(e),n=t.matches[t.matches.length-1];return xn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function u8(){return hv("useRouteId")}function d8(){var e;let t=T.useContext(cv),n=l8("useRouteError"),r=hv("useRouteError");return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function h8(){let{router:e}=o8("useNavigate"),t=hv("useNavigate"),n=T.useRef(!1);return t4(()=>{n.current=!0}),T.useCallback(async(r,i={})=>{os(n.current,e4),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var g5={};function r4(e,t,n){!t&&!g5[e]&&(g5[e]=!0,os(!1,n))}T.memo(f8);function f8({routes:e,future:t,state:n,unstable_onError:r}){return n4(e,void 0,n,r,t)}function of(e){xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function p8({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){xn(!wd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=T.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=wc(n));let{pathname:l="/",search:c="",hash:d="",state:p=null,key:g="default"}=n,f=T.useMemo(()=>{let _=aa(l,a);return _==null?null:{location:{pathname:_,search:c,hash:d,state:p,key:g},navigationType:r}},[a,l,c,d,p,g,r]);return os(f!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:T.createElement(As.Provider,{value:o},T.createElement(bd.Provider,{children:t,value:f}))}function m8({children:e,location:t}){return t8(kg(e),t)}function kg(e,t=[]){let n=[];return T.Children.forEach(e,(r,i)=>{if(!T.isValidElement(r))return;let s=[...t,i];if(r.type===T.Fragment){n.push.apply(n,kg(r.props.children,s));return}xn(r.type===of,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=kg(r.props.children,s)),n.push(a)}),n}var lf="get",cf="application/x-www-form-urlencoded";function Np(e){return e!=null&&typeof e.tagName=="string"}function g8(e){return Np(e)&&e.tagName.toLowerCase()==="button"}function v8(e){return Np(e)&&e.tagName.toLowerCase()==="form"}function y8(e){return Np(e)&&e.tagName.toLowerCase()==="input"}function b8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function w8(e,t){return e.button===0&&(!t||t==="_self")&&!b8(e)}function jg(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function x8(e,t){let n=jg(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var yh=null;function _8(){if(yh===null)try{new FormData(document.createElement("form"),0),yh=!1}catch{yh=!0}return yh}var S8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $m(e){return e!=null&&!S8.has(e)?(os(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cf}"`),null):e}function k8(e,t){let n,r,i,s,a;if(v8(e)){let o=e.getAttribute("action");r=o?aa(o,t):null,n=e.getAttribute("method")||lf,i=$m(e.getAttribute("enctype"))||cf,s=new FormData(e)}else if(g8(e)||y8(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(r=l?aa(l,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||lf,i=$m(e.getAttribute("formenctype"))||$m(o.getAttribute("enctype"))||cf,s=new FormData(o,e),!_8()){let{name:c,type:d,value:p}=e;if(d==="image"){let g=c?`${c}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else c&&s.append(c,p)}}else{if(Np(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lf,r=null,i=cf,a=e}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fv(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function j8(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&aa(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function N8(e,t){if(e.id in t)return t[e.id];try{let n=await Pu(()=>Kh(()=>Wh(()=>Hh(()=>import(e.module),[]),[]),[]),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function E8(e){return e!=null&&typeof e.page=="string"}function A8(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function C8(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let a=await N8(s,n);return a.links?a.links():[]}return[]}));return R8(r.flat(1).filter(A8).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function v5(e,t,n,r,i,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?t.filter((l,c)=>{var d;let p=r.routes[l.route.id];if(!p||!p.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let g=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function P8(e,t,{includeHydrateFallback:n}={}){return L8(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function L8(e){return[...new Set(e)]}function T8(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function R8(e,t){let n=new Set,r=new Set(t);return e.reduce((i,s)=>{if(t&&!E8(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(T8(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function i4(){let e=T.useContext(xc);return fv(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function O8(){let e=T.useContext(jp);return fv(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var pv=T.createContext(void 0);pv.displayName="FrameworkContext";function s4(){let e=T.useContext(pv);return fv(e,"You must render this element inside a <HydratedRouter> element"),e}function I8(e,t){let n=T.useContext(pv),[r,i]=T.useState(!1),[s,a]=T.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:p}=t,g=T.useRef(null);T.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let S=y=>{y.forEach(x=>{a(x.isIntersecting)})},k=new IntersectionObserver(S,{threshold:.5});return g.current&&k.observe(g.current),()=>{k.disconnect()}}},[e]),T.useEffect(()=>{if(r){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[r]);let f=()=>{i(!0)},_=()=>{i(!1),a(!1)};return n?e!=="intent"?[s,g,{}]:[s,g,{onFocus:ou(o,f),onBlur:ou(l,_),onMouseEnter:ou(c,f),onMouseLeave:ou(d,_),onTouchStart:ou(p,f)}]:[!1,g,{}]}function ou(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function F8({page:e,...t}){let{router:n}=i4(),r=T.useMemo(()=>K3(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?T.createElement(M8,{page:e,matches:r,...t}):null}function D8(e){let{manifest:t,routeModules:n}=s4(),[r,i]=T.useState([]);return T.useEffect(()=>{let s=!1;return C8(e,t,n).then(a=>{s||i(a)}),()=>{s=!0}},[e,t,n]),r}function M8({page:e,matches:t,...n}){let r=no(),{manifest:i,routeModules:s}=s4(),{basename:a}=i4(),{loaderData:o,matches:l}=O8(),c=T.useMemo(()=>v5(e,t,l,i,r,"data"),[e,t,l,i,r]),d=T.useMemo(()=>v5(e,t,l,i,r,"assets"),[e,t,l,i,r]),p=T.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,S=!1;if(t.forEach(y=>{var x;let w=i.routes[y.route.id];!w||!w.hasLoader||(!c.some(E=>E.route.id===y.route.id)&&y.route.id in o&&(x=s[y.route.id])!=null&&x.shouldRevalidate||w.hasClientLoader?S=!0:_.add(y.route.id))}),_.size===0)return[];let k=j8(e,a,"data");return S&&_.size>0&&k.searchParams.set("_routes",t.filter(y=>_.has(y.route.id)).map(y=>y.route.id).join(",")),[k.pathname+k.search]},[a,o,r,i,c,t,e,s]),g=T.useMemo(()=>P8(d,i),[d,i]),f=D8(d);return T.createElement(T.Fragment,null,p.map(_=>T.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),g.map(_=>T.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),f.map(({key:_,link:S})=>T.createElement("link",{key:_,nonce:n.nonce,...S})))}function B8(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var a4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{a4&&(window.__reactRouterVersion="7.9.5")}catch{}function U8({basename:e,children:t,window:n}){let r=T.useRef();r.current==null&&(r.current=NA({window:n,v5Compat:!0}));let i=r.current,[s,a]=T.useState({action:i.action,location:i.location}),o=T.useCallback(l=>{T.startTransition(()=>a(l))},[a]);return T.useLayoutEffect(()=>i.listen(o),[i,o]),T.createElement(p8,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var o4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l4=T.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:s,state:a,target:o,to:l,preventScrollReset:c,viewTransition:d,...p},g){let{basename:f}=T.useContext(As),_=typeof l=="string"&&o4.test(l),S,k=!1;if(typeof l=="string"&&_&&(S=l,a4))try{let F=new URL(window.location.href),I=l.startsWith("//")?new URL(F.protocol+l):new URL(l),J=aa(I.pathname,f);I.origin===F.origin&&J!=null?l=J+I.search+I.hash:k=!0}catch{os(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=ZA(l,{relative:r}),[x,w,E]=I8(n,p),B=V8(l,{replace:s,state:a,target:o,preventScrollReset:c,relative:r,viewTransition:d});function q(F){e&&e(F),F.defaultPrevented||B(F)}let z=T.createElement("a",{...p,...E,href:S||y,onClick:k||i?e:q,ref:B8(g,w),target:o,"data-discover":!_&&t==="render"?"true":void 0});return x&&!_?T.createElement(T.Fragment,null,z,T.createElement(F8,{page:y})):z});l4.displayName="Link";var q8=T.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:s,viewTransition:a,children:o,...l},c){let d=xd(s,{relative:l.relative}),p=no(),g=T.useContext(jp),{navigator:f,basename:_}=T.useContext(As),S=g!=null&&X8(d)&&a===!0,k=f.encodeLocation?f.encodeLocation(d).pathname:d.pathname,y=p.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(y=y.toLowerCase(),x=x?x.toLowerCase():null,k=k.toLowerCase()),x&&_&&(x=aa(x,_)||x);const w=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let E=y===k||!r&&y.startsWith(k)&&y.charAt(w)==="/",B=x!=null&&(x===k||!r&&x.startsWith(k)&&x.charAt(k.length)==="/"),q={isActive:E,isPending:B,isTransitioning:S},z=E?e:void 0,F;typeof n=="function"?F=n(q):F=[n,E?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(q):i;return T.createElement(l4,{...l,"aria-current":z,className:F,ref:c,style:I,to:s,viewTransition:a},typeof o=="function"?o(q):o)});q8.displayName="NavLink";var $8=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=lf,action:o,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:p,...g},f)=>{let _=G8(),S=Y8(o,{relative:c}),k=a.toLowerCase()==="get"?"get":"post",y=typeof o=="string"&&o4.test(o),x=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,B=(E==null?void 0:E.getAttribute("formmethod"))||a;_(E||w.currentTarget,{fetcherKey:t,method:B,navigate:n,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:p})};return T.createElement("form",{ref:f,method:k,action:S,onSubmit:r?l:x,...g,"data-discover":!y&&e==="render"?"true":void 0})});$8.displayName="Form";function z8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function c4(e){let t=T.useContext(xc);return xn(t,z8(e)),t}function V8(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=uv(),l=no(),c=xd(e,{relative:s});return T.useCallback(d=>{if(w8(d,t)){d.preventDefault();let p=n!==void 0?n:rd(l)===rd(c);o(e,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,n,r,t,e,i,s,a])}function H8(e){os(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=T.useRef(jg(e)),n=T.useRef(!1),r=no(),i=T.useMemo(()=>x8(r.search,n.current?null:t.current),[r.search]),s=uv(),a=T.useCallback((o,l)=>{const c=jg(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,s("?"+c,l)},[s,i]);return[i,a]}var W8=0,K8=()=>`__${String(++W8)}__`;function G8(){let{router:e}=c4("useSubmit"),{basename:t}=T.useContext(As),n=u8();return T.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=k8(r,t);if(i.navigate===!1){let d=i.fetcherKey||K8();await e.fetch(d,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Y8(e,{relative:t}={}){let{basename:n}=T.useContext(As),r=T.useContext(ca);xn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...xd(e||".",{relative:t})},a=no();if(e==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let c=o.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Zs([n,s.pathname])),rd(s)}function X8(e,{relative:t}={}){let n=T.useContext(Z3);xn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=c4("useViewTransitionState"),i=xd(e,{relative:t});if(!n.isTransitioning)return!1;let s=aa(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=aa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Hf(i.pathname,a)!=null||Hf(i.pathname,s)!=null}const mv=T.createContext({});function gv(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ep=T.createContext(null),vv=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class J8 extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Q8({children:e,isPresent:t}){const n=T.useId(),r=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=T.useContext(vv);return T.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=i.current;if(t||!r.current||!a||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),u.jsx(J8,{isPresent:t,childRef:r,sizeRef:i,children:T.cloneElement(e,{ref:r})})}const Z8=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=gv(eC),l=T.useId(),c=T.useCallback(p=>{o.set(p,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),d=T.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c,register:p=>(o.set(p,!1),()=>o.delete(p))}),s?[Math.random(),c]:[n,c]);return T.useMemo(()=>{o.forEach((p,g)=>o.set(g,!1))},[n]),T.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),a==="popLayout"&&(e=u.jsx(Q8,{isPresent:n,children:e})),u.jsx(Ep.Provider,{value:d,children:e})};function eC(){return new Map}function u4(e=!0){const t=T.useContext(Ep);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=T.useId();T.useEffect(()=>{e&&i(s)},[e]);const a=T.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const bh=e=>e.key||"";function y5(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const yv=typeof window<"u",d4=yv?T.useLayoutEffect:T.useEffect,Fi=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=u4(a),c=T.useMemo(()=>y5(e),[e]),d=a&&!o?[]:c.map(bh),p=T.useRef(!0),g=T.useRef(c),f=gv(()=>new Map),[_,S]=T.useState(c),[k,y]=T.useState(c);d4(()=>{p.current=!1,g.current=c;for(let E=0;E<k.length;E++){const B=bh(k[E]);d.includes(B)?f.delete(B):f.get(B)!==!0&&f.set(B,!1)}},[k,d.length,d.join("-")]);const x=[];if(c!==_){let E=[...c];for(let B=0;B<k.length;B++){const q=k[B],z=bh(q);d.includes(z)||(E.splice(B,0,q),x.push(q))}s==="wait"&&x.length&&(E=x),y(y5(E)),S(c);return}const{forceRender:w}=T.useContext(mv);return u.jsx(u.Fragment,{children:k.map(E=>{const B=bh(E),q=a&&!o?!1:c===k||d.includes(B),z=()=>{if(f.has(B))f.set(B,!0);else return;let F=!0;f.forEach(I=>{I||(F=!1)}),F&&(w==null||w(),y(g.current),a&&(l==null||l()),r&&r())};return u.jsx(Z8,{isPresent:q,initial:!p.current||n?void 0:!1,custom:q?void 0:t,presenceAffectsLayout:i,mode:s,onExitComplete:q?void 0:z,children:E},B)})})},yi=e=>e;let h4=yi;function bv(e){let t;return()=>(t===void 0&&(t=e()),t)}const hc=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},ea=e=>e*1e3,ta=e=>e/1e3,tC={skipAnimations:!1,useManualTiming:!1};function nC(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),e()),c(a)}const l={schedule:(c,d=!1,p=!1)=>{const g=p&&r?t:n;return d&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const wh=["read","resolveKeyframes","update","preRender","render","postRender"],rC=40;function f4(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=wh.reduce((S,k)=>(S[k]=nC(s),S),{}),{read:o,resolveKeyframes:l,update:c,preRender:d,render:p,postRender:g}=a,f=()=>{const S=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,rC),1),i.timestamp=S,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),d.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(f))},_=()=>{n=!0,r=!0,i.isProcessing||e(f)};return{schedule:wh.reduce((S,k)=>{const y=a[k];return S[k]=(x,w=!1,E=!1)=>(n||_(),y.schedule(x,w,E)),S},{}),cancel:S=>{for(let k=0;k<wh.length;k++)a[wh[k]].cancel(S)},state:i,steps:a}}const{schedule:un,cancel:Xa,state:dr,steps:zm}=f4(typeof requestAnimationFrame<"u"?requestAnimationFrame:yi,!0),p4=T.createContext({strict:!1}),b5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fc={};for(const e in b5)fc[e]={isEnabled:t=>b5[e].some(n=>!!t[n])};function iC(e){for(const t in e)fc[t]={...fc[t],...e[t]}}const sC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||sC.has(e)}let m4=e=>!Wf(e);function aC(e){e&&(m4=t=>t.startsWith("on")?!Wf(t):e(t))}try{aC(require("@emotion/is-prop-valid").default)}catch{}function oC(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(m4(i)||n===!0&&Wf(i)||!t&&!Wf(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function lC(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const Ap=T.createContext({});function id(e){return typeof e=="string"||Array.isArray(e)}function Cp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const wv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xv=["initial",...wv];function Pp(e){return Cp(e.animate)||xv.some(t=>id(e[t]))}function g4(e){return!!(Pp(e)||e.variants)}function cC(e,t){if(Pp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||id(n)?n:void 0,animate:id(r)?r:void 0}}return e.inherit!==!1?t:{}}function uC(e){const{initial:t,animate:n}=cC(e,T.useContext(Ap));return T.useMemo(()=>({initial:t,animate:n}),[w5(t),w5(n)])}function w5(e){return Array.isArray(e)?e.join(" "):e}const dC=Symbol.for("motionComponentSymbol");function ql(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function hC(e,t,n){return T.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ql(n)&&(n.current=r))},[t])}const _v=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fC="framerAppearId",v4="data-"+_v(fC),{schedule:Sv,cancel:LM}=f4(queueMicrotask,!1),y4=T.createContext({});function pC(e,t,n,r,i){var s,a;const{visualElement:o}=T.useContext(Ap),l=T.useContext(p4),c=T.useContext(Ep),d=T.useContext(vv).reducedMotion,p=T.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=p.current,f=T.useContext(y4);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&mC(p.current,n,i,f);const _=T.useRef(!1);T.useInsertionEffect(()=>{g&&_.current&&g.update(n,c)});const S=n[v4],k=T.useRef(!!S&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,S))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,S)));return d4(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Sv.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),T.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,S)}),k.current=!1))}),g}function mC(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:b4(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&ql(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function b4(e){if(e)return e.options.allowProjection!==!1?e.projection:b4(e.parent)}function gC({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var s,a;e&&iC(e);function o(c,d){let p;const g={...T.useContext(vv),...c,layoutId:vC(c)},{isStatic:f}=g,_=uC(c),S=r(c,f);if(!f&&yv){yC();const k=bC(g);p=k.MeasureLayout,_.visualElement=pC(i,S,g,t,k.ProjectionNode)}return u.jsxs(Ap.Provider,{value:_,children:[p&&_.visualElement?u.jsx(p,{visualElement:_.visualElement,...g}):null,n(i,c,hC(S,_.visualElement,d),S,f,_.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=T.forwardRef(o);return l[dC]=i,l}function vC({layoutId:e}){const t=T.useContext(mv).id;return t&&e!==void 0?t+"-"+e:e}function yC(e,t){T.useContext(p4).strict}function bC(e){const{drag:t,layout:n}=fc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const wC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kv(e){return typeof e!="string"||e.includes("-")?!1:!!(wC.indexOf(e)>-1||/[A-Z]/u.test(e))}function x5(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function jv(e,t,n,r){if(typeof t=="function"){const[i,s]=x5(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=x5(r);t=t(n!==void 0?n:e.custom,i,s)}return t}const Ng=e=>Array.isArray(e),xC=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),_C=e=>Ng(e)?e[e.length-1]||0:e,Nr=e=>!!(e&&e.getVelocity);function uf(e){const t=Nr(e)?e.get():e;return xC(t)?t.toValue():t}function SC({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){const a={latestValues:kC(r,i,s,e),renderState:t()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const w4=e=>(t,n)=>{const r=T.useContext(Ap),i=T.useContext(Ep),s=()=>SC(e,t,r,i);return n?s():gv(s)};function kC(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=uf(s[g]);let{initial:a,animate:o}=e;const l=Pp(e),c=g4(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const p=d?o:a;if(p&&typeof p!="boolean"&&!Cp(p)){const g=Array.isArray(p)?p:[p];for(let f=0;f<g.length;f++){const _=jv(e,g[f]);if(_){const{transitionEnd:S,transition:k,...y}=_;for(const x in y){let w=y[x];if(Array.isArray(w)){const E=d?w.length-1:0;w=w[E]}w!==null&&(i[x]=w)}for(const x in S)i[x]=S[x]}}}return i}const _c=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tl=new Set(_c),x4=e=>t=>typeof t=="string"&&t.startsWith(e),_4=x4("--"),jC=x4("var(--"),Nv=e=>jC(e)?NC.test(e.split("/*")[0].trim()):!1,NC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,S4=(e,t)=>t&&typeof e=="number"?t.transform(e):e,oa=(e,t,n)=>n>t?t:n<e?e:n,Sc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},sd={...Sc,transform:e=>oa(0,1,e)},xh={...Sc,default:1},_d=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),La=_d("deg"),Ns=_d("%"),lt=_d("px"),EC=_d("vh"),AC=_d("vw"),_5={...Ns,parse:e=>Ns.parse(e)/100,transform:e=>Ns.transform(e*100)},CC={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,backgroundPositionX:lt,backgroundPositionY:lt},PC={rotate:La,rotateX:La,rotateY:La,rotateZ:La,scale:xh,scaleX:xh,scaleY:xh,scaleZ:xh,skew:La,skewX:La,skewY:La,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:sd,originX:_5,originY:_5,originZ:lt},S5={...Sc,transform:Math.round},Ev={...CC,...PC,zIndex:S5,size:lt,fillOpacity:sd,strokeOpacity:sd,numOctaves:S5},LC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TC=_c.length;function RC(e,t,n){let r="",i=!0;for(let s=0;s<TC;s++){const a=_c[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=S4(o,Ev[a]);if(!l){i=!1;const d=LC[a]||a;r+=`${d}(${c}) `}n&&(t[a]=c)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function Av(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(tl.has(l)){a=!0;continue}else if(_4(l)){i[l]=c;continue}else{const d=S4(c,Ev[l]);l.startsWith("origin")?(o=!0,s[l]=d):r[l]=d}}if(t.transform||(a||n?r.transform=RC(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const OC={offset:"stroke-dashoffset",array:"stroke-dasharray"},IC={offset:"strokeDashoffset",array:"strokeDasharray"};function FC(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?OC:IC;e[s.offset]=lt.transform(-r);const a=lt.transform(t),o=lt.transform(n);e[s.array]=`${a} ${o}`}function k5(e,t,n){return typeof e=="string"?e:lt.transform(t+n*e)}function DC(e,t,n){const r=k5(t,e.x,e.width),i=k5(n,e.y,e.height);return`${r} ${i}`}function Cv(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},d,p){if(Av(e,c,p),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:f,dimensions:_}=e;g.transform&&(_&&(f.transform=g.transform),delete g.transform),_&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=DC(_,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(g.x=t),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),a!==void 0&&FC(g,a,o,l,!1)}const Pv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),k4=()=>({...Pv(),attrs:{}}),Lv=e=>typeof e=="string"&&e.toLowerCase()==="svg";function j4(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const N4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function E4(e,t,n,r){j4(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(N4.has(i)?i:_v(i),t.attrs[i])}const Kf={};function MC(e){Object.assign(Kf,e)}function A4(e,{layout:t,layoutId:n}){return tl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Kf[e]||e==="opacity")}function Tv(e,t,n){var r;const{style:i}=e,s={};for(const a in i)(Nr(i[a])||t.style&&Nr(t.style[a])||A4(a,e)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function C4(e,t,n){const r=Tv(e,t,n);for(const i in e)if(Nr(e[i])||Nr(t[i])){const s=_c.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}function BC(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const j5=["x","y","width","height","cx","cy","r"],UC={useVisualState:w4({scrapeMotionValuesFromProps:C4,createRenderState:k4,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!e.drag;if(!s){for(const o in i)if(tl.has(o)){s=!0;break}}if(!s)return;let a=!t;if(t)for(let o=0;o<j5.length;o++){const l=j5[o];e[l]!==t[l]&&(a=!0)}a&&un.read(()=>{BC(n,r),un.render(()=>{Cv(r,i,Lv(n.tagName),e.transformTemplate),E4(n,r)})})}})},qC={useVisualState:w4({scrapeMotionValuesFromProps:Tv,createRenderState:Pv})};function P4(e,t,n){for(const r in t)!Nr(t[r])&&!A4(r,n)&&(e[r]=t[r])}function $C({transformTemplate:e},t){return T.useMemo(()=>{const n=Pv();return Av(n,t,e),Object.assign({},n.vars,n.style)},[t])}function zC(e,t){const n=e.style||{},r={};return P4(r,n,e),Object.assign(r,$C(e,t)),r}function VC(e,t){const n={},r=zC(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function HC(e,t,n,r){const i=T.useMemo(()=>{const s=k4();return Cv(s,t,Lv(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};P4(s,e.style,e),i.style={...s,...i.style}}return i}function WC(e=!1){return(t,n,r,{latestValues:i},s)=>{const a=(kv(t)?HC:VC)(n,i,s,t),o=oC(n,typeof t=="string",e),l=t!==T.Fragment?{...o,...a,ref:r}:{},{children:c}=n,d=T.useMemo(()=>Nr(c)?c.get():c,[c]);return T.createElement(t,{...l,children:d})}}function KC(e,t){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const i={...kv(n)?UC:qC,preloadedFeatures:e,useRender:WC(r),createVisualElement:t,Component:n};return gC(i)}}function L4(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Lp(e,t,n){const r=e.getProps();return jv(r,t,n!==void 0?n:r.custom,e)}const GC=bv(()=>window.ScrollTimeline!==void 0);class YC{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(GC()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class XC extends YC{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Rv(e,t){return e?e[t]||e.default||e:void 0}const Eg=2e4;function T4(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Eg;)t+=n,r=e.next(t);return t>=Eg?1/0:t}function Ov(e){return typeof e=="function"}function N5(e,t){e.timeline=t,e.onfinish=null}const Iv=e=>Array.isArray(e)&&typeof e[0]=="number",JC={linearEasing:void 0};function QC(e,t){const n=bv(e);return()=>{var r;return(r=JC[t])!==null&&r!==void 0?r:n()}}const Gf=QC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),R4=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(hc(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function O4(e){return!!(typeof e=="function"&&Gf()||!e||typeof e=="string"&&(e in Ag||Gf())||Iv(e)||Array.isArray(e)&&e.every(O4))}const vu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ag={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vu([0,.65,.55,1]),circOut:vu([.55,0,1,.45]),backIn:vu([.31,.01,.66,-.59]),backOut:vu([.33,1.53,.69,.99])};function I4(e,t){if(e)return typeof e=="function"&&Gf()?R4(e,t):Iv(e)?vu(e):Array.isArray(e)?e.map(n=>I4(n,t)||Ag.easeOut):Ag[e]}const Qi={x:!1,y:!1};function F4(){return Qi.x||Qi.y}function ZC(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;t&&(i=t.current);const s=(r=n==null?void 0:n[e])!==null&&r!==void 0?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function D4(e,t){const n=ZC(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function E5(e){return t=>{t.pointerType==="touch"||F4()||e(t)}}function eP(e,t,n={}){const[r,i,s]=D4(e,n),a=E5(o=>{const{target:l}=o,c=t(o);if(typeof c!="function"||!l)return;const d=E5(p=>{c(p),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const M4=(e,t)=>t?e===t?!0:M4(e,t.parentElement):!1,Fv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,tP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nP(e){return tP.has(e.tagName)||e.tabIndex!==-1}const yu=new WeakSet;function A5(e){return t=>{t.key==="Enter"&&e(t)}}function Vm(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const rP=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=A5(()=>{if(yu.has(n))return;Vm(n,"down");const i=A5(()=>{Vm(n,"up")}),s=()=>Vm(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function C5(e){return Fv(e)&&!F4()}function iP(e,t,n={}){const[r,i,s]=D4(e,n),a=o=>{const l=o.currentTarget;if(!C5(o)||yu.has(l))return;yu.add(l);const c=t(o),d=(f,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),!(!C5(f)||!yu.has(l))&&(yu.delete(l),typeof c=="function"&&c(f,{success:_}))},p=f=>{d(f,n.useGlobalTarget||M4(l,f.target))},g=f=>{d(f,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!nP(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",l=>rP(l,i),i)}),s}function sP(e){return e==="x"||e==="y"?Qi[e]?null:(Qi[e]=!0,()=>{Qi[e]=!1}):Qi.x||Qi.y?null:(Qi.x=Qi.y=!0,()=>{Qi.x=Qi.y=!1})}const B4=new Set(["width","height","top","left","right","bottom",..._c]);let df;function aP(){df=void 0}const Es={now:()=>(df===void 0&&Es.set(dr.isProcessing||tC.useManualTiming?dr.timestamp:performance.now()),df),set:e=>{df=e,queueMicrotask(aP)}};function Dv(e,t){e.indexOf(t)===-1&&e.push(t)}function Mv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Bv{constructor(){this.subscriptions=[]}add(t){return Dv(this.subscriptions,t),()=>Mv(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function U4(e,t){return t?e*(1e3/t):0}const P5=30,oP=e=>!isNaN(parseFloat(e));class lP{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Es.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Es.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=oP(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Bv);const r=this.events[t].add(n);return t==="change"?()=>{r(),un.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Es.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>P5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,P5);return U4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ad(e,t){return new lP(e,t)}function cP(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ad(n))}function uP(e,t){const n=Lp(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=_C(s[a]);cP(e,a,o)}}function dP(e){return!!(Nr(e)&&e.add)}function Cg(e,t){const n=e.getValue("willChange");if(dP(n))return n.add(t)}function q4(e){return e.props[v4]}const $4=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,hP=1e-7,fP=12;function pP(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=$4(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>hP&&++o<fP);return a}function Sd(e,t,n,r){if(e===t&&n===r)return yi;const i=s=>pP(s,0,1,e,n);return s=>s===0||s===1?s:$4(i(s),t,r)}const z4=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,V4=e=>t=>1-e(1-t),H4=Sd(.33,1.53,.69,.99),Uv=V4(H4),W4=z4(Uv),K4=e=>(e*=2)<1?.5*Uv(e):.5*(2-Math.pow(2,-10*(e-1))),qv=e=>1-Math.sin(Math.acos(e)),G4=V4(qv),Y4=z4(qv),X4=e=>/^0[^.\s]+$/u.test(e);function mP(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||X4(e):!0}const Lu=e=>Math.round(e*1e5)/1e5,$v=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gP(e){return e==null}const vP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zv=(e,t)=>n=>!!(typeof n=="string"&&vP.test(n)&&n.startsWith(e)||t&&!gP(n)&&Object.prototype.hasOwnProperty.call(n,t)),J4=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match($v);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},yP=e=>oa(0,255,e),Hm={...Sc,transform:e=>Math.round(yP(e))},Uo={test:zv("rgb","red"),parse:J4("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Hm.transform(e)+", "+Hm.transform(t)+", "+Hm.transform(n)+", "+Lu(sd.transform(r))+")"};function bP(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Pg={test:zv("#"),parse:bP,transform:Uo.transform},$l={test:zv("hsl","hue"),parse:J4("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ns.transform(Lu(t))+", "+Ns.transform(Lu(n))+", "+Lu(sd.transform(r))+")"},kr={test:e=>Uo.test(e)||Pg.test(e)||$l.test(e),parse:e=>Uo.test(e)?Uo.parse(e):$l.test(e)?$l.parse(e):Pg.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Uo.transform(e):$l.transform(e)},wP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xP(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match($v))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(wP))===null||n===void 0?void 0:n.length)||0)>0}const Q4="number",Z4="color",_P="var",SP="var(",L5="${}",kP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function od(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(kP,o=>(kr.test(o)?(r.color.push(s),i.push(Z4),n.push(kr.parse(o))):o.startsWith(SP)?(r.var.push(s),i.push(_P),n.push(o)):(r.number.push(s),i.push(Q4),n.push(parseFloat(o))),++s,L5)).split(L5);return{values:n,split:a,indexes:r,types:i}}function eS(e){return od(e).values}function tS(e){const{split:t,types:n}=od(e),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=n[a];o===Q4?s+=Lu(i[a]):o===Z4?s+=kr.transform(i[a]):s+=i[a]}return s}}const jP=e=>typeof e=="number"?0:e;function NP(e){const t=eS(e);return tS(e)(t.map(jP))}const Ja={test:xP,parse:eS,createTransformer:tS,getAnimatableNone:NP},EP=new Set(["brightness","contrast","saturate","opacity"]);function AP(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match($v)||[];if(!r)return e;const i=n.replace(r,"");let s=EP.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const CP=/\b([a-z-]*)\(.*?\)/gu,Lg={...Ja,getAnimatableNone:e=>{const t=e.match(CP);return t?t.map(AP).join(" "):e}},PP={...Ev,color:kr,backgroundColor:kr,outlineColor:kr,fill:kr,stroke:kr,borderColor:kr,borderTopColor:kr,borderRightColor:kr,borderBottomColor:kr,borderLeftColor:kr,filter:Lg,WebkitFilter:Lg},Vv=e=>PP[e];function nS(e,t){let n=Vv(e);return n!==Lg&&(n=Ja),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const LP=new Set(["auto","none","0"]);function TP(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!LP.has(s)&&od(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=nS(n,i)}const T5=e=>e===Sc||e===lt,R5=(e,t)=>parseFloat(e.split(", ")[t]),O5=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return R5(i[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?R5(s[1],e):0}},RP=new Set(["x","y","z"]),OP=_c.filter(e=>!RP.has(e));function IP(e){const t=[];return OP.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const pc={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:O5(4,13),y:O5(5,14)};pc.translateX=pc.x;pc.translateY=pc.y;const Vo=new Set;let Tg=!1,Rg=!1;function rS(){if(Rg){const e=Array.from(Vo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=IP(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Rg=!1,Tg=!1,Vo.forEach(e=>e.complete()),Vo.clear()}function iS(){Vo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Rg=!0)})}function FP(){iS(),rS()}class Hv{constructor(t,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vo.add(this),Tg||(Tg=!0,un.read(iS),un.resolveKeyframes(rS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),DP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function MP(e){const t=DP.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function aS(e,t,n=1){const[r,i]=MP(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return sS(a)?parseFloat(a):a}return Nv(i)?aS(i,t,n+1):i}const oS=e=>t=>t.test(e),BP={test:e=>e==="auto",parse:e=>e},lS=[Sc,lt,Ns,La,AC,EC,BP],I5=e=>lS.find(oS(e));class cS extends Hv{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),Nv(c))){const d=aS(c,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!B4.has(r)||t.length!==2)return;const[i,s]=t,a=I5(i),o=I5(s);if(a!==o)if(T5(a)&&T5(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)mP(t[i])&&r.push(i);r.length&&TP(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pc[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=pc[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const F5=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ja.test(e)||e==="0")&&!e.startsWith("url("));function UP(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function qP(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=F5(i,t),o=F5(s,t);return!a||!o?!1:UP(e)||(n==="spring"||Ov(n))&&r}const $P=e=>e!==null;function Tp(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter($P),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const zP=40;class uS{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Es.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>zP?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&FP(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Es.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!qP(t,r,i,s))if(a)this.options.duration=0;else{l&&l(Tp(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const bn=(e,t,n)=>e+(t-e)*n;function Wm(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function VP({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Wm(l,o,e+1/3),s=Wm(l,o,e),a=Wm(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Yf(e,t){return n=>n>0?t:e}const Km=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},HP=[Pg,Uo,$l],WP=e=>HP.find(t=>t.test(e));function D5(e){const t=WP(e);if(!t)return!1;let n=t.parse(e);return t===$l&&(n=VP(n)),n}const M5=(e,t)=>{const n=D5(e),r=D5(t);if(!n||!r)return Yf(e,t);const i={...n};return s=>(i.red=Km(n.red,r.red,s),i.green=Km(n.green,r.green,s),i.blue=Km(n.blue,r.blue,s),i.alpha=bn(n.alpha,r.alpha,s),Uo.transform(i))},KP=(e,t)=>n=>t(e(n)),kd=(...e)=>e.reduce(KP),Og=new Set(["none","hidden"]);function GP(e,t){return Og.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function YP(e,t){return n=>bn(e,t,n)}function Wv(e){return typeof e=="number"?YP:typeof e=="string"?Nv(e)?Yf:kr.test(e)?M5:QP:Array.isArray(e)?dS:typeof e=="object"?kr.test(e)?M5:XP:Yf}function dS(e,t){const n=[...e],r=n.length,i=e.map((s,a)=>Wv(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function XP(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Wv(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function JP(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][i[a]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[s]=l,i[a]++}return r}const QP=(e,t)=>{const n=Ja.createTransformer(t),r=od(e),i=od(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Og.has(e)&&!i.values.length||Og.has(t)&&!r.values.length?GP(e,t):kd(dS(JP(r,i),i.values),n):Yf(e,t)};function hS(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?bn(e,t,n):Wv(e)(e,t)}const ZP=5;function fS(e,t,n){const r=Math.max(t-ZP,0);return U4(n-e(r),t-r)}const Nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Gm=.001;function eL({duration:e=Nn.duration,bounce:t=Nn.bounce,velocity:n=Nn.velocity,mass:r=Nn.mass}){let i,s,a=1-t;a=oa(Nn.minDamping,Nn.maxDamping,a),e=oa(Nn.minDuration,Nn.maxDuration,ta(e)),a<1?(i=c=>{const d=c*a,p=d*e,g=d-n,f=Ig(c,a),_=Math.exp(-p);return Gm-g/f*_},s=c=>{const d=c*a*e,p=d*n+n,g=Math.pow(a,2)*Math.pow(c,2)*e,f=Math.exp(-d),_=Ig(Math.pow(c,2),a);return(-i(c)+Gm>0?-1:1)*((p-g)*f)/_}):(i=c=>{const d=Math.exp(-c*e),p=(c-n)*e+1;return-Gm+d*p},s=c=>{const d=Math.exp(-c*e),p=(n-c)*(e*e);return d*p});const o=5/e,l=nL(i,s,o);if(e=ea(e),isNaN(l))return{stiffness:Nn.stiffness,damping:Nn.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const tL=12;function nL(e,t,n){let r=n;for(let i=1;i<tL;i++)r=r-e(r)/t(r);return r}function Ig(e,t){return e*Math.sqrt(1-t*t)}const rL=["duration","bounce"],iL=["stiffness","damping","mass"];function B5(e,t){return t.some(n=>e[n]!==void 0)}function sL(e){let t={velocity:Nn.velocity,stiffness:Nn.stiffness,damping:Nn.damping,mass:Nn.mass,isResolvedFromDuration:!1,...e};if(!B5(e,iL)&&B5(e,rL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*oa(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Nn.mass,stiffness:i,damping:s}}else{const n=eL(e);t={...t,...n,mass:Nn.mass},t.isResolvedFromDuration=!0}return t}function pS(e=Nn.visualDuration,t=Nn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:p,velocity:g,isResolvedFromDuration:f}=sL({...n,velocity:-ta(n.velocity||0)}),_=g||0,S=c/(2*Math.sqrt(l*d)),k=a-s,y=ta(Math.sqrt(l/d)),x=Math.abs(k)<5;r||(r=x?Nn.restSpeed.granular:Nn.restSpeed.default),i||(i=x?Nn.restDelta.granular:Nn.restDelta.default);let w;if(S<1){const B=Ig(y,S);w=q=>{const z=Math.exp(-S*y*q);return a-z*((_+S*y*k)/B*Math.sin(B*q)+k*Math.cos(B*q))}}else if(S===1)w=B=>a-Math.exp(-y*B)*(k+(_+y*k)*B);else{const B=y*Math.sqrt(S*S-1);w=q=>{const z=Math.exp(-S*y*q),F=Math.min(B*q,300);return a-z*((_+S*y*k)*Math.sinh(F)+B*k*Math.cosh(F))/B}}const E={calculatedDuration:f&&p||null,next:B=>{const q=w(B);if(f)o.done=B>=p;else{let z=0;S<1&&(z=B===0?ea(_):fS(w,B,q));const F=Math.abs(z)<=r,I=Math.abs(a-q)<=i;o.done=F&&I}return o.value=o.done?a:q,o},toString:()=>{const B=Math.min(T4(E),Eg),q=R4(z=>E.next(B*z).value,B,30);return B+"ms "+q}};return E}function U5({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const p=e[0],g={done:!1,value:p},f=F=>o!==void 0&&F<o||l!==void 0&&F>l,_=F=>o===void 0?l:l===void 0||Math.abs(o-F)<Math.abs(l-F)?o:l;let S=n*t;const k=p+S,y=a===void 0?k:a(k);y!==k&&(S=y-p);const x=F=>-S*Math.exp(-F/r),w=F=>y+x(F),E=F=>{const I=x(F),J=w(F);g.done=Math.abs(I)<=c,g.value=g.done?y:J};let B,q;const z=F=>{f(g.value)&&(B=F,q=pS({keyframes:[g.value,_(g.value)],velocity:fS(w,F,g.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return z(0),{calculatedDuration:null,next:F=>{let I=!1;return!q&&B===void 0&&(I=!0,E(F),z(F)),B!==void 0&&F>=B?q.next(F-B):(!I&&E(F),g)}}}const aL=Sd(.42,0,1,1),oL=Sd(0,0,.58,1),mS=Sd(.42,0,.58,1),lL=e=>Array.isArray(e)&&typeof e[0]!="number",cL={linear:yi,easeIn:aL,easeInOut:mS,easeOut:oL,circIn:qv,circInOut:Y4,circOut:G4,backIn:Uv,backInOut:W4,backOut:H4,anticipate:K4},q5=e=>{if(Iv(e)){h4(e.length===4);const[t,n,r,i]=e;return Sd(t,n,r,i)}else if(typeof e=="string")return cL[e];return e};function uL(e,t,n){const r=[],i=n||hS,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||yi:t;o=kd(l,o)}r.push(o)}return r}function dL(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(h4(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=uL(t,r,i),l=o.length,c=d=>{if(a&&d<e[0])return t[0];let p=0;if(l>1)for(;p<e.length-2&&!(d<e[p+1]);p++);const g=hc(e[p],e[p+1],d);return o[p](g)};return n?d=>c(oa(e[0],e[s-1],d)):c}function hL(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=hc(0,t,r);e.push(bn(n,1,i))}}function fL(e){const t=[0];return hL(t,e.length-1),t}function pL(e,t){return e.map(n=>n*t)}function mL(e,t){return e.map(()=>t||mS).splice(0,e.length-1)}function Xf({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=lL(r)?r.map(q5):q5(r),s={done:!1,value:t[0]},a=pL(n&&n.length===t.length?n:fL(t),e),o=dL(a,t,{ease:Array.isArray(i)?i:mL(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const gL=e=>{const t=({timestamp:n})=>e(n);return{start:()=>un.update(t,!0),stop:()=>Xa(t),now:()=>dr.isProcessing?dr.timestamp:Es.now()}},vL={decay:U5,inertia:U5,tween:Xf,keyframes:Xf,spring:pS},yL=e=>e/100;class Kv extends uS{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||Hv,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=Ov(n)?n:vL[n]||Xf;let l,c;o!==Xf&&typeof t[0]!="number"&&(l=kd(yL,hS(t[0],t[1])),t=[0,100]);const d=o({...this.options,keyframes:t});s==="mirror"&&(c=o({...this.options,keyframes:[...t].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=T4(d));const{calculatedDuration:p}=d,g=p+i,f=g*(r+1)-i;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:g,totalDuration:f}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:p}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:f,repeatType:_,repeatDelay:S,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-g*(this.speed>=0?1:-1),x=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,E=s;if(f){const F=Math.min(this.currentTime,d)/p;let I=Math.floor(F),J=F%1;!J&&F>=1&&(J=1),J===1&&I--,I=Math.min(I,f+1),I%2&&(_==="reverse"?(J=1-J,S&&(J-=S/p)):_==="mirror"&&(E=a)),w=oa(0,1,J)*p}const B=x?{done:!1,value:l[0]}:E.next(w);o&&(B.value=o(B.value));let{done:q}=B;!x&&c!==null&&(q=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return z&&i!==void 0&&(B.value=Tp(l,this.options,i)),k&&k(B.value),z&&this.finish(),B}get duration(){const{resolved:t}=this;return t?ta(t.calculatedDuration):0}get time(){return ta(this.currentTime)}set time(t){t=ea(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ta(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=gL,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const bL=new Set(["opacity","clipPath","filter","transform"]);function wL(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const d=I4(o,i);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const xL=bv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jf=10,_L=2e4;function SL(e){return Ov(e.type)||e.type==="spring"||!O4(e.ease)}function kL(e,t){const n=new Kv({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<_L;)r=n.sample(s),i.push(r.value),s+=Jf;return{times:void 0,keyframes:i,duration:s-Jf,ease:"linear"}}const gS={anticipate:K4,backInOut:W4,circInOut:Y4};function jL(e){return e in gS}class $5 extends uS{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new cS(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Gf()&&jL(s)&&(s=gS[s]),SL(this.options)){const{onComplete:p,onUpdate:g,motionValue:f,element:_,...S}=this.options,k=kL(t,S);t=k.keyframes,t.length===1&&(t[1]=t[0]),r=k.duration,i=k.times,s=k.ease,a="keyframes"}const d=wL(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:s});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(N5(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:p}=this.options;o.set(Tp(t,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:a,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return ta(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return ta(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ea(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return yi;const{animation:r}=n;N5(r,t)}return yi}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:p,element:g,...f}=this.options,_=new Kv({...f,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),S=ea(this.time);c.setWithVelocity(_.sample(S-Jf).value,_.sample(S).value,Jf)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return xL()&&r&&bL.has(r)&&!l&&!c&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const NL={type:"spring",stiffness:500,damping:25,restSpeed:10},EL=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),AL={type:"keyframes",duration:.8},CL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PL=(e,{keyframes:t})=>t.length>2?AL:tl.has(e)?e.startsWith("scale")?EL(t[1]):NL:CL;function LL({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const Gv=(e,t,n,r={},i,s)=>a=>{const o=Rv(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ea(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:g=>{t.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};LL(o)||(d={...d,...PL(e,d)}),d.duration&&(d.duration=ea(d.duration)),d.repeatDelay&&(d.repeatDelay=ea(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!s&&t.get()!==void 0){const g=Tp(d.keyframes,o);if(g!==void 0)return un.update(()=>{d.onUpdate(g),d.onComplete()}),new XC([])}return!s&&$5.supports(d)?new $5(d):new Kv(d)};function TL({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function vS(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const c=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const p in l){const g=e.getValue(p,(s=e.latestValues[p])!==null&&s!==void 0?s:null),f=l[p];if(f===void 0||d&&TL(d,p))continue;const _={delay:n,...Rv(a||{},p)};let S=!1;if(window.MotionHandoffAnimation){const y=q4(e);if(y){const x=window.MotionHandoffAnimation(y,p,un);x!==null&&(_.startTime=x,S=!0)}}Cg(e,p),g.start(Gv(p,g,f,e.shouldReduceMotion&&B4.has(p)?{type:!1}:_,e,S));const k=g.animation;k&&c.push(k)}return o&&Promise.all(c).then(()=>{un.update(()=>{o&&uP(e,o)})}),c}function Fg(e,t,n={}){var r;const i=Lp(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(vS(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:g}=s;return RL(e,t,d+c,p,g,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function RL(e,t,n=0,r=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(e.variantChildren).sort(OL).forEach((c,d)=>{c.notify("AnimationStart",t),a.push(Fg(c,t,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function OL(e,t){return e.sortNodePosition(t)}function IL(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Fg(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Fg(e,t,n);else{const i=typeof t=="function"?Lp(e,t,n.custom):t;r=Promise.all(vS(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const FL=xv.length;function yS(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?yS(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<FL;n++){const r=xv[n],i=e.props[r];(id(i)||i===!1)&&(t[r]=i)}return t}const DL=[...wv].reverse(),ML=wv.length;function BL(e){return t=>Promise.all(t.map(({animation:n,options:r})=>IL(e,n,r)))}function UL(e){let t=BL(e),n=z5(),r=!0;const i=l=>(c,d)=>{var p;const g=Lp(e,d,l==="exit"?(p=e.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(g){const{transition:f,transitionEnd:_,...S}=g;c={...c,...S,..._}}return c};function s(l){t=l(e)}function a(l){const{props:c}=e,d=yS(e.parent)||{},p=[],g=new Set;let f={},_=1/0;for(let k=0;k<ML;k++){const y=DL[k],x=n[y],w=c[y]!==void 0?c[y]:d[y],E=id(w),B=y===l?x.isActive:null;B===!1&&(_=k);let q=w===d[y]&&w!==c[y]&&E;if(q&&r&&e.manuallyAnimateOnMount&&(q=!1),x.protectedKeys={...f},!x.isActive&&B===null||!w&&!x.prevProp||Cp(w)||typeof w=="boolean")continue;const z=qL(x.prevProp,w);let F=z||y===l&&x.isActive&&!q&&E||k>_&&E,I=!1;const J=Array.isArray(w)?w:[w];let R=J.reduce(i(y),{});B===!1&&(R={});const{prevResolvedValues:P={}}=x,K={...P,...R},G=Z=>{F=!0,g.has(Z)&&(I=!0,g.delete(Z)),x.needsAnimating[Z]=!0;const le=e.getValue(Z);le&&(le.liveStyle=!1)};for(const Z in K){const le=R[Z],de=P[Z];if(f.hasOwnProperty(Z))continue;let X=!1;Ng(le)&&Ng(de)?X=!L4(le,de):X=le!==de,X?le!=null?G(Z):g.add(Z):le!==void 0&&g.has(Z)?G(Z):x.protectedKeys[Z]=!0}x.prevProp=w,x.prevResolvedValues=R,x.isActive&&(f={...f,...R}),r&&e.blockInitialAnimation&&(F=!1),F&&(!(q&&z)||I)&&p.push(...J.map(Z=>({animation:Z,options:{type:y}})))}if(g.size){const k={};g.forEach(y=>{const x=e.getBaseTarget(y),w=e.getValue(y);w&&(w.liveStyle=!0),k[y]=x??null}),p.push({animation:k})}let S=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(g=>{var f;return(f=g.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const p=a(l);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=z5(),r=!0}}}function qL(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!L4(t,e):!1}function ko(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function z5(){return{animate:ko(!0),whileInView:ko(),whileHover:ko(),whileTap:ko(),whileDrag:ko(),whileFocus:ko(),exit:ko()}}class ro{constructor(t){this.isMounted=!1,this.node=t}update(){}}class $L extends ro{constructor(t){super(t),t.animationState||(t.animationState=UL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let zL=0;class VL extends ro{constructor(){super(...arguments),this.id=zL++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const HL={animation:{Feature:$L},exit:{Feature:VL}};function ld(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function jd(e){return{point:{x:e.pageX,y:e.pageY}}}const WL=e=>t=>Fv(t)&&e(t,jd(t));function Tu(e,t,n,r){return ld(e,t,WL(n),r)}const V5=(e,t)=>Math.abs(e-t);function KL(e,t){const n=V5(e.x,t.x),r=V5(e.y,t.y);return Math.sqrt(n**2+r**2)}class bS{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Xm(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,f=KL(p.offset,{x:0,y:0})>=3;if(!g&&!f)return;const{point:_}=p,{timestamp:S}=dr;this.history.push({..._,timestamp:S});const{onStart:k,onMove:y}=this.handlers;g||(k&&k(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Ym(g,this.transformPagePoint),un.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:f,onSessionEnd:_,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Xm(p.type==="pointercancel"?this.lastMoveEventInfo:Ym(g,this.transformPagePoint),this.history);this.startEvent&&f&&f(p,k),_&&_(p,k)},!Fv(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=jd(t),o=Ym(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=dr;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,Xm(o,this.history)),this.removeListeners=kd(Tu(this.contextWindow,"pointermove",this.handlePointerMove),Tu(this.contextWindow,"pointerup",this.handlePointerUp),Tu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xa(this.updatePoint)}}function Ym(e,t){return t?{point:t(e.point)}:e}function H5(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xm({point:e},t){return{point:e,delta:H5(e,wS(t)),offset:H5(e,GL(t)),velocity:YL(t,.1)}}function GL(e){return e[0]}function wS(e){return e[e.length-1]}function YL(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=wS(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>ea(t)));)n--;if(!r)return{x:0,y:0};const s=ta(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const xS=1e-4,XL=1-xS,JL=1+xS,_S=.01,QL=0-_S,ZL=0+_S;function wi(e){return e.max-e.min}function eT(e,t,n){return Math.abs(e-t)<=n}function W5(e,t,n,r=.5){e.origin=r,e.originPoint=bn(t.min,t.max,e.origin),e.scale=wi(n)/wi(t),e.translate=bn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=XL&&e.scale<=JL||isNaN(e.scale))&&(e.scale=1),(e.translate>=QL&&e.translate<=ZL||isNaN(e.translate))&&(e.translate=0)}function Ru(e,t,n,r){W5(e.x,t.x,n.x,r?r.originX:void 0),W5(e.y,t.y,n.y,r?r.originY:void 0)}function K5(e,t,n){e.min=n.min+t.min,e.max=e.min+wi(t)}function tT(e,t,n){K5(e.x,t.x,n.x),K5(e.y,t.y,n.y)}function G5(e,t,n){e.min=t.min-n.min,e.max=e.min+wi(t)}function Ou(e,t,n){G5(e.x,t.x,n.x),G5(e.y,t.y,n.y)}function nT(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?bn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?bn(n,e,r.max):Math.min(e,n)),e}function Y5(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function rT(e,{top:t,left:n,bottom:r,right:i}){return{x:Y5(e.x,n,i),y:Y5(e.y,t,r)}}function X5(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function iT(e,t){return{x:X5(e.x,t.x),y:X5(e.y,t.y)}}function sT(e,t){let n=.5;const r=wi(e),i=wi(t);return i>r?n=hc(t.min,t.max-r,e.min):r>i&&(n=hc(e.min,e.max-i,t.min)),oa(0,1,n)}function aT(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Dg=.35;function oT(e=Dg){return e===!1?e=0:e===!0&&(e=Dg),{x:J5(e,"left","right"),y:J5(e,"top","bottom")}}function J5(e,t,n){return{min:Q5(e,t),max:Q5(e,n)}}function Q5(e,t){return typeof e=="number"?e:e[t]||0}const Z5=()=>({translate:0,scale:1,origin:0,originPoint:0}),zl=()=>({x:Z5(),y:Z5()}),eb=()=>({min:0,max:0}),On=()=>({x:eb(),y:eb()});function Ti(e){return[e("x"),e("y")]}function SS({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function lT({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function cT(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Jm(e){return e===void 0||e===1}function Mg({scale:e,scaleX:t,scaleY:n}){return!Jm(e)||!Jm(t)||!Jm(n)}function Po(e){return Mg(e)||kS(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function kS(e){return tb(e.x)||tb(e.y)}function tb(e){return e&&e!=="0%"}function Qf(e,t,n){const r=e-n,i=t*r;return n+i}function nb(e,t,n,r,i){return i!==void 0&&(e=Qf(e,i,r)),Qf(e,n,r)+t}function Bg(e,t=0,n=1,r,i){e.min=nb(e.min,t,n,r,i),e.max=nb(e.max,t,n,r,i)}function jS(e,{x:t,y:n}){Bg(e.x,t.translate,t.scale,t.originPoint),Bg(e.y,n.translate,n.scale,n.originPoint)}const rb=.999999999999,ib=1.0000000000001;function uT(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Hl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,jS(e,a)),r&&Po(s.latestValues)&&Hl(e,s.latestValues))}t.x<ib&&t.x>rb&&(t.x=1),t.y<ib&&t.y>rb&&(t.y=1)}function Vl(e,t){e.min=e.min+t,e.max=e.max+t}function sb(e,t,n,r,i=.5){const s=bn(e.min,e.max,i);Bg(e,t,n,s,r)}function Hl(e,t){sb(e.x,t.x,t.scaleX,t.scale,t.originX),sb(e.y,t.y,t.scaleY,t.scale,t.originY)}function NS(e,t){return SS(cT(e.getBoundingClientRect(),t))}function dT(e,t,n){const r=NS(e,n),{scroll:i}=t;return i&&(Vl(r.x,i.offset.x),Vl(r.y,i.offset.y)),r}const ES=({current:e})=>e?e.ownerDocument.defaultView:null,hT=new WeakMap;class fT{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=On(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(jd(d).point)},s=(d,p)=>{const{drag:g,dragPropagation:f,onDragStart:_}=this.getProps();if(g&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sP(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(k=>{let y=this.getAxisMotionValue(k).get()||0;if(Ns.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[k];w&&(y=wi(w)*(parseFloat(y)/100))}}this.originPoint[k]=y}),_&&un.postRender(()=>_(d,p)),Cg(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},a=(d,p)=>{const{dragPropagation:g,dragDirectionLock:f,onDirectionLock:_,onDrag:S}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:k}=p;if(f&&this.currentDirection===null){this.currentDirection=pT(k),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",p.point,k),this.updateAxis("y",p.point,k),this.visualElement.render(),S&&S(d,p)},o=(d,p)=>this.stop(d,p),l=()=>Ti(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new bS(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ES(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&un.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!_h(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=nT(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&ql(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=rT(i.layoutBox,n):this.constraints=!1,this.elastic=oT(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ti(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=aT(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ql(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=dT(r,i.root,this.visualElement.getTransformPagePoint());let a=iT(i.layout.layoutBox,s);if(n){const o=n(lT(a));this.hasMutatedConstraints=!!o,o&&(a=SS(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Ti(d=>{if(!_h(d,n,this.currentDirection))return;let p=l&&l[d]||{};a&&(p={min:0,max:0});const g=i?200:1e6,f=i?40:1e7,_={type:"inertia",velocity:r?t[d]:0,bounceStiffness:g,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(d,_)});return Promise.all(c).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Cg(this.visualElement,t),r.start(Gv(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ti(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ti(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps();return r[n]||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ti(n=>{const{drag:r}=this.getProps();if(!_h(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-bn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ql(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ti(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=sT({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ti(a=>{if(!_h(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(bn(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;hT.set(this.visualElement,this);const t=this.visualElement.current,n=Tu(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ql(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),un.read(r);const a=ld(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ti(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=l[d].translate,p.set(p.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Dg,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function _h(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function pT(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class mT extends ro{constructor(t){super(t),this.removeGroupControls=yi,this.removeListeners=yi,this.controls=new fT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yi}unmount(){this.removeGroupControls(),this.removeListeners()}}const ab=e=>(t,n)=>{e&&un.postRender(()=>e(t,n))};class gT extends ro{constructor(){super(...arguments),this.removePointerDownListener=yi}onPointerDown(t){this.session=new bS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ES(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ab(t),onStart:ab(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&un.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Tu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ob(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const lu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(lt.test(e))e=parseFloat(e);else return e;const n=ob(e,t.target.x),r=ob(e,t.target.y);return`${n}% ${r}%`}},vT={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Ja.parse(e);if(i.length>5)return r;const s=Ja.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=bn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class yT extends T.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;MC(bT),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),hf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||un.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Sv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function AS(e){const[t,n]=u4(),r=T.useContext(mv);return u.jsx(yT,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(y4),isPresent:t,safeToRemove:n})}const bT={borderRadius:{...lu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lu,borderTopRightRadius:lu,borderBottomLeftRadius:lu,borderBottomRightRadius:lu,boxShadow:vT};function wT(e,t,n){const r=Nr(e)?e:ad(e);return r.start(Gv("",r,t,n)),r.animation}function xT(e){return e instanceof SVGElement&&e.tagName!=="svg"}const _T=(e,t)=>e.depth-t.depth;class ST{constructor(){this.children=[],this.isDirty=!1}add(t){Dv(this.children,t),this.isDirty=!0}remove(t){Mv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(_T),this.isDirty=!1,this.children.forEach(t)}}function kT(e,t){const n=Es.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(Xa(r),e(s-t))};return un.read(r,!0),()=>Xa(r)}const CS=["TopLeft","TopRight","BottomLeft","BottomRight"],jT=CS.length,lb=e=>typeof e=="string"?parseFloat(e):e,cb=e=>typeof e=="number"||lt.test(e);function NT(e,t,n,r,i,s){i?(e.opacity=bn(0,n.opacity!==void 0?n.opacity:1,ET(r)),e.opacityExit=bn(t.opacity!==void 0?t.opacity:1,0,AT(r))):s&&(e.opacity=bn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<jT;a++){const o=`border${CS[a]}Radius`;let l=ub(t,o),c=ub(n,o);l===void 0&&c===void 0||(l||(l=0),c||(c=0),l===0||c===0||cb(l)===cb(c)?(e[o]=Math.max(bn(lb(l),lb(c),r),0),(Ns.test(c)||Ns.test(l))&&(e[o]+="%")):e[o]=c)}(t.rotate||n.rotate)&&(e.rotate=bn(t.rotate||0,n.rotate||0,r))}function ub(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const ET=PS(0,.5,G4),AT=PS(.5,.95,yi);function PS(e,t,n){return r=>r<e?0:r>t?1:n(hc(e,t,r))}function db(e,t){e.min=t.min,e.max=t.max}function Li(e,t){db(e.x,t.x),db(e.y,t.y)}function hb(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function fb(e,t,n,r,i){return e-=t,e=Qf(e,1/n,r),i!==void 0&&(e=Qf(e,1/i,r)),e}function CT(e,t=0,n=1,r=.5,i,s=e,a=e){if(Ns.test(t)&&(t=parseFloat(t),t=bn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=bn(s.min,s.max,r);e===s&&(o-=t),e.min=fb(e.min,t,n,o,i),e.max=fb(e.max,t,n,o,i)}function pb(e,t,[n,r,i],s,a){CT(e,t[n],t[r],t[i],t.scale,s,a)}const PT=["x","scaleX","originX"],LT=["y","scaleY","originY"];function mb(e,t,n,r){pb(e.x,t,PT,n?n.x:void 0,r?r.x:void 0),pb(e.y,t,LT,n?n.y:void 0,r?r.y:void 0)}function gb(e){return e.translate===0&&e.scale===1}function LS(e){return gb(e.x)&&gb(e.y)}function vb(e,t){return e.min===t.min&&e.max===t.max}function TT(e,t){return vb(e.x,t.x)&&vb(e.y,t.y)}function yb(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function TS(e,t){return yb(e.x,t.x)&&yb(e.y,t.y)}function bb(e){return wi(e.x)/wi(e.y)}function wb(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class RT{constructor(){this.members=[]}add(t){Dv(this.members,t),t.scheduleRender()}remove(t){if(Mv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function OT(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:p,rotateY:g,skewX:f,skewY:_}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),f&&(r+=`skewX(${f}deg) `),_&&(r+=`skewY(${_}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Lo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},bu=typeof window<"u"&&window.MotionDebug!==void 0,Qm=["","X","Y","Z"],IT={visibility:"hidden"},xb=1e3;let FT=0;function Zm(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function RS(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=q4(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",un,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&RS(r)}function OS({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=FT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,bu&&(Lo.totalNodes=Lo.resolvedTargetDeltas=Lo.recalculatedProjection=0),this.nodes.forEach(BT),this.nodes.forEach(VT),this.nodes.forEach(HT),this.nodes.forEach(UT),bu&&window.MotionDebug.record(Lo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new ST)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Bv),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const o=this.eventHandlers.get(s);o&&o.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xT(s),this.instance=s;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||o)&&(this.isLayoutDirty=!0),e){let d;const p=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=kT(p,250),hf.hasAnimatedSinceResize&&(hf.hasAnimatedSinceResize=!1,this.nodes.forEach(Sb))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||c.getDefaultTransition()||XT,{onLayoutAnimationStart:S,onLayoutAnimationComplete:k}=c.getProps(),y=!this.targetLayout||!TS(this.targetLayout,f)||g,x=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const w={...Rv(_,"layout"),onPlay:S,onComplete:k};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||Sb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WT),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:o}=this.options;if(a===void 0&&!o)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_b);return}this.isUpdating||this.nodes.forEach($T),this.isUpdating=!1,this.nodes.forEach(zT),this.nodes.forEach(DT),this.nodes.forEach(MT),this.clearAllSnapshots();const s=Es.now();dr.delta=oa(0,1e3/60,s-dr.timestamp),dr.timestamp=s,dr.isProcessing=!0,zm.update.process(dr),zm.preRender.process(dr),zm.render.process(dr),dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qT),this.sharedNodes.forEach(KT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let o=0;o<this.path.length;o++)this.path[o].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=On(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a){const o=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:o,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:o}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!LS(this.projectionDelta),o=this.getTransformTemplate(),l=o?o(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;s&&(a||Po(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let o=this.removeElementScroll(a);return s&&(o=this.removeTransform(o)),JT(o),{animationId:this.root.animationId,measuredBox:a,layoutBox:o,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:a}=this.options;if(!a)return On();const o=a.measureViewportBox();if(!(!((s=this.scroll)===null||s===void 0)&&s.wasRoot||this.path.some(QT))){const{scroll:l}=this.root;l&&(Vl(o.x,l.offset.x),Vl(o.y,l.offset.y))}return o}removeElementScroll(s){var a;const o=On();if(Li(o,s),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return o;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:p}=c;c!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Li(o,s),Vl(o.x,d.offset.x),Vl(o.y,d.offset.y))}return o}applyTransform(s,a=!1){const o=On();Li(o,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Hl(o,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Po(c.latestValues)&&Hl(o,c.latestValues)}return Po(this.latestValues)&&Hl(o,this.latestValues),o}removeTransform(s){const a=On();Li(a,s);for(let o=0;o<this.path.length;o++){const l=this.path[o];if(!l.instance||!Po(l.latestValues))continue;Mg(l.latestValues)&&l.updateSnapshot();const c=On(),d=l.measurePageBox();Li(c,d),mb(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return Po(this.latestValues)&&mb(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=dr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=On(),this.relativeTargetOrigin=On(),Ou(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=On(),this.targetWithTransforms=On()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Li(this.target,this.layout.layoutBox),jS(this.target,this.targetDelta)):Li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=On(),this.relativeTargetOrigin=On(),Ou(this.relativeTargetOrigin,this.target,p.target),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}bu&&Lo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Mg(this.parent.latestValues)||kS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===dr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Li(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;uT(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=On());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hb(this.prevProjectionDelta.x,this.projectionDelta.x),hb(this.prevProjectionDelta.y,this.projectionDelta.y)),Ru(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!wb(this.projectionDelta.x,this.prevProjectionDelta.x)||!wb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f)),bu&&Lo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zl(),this.projectionDelta=zl(),this.projectionDeltaWithTransform=zl()}setAnimationOrigin(s,a=!1){const o=this.snapshot,l=o?o.latestValues:{},c={...this.latestValues},d=zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=On(),g=o?o.source:void 0,f=this.layout?this.layout.source:void 0,_=g!==f,S=this.getStack(),k=!S||S.members.length<=1,y=!!(_&&!k&&this.options.crossfade===!0&&!this.path.some(YT));this.animationProgress=0;let x;this.mixTargetDelta=w=>{const E=w/1e3;kb(d.x,s.x,E),kb(d.y,s.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ou(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GT(this.relativeTarget,this.relativeTargetOrigin,p,E),x&&TT(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=On()),Li(x,this.relativeTarget)),_&&(this.animationValues=c,NT(c,l,this.latestValues,E,y,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=un.update(()=>{hf.hasAnimatedSinceResize=!0,this.currentAnimation=wT(0,xb,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:o,layout:l,latestValues:c}=s;if(!(!a||!o||!l)){if(this!==s&&this.layout&&l&&IS(this.options.animationType,this.layout.layoutBox,l.layoutBox)){o=this.target||On();const d=wi(this.layout.layoutBox.x);o.x.min=s.target.x.min,o.x.max=o.x.min+d;const p=wi(this.layout.layoutBox.y);o.y.min=s.target.y.min,o.y.max=o.y.min+p}Li(a,o),Hl(a,c),Ru(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new RT),this.sharedNodes.get(s).add(a);const o=a.options.initialPromotionConfig;a.promote({transition:o?o.transition:void 0,preserveFollowOpacity:o&&o.shouldPreserveFollowOpacity?o.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:o}={}){const l=this.getStack();l&&l.promote(this,o),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:o}=s;if((o.z||o.rotate||o.rotateX||o.rotateY||o.rotateZ||o.skewX||o.skewY)&&(a=!0),!a)return;const l={};o.z&&Zm("z",s,l,this.animationValues);for(let c=0;c<Qm.length;c++)Zm(`rotate${Qm[c]}`,s,l,this.animationValues),Zm(`skew${Qm[c]}`,s,l,this.animationValues);s.render();for(const c in l)s.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);s.scheduleRender()}getProjectionStyles(s){var a,o;if(!this.instance||this.isSVG)return;if(!this.isVisible)return IT;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=uf(s==null?void 0:s.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=uf(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Po(this.latestValues)&&(_.transform=c?c({},""):"none",this.hasProjected=!1),_}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=OT(this.projectionDeltaWithTransform,this.treeScale,p),c&&(l.transform=c(p,l.transform));const{x:g,y:f}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${f.origin*100}% 0`,d.animationValues?l.opacity=d===this?(o=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&o!==void 0?o:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Kf){if(p[_]===void 0)continue;const{correct:S,applyTo:k}=Kf[_],y=l.transform==="none"?p[_]:S(p[_],d);if(k){const x=k.length;for(let w=0;w<x;w++)l[k[w]]=y}else l[_]=y}return this.options.layoutId&&(l.pointerEvents=d===this?uf(s==null?void 0:s.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(_b),this.root.sharedNodes.clear()}}}function DT(e){e.updateLayout()}function MT(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=n.source!==e.layout.source;s==="size"?Ti(p=>{const g=a?n.measuredBox[p]:n.layoutBox[p],f=wi(g);g.min=r[p].min,g.max=g.min+f}):IS(s,n.layoutBox,r)&&Ti(p=>{const g=a?n.measuredBox[p]:n.layoutBox[p],f=wi(r[p]);g.max=g.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+f)});const o=zl();Ru(o,r,n.layoutBox);const l=zl();a?Ru(l,e.applyTransform(i,!0),n.measuredBox):Ru(l,r,n.layoutBox);const c=!LS(o);let d=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:f}=p;if(g&&f){const _=On();Ou(_,n.layoutBox,g.layoutBox);const S=On();Ou(S,r,f.layoutBox),TS(_,S)||(d=!0),p.options.layoutRoot&&(e.relativeTarget=S,e.relativeTargetOrigin=_,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function BT(e){bu&&Lo.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function UT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qT(e){e.clearSnapshot()}function _b(e){e.clearMeasurements()}function $T(e){e.isLayoutDirty=!1}function zT(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Sb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function VT(e){e.resolveTargetDelta()}function HT(e){e.calcProjection()}function WT(e){e.resetSkewAndRotation()}function KT(e){e.removeLeadSnapshot()}function kb(e,t,n){e.translate=bn(t.translate,0,n),e.scale=bn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function jb(e,t,n,r){e.min=bn(t.min,n.min,r),e.max=bn(t.max,n.max,r)}function GT(e,t,n,r){jb(e.x,t.x,n.x,r),jb(e.y,t.y,n.y,r)}function YT(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const XT={duration:.45,ease:[.4,0,.1,1]},Nb=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Eb=Nb("applewebkit/")&&!Nb("chrome/")?Math.round:yi;function Ab(e){e.min=Eb(e.min),e.max=Eb(e.max)}function JT(e){Ab(e.x),Ab(e.y)}function IS(e,t,n){return e==="position"||e==="preserve-aspect"&&!eT(bb(t),bb(n),.2)}function QT(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const ZT=OS({attachResizeListener:(e,t)=>ld(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),e0={current:void 0},FS=OS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!e0.current){const e=new ZT({});e.mount(window),e.setOptions({layoutScroll:!0}),e0.current=e}return e0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),e7={pan:{Feature:gT},drag:{Feature:mT,ProjectionNode:FS,MeasureLayout:AS}};function Cb(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&un.postRender(()=>s(t,jd(t)))}class t7 extends ro{mount(){const{current:t}=this.node;t&&(this.unmount=eP(t,n=>(Cb(this.node,n,"Start"),r=>Cb(this.node,r,"End"))))}unmount(){}}class n7 extends ro{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kd(ld(this.node.current,"focus",()=>this.onFocus()),ld(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Pb(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&un.postRender(()=>s(t,jd(t)))}class r7 extends ro{mount(){const{current:t}=this.node;t&&(this.unmount=iP(t,n=>(Pb(this.node,n,"Start"),(r,{success:i})=>Pb(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ug=new WeakMap,t0=new WeakMap,i7=e=>{const t=Ug.get(e.target);t&&t(e)},s7=e=>{e.forEach(i7)};function a7({root:e,...t}){const n=e||document;t0.has(n)||t0.set(n,{});const r=t0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(s7,{root:e,...t})),r[i]}function o7(e,t,n){const r=a7(t);return Ug.set(e,n),r.observe(e),()=>{Ug.delete(e),r.unobserve(e)}}const l7={some:0,all:1};class c7 extends ro{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:l7[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),g=c?d:p;g&&g(l)};return o7(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(u7(t,n))&&this.startObserver()}unmount(){}}function u7({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const d7={inView:{Feature:c7},tap:{Feature:r7},focus:{Feature:n7},hover:{Feature:t7}},h7={layout:{ProjectionNode:FS,MeasureLayout:AS}},qg={current:null},DS={current:!1};function f7(){if(DS.current=!0,!!yv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>qg.current=e.matches;e.addListener(t),t()}else qg.current=!1}const p7=[...lS,kr,Ja],m7=e=>p7.find(oS(e)),Lb=new WeakMap;function g7(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Nr(i))e.addValue(r,i);else if(Nr(s))e.addValue(r,ad(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,ad(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Tb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class v7{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Es.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,un.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=a;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Pp(n),this.isVariantNode=g4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in g){const _=g[f];l[f]!==void 0&&Nr(_)&&_.set(l[f],!1)}}mount(t){this.current=t,Lb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),DS.current||f7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Lb.delete(this.current),this.projection&&this.projection.unmount(),Xa(this.notifyUpdate),Xa(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=tl.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&un.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in fc){const n=fc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):On()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Tb.length;r++){const i=Tb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=g7(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ad(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(sS(i)||X4(i))?i=parseFloat(i):!m7(i)&&Ja.test(n)&&(i=nS(t,n)),this.setBaseTarget(t,Nr(i)?i.get():i)),Nr(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=jv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[t])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Nr(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Bv),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class MS extends v7{constructor(){super(...arguments),this.KeyframeResolver=cS}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Nr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function y7(e){return window.getComputedStyle(e)}class b7 extends MS{constructor(){super(...arguments),this.type="html",this.renderInstance=j4}readValueFromInstance(t,n){if(tl.has(n)){const r=Vv(n);return r&&r.default||0}else{const r=y7(t),i=(_4(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return NS(t,n)}build(t,n,r){Av(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Tv(t,n,r)}}class w7 extends MS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=On}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(tl.has(n)){const r=Vv(n);return r&&r.default||0}return n=N4.has(n)?n:_v(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return C4(t,n,r)}build(t,n,r){Cv(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){E4(t,n,r,i)}mount(t){this.isSVGTag=Lv(t.tagName),super.mount(t)}}const x7=(e,t)=>kv(e)?new w7(t):new b7(t,{allowProjection:e!==T.Fragment}),_7=KC({...HL,...d7,...e7,...h7},x7),Te=lC(_7);var $g=function(e,t){return $g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},$g(e,t)};function BS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$g(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Zf=function(){return Zf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Zf.apply(this,arguments)};function kc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function US(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function qS(e,t){return function(n,r){t(n,r,e)}}function $S(e,t,n,r,i,s){function a(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),p,g=!1,f=n.length-1;f>=0;f--){var _={};for(var S in r)_[S]=S==="access"?{}:r[S];for(var S in r.access)_.access[S]=r.access[S];_.addInitializer=function(y){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(y||null))};var k=(0,n[f])(o==="accessor"?{get:d.get,set:d.set}:d[l],_);if(o==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(p=a(k.get))&&(d.get=p),(p=a(k.set))&&(d.set=p),(p=a(k.init))&&i.unshift(p)}else(p=a(k))&&(o==="field"?i.unshift(p):d[l]=p)}c&&Object.defineProperty(c,r.name,d),g=!0}function zS(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function VS(e){return typeof e=="symbol"?e:"".concat(e)}function HS(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function WS(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Qe(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{c(r.next(d))}catch(p){a(p)}}function l(d){try{c(r.throw(d))}catch(p){a(p)}}function c(d){d.done?s(d.value):i(d.value).then(o,l)}c((r=r.apply(e,t||[])).next())})}function KS(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Rp=Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function GS(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Rp(t,e,n)}function ep(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yv(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function YS(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yv(arguments[t]));return e}function XS(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r}function JS(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function mc(e){return this instanceof mc?(this.v=e,this):new mc(e)}function QS(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(f){return function(_){return Promise.resolve(_).then(f,p)}}function o(f,_){r[f]&&(i[f]=function(S){return new Promise(function(k,y){s.push([f,S,k,y])>1||l(f,S)})},_&&(i[f]=_(i[f])))}function l(f,_){try{c(r[f](_))}catch(S){g(s[0][3],S)}}function c(f){f.value instanceof mc?Promise.resolve(f.value.v).then(d,p):g(s[0][2],f)}function d(f){l("next",f)}function p(f){l("throw",f)}function g(f,_){f(_),s.shift(),s.length&&l(s[0][0],s[0][1])}}function ZS(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(a){return(n=!n)?{value:mc(e[i](a)),done:!1}:s?s(a):a}:s}}function ek(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ep=="function"?ep(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(o,l){a=e[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}function tk(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var S7=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},zg=function(e){return zg=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},zg(e)};function nk(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=zg(e),r=0;r<n.length;r++)n[r]!=="default"&&Rp(t,e,n[r]);return S7(t,e),t}function rk(e){return e&&e.__esModule?e:{default:e}}function ik(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function sk(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function ak(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function ok(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var k7=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function lk(e){function t(s){e.error=e.hasError?new k7(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(a){return t(a),i()})}else r|=1}catch(a){t(a)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function ck(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,a){return r?t?".jsx":".js":i&&(!s||!a)?n:i+s+"."+a.toLowerCase()+"js"}):e}const j7={__extends:BS,__assign:Zf,__rest:kc,__decorate:US,__param:qS,__esDecorate:$S,__runInitializers:zS,__propKey:VS,__setFunctionName:HS,__metadata:WS,__awaiter:Qe,__generator:KS,__createBinding:Rp,__exportStar:GS,__values:ep,__read:Yv,__spread:YS,__spreadArrays:XS,__spreadArray:JS,__await:mc,__asyncGenerator:QS,__asyncDelegator:ZS,__asyncValues:ek,__makeTemplateObject:tk,__importStar:nk,__importDefault:rk,__classPrivateFieldGet:ik,__classPrivateFieldSet:sk,__classPrivateFieldIn:ak,__addDisposableResource:ok,__disposeResources:lk,__rewriteRelativeImportExtension:ck},N7=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ok,get __assign(){return Zf},__asyncDelegator:ZS,__asyncGenerator:QS,__asyncValues:ek,__await:mc,__awaiter:Qe,__classPrivateFieldGet:ik,__classPrivateFieldIn:ak,__classPrivateFieldSet:sk,__createBinding:Rp,__decorate:US,__disposeResources:lk,__esDecorate:$S,__exportStar:GS,__extends:BS,__generator:KS,__importDefault:rk,__importStar:nk,__makeTemplateObject:tk,__metadata:WS,__param:qS,__propKey:VS,__read:Yv,__rest:kc,__rewriteRelativeImportExtension:ck,__runInitializers:zS,__setFunctionName:HS,__spread:YS,__spreadArray:JS,__spreadArrays:XS,__values:ep,default:j7},Symbol.toStringTag,{value:"Module"})),E7=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Xv extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Rb extends Xv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ob extends Xv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ib extends Xv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vg||(Vg={}));class A7{constructor(t,{headers:n={},customFetch:r,region:i=Vg.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=E7(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Qe(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:o,signal:l}=r;let c={},{region:d}=r;d||(d=this.region);const p=new URL(`${this.url}/${n}`);d&&d!=="any"&&(c["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let g;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",g=o):typeof o=="string"?(c["Content-Type"]="text/plain",g=o):typeof FormData<"u"&&o instanceof FormData?g=o:(c["Content-Type"]="application/json",g=JSON.stringify(o)):g=o;const f=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:g,signal:l}).catch(y=>{throw y.name==="AbortError"?y:new Rb(y)}),_=f.headers.get("x-relay-error");if(_&&_==="true")throw new Ob(f);if(!f.ok)throw new Ib(f);let S=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield f.json():S==="application/octet-stream"||S==="application/pdf"?k=yield f.blob():S==="text/event-stream"?k=f:S==="multipart/form-data"?k=yield f.formData():k=yield f.text(),{data:k,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new Rb(s)}:{data:null,error:s,response:s instanceof Ib||s instanceof Ob?s.context:void 0}}})}}var Ir={};const jc=J6(N7);var Sh={},kh={},jh={},Nh={},Eh={},Ah={},Fb;function uk(){if(Fb)return Ah;Fb=1,Object.defineProperty(Ah,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ah.default=e,Ah}var Db;function dk(){if(Db)return Eh;Db=1,Object.defineProperty(Eh,"__esModule",{value:!0});const e=jc.__importDefault(uk());class t{constructor(r){var i,s;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(i=r.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=r.signal,this.isMaybeSingle=(s=r.isMaybeSingle)!==null&&s!==void 0?s:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,i){return this.headers=new Headers(this.headers),this.headers.set(r,i),this}then(r,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var l,c,d,p;let g=null,f=null,_=null,S=o.status,k=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text")?f=w:f=JSON.parse(w))}const y=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),x=(d=o.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");y&&x&&x.length>1&&(_=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(g={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,_=null,S=406,k="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const y=await o.text();try{g=JSON.parse(y),Array.isArray(g)&&o.status===404&&(f=[],g=null,S=200,k="OK")}catch{o.status===404&&y===""?(S=204,k="No Content"):g={message:y}}if(g&&this.isMaybeSingle&&!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows")&&(g=null,S=200,k="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:f,count:_,status:S,statusText:k}});return this.shouldThrowOnError||(a=a.catch(o=>{var l,c,d;return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(c=o==null?void 0:o.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(d=o==null?void 0:o.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(r,i)}returns(){return this}overrideTypes(){return this}}return Eh.default=t,Eh}var Mb;function hk(){if(Mb)return Nh;Mb=1,Object.defineProperty(Nh,"__esModule",{value:!0});const e=jc.__importDefault(dk());class t extends e.default{select(r){let i=!1;const s=(r??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:i=!0,nullsFirst:s,foreignTable:a,referencedTable:o=a}={}){const l=o?`${o}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${r}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:s=i}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(l,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:i=!1,settings:s=!1,buffers:a=!1,wal:o=!1,format:l="text"}={}){var c;const d=[r?"analyze":null,i?"verbose":null,s?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${p}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return Nh.default=t,Nh}var Bb;function Jv(){if(Bb)return jh;Bb=1,Object.defineProperty(jh,"__esModule",{value:!0});const e=jc.__importDefault(hk()),t=new RegExp("[,()]");class n extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const a=Array.from(new Set(s)).map(o=>typeof o=="string"&&t.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:a,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${l}fts${c}.${s}`),this}match(i){return Object.entries(i).forEach(([s,a])=>{this.url.searchParams.append(s,`eq.${a}`)}),this}not(i,s,a){return this.url.searchParams.append(i,`not.${s}.${a}`),this}or(i,{foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,s,a){return this.url.searchParams.append(i,`${s}.${a}`),this}}return jh.default=n,jh}var Ub;function fk(){if(Ub)return kh;Ub=1,Object.defineProperty(kh,"__esModule",{value:!0});const e=jc.__importDefault(Jv());class t{constructor(r,{headers:i={},schema:s,fetch:a}){this.url=r,this.headers=new Headers(i),this.schema=s,this.fetch=a}select(r,i){const{head:s=!1,count:a}=i??{},o=s?"HEAD":"GET";let l=!1;const c=(r??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:i,defaultToNull:s=!0}={}){var a;const o="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const l=r.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(r,{onConflict:i,ignoreDuplicates:s=!1,count:a,defaultToNull:o=!0}={}){var l;const c="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(d.length>0){const p=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(r,{count:i}={}){var s;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:r}={}){var i;const s="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return kh.default=t,kh}var qb;function C7(){if(qb)return Sh;qb=1,Object.defineProperty(Sh,"__esModule",{value:!0});const e=jc,t=e.__importDefault(fk()),n=e.__importDefault(Jv());class r{constructor(s,{headers:a={},schema:o,fetch:l}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=l}from(s){const a=new URL(`${this.url}/${s}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:l=!1,count:c}={}){var d;let p;const g=new URL(`${this.url}/rpc/${s}`);let f;o||l?(p=o?"HEAD":"GET",Object.entries(a).filter(([S,k])=>k!==void 0).map(([S,k])=>[S,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([S,k])=>{g.searchParams.append(S,k)})):(p="POST",f=a);const _=new Headers(this.headers);return c&&_.set("Prefer",`count=${c}`),new n.default({method:p,url:g,headers:_,schema:this.schemaName,body:f,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Sh.default=r,Sh}Object.defineProperty(Ir,"__esModule",{value:!0});var pk=Ir.PostgrestError=kk=Ir.PostgrestBuilder=_k=Ir.PostgrestTransformBuilder=wk=Ir.PostgrestFilterBuilder=yk=Ir.PostgrestQueryBuilder=gk=Ir.PostgrestClient=void 0;const Nc=jc,mk=Nc.__importDefault(C7());var gk=Ir.PostgrestClient=mk.default;const vk=Nc.__importDefault(fk());var yk=Ir.PostgrestQueryBuilder=vk.default;const bk=Nc.__importDefault(Jv());var wk=Ir.PostgrestFilterBuilder=bk.default;const xk=Nc.__importDefault(hk());var _k=Ir.PostgrestTransformBuilder=xk.default;const Sk=Nc.__importDefault(dk());var kk=Ir.PostgrestBuilder=Sk.default;const jk=Nc.__importDefault(uk());pk=Ir.PostgrestError=jk.default;var Nk=Ir.default={PostgrestClient:mk.default,PostgrestQueryBuilder:vk.default,PostgrestFilterBuilder:bk.default,PostgrestTransformBuilder:xk.default,PostgrestBuilder:Sk.default,PostgrestError:jk.default};const P7=X6({__proto__:null,get PostgrestBuilder(){return kk},get PostgrestClient(){return gk},get PostgrestError(){return pk},get PostgrestFilterBuilder(){return wk},get PostgrestQueryBuilder(){return yk},get PostgrestTransformBuilder(){return _k},default:Nk},[Ir]),{PostgrestClient:L7,PostgrestQueryBuilder:TM,PostgrestFilterBuilder:RM,PostgrestTransformBuilder:OM,PostgrestBuilder:IM,PostgrestError:FM}=Nk||P7;class T7{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const R7="2.79.0",O7=`realtime-js/${R7}`,I7="1.0.0",Hg=1e4,F7=1e3,D7=100;var Iu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Iu||(Iu={}));var Zn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zn||(Zn={}));var ns;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ns||(ns={}));var Wg;(function(e){e.websocket="websocket"})(Wg||(Wg={}));var Oo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Oo||(Oo={}));class M7{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const l=r.decode(t.slice(a,a+s));a=a+s;const c=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class Ek{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(nn||(nn={}));const $b=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,a)=>(s[a]=B7(a,e,t,i),s),{}):{}},B7=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?Ak(s,a):Kg(a)},Ak=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return z7(t,n)}switch(e){case nn.bool:return U7(t);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return q7(t);case nn.json:case nn.jsonb:return $7(t);case nn.timestamp:return V7(t);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return Kg(t);default:return Kg(t)}},Kg=e=>e,U7=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},q7=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$7=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},z7=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const s=e.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>Ak(t,a))}return e},V7=e=>typeof e=="string"?e.replace(" ","T"):e,Ck=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class n0{constructor(t,n,r={},i=Hg){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zb||(zb={}));class Fu{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fu.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Fu.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Fu.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},l={};return this.map(s,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const p=s[c];if(p){const g=d.map(k=>k.presence_ref),f=p.map(k=>k.presence_ref),_=d.filter(k=>f.indexOf(k.presence_ref)<0),S=p.filter(k=>g.indexOf(k.presence_ref)<0);_.length>0&&(o[c]=_),S.length>0&&(l[c]=S)}else o[c]=d}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const d=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),d.length>0){const p=t[o].map(f=>f.presence_ref),g=d.filter(f=>p.indexOf(f.presence_ref)<0);t[o].unshift(...g)}r(o,d,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const d=l.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),t[o]=c,i(o,c,l),c.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Vb||(Vb={}));var Du;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Du||(Du={}));var Ks;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ks||(Ks={}));class Qv{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Zn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new n0(this,ns.join,this.params,this.timeout),this.rejoinTimer=new Ek(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ns.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Fu(this),this.broadcastEndpointURL=Ck(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Zn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Du.PRESENCE]&&this.bindings[Du.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},g={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Ks.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Ks.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var _;if(this.socket.setAuth(),f===void 0){t==null||t(Ks.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,k=(_=S==null?void 0:S.length)!==null&&_!==void 0?_:0,y=[];for(let x=0;x<k;x++){const w=S[x],{filter:{event:E,schema:B,table:q,filter:z}}=w,F=f&&f[x];if(F&&F.event===E&&F.schema===B&&F.table===q&&F.filter===z)y.push(Object.assign(Object.assign({},w),{id:F.id}));else{this.unsubscribe(),this.state=Zn.errored,t==null||t(Ks.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Ks.SUBSCRIBED);return}}).receive("error",f=>{this.state=Zn.errored,t==null||t(Ks.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ks.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Zn.joined&&t===Du.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ns.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new n0(this,ns.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new n0(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>D7){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=ns;if(r&&[o,l,c,d].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var f,_,S;return((f=g.filter)===null||f===void 0?void 0:f.event)==="*"||((S=(_=g.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===a}).map(g=>g.callback(p,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var f,_,S,k,y,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const w=g.id,E=(f=g.filter)===null||f===void 0?void 0:f.event;return w&&((_=n.ids)===null||_===void 0?void 0:_.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const w=(y=(k=g==null?void 0:g.filter)===null||k===void 0?void 0:k.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return w==="*"||w===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof p=="object"&&"ids"in p){const f=p.data,{schema:_,table:S,commit_timestamp:k,type:y,errors:x}=f;p=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:k,eventType:y,new:{},old:{},errors:x}),this._getPayloadRecords(f))}g.callback(p,r)})}_isClosed(){return this.state===Zn.closed}_isJoined(){return this.state===Zn.joined}_isJoining(){return this.state===Zn.joining}_isLeaving(){return this.state===Zn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Qv.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ns.close,{},t)}_onError(t){this._on(ns.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=$b(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=$b(t.columns,t.old_record)),n}}const r0=()=>{},Ch={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},H7=[1e3,2e3,5e3,1e4],W7=1e4,K7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class G7{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hg,this.transport=null,this.heartbeatIntervalMs=Ch.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=r0,this.ref=0,this.reconnectTimer=null,this.logger=r0,this.conn=null,this.sendBuffer=[],this.serializer=new M7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Wg.websocket}`,this.httpEndpoint=Ck(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=T7.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:I7}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Iu.connecting:return Oo.Connecting;case Iu.open:return Oo.Open;case Iu.closing:return Oo.Closing;default:return Oo.Closed}}isConnected(){return this.connectionState()===Oo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Qv(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(F7,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ch.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ns.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([K7],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:O7};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ns.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ek(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ch.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,l,c,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Hg,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Ch.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:r0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:p=>H7[p-1]||W7,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(p,g)=>g(JSON.stringify(p)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Zv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function vn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Y7 extends Zv{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gg extends Zv{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const ey=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),X7=()=>Response,Yg=e=>{if(Array.isArray(e))return e.map(n=>Yg(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Yg(r)}),t},J7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},i0=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Q7=(e,t,n)=>Qe(void 0,void 0,void 0,function*(){const r=yield X7();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new Y7(i0(i),s,a))}).catch(i=>{t(new Gg(i0(i),i))}):t(new Gg(i0(e),e))}),Z7=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(J7(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Nd(e,t,n,r,i,s){return Qe(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,Z7(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Q7(l,o,r))})})}function cd(e,t,n,r){return Qe(this,void 0,void 0,function*(){return Nd(e,"GET",t,n,r)})}function es(e,t,n,r,i){return Qe(this,void 0,void 0,function*(){return Nd(e,"POST",t,r,i,n)})}function Xg(e,t,n,r,i){return Qe(this,void 0,void 0,function*(){return Nd(e,"PUT",t,r,i,n)})}function eR(e,t,n,r){return Qe(this,void 0,void 0,function*(){return Nd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function ty(e,t,n,r,i){return Qe(this,void 0,void 0,function*(){return Nd(e,"DELETE",t,r,i,n)})}class tR{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Qe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vn(t))return{data:null,error:t};throw t}})}}var Pk;class nR{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[Pk]="BlobDownloadBuilder",this.promise=null}asStream(){return new tR(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Qe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vn(t))return{data:null,error:t};throw t}})}}Pk=Symbol.toStringTag;const rR=nR,iR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sR{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=ey(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Qe(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Hb),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),p=yield(t=="PUT"?Xg:es)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(vn(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Qe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Hb.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const p=yield Xg(this.fetch,o.toString(),l,{headers:d});return{data:{path:s,fullPath:p.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield es(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new Zv("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Qe(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield es(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Qe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield es(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Qe(this,void 0,void 0,function*(){try{const i=yield es(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vn(i))return{data:null,error:i};throw i}})}download(t,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=i?`?${i}`:"",a=this._getFinalPath(t),o=()=>cd(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new rR(o,this.shouldThrowOnError)}info(t){return Qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield cd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Yg(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}})}exists(t){return Qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield eR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vn(r)&&r instanceof Gg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&i.push(o);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield ty(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Qe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},iR),n),{prefix:t||""});return{data:yield es(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Qe(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield es(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Lk="2.79.0",Tk={"X-Client-Info":`storage-js/${Lk}`};class aR{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tk),n),this.fetch=ey(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Qe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield cd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}getBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield cd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}createBucket(t){return Qe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield es(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Qe(this,void 0,void 0,function*(){try{return{data:yield Xg(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield ty(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class oR{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tk),n),this.fetch=ey(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}listBuckets(t){return Qe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield cd(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield ty(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}})}}const ny={"X-Client-Info":`storage-js/${Lk}`,"Content-Type":"application/json"};class Rk extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function fi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class s0 extends Rk{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lR extends Rk{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Wb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Wb||(Wb={}));const ry=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cR=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kb=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uR=(e,t,n)=>Qe(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const a=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";t(new s0(Kb(s),r,a))}).catch(()=>{const s=r+"",a=i.statusText||`HTTP ${r} error`;t(new s0(a,r,s))});else{const s=r+"",a=i.statusText||`HTTP ${r} error`;t(new s0(a,r,s))}}else t(new lR(Kb(e),e))}),dR=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(cR(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))};function hR(e,t,n,r,i,s){return Qe(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,dR(t,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>uR(l,o,r))})})}function pi(e,t,n,r,i){return Qe(this,void 0,void 0,function*(){return hR(e,"POST",t,r,i,n)})}class fR{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ny),n),this.fetch=ry(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Qe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Qe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fi(r))return{data:null,error:r};throw r}})}listIndexes(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Qe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fi(r))return{data:null,error:r};throw r}})}}class pR{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ny),n),this.fetch=ry(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Qe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield pi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}getVectors(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}listVectors(t){return Qe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield pi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}queryVectors(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Qe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield pi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}}class mR{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ny),n),this.fetch=ry(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}getBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}listBuckets(){return Qe(this,arguments,void 0,function*(t={}){try{return{data:yield pi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Qe(this,void 0,void 0,function*(){try{return{data:(yield pi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fi(n))return{data:null,error:n};throw n}})}}class gR extends mR{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new vR(this.url,this.headers,t,this.fetch)}}class vR extends fR{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Qe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Qe(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Qe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Qe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new yR(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class yR extends pR{constructor(t,n,r,i,s){super(t,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Qe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Qe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Qe(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Qe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Qe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class bR extends aR{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new sR(this.url,this.headers,t,this.fetch)}get vectors(){return new gR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new oR(this.url+"/iceberg",this.headers,this.fetch)}}const wR="2.79.0";let wu="";typeof Deno<"u"?wu="deno":typeof document<"u"?wu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wu="react-native":wu="node";const xR={"X-Client-Info":`supabase-js-${wu}/${wR}`},_R={headers:xR},SR={schema:"public"},kR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jR={},NR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ER=()=>Headers,AR=(e,t,n)=>{const r=NR(n),i=ER();return async(s,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:c}))}};function CR(e){return e.endsWith("/")?e:e+"/"}function PR(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:p}=t,g={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function LR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ok="2.79.0",jl=30*1e3,Jg=3,a0=Jg*jl,TR="http://localhost:9999",RR="supabase.auth.token",OR={"X-Client-Info":`gotrue-js/${Ok}`},Qg="X-Supabase-Api-Version",Ik={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FR=10*60*1e3;class ud extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function it(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class DR extends ud{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function MR(e){return it(e)&&e.name==="AuthApiError"}class Io extends ud{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class io extends ud{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Xi extends io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function BR(e){return it(e)&&e.name==="AuthSessionMissingError"}class gl extends io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ph extends io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Lh extends io{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function UR(e){return it(e)&&e.name==="AuthImplicitGrantRedirectError"}class Gb extends io{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zg extends io{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function o0(e){return it(e)&&e.name==="AuthRetryableFetchError"}class Yb extends io{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class e1 extends io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xb=` 	
\r=`.split(""),qR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xb.length;t+=1)e[Xb[t].charCodeAt(0)]=-2;for(let t=0;t<tp.length;t+=1)e[tp[t].charCodeAt(0)]=t;return e})();function Jb(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(tp[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(tp[r]),t.queuedBits-=6}}function Fk(e,t,n){const r=qR[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Qb(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{VR(a,r,n)};for(let a=0;a<e.length;a+=1)Fk(e.charCodeAt(a),i,s);return t.join("")}function $R(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zR(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}$R(r,t)}}function VR(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ec(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Fk(e.charCodeAt(i),n,r);return new Uint8Array(t)}function HR(e){const t=[];return zR(e,n=>t.push(n)),new Uint8Array(t)}function qo(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Jb(i,n,r)),Jb(null,n,r),t.join("")}function WR(e){return Math.round(Date.now()/1e3)+e}function KR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Sr=()=>typeof window<"u"&&typeof document<"u",jo={tested:!1,writable:!1},Dk=()=>{if(!Sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jo.tested)return jo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),jo.tested=!0,jo.writable=!0}catch{jo.tested=!0,jo.writable=!1}return jo.writable};function GR(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,i)=>{t[i]=r})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const Mk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Nl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},No=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Aa=async(e,t)=>{await e.removeItem(t)};class Op{constructor(){this.promise=new Op.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Op.promiseConstructor=Promise;function l0(e){const t=e.split(".");if(t.length!==3)throw new e1("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!IR.test(t[n]))throw new e1("JWT not in base64url format");return{header:JSON.parse(Qb(t[0])),payload:JSON.parse(Qb(t[1])),signature:ec(t[2]),raw:{header:t[0],payload:t[1]}}}async function XR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function JR(e,t){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){r(s);return}}})()})}function QR(e){return("0"+e.toString(16)).substr(-2)}function ZR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,QR).join("")}async function eO(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function tO(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await eO(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vl(e,t,n=!1){const r=ZR();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Nl(e,`${t}-code-verifier`,i);const s=await tO(r);return[s,r===s?"plain":"s256"]}const nO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rO(e){const t=e.headers.get(Qg);if(!t||!t.match(nO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iO(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sO(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yl(e){if(!aO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function c0(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oO(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function Zb(e){return JSON.parse(JSON.stringify(e))}const To=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lO=[502,503,504];async function ew(e){var t;if(!YR(e))throw new Zg(To(e),0);if(lO.includes(e.status))throw new Zg(To(e),e.status);let n;try{n=await e.json()}catch(s){throw new Io(To(s),s)}let r;const i=rO(e);if(i&&i.getTime()>=Ik["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yb(To(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Xi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Yb(To(n),e.status,n.weak_password.reasons);throw new DR(To(n),e.status||500,r)}const cO=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ht(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Qg]||(s[Qg]=Ik["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await uO(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function uO(e,t,n,r,i,s){const a=cO(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new Zg(To(l),0)}if(o.ok||await ew(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await ew(l)}}function Ji(e){var t;let n=null;fO(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=WR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function tw(e){const t=Ji(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Fa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dO(e){return{data:e,error:null}}function hO(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=kc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function nw(e){return e}function fO(e){return e.access_token&&e.refresh_token&&e.expires_in}const u0=["global","local","others"];class pO{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Mk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=u0[0]){if(u0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${u0.join(", ")}`);try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Fa})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=kc(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:hO,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(it(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Fa})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:nw});if(d.error)throw d.error;const p=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);c[`${k}Page`]=S}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(it(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){yl(t);try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Fa})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){yl(t);try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Fa})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){yl(t);try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Fa})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){yl(t.userId);try{const{data:n,error:r}=await ht(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _deleteFactor(t){yl(t.userId),yl(t.id);try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:nw});if(d.error)throw d.error;const p=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);c[`${k}Page`]=S}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(it(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ht(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ht(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}}function rw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const bl={debug:!!(globalThis&&Dk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mO extends Bk{}async function gO(e,t,n){bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),bl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(bl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function vO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Uk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function yO(e){return parseInt(e,16)}function bO(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function wO(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:d,uri:p,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=Uk(e.address),_=d?`${d}://${r}`:r,S=e.statement?`${e.statement}
`:"",k=`${_} wants you to sign in with your Ethereum account:
${f}

${S}`;let y=`URI: ${p}
Version: ${g}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);x+=`
- ${w}`}y+=x}return`${k}
${y}`}class $n extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class np extends $n{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function xO({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $n({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $n({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $n({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new $n({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $n({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $n({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new $n({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $n({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(qk(a)){if(s.rp.id!==a)return new $n({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $n({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new $n({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $n({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $n({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function _O({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $n({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $n({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(qk(r)){if(n.rpId!==r)return new $n({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $n({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $n({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $n({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class SO{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const kO=new SO;function jO(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=kc(e,["challenge","user","excludeCredentials"]),s=ec(t).buffer,a=Object.assign(Object.assign({},n),{id:ec(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ec(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function NO(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=kc(e,["challenge","allowCredentials"]),i=ec(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:ec(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function EO(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:qo(new Uint8Array(e.response.attestationObject)),clientDataJSON:qo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function AO(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:qo(new Uint8Array(i.authenticatorData)),clientDataJSON:qo(new Uint8Array(i.clientDataJSON)),signature:qo(new Uint8Array(i.signature)),userHandle:i.userHandle?qo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function iw(){var e,t;return!!(Sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function CO(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new np("Browser returned unexpected credential type",t)}:{data:null,error:new np("Empty credential response",t)}}catch(t){return{data:null,error:xO({error:t,options:e})}}}async function PO(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new np("Browser returned unexpected credential type",t)}:{data:null,error:new np("Empty credential response",t)}}catch(t){return{data:null,error:_O({error:t,options:e})}}}const LO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},TO={userVerification:"preferred",hints:["security-key"]};function rp(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(t(a)){const o=r[s];t(o)?r[s]=rp(o,a):r[s]=rp(a)}else r[s]=a}return r}function RO(e,t){return rp(LO,e,t||{})}function OO(e,t){return rp(TO,e,t||{})}class IO{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:o};const l=i??kO.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=RO(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:p}=await CO({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const c=OO(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:p}=await PO(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(a){return it(a)?{data:null,error:a}:{data:null,error:new Io("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new ud("rpId is required for WebAuthn authentication")};try{if(!iw())return{data:null,error:new Io("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return it(a)?{data:null,error:a}:{data:null,error:new Io("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new ud("rpId is required for WebAuthn registration")};try{if(!iw())return{data:null,error:new Io("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return it(a)?{data:null,error:a}:{data:null,error:new Io("Unexpected error in register",a)}}}}vO();const FO={url:TR,storageKey:RR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function sw(e,t,n){return await n()}const wl={};class dd{get jwks(){var t,n;return(n=(t=wl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){wl[this.storageKey]=Object.assign(Object.assign({},wl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=wl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){wl[this.storageKey]=Object.assign(Object.assign({},wl[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dd.nextInstanceID,dd.nextInstanceID+=1,this.instanceID>0&&Sr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},FO),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new pO({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Mk(i.fetch),this.lock=i.lock||sw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Sr()&&!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks?this.lock=gO:this.lock=sw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IO(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Dk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=rw(this.memoryStorage)),Sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ok}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Sr()&&(n=GR(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Sr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),UR(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return it(n)?this._returnResult({error:n}):this._returnResult({error:new Io("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ji}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:d,password:p,options:g}=t;let f=null,_=null;this.flowType==="pkce"&&([f,_]=await vl(this.storage,this.storageKey)),s=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:p,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:f,code_challenge_method:_},xform:Ji})}else if("phone"in t){const{phone:d,password:p,options:g}=t;s=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Ji})}else throw new Ph("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:tw})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:tw})}else throw new Ph("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new gl;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,a,o,l,c,d,p,g;let f,_;if("message"in t)f=t.message,_=t.signature;else{const{chain:S,wallet:k,statement:y,options:x}=t;let w;if(Sr())if(typeof k=="object")w=k;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")w=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=k}const E=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),B=await w.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!B||B.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=Uk(B[0]);let z=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!z){const I=await w.request({method:"eth_chainId"});z=yO(I)}const F={domain:E.host,address:q,statement:y,uri:E.href,version:"1",chainId:z,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};f=wO(F),_=await w.request({method:"personal_sign",params:[bO(f),q]})}try{const{data:S,error:k}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:_},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ji});if(k)throw k;if(!S||!S.session||!S.user){const y=new gl;return this._returnResult({data:{user:null,session:null},error:y})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:k})}catch(S){if(it(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var n,r,i,s,a,o,l,c,d,p,g,f;let _,S;if("message"in t)_=t.message,S=t.signature;else{const{chain:k,wallet:y,statement:x,options:w}=t;let E;if(Sr())if(typeof y=="object")E=y;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))E=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const B=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const q=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),x?{statement:x}:null));let z;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")z=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)z=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)_=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),S=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${B.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const q=await E.signMessage(new TextEncoder().encode(_),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=q}}try{const{data:k,error:y}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:qo(S)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ji});if(y)throw y;if(!k||!k.session||!k.user){const x=new gl;return this._returnResult({data:{user:null,session:null},error:x})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:y})}catch(k){if(it(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const n=await No(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ji});if(await Aa(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new gl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ji}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new gl;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await vl(this.storage,this.storageKey));const{error:p}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:d}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Ph("You must provide either an email or phone number.")}catch(o){if(it(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ji});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;this.flowType==="pkce"&&([s,a]=await vl(this.storage,this.storageKey));const o=await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:dO});return this._returnResult(o)}catch(s){if(it(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Xi;const{error:i}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(it(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Ph("You must provide either an email or phone number and a type")}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await No(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<a0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await No(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=c0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=oO(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Fa}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xi}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Fa})})}catch(n){if(it(n))return BR(n)&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Xi;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await vl(this.storage,this.storageKey));const{data:c,error:d}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Fa});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(it(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xi;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=l0(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(it(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Xi;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Sr())throw new Lh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Lh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Gb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Gb("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!s||!o||!a||!c)throw new Lh("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(o);let g=d+p;l&&(g=parseInt(l));const f=g-d;f*1e3<=jl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${p}s`);const _=g-p;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,g,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,g,d);const{data:S,error:k}=await this._getUser(s);if(k)throw k;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:g,refresh_token:a,token_type:c,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(r){if(it(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await No(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(MR(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=KR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await vl(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(it(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,c,d;const{data:p,error:g}=s;if(g)throw g;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Sr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(it(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:l,access_token:c,nonce:d}=t,p=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ji}),{data:g,error:f}=p;return f?this._returnResult({data:{user:null,session:null},error:f}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new gl}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:f}))}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await JR(async i=>(i>0&&await XR(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ji})),(i,s)=>{const a=200*Math.pow(2,i);return s&&o0(s)&&Date.now()+a-r<jl})}catch(r){if(this._debug(n,"error",r),it(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Sr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await No(this.storage,this.storageKey);if(i&&this.userStorage){let a=await No(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Nl(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:c0()}else if(i&&!i.user&&!i.user){const a=await No(this.storage,this.storageKey+"-user");a&&a!=null&&a.user?(i.user=a.user,await Aa(this.storage,this.storageKey+"-user"),await Nl(this.storage,this.storageKey,i)):i.user=c0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<a0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${a0}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),o0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&a!=null&&a.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Xi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Op;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new Xi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),it(s)){const a={data:null,error:s};return o0(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Nl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Zb(i);await Nl(this.storage,this.storageKey,s)}else{const i=Zb(n);await Nl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Aa(this.storage,this.storageKey),await Aa(this.storage,this.storageKey+"-code-verifier"),await Aa(this.storage,this.storageKey+"-user"),this.userStorage&&await Aa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Sr()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),jl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/jl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${jl}ms, refresh threshold is ${Jg} ticks`),i<=Jg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Sr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await vl(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await ht(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?EO(t.webauthn.credential_response):AO(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:jO(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:NO(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=l0(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const l=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ht(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Xi})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Xi});const a=await ht(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Sr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Xi});const a=await ht(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Sr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+FR>i)return r;const{data:s,error:a}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:f}=await this.getSession();if(f||!g.session)return this._returnResult({data:null,error:f});r=g.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=l0(r);n!=null&&n.allowExpired||iO(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:a},error:null}}const d=sO(i.alg),p=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,a,HR(`${o}.${l}`)))throw new e1("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}}dd.nextInstanceID=0;const DO=dd;class MO extends DO{constructor(t){super(t)}}class BO{constructor(t,n,r){var i,s,a;this.supabaseUrl=t,this.supabaseKey=n;const o=LR(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:SR,realtime:jR,auth:Object.assign(Object.assign({},kR),{storageKey:l}),global:_R},d=PR(r??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=AR(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new L7(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new bR(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new A7(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:o,lock:l,debug:c,throwOnError:d},p,g){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new MO({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),p),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:d,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new G7(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const UO=(e,t,n)=>new BO(e,t,n);function qO(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}qO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $O="https://xfbmdeuzuyixpmouhqcv.supabase.co",zO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhmYm1kZXV6dXlpeHBtb3VocWN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkzMzE3ODQsImV4cCI6MjA2NDkwNzc4NH0.XzFIT3BwW9dKRrmFFbSAufCpC1SZuUI-VU2Uer5VoTw",Pt=UO($O,zO,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"herbbie-auth",flowType:"pkce",onAuthStateChange:(e,t)=>{e==="SIGNED_OUT"&&Object.keys(localStorage).forEach(n=>{(n.startsWith("sb-")||n.startsWith("supabase.")||n.startsWith("herbbie-auth"))&&localStorage.removeItem(n)})}},global:{headers:{"x-client-info":"herbbie-web"},fetch:(e,t={})=>fetch(e,t).catch(n=>{if(n.message.includes("Failed to fetch")||n.message.includes("ERR_NAME_NOT_RESOLVED"))return Promise.resolve(new Response(JSON.stringify({error:"Network error"}),{status:503,headers:{"Content-Type":"application/json"}}));throw n})}});function Ht(e){"@babel/helpers - typeof";return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(e)}var ls=Uint8Array,gi=Uint16Array,iy=Int32Array,sy=new ls([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ay=new ls([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aw=new ls([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$k=function(e,t){for(var n=new gi(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new iy(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},zk=$k(sy,2),VO=zk.b,t1=zk.r;VO[28]=258,t1[258]=28;var HO=$k(ay,0),ow=HO.r,n1=new gi(32768);for(var ln=0;ln<32768;++ln){var Ca=(ln&43690)>>1|(ln&21845)<<1;Ca=(Ca&52428)>>2|(Ca&13107)<<2,Ca=(Ca&61680)>>4|(Ca&3855)<<4,n1[ln]=((Ca&65280)>>8|(Ca&255)<<8)>>1}var Mu=function(e,t,n){for(var r=e.length,i=0,s=new gi(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new gi(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new gi(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],p=a[e[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)o[n1[p]>>l]=c}else for(o=new gi(r),i=0;i<r;++i)e[i]&&(o[i]=n1[a[e[i]-1]++]>>15-e[i]);return o},Jo=new ls(288);for(var ln=0;ln<144;++ln)Jo[ln]=8;for(var ln=144;ln<256;++ln)Jo[ln]=9;for(var ln=256;ln<280;++ln)Jo[ln]=7;for(var ln=280;ln<288;++ln)Jo[ln]=8;var ip=new ls(32);for(var ln=0;ln<32;++ln)ip[ln]=5;var WO=Mu(Jo,9,0),KO=Mu(ip,5,0),Vk=function(e){return(e+7)/8|0},GO=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new ls(e.subarray(t,n))},Vs=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},cu=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},d0=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:Wk,l:0};if(i==1){var a=new ls(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(B,q){return B.f-q.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,r=1;r<i;++r)s[r].s>g&&(g=s[r].s);var f=new gi(g+1),_=r1(n[d-1],f,0);if(_>t){var r=0,S=0,k=_-t,y=1<<k;for(s.sort(function(q,z){return f[z.s]-f[q.s]||q.f-z.f});r<i;++r){var x=s[r].s;if(f[x]>t)S+=y-(1<<_-f[x]),f[x]=t;else break}for(S>>=k;S>0;){var w=s[r].s;f[w]<t?S-=1<<t-f[w]++-1:++r}for(;r>=0&&S;--r){var E=s[r].s;f[E]==t&&(--f[E],++S)}_=t}return{t:new ls(f),l:_}},r1=function(e,t,n){return e.s==-1?Math.max(r1(e.l,t,n+1),r1(e.r,t,n+1)):t[e.s]=n},lw=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new gi(++t),r=0,i=e[0],s=1,a=function(l){n[r++]=l},o=1;o<=t;++o)if(e[o]==i&&o!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[o]}return{c:n.subarray(0,r),n:t}},uu=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Hk=function(e,t,n){var r=n.length,i=Vk(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},cw=function(e,t,n,r,i,s,a,o,l,c,d){Vs(t,d++,n),++i[256];for(var p=d0(i,15),g=p.t,f=p.l,_=d0(s,15),S=_.t,k=_.l,y=lw(g),x=y.c,w=y.n,E=lw(S),B=E.c,q=E.n,z=new gi(19),F=0;F<x.length;++F)++z[x[F]&31];for(var F=0;F<B.length;++F)++z[B[F]&31];for(var I=d0(z,7),J=I.t,R=I.l,P=19;P>4&&!J[aw[P-1]];--P);var K=c+5<<3,G=uu(i,Jo)+uu(s,ip)+a,Z=uu(i,g)+uu(s,S)+a+14+3*P+uu(z,J)+2*z[16]+3*z[17]+7*z[18];if(l>=0&&K<=G&&K<=Z)return Hk(t,d,e.subarray(l,l+c));var le,de,X,ae;if(Vs(t,d,1+(Z<G)),d+=2,Z<G){le=Mu(g,f,0),de=g,X=Mu(S,k,0),ae=S;var re=Mu(J,R,0);Vs(t,d,w-257),Vs(t,d+5,q-1),Vs(t,d+10,P-4),d+=14;for(var F=0;F<P;++F)Vs(t,d+3*F,J[aw[F]]);d+=3*P;for(var ie=[x,B],N=0;N<2;++N)for(var M=ie[N],F=0;F<M.length;++F){var $=M[F]&31;Vs(t,d,re[$]),d+=J[$],$>15&&(Vs(t,d,M[F]>>5&127),d+=M[F]>>12)}}else le=WO,de=Jo,X=KO,ae=ip;for(var F=0;F<o;++F){var Q=r[F];if(Q>255){var $=Q>>18&31;cu(t,d,le[$+257]),d+=de[$+257],$>7&&(Vs(t,d,Q>>23&31),d+=sy[$]);var te=Q&31;cu(t,d,X[te]),d+=ae[te],te>3&&(cu(t,d,Q>>5&8191),d+=ay[te])}else cu(t,d,le[Q]),d+=de[Q]}return cu(t,d,le[256]),d+de[256]},YO=new iy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wk=new ls(0),XO=function(e,t,n,r,i,s){var a=s.z||e.length,o=new ls(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),c=s.l,d=(s.r||0)&7;if(t){d&&(l[0]=s.r>>3);for(var p=YO[t-1],g=p>>13,f=p&8191,_=(1<<n)-1,S=s.p||new gi(32768),k=s.h||new gi(_+1),y=Math.ceil(n/3),x=2*y,w=function(ve){return(e[ve]^e[ve+1]<<y^e[ve+2]<<x)&_},E=new iy(25e3),B=new gi(288),q=new gi(32),z=0,F=0,I=s.i||0,J=0,R=s.w||0,P=0;I+2<a;++I){var K=w(I),G=I&32767,Z=k[K];if(S[G]=Z,k[K]=G,R<=I){var le=a-I;if((z>7e3||J>24576)&&(le>423||!c)){d=cw(e,l,0,E,B,q,F,J,P,I-P,d),J=z=F=0,P=I;for(var de=0;de<286;++de)B[de]=0;for(var de=0;de<30;++de)q[de]=0}var X=2,ae=0,re=f,ie=G-Z&32767;if(le>2&&K==w(I-ie))for(var N=Math.min(g,le)-1,M=Math.min(32767,I),$=Math.min(258,le);ie<=M&&--re&&G!=Z;){if(e[I+X]==e[I+X-ie]){for(var Q=0;Q<$&&e[I+Q]==e[I+Q-ie];++Q);if(Q>X){if(X=Q,ae=ie,Q>N)break;for(var te=Math.min(ie,Q-2),oe=0,de=0;de<te;++de){var me=I-ie+de&32767,he=S[me],ge=me-he&32767;ge>oe&&(oe=ge,Z=me)}}}G=Z,Z=S[G],ie+=G-Z&32767}if(ae){E[J++]=268435456|t1[X]<<18|ow[ae];var _e=t1[X]&31,Re=ow[ae]&31;F+=sy[_e]+ay[Re],++B[257+_e],++q[Re],R=I+X,++z}else E[J++]=e[I],++B[e[I]]}}for(I=Math.max(I,R);I<a;++I)E[J++]=e[I],++B[e[I]];d=cw(e,l,c,E,B,q,F,J,P,I-P,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=k,s.p=S,s.i=I,s.w=R)}else{for(var I=s.w||0;I<a+c;I+=65535){var Pe=I+65535;Pe>=a&&(l[d/8|0]=c,Pe=a),d=Hk(l,d+1,e.subarray(I,Pe))}s.i=a}return GO(o,0,r+Vk(d)+i)},Kk=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},JO=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new ls(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return XO(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},Gk=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},QO=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=Kk();i.p(t.dictionary),Gk(e,2,i.d())}};function i1(e,t){t||(t={});var n=Kk();n.p(e);var r=JO(e,t,t.dictionary?6:2,4);return QO(r,t),Gk(r,r.length-4,n.d()),r}var ZO=typeof TextDecoder<"u"&&new TextDecoder,eI=0;try{ZO.decode(Wk,{stream:!0}),eI=1}catch{}function tI(e){if(Array.isArray(e))return e}function nI(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function uw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rI(e,t){if(e){if(typeof e=="string")return uw(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uw(e,t):void 0}}function iI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dw(e,t){return tI(e)||nI(e,t)||rI(e,t)||iI()}function hw(e,t="utf8"){return new TextDecoder(t).decode(e)}const sI=new TextEncoder;function aI(e){return sI.encode(e)}const oI=1024*8,lI=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),h0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class oy{constructor(t=oI,n={}){Kt(this,"buffer"),Kt(this,"byteLength"),Kt(this,"byteOffset"),Kt(this,"length"),Kt(this,"offset"),Kt(this,"lastWrittenByte"),Kt(this,"littleEndian"),Kt(this,"_data"),Kt(this,"_mark"),Kt(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,s=t.byteLength-i;let a=i;(ArrayBuffer.isView(t)||t instanceof oy)&&(t.byteLength!==t.buffer.byteLength&&(a=t.byteOffset+i),t=t.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,r=new Uint8Array(n);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=h0[n].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===lI&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+r));o.reverse();const l=new h0[n](o.buffer);return this.offset+=r,l.reverse(),l}const a=new h0[n](s);return this.offset+=r,a}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return hw(this.readBytes(t))}decodeText(t=1,n="utf8"){return hw(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(aI(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ec(e){let t=e.length;for(;--t>=0;)e[t]=0}const cI=3,uI=258,Yk=29,dI=256,hI=dI+1+Yk,Xk=30,fI=512,pI=new Array((hI+2)*2);Ec(pI);const mI=new Array(Xk*2);Ec(mI);const gI=new Array(fI);Ec(gI);const vI=new Array(uI-cI+1);Ec(vI);const yI=new Array(Yk);Ec(yI);const bI=new Array(Xk);Ec(bI);const wI=(e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var s1=wI;const xI=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},_I=new Uint32Array(xI()),SI=(e,t,n,r)=>{const i=_I,s=r+n;e^=-1;for(let a=r;a<s;a++)e=e>>>8^i[(e^t[a])&255];return e^-1};var bs=SI,a1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ly={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const kI=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var jI=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)kI(n,r)&&(e[r]=n[r])}}return e},NI=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let a=e[r];n.set(a,i),i+=a.length}return n},Jk={assign:jI,flattenChunks:NI};let Qk=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Qk=!1}const hd=new Uint8Array(256);for(let e=0;e<256;e++)hd[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;hd[254]=hd[254]=1;var EI=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,s,a=e.length,o=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const AI=(e,t)=>{if(t<65534&&e.subarray&&Qk)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var CI=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){s[i++]=a;continue}let o=hd[a];if(o>4){s[i++]=65533,r+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&r<n;)a=a<<6|e[r++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return AI(s,i)},PI=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+hd[e[n]]>t?n:t},o1={string2buf:EI,buf2string:CI,utf8border:PI};function LI(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var TI=LI;const Th=16209,RI=16191;var OI=function(e,t){let n,r,i,s,a,o,l,c,d,p,g,f,_,S,k,y,x,w,E,B,q,z,F,I;const J=e.state;n=e.next_in,F=e.input,r=n+(e.avail_in-5),i=e.next_out,I=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),o=J.dmax,l=J.wsize,c=J.whave,d=J.wnext,p=J.window,g=J.hold,f=J.bits,_=J.lencode,S=J.distcode,k=(1<<J.lenbits)-1,y=(1<<J.distbits)-1;e:do{f<15&&(g+=F[n++]<<f,f+=8,g+=F[n++]<<f,f+=8),x=_[g&k];t:for(;;){if(w=x>>>24,g>>>=w,f-=w,w=x>>>16&255,w===0)I[i++]=x&65535;else if(w&16){E=x&65535,w&=15,w&&(f<w&&(g+=F[n++]<<f,f+=8),E+=g&(1<<w)-1,g>>>=w,f-=w),f<15&&(g+=F[n++]<<f,f+=8,g+=F[n++]<<f,f+=8),x=S[g&y];n:for(;;){if(w=x>>>24,g>>>=w,f-=w,w=x>>>16&255,w&16){if(B=x&65535,w&=15,f<w&&(g+=F[n++]<<f,f+=8,f<w&&(g+=F[n++]<<f,f+=8)),B+=g&(1<<w)-1,B>o){e.msg="invalid distance too far back",J.mode=Th;break e}if(g>>>=w,f-=w,w=i-s,B>w){if(w=B-w,w>c&&J.sane){e.msg="invalid distance too far back",J.mode=Th;break e}if(q=0,z=p,d===0){if(q+=l-w,w<E){E-=w;do I[i++]=p[q++];while(--w);q=i-B,z=I}}else if(d<w){if(q+=l+d-w,w-=d,w<E){E-=w;do I[i++]=p[q++];while(--w);if(q=0,d<E){w=d,E-=w;do I[i++]=p[q++];while(--w);q=i-B,z=I}}}else if(q+=d-w,w<E){E-=w;do I[i++]=p[q++];while(--w);q=i-B,z=I}for(;E>2;)I[i++]=z[q++],I[i++]=z[q++],I[i++]=z[q++],E-=3;E&&(I[i++]=z[q++],E>1&&(I[i++]=z[q++]))}else{q=i-B;do I[i++]=I[q++],I[i++]=I[q++],I[i++]=I[q++],E-=3;while(E>2);E&&(I[i++]=I[q++],E>1&&(I[i++]=I[q++]))}}else if(w&64){e.msg="invalid distance code",J.mode=Th;break e}else{x=S[(x&65535)+(g&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){J.mode=RI;break e}else{e.msg="invalid literal/length code",J.mode=Th;break e}else{x=_[(x&65535)+(g&(1<<w)-1)];continue t}break}}while(n<r&&i<a);E=f>>3,n-=E,f-=E<<3,g&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=i<a?257+(a-i):257-(i-a),J.hold=g,J.bits=f};const xl=15,fw=852,pw=592,mw=0,f0=1,gw=2,II=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),FI=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),DI=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),MI=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),BI=(e,t,n,r,i,s,a,o)=>{const l=o.bits;let c=0,d=0,p=0,g=0,f=0,_=0,S=0,k=0,y=0,x=0,w,E,B,q,z,F=null,I;const J=new Uint16Array(xl+1),R=new Uint16Array(xl+1);let P=null,K,G,Z;for(c=0;c<=xl;c++)J[c]=0;for(d=0;d<r;d++)J[t[n+d]]++;for(f=l,g=xl;g>=1&&J[g]===0;g--);if(f>g&&(f=g),g===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<g&&J[p]===0;p++);for(f<p&&(f=p),k=1,c=1;c<=xl;c++)if(k<<=1,k-=J[c],k<0)return-1;if(k>0&&(e===mw||g!==1))return-1;for(R[1]=0,c=1;c<xl;c++)R[c+1]=R[c]+J[c];for(d=0;d<r;d++)t[n+d]!==0&&(a[R[t[n+d]]++]=d);if(e===mw?(F=P=a,I=20):e===f0?(F=II,P=FI,I=257):(F=DI,P=MI,I=0),x=0,d=0,c=p,z=s,_=f,S=0,B=-1,y=1<<f,q=y-1,e===f0&&y>fw||e===gw&&y>pw)return 1;for(;;){K=c-S,a[d]+1<I?(G=0,Z=a[d]):a[d]>=I?(G=P[a[d]-I],Z=F[a[d]-I]):(G=32+64,Z=0),w=1<<c-S,E=1<<_,p=E;do E-=w,i[z+(x>>S)+E]=K<<24|G<<16|Z|0;while(E!==0);for(w=1<<c-1;x&w;)w>>=1;if(w!==0?(x&=w-1,x+=w):x=0,d++,--J[c]===0){if(c===g)break;c=t[n+a[d]]}if(c>f&&(x&q)!==B){for(S===0&&(S=f),z+=p,_=c-S,k=1<<_;_+S<g&&(k-=J[_+S],!(k<=0));)_++,k<<=1;if(y+=1<<_,e===f0&&y>fw||e===gw&&y>pw)return 1;B=x&q,i[B]=f<<24|_<<16|z-s|0}}return x!==0&&(i[z+x]=c-S<<24|64<<16|0),o.bits=f,0};var Bu=BI;const UI=0,Zk=1,ej=2,{Z_FINISH:vw,Z_BLOCK:qI,Z_TREES:Rh,Z_OK:Qo,Z_STREAM_END:$I,Z_NEED_DICT:zI,Z_STREAM_ERROR:cs,Z_DATA_ERROR:tj,Z_MEM_ERROR:nj,Z_BUF_ERROR:VI,Z_DEFLATED:yw}=ly,Ip=16180,bw=16181,ww=16182,xw=16183,_w=16184,Sw=16185,kw=16186,jw=16187,Nw=16188,Ew=16189,sp=16190,Hs=16191,p0=16192,Aw=16193,m0=16194,Cw=16195,Pw=16196,Lw=16197,Tw=16198,Oh=16199,Ih=16200,Rw=16201,Ow=16202,Iw=16203,Fw=16204,Dw=16205,g0=16206,Mw=16207,Bw=16208,hn=16209,rj=16210,ij=16211,HI=852,WI=592,KI=15,GI=KI,Uw=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function YI(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const nl=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ip||t.mode>ij?1:0},sj=e=>{if(nl(e))return cs;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Ip,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(HI),t.distcode=t.distdyn=new Int32Array(WI),t.sane=1,t.back=-1,Qo},aj=e=>{if(nl(e))return cs;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,sj(e)},oj=(e,t)=>{let n;if(nl(e))return cs;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?cs:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,aj(e))},lj=(e,t)=>{if(!e)return cs;const n=new YI;e.state=n,n.strm=e,n.window=null,n.mode=Ip;const r=oj(e,t);return r!==Qo&&(e.state=null),r},XI=e=>lj(e,GI);let qw=!0,v0,y0;const JI=e=>{if(qw){v0=new Int32Array(512),y0=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Bu(Zk,e.lens,0,288,v0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Bu(ej,e.lens,0,32,y0,0,e.work,{bits:5}),qw=!1}e.lencode=v0,e.lenbits=9,e.distcode=y0,e.distbits=5},cj=(e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},QI=(e,t)=>{let n,r,i,s,a,o,l,c,d,p,g,f,_,S,k=0,y,x,w,E,B,q,z,F;const I=new Uint8Array(4);let J,R;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(nl(e)||!e.output||!e.input&&e.avail_in!==0)return cs;n=e.state,n.mode===Hs&&(n.mode=p0),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,p=o,g=l,F=Qo;e:for(;;)switch(n.mode){case Ip:if(n.wrap===0){n.mode=p0;break}for(;d<16;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,I[0]=c&255,I[1]=c>>>8&255,n.check=bs(n.check,I,2,0),c=0,d=0,n.mode=bw;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=hn;break}if((c&15)!==yw){e.msg="unknown compression method",n.mode=hn;break}if(c>>>=4,d-=4,z=(c&15)+8,n.wbits===0&&(n.wbits=z),z>15||z>n.wbits){e.msg="invalid window size",n.mode=hn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?Ew:Hs,c=0,d=0;break;case bw:for(;d<16;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(n.flags=c,(n.flags&255)!==yw){e.msg="unknown compression method",n.mode=hn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=hn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,n.check=bs(n.check,I,2,0)),c=0,d=0,n.mode=ww;case ww:for(;d<32;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,n.check=bs(n.check,I,4,0)),c=0,d=0,n.mode=xw;case xw:for(;d<16;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,n.check=bs(n.check,I,2,0)),c=0,d=0,n.mode=_w;case _w:if(n.flags&1024){for(;d<16;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(I[0]=c&255,I[1]=c>>>8&255,n.check=bs(n.check,I,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=Sw;case Sw:if(n.flags&1024&&(f=n.length,f>o&&(f=o),f&&(n.head&&(z=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),z)),n.flags&512&&n.wrap&4&&(n.check=bs(n.check,r,f,s)),o-=f,s+=f,n.length-=f),n.length))break e;n.length=0,n.mode=kw;case kw:if(n.flags&2048){if(o===0)break e;f=0;do z=r[s+f++],n.head&&z&&n.length<65536&&(n.head.name+=String.fromCharCode(z));while(z&&f<o);if(n.flags&512&&n.wrap&4&&(n.check=bs(n.check,r,f,s)),o-=f,s+=f,z)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=jw;case jw:if(n.flags&4096){if(o===0)break e;f=0;do z=r[s+f++],n.head&&z&&n.length<65536&&(n.head.comment+=String.fromCharCode(z));while(z&&f<o);if(n.flags&512&&n.wrap&4&&(n.check=bs(n.check,r,f,s)),o-=f,s+=f,z)break e}else n.head&&(n.head.comment=null);n.mode=Nw;case Nw:if(n.flags&512){for(;d<16;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=hn;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Hs;break;case Ew:for(;d<32;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}e.adler=n.check=Uw(c),c=0,d=0,n.mode=sp;case sp:if(n.havedict===0)return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=d,zI;e.adler=n.check=1,n.mode=Hs;case Hs:if(t===qI||t===Rh)break e;case p0:if(n.last){c>>>=d&7,d-=d&7,n.mode=g0;break}for(;d<3;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}switch(n.last=c&1,c>>>=1,d-=1,c&3){case 0:n.mode=Aw;break;case 1:if(JI(n),n.mode=Oh,t===Rh){c>>>=2,d-=2;break e}break;case 2:n.mode=Pw;break;case 3:e.msg="invalid block type",n.mode=hn}c>>>=2,d-=2;break;case Aw:for(c>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=hn;break}if(n.length=c&65535,c=0,d=0,n.mode=m0,t===Rh)break e;case m0:n.mode=Cw;case Cw:if(f=n.length,f){if(f>o&&(f=o),f>l&&(f=l),f===0)break e;i.set(r.subarray(s,s+f),a),o-=f,s+=f,l-=f,a+=f,n.length-=f;break}n.mode=Hs;break;case Pw:for(;d<14;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(n.nlen=(c&31)+257,c>>>=5,d-=5,n.ndist=(c&31)+1,c>>>=5,d-=5,n.ncode=(c&15)+4,c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=hn;break}n.have=0,n.mode=Lw;case Lw:for(;n.have<n.ncode;){for(;d<3;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}n.lens[P[n.have++]]=c&7,c>>>=3,d-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,J={bits:n.lenbits},F=Bu(UI,n.lens,0,19,n.lencode,0,n.work,J),n.lenbits=J.bits,F){e.msg="invalid code lengths set",n.mode=hn;break}n.have=0,n.mode=Tw;case Tw:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],y=k>>>24,x=k>>>16&255,w=k&65535,!(y<=d);){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(w<16)c>>>=y,d-=y,n.lens[n.have++]=w;else{if(w===16){for(R=y+2;d<R;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(c>>>=y,d-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=hn;break}z=n.lens[n.have-1],f=3+(c&3),c>>>=2,d-=2}else if(w===17){for(R=y+3;d<R;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}c>>>=y,d-=y,z=0,f=3+(c&7),c>>>=3,d-=3}else{for(R=y+7;d<R;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}c>>>=y,d-=y,z=0,f=11+(c&127),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=hn;break}for(;f--;)n.lens[n.have++]=z}}if(n.mode===hn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=hn;break}if(n.lenbits=9,J={bits:n.lenbits},F=Bu(Zk,n.lens,0,n.nlen,n.lencode,0,n.work,J),n.lenbits=J.bits,F){e.msg="invalid literal/lengths set",n.mode=hn;break}if(n.distbits=6,n.distcode=n.distdyn,J={bits:n.distbits},F=Bu(ej,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,J),n.distbits=J.bits,F){e.msg="invalid distances set",n.mode=hn;break}if(n.mode=Oh,t===Rh)break e;case Oh:n.mode=Ih;case Ih:if(o>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=d,OI(e,g),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,n.mode===Hs&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],y=k>>>24,x=k>>>16&255,w=k&65535,!(y<=d);){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(x&&!(x&240)){for(E=y,B=x,q=w;k=n.lencode[q+((c&(1<<E+B)-1)>>E)],y=k>>>24,x=k>>>16&255,w=k&65535,!(E+y<=d);){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}c>>>=E,d-=E,n.back+=E}if(c>>>=y,d-=y,n.back+=y,n.length=w,x===0){n.mode=Dw;break}if(x&32){n.back=-1,n.mode=Hs;break}if(x&64){e.msg="invalid literal/length code",n.mode=hn;break}n.extra=x&15,n.mode=Rw;case Rw:if(n.extra){for(R=n.extra;d<R;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Ow;case Ow:for(;k=n.distcode[c&(1<<n.distbits)-1],y=k>>>24,x=k>>>16&255,w=k&65535,!(y<=d);){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(!(x&240)){for(E=y,B=x,q=w;k=n.distcode[q+((c&(1<<E+B)-1)>>E)],y=k>>>24,x=k>>>16&255,w=k&65535,!(E+y<=d);){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}c>>>=E,d-=E,n.back+=E}if(c>>>=y,d-=y,n.back+=y,x&64){e.msg="invalid distance code",n.mode=hn;break}n.offset=w,n.extra=x&15,n.mode=Iw;case Iw:if(n.extra){for(R=n.extra;d<R;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=hn;break}n.mode=Fw;case Fw:if(l===0)break e;if(f=g-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=hn;break}f>n.wnext?(f-=n.wnext,_=n.wsize-f):_=n.wnext-f,f>n.length&&(f=n.length),S=n.window}else S=i,_=a-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[a++]=S[_++];while(--f);n.length===0&&(n.mode=Ih);break;case Dw:if(l===0)break e;i[a++]=n.length,l--,n.mode=Ih;break;case g0:if(n.wrap){for(;d<32;){if(o===0)break e;o--,c|=r[s++]<<d,d+=8}if(g-=l,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?bs(n.check,i,g,a-g):s1(n.check,i,g,a-g)),g=l,n.wrap&4&&(n.flags?c:Uw(c))!==n.check){e.msg="incorrect data check",n.mode=hn;break}c=0,d=0}n.mode=Mw;case Mw:if(n.wrap&&n.flags){for(;d<32;){if(o===0)break e;o--,c+=r[s++]<<d,d+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=hn;break}c=0,d=0}n.mode=Bw;case Bw:F=$I;break e;case hn:F=tj;break e;case rj:return nj;case ij:default:return cs}return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=d,(n.wsize||g!==e.avail_out&&n.mode<hn&&(n.mode<g0||t!==vw))&&cj(e,e.output,e.next_out,g-e.avail_out),p-=e.avail_in,g-=e.avail_out,e.total_in+=p,e.total_out+=g,n.total+=g,n.wrap&4&&g&&(e.adler=n.check=n.flags?bs(n.check,i,g,e.next_out-g):s1(n.check,i,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Hs?128:0)+(n.mode===Oh||n.mode===m0?256:0),(p===0&&g===0||t===vw)&&F===Qo&&(F=VI),F},ZI=e=>{if(nl(e))return cs;let t=e.state;return t.window&&(t.window=null),e.state=null,Qo},eF=(e,t)=>{if(nl(e))return cs;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Qo):cs},tF=(e,t)=>{const n=t.length;let r,i,s;return nl(e)||(r=e.state,r.wrap!==0&&r.mode!==sp)?cs:r.mode===sp&&(i=1,i=s1(i,t,n,0),i!==r.check)?tj:(s=cj(e,t,n,n),s?(r.mode=rj,nj):(r.havedict=1,Qo))};var nF=aj,rF=oj,iF=sj,sF=XI,aF=lj,oF=QI,lF=ZI,cF=eF,uF=tF,dF="pako inflate (from Nodeca project)",Ys={inflateReset:nF,inflateReset2:rF,inflateResetKeep:iF,inflateInit:sF,inflateInit2:aF,inflate:oF,inflateEnd:lF,inflateGetHeader:cF,inflateSetDictionary:uF,inflateInfo:dF};function hF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var fF=hF;const uj=Object.prototype.toString,{Z_NO_FLUSH:pF,Z_FINISH:mF,Z_OK:fd,Z_STREAM_END:b0,Z_NEED_DICT:w0,Z_STREAM_ERROR:gF,Z_DATA_ERROR:$w,Z_MEM_ERROR:vF}=ly;function Ed(e){this.options=Jk.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new TI,this.strm.avail_out=0;let n=Ys.inflateInit2(this.strm,t.windowBits);if(n!==fd)throw new Error(a1[n]);if(this.header=new fF,Ys.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=o1.string2buf(t.dictionary):uj.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ys.inflateSetDictionary(this.strm,t.dictionary),n!==fd)))throw new Error(a1[n])}Ed.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?mF:pF,uj.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Ys.inflate(n,a),s===w0&&i&&(s=Ys.inflateSetDictionary(n,i),s===fd?s=Ys.inflate(n,a):s===$w&&(s=w0));n.avail_in>0&&s===b0&&n.state.wrap>0&&e[n.next_in]!==0;)Ys.inflateReset(n),s=Ys.inflate(n,a);switch(s){case gF:case $w:case w0:case vF:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||s===b0))if(this.options.to==="string"){let l=o1.utf8border(n.output,n.next_out),c=n.next_out-l,d=o1.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===fd&&o===0)){if(s===b0)return s=Ys.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Ed.prototype.onData=function(e){this.chunks.push(e)};Ed.prototype.onEnd=function(e){e===fd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Jk.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function cy(e,t){const n=new Ed(t);if(n.push(e),n.err)throw n.msg||a1[n.err];return n.result}function yF(e,t){return t=t||{},t.raw=!0,cy(e,t)}var bF=Ed,wF=cy,xF=yF,_F=cy,SF=ly,kF={Inflate:bF,inflate:wF,inflateRaw:xF,ungzip:_F,constants:SF};const{Inflate:jF,inflate:NF,inflateRaw:DM,ungzip:MM}=kF;var zw=jF,EF=NF;const dj=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;dj[e]=t}const Vw=4294967295;function AF(e,t,n){let r=e;for(let i=0;i<n;i++)r=dj[(r^t[i])&255]^r>>>8;return r}function CF(e,t){return(AF(Vw,e,t)^Vw)>>>0}function Hw(e,t,n){const r=e.readUint32(),i=CF(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function hj(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function fj(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function pj(e,t,n,r){let i=0;if(n.length===0)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function mj(e,t,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(n[s]>>1)&255;for(;s<r;s++)t[s]=e[s]+(t[s-i]+n[s]>>1)&255}}function gj(e,t,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+n[s]&255;for(;s<r;s++)t[s]=e[s]+PF(t[s-i],n[s],n[s-i])&255}}function PF(e,t,n){const r=e+t-n,i=Math.abs(r-e),s=Math.abs(r-t),a=Math.abs(r-n);return i<=s&&i<=a?e:s<=a?t:n}function LF(e,t,n,r,i,s){switch(e){case 0:hj(t,n,i);break;case 1:fj(t,n,i,s);break;case 2:pj(t,n,r,i);break;case 3:mj(t,n,r,i,s);break;case 4:gj(t,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const TF=new Uint16Array([255]),RF=new Uint8Array(TF.buffer),OF=RF[0]===255;function IF(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(r*n*o);let c=0;for(let d=0;d<7;d++){const p=a[d],g=Math.ceil((n-p.x)/p.xStep),f=Math.ceil((r-p.y)/p.yStep);if(g<=0||f<=0)continue;const _=g*o,S=new Uint8Array(_);for(let k=0;k<f;k++){const y=t[c++],x=t.subarray(c,c+_);c+=_;const w=new Uint8Array(_);LF(y,x,w,S,_,o),S.set(w);for(let E=0;E<g;E++){const B=p.x+E*p.xStep,q=p.y+k*p.yStep;if(!(B>=n||q>=r))for(let z=0;z<o;z++)l[(q*n+B)*o+z]=w[E*o+z]}}}if(s===16){const d=new Uint16Array(l.buffer);if(OF)for(let p=0;p<d.length;p++)d[p]=FF(d[p]);return d}else return l}function FF(e){return(e&255)<<8|e>>8&255}const DF=new Uint16Array([255]),MF=new Uint8Array(DF.buffer),BF=MF[0]===255,UF=new Uint8Array(0);function Ww(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*n),l=new Uint8Array(r*o);let c=UF,d=0,p,g;for(let f=0;f<r;f++){switch(p=t.subarray(d+1,d+1+o),g=l.subarray(f*o,(f+1)*o),t[d]){case 0:hj(p,g,o);break;case 1:fj(p,g,o,a);break;case 2:pj(p,g,c,o);break;case 3:mj(p,g,c,o,a);break;case 4:gj(p,g,c,o,a);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}c=g,d+=o+1}if(s===16){const f=new Uint16Array(l.buffer);if(BF)for(let _=0;_<f.length;_++)f[_]=qF(f[_]);return f}else return l}function qF(e){return(e&255)<<8|e>>8&255}const ff=Uint8Array.of(137,80,78,71,13,10,26,10);function Kw(e){if(!$F(e.readBytes(ff.length)))throw new Error("wrong PNG signature")}function $F(e){if(e.length<ff.length)return!1;for(let t=0;t<ff.length;t++)if(e[t]!==ff[t])return!1;return!0}const zF="tEXt",VF=0,vj=new TextDecoder("latin1");function HF(e){if(KF(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const WF=/^[\u0000-\u00FF]*$/;function KF(e){if(!WF.test(e))throw new Error("invalid latin1 text")}function GF(e,t,n){const r=yj(t);e[r]=YF(t,n-r.length-1)}function yj(e){for(e.mark();e.readByte()!==VF;);const t=e.offset;e.reset();const n=vj.decode(e.readBytes(t-e.offset-1));return e.skip(1),HF(n),n}function YF(e,t){return vj.decode(e.readBytes(t))}const di={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},x0={UNKNOWN:-1,DEFLATE:0},Gw={UNKNOWN:-1,ADAPTIVE:0},_0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Fh={NONE:0,BACKGROUND:1,PREVIOUS:2},S0={SOURCE:0,OVER:1};class XF extends oy{constructor(t,n={}){super(t),Kt(this,"_checkCrc"),Kt(this,"_inflator"),Kt(this,"_png"),Kt(this,"_apng"),Kt(this,"_end"),Kt(this,"_hasPalette"),Kt(this,"_palette"),Kt(this,"_hasTransparency"),Kt(this,"_transparency"),Kt(this,"_compressionMethod"),Kt(this,"_filterMethod"),Kt(this,"_interlaceMethod"),Kt(this,"_colorType"),Kt(this,"_isAnimated"),Kt(this,"_numberOfFrames"),Kt(this,"_numberOfPlays"),Kt(this,"_frames"),Kt(this,"_writingDataChunks");const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new zw,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=x0.UNKNOWN,this._filterMethod=Gw.UNKNOWN,this._interlaceMethod=_0.UNKNOWN,this._colorType=di.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Kw(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(Kw(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case zF:GF(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Hw(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=r+t;break}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Hw(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=JF(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case di.GREYSCALE:r=1;break;case di.TRUECOLOUR:r=3;break;case di.INDEXED_COLOUR:r=1;break;case di.GREYSCALE_ALPHA:r=2;break;case di.TRUECOLOUR_ALPHA:r=4;break;case di.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==x0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<n;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case di.GREYSCALE:case di.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case di.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case di.UNKNOWN:case di.GREYSCALE_ALPHA:case di.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=yj(this),r=this.readUint8();if(r!==x0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:EF(i)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(t);if(r){if(r.data=Ww({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(r,i,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,r){switch(t.disposeOp){case Fh.NONE:break;case Fh.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const a=(i*t.width+s)*this._png.channels;for(let o=0;o<this._png.channels;o++)r.data[a+o]=0}break;case Fh.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const r=1<<this._png.depth,i=(s,a)=>{const o=((s+n.yOffset)*this._png.width+n.xOffset+a)*this._png.channels,l=(s*n.width+a)*this._png.channels;return{index:o,frameIndex:l}};switch(n.blendOp){case S0.SOURCE:for(let s=0;s<n.height;s++)for(let a=0;a<n.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++)t.data[o+c]=n.data[l+c]}break;case S0.OVER:for(let s=0;s<n.height;s++)for(let a=0;a<n.width;a++){const{index:o,frameIndex:l}=i(s,a);for(let c=0;c<this._png.channels;c++){const d=n.data[l+this._png.channels-1]/r,p=c%(this._png.channels-1)===0?1:n.data[l+c],g=Math.floor(d*p+(1-d)*t.data[o+c]);t.data[o+c]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var t;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((t=this._frames)==null?void 0:t.at(0)).data:this._inflator.result;if(this._filterMethod!==Gw.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===_0.NO_INTERLACE)this._png.data=Ww({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===_0.ADAM7)this._png.data=IF({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Fh.NONE,blendOp:S0.SOURCE,data:t}),this._inflator=new zw,this._writingDataChunks=!1}}function JF(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var Yw;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(Yw||(Yw={}));function QF(e,t){return new XF(e,t).decode()}var ft=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function k0(){ft.console&&typeof ft.console.log=="function"&&ft.console.log.apply(ft.console,arguments)}var Jt={log:k0,warn:function(e){ft.console&&(typeof ft.console.warn=="function"?ft.console.warn.apply(ft.console,arguments):k0.call(null,arguments))},error:function(e){ft.console&&(typeof ft.console.error=="function"?ft.console.error.apply(ft.console,arguments):k0(e))}};function j0(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Ro(r.response,t,n)},r.onerror=function(){Jt.error("could not download file")},r.send()}function Xw(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Dh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ro=ft.saveAs||((typeof window>"u"?"undefined":Ht(window))!=="object"||window!==ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=ft.URL||ft.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Xw(i.href)?j0(e,t,n):Dh(i,i.target="_blank"):Dh(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Dh(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Xw(e))j0(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Dh(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ht(s)!=="object"&&(Jt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return j0(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(ft.HTMLElement)||ft.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Ht(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(e)}else{var l=ft.URL||ft.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
* A class to parse color values
* @author Stoyan Stefanov <sstoo@gmail.com>
* {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
* @license Use it if you like it
*/function bj(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var pf=ft.atob.bind(ft),Jw=ft.btoa.bind(ft);/**
* @license
* Joseph Myers does not specify a particular license for his work.
*
* Author: Joseph Myers
* Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
*
* Modified by: Owen Leong
*/function N0(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=br(n,r,i,s,t[0],7,-680876936),s=br(s,n,r,i,t[1],12,-389564586),i=br(i,s,n,r,t[2],17,606105819),r=br(r,i,s,n,t[3],22,-1044525330),n=br(n,r,i,s,t[4],7,-176418897),s=br(s,n,r,i,t[5],12,1200080426),i=br(i,s,n,r,t[6],17,-1473231341),r=br(r,i,s,n,t[7],22,-45705983),n=br(n,r,i,s,t[8],7,1770035416),s=br(s,n,r,i,t[9],12,-1958414417),i=br(i,s,n,r,t[10],17,-42063),r=br(r,i,s,n,t[11],22,-1990404162),n=br(n,r,i,s,t[12],7,1804603682),s=br(s,n,r,i,t[13],12,-40341101),i=br(i,s,n,r,t[14],17,-1502002290),n=wr(n,r=br(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=wr(s,n,r,i,t[6],9,-1069501632),i=wr(i,s,n,r,t[11],14,643717713),r=wr(r,i,s,n,t[0],20,-373897302),n=wr(n,r,i,s,t[5],5,-701558691),s=wr(s,n,r,i,t[10],9,38016083),i=wr(i,s,n,r,t[15],14,-660478335),r=wr(r,i,s,n,t[4],20,-405537848),n=wr(n,r,i,s,t[9],5,568446438),s=wr(s,n,r,i,t[14],9,-1019803690),i=wr(i,s,n,r,t[3],14,-187363961),r=wr(r,i,s,n,t[8],20,1163531501),n=wr(n,r,i,s,t[13],5,-1444681467),s=wr(s,n,r,i,t[2],9,-51403784),i=wr(i,s,n,r,t[7],14,1735328473),n=xr(n,r=wr(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=xr(s,n,r,i,t[8],11,-2022574463),i=xr(i,s,n,r,t[11],16,1839030562),r=xr(r,i,s,n,t[14],23,-35309556),n=xr(n,r,i,s,t[1],4,-1530992060),s=xr(s,n,r,i,t[4],11,1272893353),i=xr(i,s,n,r,t[7],16,-155497632),r=xr(r,i,s,n,t[10],23,-1094730640),n=xr(n,r,i,s,t[13],4,681279174),s=xr(s,n,r,i,t[0],11,-358537222),i=xr(i,s,n,r,t[3],16,-722521979),r=xr(r,i,s,n,t[6],23,76029189),n=xr(n,r,i,s,t[9],4,-640364487),s=xr(s,n,r,i,t[12],11,-421815835),i=xr(i,s,n,r,t[15],16,530742520),n=_r(n,r=xr(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=_r(s,n,r,i,t[7],10,1126891415),i=_r(i,s,n,r,t[14],15,-1416354905),r=_r(r,i,s,n,t[5],21,-57434055),n=_r(n,r,i,s,t[12],6,1700485571),s=_r(s,n,r,i,t[3],10,-1894986606),i=_r(i,s,n,r,t[10],15,-1051523),r=_r(r,i,s,n,t[1],21,-2054922799),n=_r(n,r,i,s,t[8],6,1873313359),s=_r(s,n,r,i,t[15],10,-30611744),i=_r(i,s,n,r,t[6],15,-1560198380),r=_r(r,i,s,n,t[13],21,1309151649),n=_r(n,r,i,s,t[4],6,-145523070),s=_r(s,n,r,i,t[11],10,-1120210379),i=_r(i,s,n,r,t[2],15,718787259),r=_r(r,i,s,n,t[9],21,-343485551),e[0]=Ba(n,e[0]),e[1]=Ba(r,e[1]),e[2]=Ba(i,e[2]),e[3]=Ba(s,e[3])}function Fp(e,t,n,r,i,s){return t=Ba(Ba(t,e),Ba(r,s)),Ba(t<<i|t>>>32-i,n)}function br(e,t,n,r,i,s,a){return Fp(t&n|~t&r,e,t,i,s,a)}function wr(e,t,n,r,i,s,a){return Fp(t&r|n&~r,e,t,i,s,a)}function xr(e,t,n,r,i,s,a){return Fp(t^n^r,e,t,i,s,a)}function _r(e,t,n,r,i,s,a){return Fp(n^(t|~r),e,t,i,s,a)}function wj(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)N0(r,ZF(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(N0(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,N0(r,i),r}function ZF(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var Qw="0123456789abcdef".split("");function e9(e){for(var t="",n=0;n<4;n++)t+=Qw[e>>8*n+4&15]+Qw[e>>8*n&15];return t}function t9(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function l1(e){return wj(e).map(t9).join("")}var n9=function(e){for(var t=0;t<e.length;t++)e[t]=e9(e[t]);return e.join("")}(wj("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ba(e,t){if(n9){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
* @license
* FPDF is released under a permissive license: there is no usage restriction.
* You may embed it freely in your application (commercial or not), with or
* without modifications.
*
* Reference: http://www.fpdf.org/en/script/script37.php
*/function c1(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+a.charCodeAt(l))%256,o[l]=o[c],o[c]=d}n=e,r=o}else o=r;var p=t.length,g=0,f=0,_="";for(l=0;l<p;l++)f=(f+(d=o[g=(g+1)%256]))%256,o[g]=o[f],o[f]=d,a=o[(o[g]+o[f])%256],_+=String.fromCharCode(t.charCodeAt(l)^a);return _}/**
* @license
* Licensed under the MIT License.
* http://opensource.org/licenses/mit-license
* Author: Owen Leong (@owenl131)
* Date: 15 Oct 2020
* References:
* https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
* https://github.com/foliojs/pdfkit/blob/master/lib/security.js
* http://www.fpdf.org/en/script/script37.php
*/var Zw={print:4,modify:8,copy:16,"annot-forms":32};function El(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(o){if(Zw.perm!==void 0)throw new Error("Invalid permission: "+o);i+=Zw[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=l1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=c1(this.encryptionKey,this.padding)}function Al(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function ex(e){if(Ht(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(o){ft.console&&Jt.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ap(e){if(!(this instanceof ap))return new ap(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function xj(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Fo(e,t,n,r,i){if(!(this instanceof Fo))return new Fo(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,xj.call(this,r,i)}function Wl(e,t,n,r,i){if(!(this instanceof Wl))return new Wl(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,xj.call(this,r,i)}function et(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",d=null;Ht(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,g={},f={internal:{},__private__:{}};f.__private__.PubSub=ex;var _="1.3",S=f.__private__.getPdfVersion=function(){return _};f.__private__.setPdfVersion=function(v){_=v};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return k};var y=f.__private__.getPageFormat=function(v){return k[v]};i=i||"a4";var x="compat",w="advanced",E=x;function B(){this.saveGraphicsState(),Y(new st(ct,0,0,-ct,0,ho()*ct).toString()+" cm"),this.setFontSize(this.getFontSize()/ct),c="n",E=w}function q(){this.restoreGraphicsState(),c="S",E=x}var z=f.__private__.combineFontStyleAndFontWeight=function(v,A){if(v=="bold"&&A=="normal"||v=="bold"&&A==400||v=="normal"&&A=="italic"||v=="bold"&&A=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return A&&(v=A==400||A==="normal"?v==="italic"?"italic":"normal":A!=700&&A!=="bold"||v!=="normal"?(A==700?"bold":A)+""+v:"bold"),v};f.advancedAPI=function(v){var A=E===x;return A&&B.call(this),typeof v!="function"||(v(this),A&&q.call(this)),this},f.compatAPI=function(v){var A=E===w;return A&&q.call(this),typeof v!="function"||(v(this),A&&B.call(this)),this},f.isAdvancedAPI=function(){return E===w};var F,I=function(v){if(E!==w)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=f.roundToPrecision=f.__private__.roundToPrecision=function(v,A){var W=t||A;if(isNaN(v)||isNaN(W))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(W).replace(/0+$/,"")};F=f.hpf=f.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return J(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return J(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return J(v,16)};var R=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return J(v,2)},P=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return J(v,3)},K=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return E===x?v*ct:E===w?v:void 0},G=function(v){return K(function(A){return E===x?ho()-A:E===w?A:void 0}(v))};f.__private__.setPrecision=f.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var Z,le="00000000000000000000000000000000",de=f.__private__.getFileId=function(){return le},X=f.__private__.setFileId=function(v){return le=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(sn=new El(d.userPermissions,d.userPassword,d.ownerPassword,le)),le};f.setFileId=function(v){return X(v),this},f.getFileId=function(){return de()};var ae=f.__private__.convertDateToPDFDate=function(v){var A=v.getTimezoneOffset(),W=A<0?"+":"-",ee=Math.floor(Math.abs(A/60)),ce=Math.abs(A%60),we=[W,$(ee),"'",$(ce),"'"].join("");return["D:",v.getFullYear(),$(v.getMonth()+1),$(v.getDate()),$(v.getHours()),$(v.getMinutes()),$(v.getSeconds()),we].join("")},re=f.__private__.convertPDFDateToDate=function(v){var A=parseInt(v.substr(2,4),10),W=parseInt(v.substr(6,2),10)-1,ee=parseInt(v.substr(8,2),10),ce=parseInt(v.substr(10,2),10),we=parseInt(v.substr(12,2),10),ke=parseInt(v.substr(14,2),10);return new Date(A,W,ee,ce,we,ke,0)},ie=f.__private__.setCreationDate=function(v){var A;if(v===void 0&&(v=new Date),v instanceof Date)A=ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");A=v}return Z=A},N=f.__private__.getCreationDate=function(v){var A=Z;return v==="jsDate"&&(A=re(Z)),A};f.setCreationDate=function(v){return ie(v),this},f.getCreationDate=function(v){return N(v)};var M,$=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Q=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},te=0,oe=[],me=[],he=0,ge=[],_e=[],Re=!1,Pe=me;f.__private__.setCustomOutputDestination=function(v){Re=!0,Pe=v};var ve=function(v){Re||(Pe=v)};f.__private__.resetCustomOutputDestination=function(){Re=!1,Pe=me};var Y=f.__private__.out=function(v){return v=v.toString(),he+=v.length+1,Pe.push(v),Pe},_t=f.__private__.write=function(v){return Y(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},He=f.__private__.getArrayBuffer=function(v){for(var A=v.length,W=new ArrayBuffer(A),ee=new Uint8Array(W);A--;)ee[A]=v.charCodeAt(A);return W},nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return nt};var Ee=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Ee=E===w?v/ct:v,this};var Ke,Oe=f.__private__.getFontSize=f.getFontSize=function(){return E===x?Ee:Ee*ct},ut=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return ut=v,this},f.__private__.getR2L=f.getR2L=function(){return ut};var Be,Ct=f.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ke=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ke=v}else Ke=parseInt(v,10)};f.__private__.getZoomMode=function(){return Ke};var Ne,Me=f.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Be=v};f.__private__.getPageMode=function(){return Be};var ot=f.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Ne=v};f.__private__.getLayoutMode=function(){return Ne},f.__private__.setDisplayMode=f.setDisplayMode=function(v,A,W){return Ct(v),ot(A),Me(W),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(Object.keys(pt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[v]},f.__private__.getDocumentProperties=function(){return pt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var A in pt)pt.hasOwnProperty(A)&&v[A]&&(pt[A]=v[A]);return this},f.__private__.setDocumentProperty=function(v,A){if(Object.keys(pt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[v]=A};var rt,ct,De,$t,Rt,Ge={},gt={},Mt=[],at={},Nt={},vt={},pn={},An=null,Bt=0,dt=[],Ot=new ex(f),Ps=e.hotfixes||[],Vn={},Ui={},Si=[],st=function v(A,W,ee,ce,we,ke){if(!(this instanceof v))return new v(A,W,ee,ce,we,ke);isNaN(A)&&(A=1),isNaN(W)&&(W=0),isNaN(ee)&&(ee=0),isNaN(ce)&&(ce=1),isNaN(we)&&(we=0),isNaN(ke)&&(ke=0),this._matrix=[A,W,ee,ce,we,ke]};Object.defineProperty(st.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(st.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(st.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(st.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(st.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(st.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(st.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(st.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(st.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(st.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(st.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(st.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(st.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(st.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(st.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(st.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),st.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(v)},st.prototype.multiply=function(v){var A=v.sx*this.sx+v.shy*this.shx,W=v.sx*this.shy+v.shy*this.sy,ee=v.shx*this.sx+v.sy*this.shx,ce=v.shx*this.shy+v.sy*this.sy,we=v.tx*this.sx+v.ty*this.shx+this.tx,ke=v.tx*this.shy+v.ty*this.sy+this.ty;return new st(A,W,ee,ce,we,ke)},st.prototype.decompose=function(){var v=this.sx,A=this.shy,W=this.shx,ee=this.sy,ce=this.tx,we=this.ty,ke=Math.sqrt(v*v+A*A),Ve=(v/=ke)*W+(A/=ke)*ee;W-=v*Ve,ee-=A*Ve;var Ze=Math.sqrt(W*W+ee*ee);return Ve/=Ze,v*(ee/=Ze)<A*(W/=Ze)&&(v=-v,A=-A,Ve=-Ve,ke=-ke),{scale:new st(ke,0,0,Ze,0,0),translate:new st(1,0,0,1,ce,we),rotate:new st(v,A,-A,v,0,0),skew:new st(1,0,Ve,1,0,0)}},st.prototype.toString=function(v){return this.join(" ")},st.prototype.inversed=function(){var v=this.sx,A=this.shy,W=this.shx,ee=this.sy,ce=this.tx,we=this.ty,ke=1/(v*ee-A*W),Ve=ee*ke,Ze=-A*ke,mt=-W*ke,bt=v*ke;return new st(Ve,Ze,mt,bt,-Ve*ce-mt*we,-Ze*ce-bt*we)},st.prototype.applyToPoint=function(v){var A=v.x*this.sx+v.y*this.shx+this.tx,W=v.x*this.shy+v.y*this.sy+this.ty;return new co(A,W)},st.prototype.applyToRectangle=function(v){var A=this.applyToPoint(v),W=this.applyToPoint(new co(v.x+v.w,v.y+v.h));return new Ic(A.x,A.y,W.x-A.x,W.y-A.y)},st.prototype.clone=function(){var v=this.sx,A=this.shy,W=this.shx,ee=this.sy,ce=this.tx,we=this.ty;return new st(v,A,W,ee,ce,we)},f.Matrix=st;var qi=f.matrixMult=function(v,A){return A.multiply(v)},$i=new st(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=$i;var Br=function(v,A){if(!Nt[v]){var W=(A instanceof Fo?"Sh":"P")+(Object.keys(at).length+1).toString(10);A.id=W,Nt[v]=W,at[W]=A,Ot.publish("addPattern",A)}};f.ShadingPattern=Fo,f.TilingPattern=Wl,f.addShadingPattern=function(v,A){return I("addShadingPattern()"),Br(v,A),this},f.beginTilingPattern=function(v){I("beginTilingPattern()"),Fc(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,A){I("endTilingPattern()"),A.stream=_e[M].join(`
`),Br(v,A),Ot.publish("endTilingPattern",A),Si.pop().restore()};var Ur,Zt=f.__private__.newObject=function(){var v=Et();return Hn(v,!0),v},Et=f.__private__.newObjectDeferred=function(){return te++,oe[te]=function(){return he},te},Hn=function(v,A){return A=typeof A=="boolean"&&A,oe[v]=he,A&&Y(v+" 0 obj"),v},Ls=f.__private__.newAdditionalObject=function(){var v={objId:Et(),content:""};return ge.push(v),v},qr=Et(),pr=Et(),ti=f.__private__.decodeColorString=function(v){var A=v.split(" ");if(A.length!==2||A[1]!=="g"&&A[1]!=="G")A.length!==5||A[4]!=="k"&&A[4]!=="K"||(A=[(1-A[0])*(1-A[3]),(1-A[1])*(1-A[3]),(1-A[2])*(1-A[3]),"r"]);else{var W=parseFloat(A[0]);A=[W,W,W,"r"]}for(var ee="#",ce=0;ce<3;ce++)ee+=("0"+Math.floor(255*parseFloat(A[ce])).toString(16)).slice(-2);return ee},ki=f.__private__.encodeColorString=function(v){var A;typeof v=="string"&&(v={ch1:v});var W=v.ch1,ee=v.ch2,ce=v.ch3,we=v.ch4,ke=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof W=="string"&&W.charAt(0)!=="#"){var Ve=new bj(W);if(Ve.ok)W=Ve.toHex();else if(!/^\d*\.?\d*$/.test(W))throw new Error('Invalid color "'+W+'" passed to jsPDF.encodeColorString.')}if(typeof W=="string"&&/^#[0-9A-Fa-f]{3}$/.test(W)&&(W="#"+W[1]+W[1]+W[2]+W[2]+W[3]+W[3]),typeof W=="string"&&/^#[0-9A-Fa-f]{6}$/.test(W)){var Ze=parseInt(W.substr(1),16);W=Ze>>16&255,ee=Ze>>8&255,ce=255&Ze}if(ee===void 0||we===void 0&&W===ee&&ee===ce)A=typeof W=="string"?W+" "+ke[0]:v.precision===2?R(W/255)+" "+ke[0]:P(W/255)+" "+ke[0];else if(we===void 0||Ht(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return["1.","1.","1.",ke[1]].join(" ");A=typeof W=="string"?[W,ee,ce,ke[1]].join(" "):v.precision===2?[R(W/255),R(ee/255),R(ce/255),ke[1]].join(" "):[P(W/255),P(ee/255),P(ce/255),ke[1]].join(" ")}else A=typeof W=="string"?[W,ee,ce,we,ke[2]].join(" "):v.precision===2?[R(W),R(ee),R(ce),R(we),ke[2]].join(" "):[P(W),P(ee),P(ce),P(we),ke[2]].join(" ");return A},ni=f.__private__.getFilters=function(){return a},$r=f.__private__.putStream=function(v){var A=(v=v||{}).data||"",W=v.filters||ni(),ee=v.alreadyAppliedFilters||[],ce=v.addLength1||!1,we=A.length,ke=v.objectId,Ve=function(Gn){return Gn};if(d!==null&&ke===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ve=sn.encryptor(ke,0));var Ze={};W===!0&&(W=["FlateEncode"]);var mt=v.additionalKeyValues||[],bt=(Ze=et.API.processDataByFilters!==void 0?et.API.processDataByFilters(A,W):{data:A,reverseChain:[]}).reverseChain+(Array.isArray(ee)?ee.join(" "):ee.toString());if(Ze.data.length!==0&&(mt.push({key:"Length",value:Ze.data.length}),ce===!0&&mt.push({key:"Length1",value:we})),bt.length!=0)if(bt.split("/").length-1==1)mt.push({key:"Filter",value:bt});else{mt.push({key:"Filter",value:"["+bt+"]"});for(var Dt=0;Dt<mt.length;Dt+=1)if(mt[Dt].key==="DecodeParms"){for(var gn=[],Kn=0;Kn<Ze.reverseChain.split("/").length-1;Kn+=1)gn.push("null");gn.push(mt[Dt].value),mt[Dt].value="["+gn.join(" ")+"]"}}Y("<<");for(var en=0;en<mt.length;en++)Y("/"+mt[en].key+" "+mt[en].value);Y(">>"),Ze.data.length!==0&&(Y("stream"),Y(Ve(Ze.data)),Y("endstream"))},hs=f.__private__.putPage=function(v){var A=v.number,W=v.data,ee=v.objId,ce=v.contentsObjId;Hn(ee,!0),Y("<</Type /Page"),Y("/Parent "+v.rootDictionaryObjId+" 0 R"),Y("/Resources "+v.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(F(v.mediaBox.bottomLeftX))+" "+parseFloat(F(v.mediaBox.bottomLeftY))+" "+F(v.mediaBox.topRightX)+" "+F(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&Y("/CropBox ["+F(v.cropBox.bottomLeftX)+" "+F(v.cropBox.bottomLeftY)+" "+F(v.cropBox.topRightX)+" "+F(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&Y("/BleedBox ["+F(v.bleedBox.bottomLeftX)+" "+F(v.bleedBox.bottomLeftY)+" "+F(v.bleedBox.topRightX)+" "+F(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&Y("/TrimBox ["+F(v.trimBox.bottomLeftX)+" "+F(v.trimBox.bottomLeftY)+" "+F(v.trimBox.topRightX)+" "+F(v.trimBox.topRightY)+"]"),v.artBox!==null&&Y("/ArtBox ["+F(v.artBox.bottomLeftX)+" "+F(v.artBox.bottomLeftY)+" "+F(v.artBox.topRightX)+" "+F(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&Y("/UserUnit "+v.userUnit),Ot.publish("putPage",{objId:ee,pageContext:dt[A],pageNumber:A,page:W}),Y("/Contents "+ce+" 0 R"),Y(">>"),Y("endobj");var we=W.join(`
`);return E===w&&(we+=`
Q`),Hn(ce,!0),$r({data:we,filters:ni(),objectId:ce}),Y("endobj"),ee},zr=f.__private__.putPages=function(){var v,A,W=[];for(v=1;v<=Bt;v++)dt[v].objId=Et(),dt[v].contentsObjId=Et();for(v=1;v<=Bt;v++)W.push(hs({number:v,data:_e[v],objId:dt[v].objId,contentsObjId:dt[v].contentsObjId,mediaBox:dt[v].mediaBox,cropBox:dt[v].cropBox,bleedBox:dt[v].bleedBox,trimBox:dt[v].trimBox,artBox:dt[v].artBox,userUnit:dt[v].userUnit,rootDictionaryObjId:qr,resourceDictionaryObjId:pr}));Hn(qr,!0),Y("<</Type /Pages");var ee="/Kids [";for(A=0;A<Bt;A++)ee+=W[A]+" 0 R ";Y(ee+"]"),Y("/Count "+Bt),Y(">>"),Y("endobj"),Ot.publish("postPutPages")},Ts=function(v){Ot.publish("putFont",{font:v,out:Y,newObject:Zt,putStream:$r}),v.isAlreadyPutted!==!0&&(v.objectNumber=Zt(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+Al(v.postScriptName)),Y("/Subtype /Type1"),typeof v.encoding=="string"&&Y("/Encoding /"+v.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},fs=function(v){v.objectNumber=Zt();var A=[];A.push({key:"Type",value:"/XObject"}),A.push({key:"Subtype",value:"/Form"}),A.push({key:"BBox",value:"["+[F(v.x),F(v.y),F(v.x+v.width),F(v.y+v.height)].join(" ")+"]"}),A.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var W=v.pages[1].join(`
`);$r({data:W,additionalKeyValues:A,objectId:v.objectNumber}),Y("endobj")},ua=function(v,A){A||(A=21);var W=Zt(),ee=function(ke,Ve){var Ze,mt=[],bt=1/(Ve-1);for(Ze=0;Ze<1;Ze+=bt)mt.push(Ze);if(mt.push(1),ke[0].offset!=0){var Dt={offset:0,color:ke[0].color};ke.unshift(Dt)}if(ke[ke.length-1].offset!=1){var gn={offset:1,color:ke[ke.length-1].color};ke.push(gn)}for(var Kn="",en=0,Gn=0;Gn<mt.length;Gn++){for(Ze=mt[Gn];Ze>ke[en+1].offset;)en++;var Un=ke[en].offset,ar=(Ze-Un)/(ke[en+1].offset-Un),Ni=ke[en].color,Vr=ke[en+1].color;Kn+=Q(Math.round((1-ar)*Ni[0]+ar*Vr[0]).toString(16))+Q(Math.round((1-ar)*Ni[1]+ar*Vr[1]).toString(16))+Q(Math.round((1-ar)*Ni[2]+ar*Vr[2]).toString(16))}return Kn.trim()}(v.colors,A),ce=[];ce.push({key:"FunctionType",value:"0"}),ce.push({key:"Domain",value:"[0.0 1.0]"}),ce.push({key:"Size",value:"["+A+"]"}),ce.push({key:"BitsPerSample",value:"8"}),ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$r({data:ee,additionalKeyValues:ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:W}),Y("endobj"),v.objectNumber=Zt(),Y("<< /ShadingType "+v.type),Y("/ColorSpace /DeviceRGB");var we="/Coords ["+F(parseFloat(v.coords[0]))+" "+F(parseFloat(v.coords[1]))+" ";v.type===2?we+=F(parseFloat(v.coords[2]))+" "+F(parseFloat(v.coords[3])):we+=F(parseFloat(v.coords[2]))+" "+F(parseFloat(v.coords[3]))+" "+F(parseFloat(v.coords[4]))+" "+F(parseFloat(v.coords[5])),Y(we+="]"),v.matrix&&Y("/Matrix ["+v.matrix.toString()+"]"),Y("/Function "+W+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Rs=function(v,A){var W=Et(),ee=Zt();A.push({resourcesOid:W,objectOid:ee}),v.objectNumber=ee;var ce=[];ce.push({key:"Type",value:"/Pattern"}),ce.push({key:"PatternType",value:"1"}),ce.push({key:"PaintType",value:"1"}),ce.push({key:"TilingType",value:"1"}),ce.push({key:"BBox",value:"["+v.boundingBox.map(F).join(" ")+"]"}),ce.push({key:"XStep",value:F(v.xStep)}),ce.push({key:"YStep",value:F(v.yStep)}),ce.push({key:"Resources",value:W+" 0 R"}),v.matrix&&ce.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),$r({data:v.stream,additionalKeyValues:ce,objectId:v.objectNumber}),Y("endobj")},Ac=function(v){for(var A in v.objectNumber=Zt(),Y("<<"),v)switch(A){case"opacity":Y("/ca "+R(v[A]));break;case"stroke-opacity":Y("/CA "+R(v[A]))}Y(">>"),Y("endobj")},zi=function(v){Hn(v.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var A in Y("/Font <<"),Ge)Ge.hasOwnProperty(A)&&(p===!1||p===!0&&g.hasOwnProperty(A))&&Y("/"+A+" "+Ge[A].objectNumber+" 0 R");Y(">>")}(),function(){if(Object.keys(at).length>0){for(var A in Y("/Shading <<"),at)at.hasOwnProperty(A)&&at[A]instanceof Fo&&at[A].objectNumber>=0&&Y("/"+A+" "+at[A].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),Y(">>")}}(),function(A){if(Object.keys(at).length>0){for(var W in Y("/Pattern <<"),at)at.hasOwnProperty(W)&&at[W]instanceof f.TilingPattern&&at[W].objectNumber>=0&&at[W].objectNumber<A&&Y("/"+W+" "+at[W].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),Y(">>")}}(v.objectOid),function(){if(Object.keys(vt).length>0){var A;for(A in Y("/ExtGState <<"),vt)vt.hasOwnProperty(A)&&vt[A].objectNumber>=0&&Y("/"+A+" "+vt[A].objectNumber+" 0 R");Ot.publish("putGStateDict"),Y(">>")}}(),function(){for(var A in Y("/XObject <<"),Vn)Vn.hasOwnProperty(A)&&Vn[A].objectNumber>=0&&Y("/"+A+" "+Vn[A].objectNumber+" 0 R");Ot.publish("putXobjectDict"),Y(">>")}(),Y(">>"),Y("endobj")},il=function(v){gt[v.fontName]=gt[v.fontName]||{},gt[v.fontName][v.fontStyle]=v.id},sl=function(v,A,W,ee,ce){var we={id:"F"+(Object.keys(Ge).length+1).toString(10),postScriptName:v,fontName:A,fontStyle:W,encoding:ee,isStandardFont:ce||!1,metadata:{}};return Ot.publish("addFont",{font:we,instance:this}),Ge[we.id]=we,il(we),we.id},Le=f.__private__.pdfEscape=f.pdfEscape=function(v,A){return function(W,ee){var ce,we,ke,Ve,Ze,mt,bt,Dt,gn;if(ke=(ee=ee||{}).sourceEncoding||"Unicode",Ze=ee.outputEncoding,(ee.autoencode||Ze)&&Ge[rt].metadata&&Ge[rt].metadata[ke]&&Ge[rt].metadata[ke].encoding&&(Ve=Ge[rt].metadata[ke].encoding,!Ze&&Ge[rt].encoding&&(Ze=Ge[rt].encoding),!Ze&&Ve.codePages&&(Ze=Ve.codePages[0]),typeof Ze=="string"&&(Ze=Ve[Ze]),Ze)){for(bt=!1,mt=[],ce=0,we=W.length;ce<we;ce++)(Dt=Ze[W.charCodeAt(ce)])?mt.push(String.fromCharCode(Dt)):mt.push(W[ce]),mt[ce].charCodeAt(0)>>8&&(bt=!0);W=mt.join("")}for(ce=W.length;bt===void 0&&ce!==0;)W.charCodeAt(ce-1)>>8&&(bt=!0),ce--;if(!bt)return W;for(mt=ee.noBOM?[]:[254,255],ce=0,we=W.length;ce<we;ce++){if((gn=(Dt=W.charCodeAt(ce))>>8)>>8)throw new Error("Character at position "+ce+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");mt.push(gn),mt.push(Dt-(gn<<8))}return String.fromCharCode.apply(void 0,mt)}(v,A).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},je=f.__private__.beginPage=function(v){_e[++Bt]=[],dt[Bt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},We(Bt),ve(_e[M])},Ye=function(v,A){var W,ee,ce;switch(n=A||n,typeof v=="string"&&(W=y(v.toLowerCase()),Array.isArray(W)&&(ee=W[0],ce=W[1])),Array.isArray(v)&&(ee=v[0]*ct,ce=v[1]*ct),isNaN(ee)&&(ee=i[0],ce=i[1]),(ee>14400||ce>14400)&&(Jt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ee=Math.min(14400,ee),ce=Math.min(14400,ce)),i=[ee,ce],n.substr(0,1)){case"l":ce>ee&&(i=[ce,ee]);break;case"p":ee>ce&&(i=[ce,ee])}je(i),Wp(Lc),Y(al),Rc!==0&&Y(Rc+" J"),Oc!==0&&Y(Oc+" j"),Ot.publish("addPage",{pageNumber:Bt})},St=function(v){v>0&&v<=Bt&&(_e.splice(v,1),dt.splice(v,1),Bt--,M>Bt&&(M=Bt),this.setPage(M))},We=function(v){v>0&&v<=Bt&&(M=v)},Ue=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return _e.length-1},Fe=function(v,A,W){var ee,ce=void 0;return W=W||{},v=v!==void 0?v:Ge[rt].fontName,A=A!==void 0?A:Ge[rt].fontStyle,ee=v.toLowerCase(),gt[ee]!==void 0&&gt[ee][A]!==void 0?ce=gt[ee][A]:gt[v]!==void 0&&gt[v][A]!==void 0?ce=gt[v][A]:W.disableWarning===!1&&Jt.warn("Unable to look up font label for font '"+v+"', '"+A+"'. Refer to getFontList() for available fonts."),ce||W.noFallback||(ce=gt.times[A])==null&&(ce=gt.times.normal),ce},dn=f.__private__.putInfo=function(){var v=Zt(),A=function(ee){return ee};for(var W in d!==null&&(A=sn.encryptor(v,0)),Y("<<"),Y("/Producer ("+Le(A("jsPDF "+et.version))+")"),pt)pt.hasOwnProperty(W)&&pt[W]&&Y("/"+W.substr(0,1).toUpperCase()+W.substr(1)+" ("+Le(A(pt[W]))+")");Y("/CreationDate ("+Le(A(Z))+")"),Y(">>"),Y("endobj")},Wn=f.__private__.putCatalog=function(v){var A=(v=v||{}).rootDictionaryObjId||qr;switch(Zt(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+A+" 0 R"),Ke||(Ke="fullwidth"),Ke){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var W=""+Ke;W.substr(W.length-1)==="%"&&(Ke=parseInt(Ke)/100),typeof Ke=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+R(Ke)+"]")}switch(Ne||(Ne="continuous"),Ne){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}Be&&Y("/PageMode /"+Be),Ot.publish("putCatalog"),Y(">>"),Y("endobj")},Ut=f.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(te+1)),Y("/Root "+te+" 0 R"),Y("/Info "+(te-1)+" 0 R"),d!==null&&Y("/Encrypt "+sn.oid+" 0 R"),Y("/ID [ <"+le+"> <"+le+"> ]"),Y(">>")},Ar=f.__private__.putHeader=function(){Y("%PDF-"+_),Y("%")},nr=f.__private__.putXRef=function(){var v="0000000000";Y("xref"),Y("0 "+(te+1)),Y("0000000000 65535 f ");for(var A=1;A<=te;A++)typeof oe[A]=="function"?Y((v+oe[A]()).slice(-10)+" 00000 n "):oe[A]!==void 0?Y((v+oe[A]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},mn=f.__private__.buildDocument=function(){var v;te=0,he=0,me=[],oe=[],ge=[],qr=Et(),pr=Et(),ve(me),Ot.publish("buildDocument"),Ar(),zr(),function(){Ot.publish("putAdditionalObjects");for(var W=0;W<ge.length;W++){var ee=ge[W];Hn(ee.objId,!0),Y(ee.content),Y("endobj")}Ot.publish("postPutAdditionalObjects")}(),v=[],function(){for(var W in Ge)Ge.hasOwnProperty(W)&&(p===!1||p===!0&&g.hasOwnProperty(W))&&Ts(Ge[W])}(),function(){var W;for(W in vt)vt.hasOwnProperty(W)&&Ac(vt[W])}(),function(){for(var W in Vn)Vn.hasOwnProperty(W)&&fs(Vn[W])}(),function(W){var ee;for(ee in at)at.hasOwnProperty(ee)&&(at[ee]instanceof Fo?ua(at[ee]):at[ee]instanceof Wl&&Rs(at[ee],W))}(v),Ot.publish("putResources"),v.forEach(zi),zi({resourcesOid:pr,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources"),d!==null&&(sn.oid=Zt(),Y("<<"),Y("/Filter /Standard"),Y("/V "+sn.v),Y("/R "+sn.r),Y("/U <"+sn.toHexString(sn.U)+">"),Y("/O <"+sn.toHexString(sn.O)+">"),Y("/P "+sn.P),Y(">>"),Y("endobj")),dn(),Wn();var A=he;return nr(),Ut(),Y("startxref"),Y(""+A),Y("%%EOF"),ve(_e[M]),me.join(`
`)},ji=f.__private__.getBlob=function(v){return new Blob([He(v)],{type:"application/pdf"})},Bn=f.output=f.__private__.output=(Ur=function(v,A){switch(typeof(A=A||{})=="string"?A={filename:A}:A.filename=A.filename||"generated.pdf",v){case void 0:return mn();case"save":f.save(A.filename);break;case"arraybuffer":return He(mn());case"blob":return ji(mn());case"bloburi":case"bloburl":if(ft.URL!==void 0&&typeof ft.URL.createObjectURL=="function")return ft.URL&&ft.URL.createObjectURL(ji(mn()))||void 0;Jt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var W="",ee=mn();try{W=Jw(ee)}catch{W=Jw(unescape(encodeURIComponent(ee)))}return"data:application/pdf;filename="+A.filename+";base64,"+W;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';A.pdfObjectUrl&&(ce=A.pdfObjectUrl,we="");var ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ce+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(A)+");<\/script></body></html>",Ve=ft.open();return Ve!==null&&Ve.document.write(ke),Ve}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var Ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(A.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+A.filename+'" width="500px" height="400px" /></body></html>',mt=ft.open();if(mt!==null){mt.document.write(Ze);var bt=this;mt.document.documentElement.querySelector("#pdfViewer").onload=function(){mt.document.title=A.filename,mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bt.output("bloburl"))}}return mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",A)+'"></iframe></body></html>',gn=ft.open();if(gn!==null&&(gn.document.write(Dt),gn.document.title=A.filename),gn||typeof safari>"u")return gn;break;case"datauri":case"dataurl":return ft.document.location.href=this.output("datauristring",A);default:return null}},Ur.foo=function(){try{return Ur.apply(this,arguments)}catch(W){var v=W.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var A="Error in function "+v.split(`
`)[0].split("<")[0]+": "+W.message;if(!ft.console)throw new Error(A);ft.console.error(A,W),ft.alert&&alert(A)}},Ur.foo.bar=Ur,Ur.foo),Cr=function(v){return Array.isArray(Ps)===!0&&Ps.indexOf(v)>-1};switch(r){case"pt":ct=1;break;case"mm":ct=72/25.4;break;case"cm":ct=72/2.54;break;case"in":ct=72;break;case"px":ct=Cr("px_scaling")==1?.75:96/72;break;case"pc":case"em":ct=12;break;case"ex":ct=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ct=r}var sn=null;ie(),X();var Vi=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[v].objId,pageNumber:v,pageContext:dt[v]}},Bp=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var A in dt)if(dt[A].objId===v)break;return Vi(A)},Up=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:dt[M].objId,pageNumber:M,pageContext:dt[M]}};f.addPage=function(){return Ye.apply(this,arguments),this},f.setPage=function(){return We.apply(this,arguments),ve.call(this,_e[M]),this},f.insertPage=function(v){return this.addPage(),this.movePage(M,v),this},f.movePage=function(v,A){var W,ee;if(v>A){W=_e[v],ee=dt[v];for(var ce=v;ce>A;ce--)_e[ce]=_e[ce-1],dt[ce]=dt[ce-1];_e[A]=W,dt[A]=ee,this.setPage(A)}else if(v<A){W=_e[v],ee=dt[v];for(var we=v;we<A;we++)_e[we]=_e[we+1],dt[we]=dt[we+1];_e[A]=W,dt[A]=ee,this.setPage(A)}return this},f.deletePage=function(){return St.apply(this,arguments),this},f.__private__.text=f.text=function(v,A,W,ee,ce){var we,ke,Ve,Ze,mt,bt,Dt,gn,Kn,en=(ee=ee||{}).scope||this;if(typeof v=="number"&&typeof A=="number"&&(typeof W=="string"||Array.isArray(W))){var Gn=W;W=A,A=v,v=Gn}if(arguments[3]instanceof st==0?(Ve=arguments[4],Ze=arguments[5],Ht(Dt=arguments[3])==="object"&&Dt!==null||(typeof Ve=="string"&&(Ze=Ve,Ve=null),typeof Dt=="string"&&(Ze=Dt,Dt=null),typeof Dt=="number"&&(Ve=Dt,Dt=null),ee={flags:Dt,angle:Ve,align:Ze})):(I("The transform parameter of text() with a Matrix value"),Kn=ce),isNaN(A)||isNaN(W)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return en;var Un,ar="",Ni=typeof ee.lineHeightFactor=="number"?ee.lineHeightFactor:ao,Vr=en.internal.scaleFactor;function Id(qt){return qt=qt.split("	").join(Array(ee.TabLen||9).join(" ")),Le(qt,Dt)}function ul(qt){for(var Yt,Ln=qt.concat(),Yn=[],Us=Ln.length;Us--;)typeof(Yt=Ln.shift())=="string"?Yn.push(Yt):Array.isArray(qt)&&(Yt.length===1||Yt[1]===void 0&&Yt[2]===void 0)?Yn.push(Yt[0]):Yn.push([Yt[0],Yt[1],Yt[2]]);return Yn}function fo(qt,Yt){var Ln;if(typeof qt=="string")Ln=Yt(qt)[0];else if(Array.isArray(qt)){for(var Yn,Us,Wc=qt.concat(),fl=[],Md=Wc.length;Md--;)typeof(Yn=Wc.shift())=="string"?fl.push(Yt(Yn)[0]):Array.isArray(Yn)&&typeof Yn[0]=="string"&&(Us=Yt(Yn[0],Yn[1],Yn[2]),fl.push([Us[0],Us[1],Us[2]]));Ln=fl}return Ln}var fa=!1,po=!0;if(typeof v=="string")fa=!0;else if(Array.isArray(v)){var mo=v.concat();ke=[];for(var go,mr=mo.length;mr--;)(typeof(go=mo.shift())!="string"||Array.isArray(go)&&typeof go[0]!="string")&&(po=!1);fa=po}if(fa===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var vo=Ee/en.internal.scaleFactor,yo=vo*(Ni-1);switch(ee.baseline){case"bottom":W-=yo;break;case"top":W+=vo-yo;break;case"hanging":W+=vo-2*yo;break;case"middle":W+=vo/2-yo}if((bt=ee.maxWidth||0)>0&&(typeof v=="string"?v=en.splitTextToSize(v,bt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(qt,Yt){return qt.concat(en.splitTextToSize(Yt,bt))},[]))),we={text:v,x:A,y:W,options:ee,mutex:{pdfEscape:Le,activeFontKey:rt,fonts:Ge,activeFontSize:Ee}},Ot.publish("preProcessText",we),v=we.text,Ve=(ee=we.options).angle,Kn instanceof st==0&&Ve&&typeof Ve=="number"){Ve*=Math.PI/180,ee.rotationDirection===0&&(Ve=-Ve),E===w&&(Ve=-Ve);var Dc=Math.cos(Ve),Mc=Math.sin(Ve);Kn=new st(Dc,Mc,-Mc,Dc,0,0)}else Ve&&Ve instanceof st&&(Kn=Ve);E!==w||Kn||(Kn=$i),(mt=ee.charSpace||ll)!==void 0&&(ar+=F(K(mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(gn=ee.horizontalScale)!==void 0&&(ar+=F(100*gn)+` Tz
`),ee.lang;var Cn=-1,Ms=ee.renderingMode!==void 0?ee.renderingMode:ee.stroke,dl=en.internal.getCurrentPageInfo().pageContext;switch(Ms){case 0:case!1:case"fill":Cn=0;break;case 1:case!0:case"stroke":Cn=1;break;case 2:case"fillThenStroke":Cn=2;break;case 3:case"invisible":Cn=3;break;case 4:case"fillAndAddForClipping":Cn=4;break;case 5:case"strokeAndAddPathForClipping":Cn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Cn=6;break;case 7:case"addToPathForClipping":Cn=7}var Fd=dl.usedRenderingMode!==void 0?dl.usedRenderingMode:-1;Cn!==-1?ar+=Cn+` Tr
`:Fd!==-1&&(ar+=`0 Tr
`),Cn!==-1&&(dl.usedRenderingMode=Cn),Ze=ee.align||"left";var Ei,bo=Ee*Ni,Bc=en.internal.pageSize.getWidth(),Uc=Ge[rt];mt=ee.charSpace||ll,bt=ee.maxWidth||0,Dt=Object.assign({autoencode:!0,noBOM:!0},ee.flags);var pa=[],wo=function(qt){return en.getStringUnitWidth(qt,{font:Uc,charSpace:mt,fontSize:Ee,doKerning:!1})*Ee/Vr};if(Object.prototype.toString.call(v)==="[object Array]"){var ri;ke=ul(v),Ze!=="left"&&(Ei=ke.map(wo));var ii,ma=0;if(Ze==="right"){A-=Ei[0],v=[],mr=ke.length;for(var Bs=0;Bs<mr;Bs++)Bs===0?(ii=Os(A),ri=Is(W)):(ii=K(ma-Ei[Bs]),ri=-bo),v.push([ke[Bs],ii,ri]),ma=Ei[Bs]}else if(Ze==="center"){A-=Ei[0]/2,v=[],mr=ke.length;for(var ga=0;ga<mr;ga++)ga===0?(ii=Os(A),ri=Is(W)):(ii=K((ma-Ei[ga])/2),ri=-bo),v.push([ke[ga],ii,ri]),ma=Ei[ga]}else if(Ze==="left"){v=[],mr=ke.length;for(var qc=0;qc<mr;qc++)v.push(ke[qc])}else if(Ze==="justify"&&Uc.encoding==="Identity-H"){v=[],mr=ke.length,bt=bt!==0?bt:Bc;for(var hl=0,Pn=0;Pn<mr;Pn++)if(ri=Pn===0?Is(W):-bo,ii=Pn===0?Os(A):hl,Pn<mr-1){var Dd=K((bt-Ei[Pn])/(ke[Pn].split(" ").length-1)),ms=ke[Pn].split(" ");v.push([ms[0]+" ",ii,ri]),hl=0;for(var gs=1;gs<ms.length;gs++){var $c=(wo(ms[gs-1]+" "+ms[gs])-wo(ms[gs]))*Vr+Dd;gs==ms.length-1?v.push([ms[gs],$c,0]):v.push([ms[gs]+" ",$c,0]),hl-=$c}}else v.push([ke[Pn],ii,ri]);v.push(["",hl,0])}else{if(Ze!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],mr=ke.length,bt=bt!==0?bt:Bc,Pn=0;Pn<mr;Pn++){ri=Pn===0?Is(W):-bo,ii=Pn===0?Os(A):0;var zc=ke[Pn].split(" ").length-1,Vc=zc>0?(bt-Ei[Pn])/zc:0;Pn<mr-1?pa.push(F(K(Vc))):pa.push(0),v.push([ke[Pn],ii,ri])}}}(typeof ee.R2L=="boolean"?ee.R2L:ut)===!0&&(v=fo(v,function(qt,Yt,Ln){return[qt.split("").reverse().join(""),Yt,Ln]})),we={text:v,x:A,y:W,options:ee,mutex:{pdfEscape:Le,activeFontKey:rt,fonts:Ge,activeFontSize:Ee}},Ot.publish("postProcessText",we),v=we.text,Un=we.mutex.isHex||!1;var Hc=Ge[rt].encoding;Hc!=="WinAnsiEncoding"&&Hc!=="StandardEncoding"||(v=fo(v,function(qt,Yt,Ln){return[Id(qt),Yt,Ln]})),ke=ul(v),v=[];for(var va,ya,ba,xo=Array.isArray(ke[0])?1:0,wa="",_o=function(qt,Yt,Ln){var Yn="";return Ln instanceof st?(Ln=typeof ee.angle=="number"?qi(Ln,new st(1,0,0,1,qt,Yt)):qi(new st(1,0,0,1,qt,Yt),Ln),E===w&&(Ln=qi(new st(1,0,0,-1,0,0),Ln)),Yn=Ln.join(" ")+` Tm
`):Yn=F(qt)+" "+F(Yt)+` Td
`,Yn},Ai=0;Ai<ke.length;Ai++){switch(wa="",xo){case 1:ba=(Un?"<":"(")+ke[Ai][0]+(Un?">":")"),va=parseFloat(ke[Ai][1]),ya=parseFloat(ke[Ai][2]);break;case 0:ba=(Un?"<":"(")+ke[Ai]+(Un?">":")"),va=Os(A),ya=Is(W)}pa!==void 0&&pa[Ai]!==void 0&&(wa=pa[Ai]+` Tw
`),Ai===0?v.push(wa+_o(va,ya,Kn)+ba):xo===0?v.push(wa+ba):xo===1&&v.push(wa+_o(va,ya,Kn)+ba)}v=xo===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var vs=`BT
/`;return vs+=rt+" "+Ee+` Tf
`,vs+=F(Ee*Ni)+` TL
`,vs+=oo+`
`,vs+=ar,vs+=v,Y(vs+="ET"),g[rt]=!0,en};var qp=f.__private__.clip=f.clip=function(v){return Y(v==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return qp("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Y("n"),this};var ps=f.__private__.isValidStyle=function(v){var A=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(A=!0),A};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return ps(v)&&(c=v),this};var Ad=f.__private__.getStyle=f.getStyle=function(v){var A=c;switch(v){case"D":case"S":A="S";break;case"F":A="f";break;case"FD":case"DF":A="B";break;case"f":case"f*":case"B":case"B*":A=v}return A},Cd=f.close=function(){return Y("h"),this};f.stroke=function(){return Y("S"),this},f.fill=function(v){return da("f",v),this},f.fillEvenOdd=function(v){return da("f*",v),this},f.fillStroke=function(v){return da("B",v),this},f.fillStrokeEvenOdd=function(v){return da("B*",v),this};var da=function(v,A){Ht(A)==="object"?zp(A,v):Y(v)},Cc=function(v){v===null||E===w&&v===void 0||(v=Ad(v),Y(v))};function $p(v,A,W,ee,ce){var we=new Wl(A||this.boundingBox,W||this.xStep,ee||this.yStep,this.gState,ce||this.matrix);we.stream=this.stream;var ke=v+"$$"+this.cloneIndex+++"$$";return Br(ke,we),we}var zp=function(v,A){var W=Nt[v.key],ee=at[W];if(ee instanceof Fo)Y("q"),Y(Vp(A)),ee.gState&&f.setGState(ee.gState),Y(v.matrix.toString()+" cm"),Y("/"+W+" sh"),Y("Q");else if(ee instanceof Wl){var ce=new st(1,0,0,-1,0,ho());v.matrix&&(ce=ce.multiply(v.matrix||$i),W=$p.call(ee,v.key,v.boundingBox,v.xStep,v.yStep,ce).id),Y("q"),Y("/Pattern cs"),Y("/"+W+" scn"),ee.gState&&f.setGState(ee.gState),Y(A),Y("Q")}},Vp=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pc=f.moveTo=function(v,A){return Y(F(K(v))+" "+F(G(A))+" m"),this},so=f.lineTo=function(v,A){return Y(F(K(v))+" "+F(G(A))+" l"),this},ha=f.curveTo=function(v,A,W,ee,ce,we){return Y([F(K(v)),F(G(A)),F(K(W)),F(G(ee)),F(K(ce)),F(G(we)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,A,W,ee,ce){if(isNaN(v)||isNaN(A)||isNaN(W)||isNaN(ee)||!ps(ce))throw new Error("Invalid arguments passed to jsPDF.line");return E===x?this.lines([[W-v,ee-A]],v,A,[1,1],ce||"S"):this.lines([[W-v,ee-A]],v,A,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,A,W,ee,ce,we){var ke,Ve,Ze,mt,bt,Dt,gn,Kn,en,Gn,Un,ar;if(typeof v=="number"&&(ar=W,W=A,A=v,v=ar),ee=ee||[1,1],we=we||!1,isNaN(A)||isNaN(W)||!Array.isArray(v)||!Array.isArray(ee)||!ps(ce)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pc(A,W),ke=ee[0],Ve=ee[1],mt=v.length,Gn=A,Un=W,Ze=0;Ze<mt;Ze++)(bt=v[Ze]).length===2?(Gn=bt[0]*ke+Gn,Un=bt[1]*Ve+Un,so(Gn,Un)):(Dt=bt[0]*ke+Gn,gn=bt[1]*Ve+Un,Kn=bt[2]*ke+Gn,en=bt[3]*Ve+Un,Gn=bt[4]*ke+Gn,Un=bt[5]*Ve+Un,ha(Dt,gn,Kn,en,Gn,Un));return we&&Cd(),Cc(ce),this},f.path=function(v){for(var A=0;A<v.length;A++){var W=v[A],ee=W.c;switch(W.op){case"m":Pc(ee[0],ee[1]);break;case"l":so(ee[0],ee[1]);break;case"c":ha.apply(this,ee);break;case"h":Cd()}}return this},f.__private__.rect=f.rect=function(v,A,W,ee,ce){if(isNaN(v)||isNaN(A)||isNaN(W)||isNaN(ee)||!ps(ce))throw new Error("Invalid arguments passed to jsPDF.rect");return E===x&&(ee=-ee),Y([F(K(v)),F(G(A)),F(K(W)),F(K(ee)),"re"].join(" ")),Cc(ce),this},f.__private__.triangle=f.triangle=function(v,A,W,ee,ce,we,ke){if(isNaN(v)||isNaN(A)||isNaN(W)||isNaN(ee)||isNaN(ce)||isNaN(we)||!ps(ke))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[W-v,ee-A],[ce-W,we-ee],[v-ce,A-we]],v,A,[1,1],ke,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,A,W,ee,ce,we,ke){if(isNaN(v)||isNaN(A)||isNaN(W)||isNaN(ee)||isNaN(ce)||isNaN(we)||!ps(ke))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ve=4/3*(Math.SQRT2-1);return ce=Math.min(ce,.5*W),we=Math.min(we,.5*ee),this.lines([[W-2*ce,0],[ce*Ve,0,ce,we-we*Ve,ce,we],[0,ee-2*we],[0,we*Ve,-ce*Ve,we,-ce,we],[2*ce-W,0],[-ce*Ve,0,-ce,-we*Ve,-ce,-we],[0,2*we-ee],[0,-we*Ve,ce*Ve,-we,ce,-we]],v+ce,A,[1,1],ke,!0),this},f.__private__.ellipse=f.ellipse=function(v,A,W,ee,ce){if(isNaN(v)||isNaN(A)||isNaN(W)||isNaN(ee)||!ps(ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*W,ke=4/3*(Math.SQRT2-1)*ee;return Pc(v+W,A),ha(v+W,A-ke,v+we,A-ee,v,A-ee),ha(v-we,A-ee,v-W,A-ke,v-W,A),ha(v-W,A+ke,v-we,A+ee,v,A+ee),ha(v+we,A+ee,v+W,A+ke,v+W,A),Cc(ce),this},f.__private__.circle=f.circle=function(v,A,W,ee){if(isNaN(v)||isNaN(A)||isNaN(W)||!ps(ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,A,W,W,ee)},f.setFont=function(v,A,W){return W&&(A=z(A,W)),rt=Fe(v,A,{disableWarning:!1}),this};var Hp=f.__private__.getFont=f.getFont=function(){return Ge[Fe.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,A,W={};for(v in gt)if(gt.hasOwnProperty(v))for(A in W[v]=[],gt[v])gt[v].hasOwnProperty(A)&&W[v].push(A);return W},f.addFont=function(v,A,W,ee,ce){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?ce=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(W=z(W,ee)),sl.call(this,v,A,W,ce=ce||"Identity-H")};var ao,Lc=e.lineWidth||.200025,yt=f.__private__.getLineWidth=f.getLineWidth=function(){return Lc},Wp=f.__private__.setLineWidth=f.setLineWidth=function(v){return Lc=v,Y(F(K(v))+" w"),this};f.__private__.setLineDash=et.API.setLineDash=et.API.setLineDashPattern=function(v,A){if(v=v||[],A=A||0,isNaN(A)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(W){return F(K(W))}).join(" "),A=F(K(A)),Y("["+v+"] "+A+" d"),this};var Kp=f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*ao};f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*ao};var Gp=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(ao=v),this},Yp=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return ao};Gp(e.lineHeight);var Os=f.__private__.getHorizontalCoordinate=function(v){return K(v)},Is=f.__private__.getVerticalCoordinate=function(v){return E===w?v:dt[M].mediaBox.topRightY-dt[M].mediaBox.bottomLeftY-K(v)},Xp=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return F(Os(v))},Jp=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return F(Is(v))},al=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ti(al)},f.__private__.setStrokeColor=f.setDrawColor=function(v,A,W,ee){return al=ki({ch1:v,ch2:A,ch3:W,ch4:ee,pdfColorType:"draw",precision:2}),Y(al),this};var Tc=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ti(Tc)},f.__private__.setFillColor=f.setFillColor=function(v,A,W,ee){return Tc=ki({ch1:v,ch2:A,ch3:W,ch4:ee,pdfColorType:"fill",precision:2}),Y(Tc),this};var oo=e.textColor||"0 g",ol=f.__private__.getTextColor=f.getTextColor=function(){return ti(oo)};f.__private__.setTextColor=f.setTextColor=function(v,A,W,ee){return oo=ki({ch1:v,ch2:A,ch3:W,ch4:ee,pdfColorType:"text",precision:3}),this};var ll=e.charSpace,Qp=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(ll||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ll=v,this};var Rc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var A=f.CapJoinStyles[v];if(A===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rc=A,Y(A+" J"),this};var Oc=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var A=f.CapJoinStyles[v];if(A===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Oc=A,Y(A+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(F(K(v))+" M"),this},f.GState=ap,f.setGState=function(v){(v=typeof v=="string"?vt[pn[v]]:lo(null,v)).equals(An)||(Y("/"+v.id+" gs"),An=v)};var lo=function(v,A){if(!v||!pn[v]){var W=!1;for(var ee in vt)if(vt.hasOwnProperty(ee)&&vt[ee].equals(A)){W=!0;break}if(W)A=vt[ee];else{var ce="GS"+(Object.keys(vt).length+1).toString(10);vt[ce]=A,A.id=ce}return v&&(pn[v]=A.id),Ot.publish("addGState",A),A}};f.addGState=function(v,A){return lo(v,A),this},f.saveGraphicsState=function(){return Y("q"),Mt.push({key:rt,size:Ee,color:oo}),this},f.restoreGraphicsState=function(){Y("Q");var v=Mt.pop();return rt=v.key,Ee=v.size,oo=v.color,An=null,this},f.setCurrentTransformationMatrix=function(v){return Y(v.toString()+" cm"),this},f.comment=function(v){return Y("#"+v),this};var co=function(v,A){var W=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return W},set:function(we){isNaN(we)||(W=parseFloat(we))}});var ee=A||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ee},set:function(we){isNaN(we)||(ee=parseFloat(we))}});var ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ce},set:function(we){ce=we.toString()}}),this},Ic=function(v,A,W,ee){co.call(this,v,A),this.type="rect";var ce=W||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ce},set:function(ke){isNaN(ke)||(ce=parseFloat(ke))}});var we=ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(ke){isNaN(ke)||(we=parseFloat(ke))}}),this},cl=function(){this.page=Bt,this.currentPage=M,this.pages=_e.slice(0),this.pagesContext=dt.slice(0),this.x=De,this.y=$t,this.matrix=Rt,this.width=Pd(M),this.height=Fs(M),this.outputDestination=Pe,this.id="",this.objectNumber=-1};cl.prototype.restore=function(){Bt=this.page,M=this.currentPage,dt=this.pagesContext,_e=this.pages,De=this.x,$t=this.y,Rt=this.matrix,Ld(M,this.width),Ds(M,this.height),Pe=this.outputDestination};var Fc=function(v,A,W,ee,ce){Si.push(new cl),Bt=M=0,_e=[],De=v,$t=A,Rt=ce,je([W,ee])};for(var uo in f.beginFormObject=function(v,A,W,ee,ce){return Fc(v,A,W,ee,ce),this},f.endFormObject=function(v){return function(A){if(Ui[A])Si.pop().restore();else{var W=new cl,ee="Xo"+(Object.keys(Vn).length+1).toString(10);W.id=ee,Ui[A]=ee,Vn[ee]=W,Ot.publish("addFormObject",W),Si.pop().restore()}}(v),this},f.doFormObject=function(v,A){var W=Vn[Ui[v]];return Y("q"),Y(A.toString()+" cm"),Y("/"+W.id+" Do"),Y("Q"),this},f.getFormObject=function(v){var A=Vn[Ui[v]];return{x:A.x,y:A.y,width:A.width,height:A.height,matrix:A.matrix}},f.save=function(v,A){return v=v||"generated.pdf",(A=A||{}).returnPromise=A.returnPromise||!1,A.returnPromise===!1?(Ro(ji(mn()),v),typeof Ro.unload=="function"&&ft.setTimeout&&setTimeout(Ro.unload,911),this):new Promise(function(W,ee){try{var ce=Ro(ji(mn()),v);typeof Ro.unload=="function"&&ft.setTimeout&&setTimeout(Ro.unload,911),W(ce)}catch(we){ee(we.message)}})},et.API)et.API.hasOwnProperty(uo)&&(uo==="events"&&et.API.events.length?function(v,A){var W,ee,ce;for(ce=A.length-1;ce!==-1;ce--)W=A[ce][0],ee=A[ce][1],v.subscribe.apply(v,[W].concat(typeof ee=="function"?[ee]:ee))}(Ot,et.API.events):f[uo]=et.API[uo]);function Pd(v){return dt[v].mediaBox.topRightX-dt[v].mediaBox.bottomLeftX}function Ld(v,A){dt[v].mediaBox.topRightX=A+dt[v].mediaBox.bottomLeftX}function Fs(v){return dt[v].mediaBox.topRightY-dt[v].mediaBox.bottomLeftY}function Ds(v,A){dt[v].mediaBox.topRightY=A+dt[v].mediaBox.bottomLeftY}var Td=f.getPageWidth=function(v){return Pd(v=v||M)/ct},Rd=f.setPageWidth=function(v,A){Ld(v,A*ct)},ho=f.getPageHeight=function(v){return Fs(v=v||M)/ct},Od=f.setPageHeight=function(v,A){Ds(v,A*ct)};return f.internal={pdfEscape:Le,getStyle:Ad,getFont:Hp,getFontSize:Oe,getCharSpace:Qp,getTextColor:ol,getLineHeight:Kp,getLineHeightFactor:Yp,getLineWidth:yt,write:_t,getHorizontalCoordinate:Os,getVerticalCoordinate:Is,getCoordinateString:Xp,getVerticalCoordinateString:Jp,collections:{},newObject:Zt,newAdditionalObject:Ls,newObjectDeferred:Et,newObjectDeferredBegin:Hn,getFilters:ni,putStream:$r,events:Ot,scaleFactor:ct,pageSize:{getWidth:function(){return Td(M)},setWidth:function(v){Rd(M,v)},getHeight:function(){return ho(M)},setHeight:function(v){Od(M,v)}},encryptionOptions:d,encryption:sn,getEncryptor:function(v){return d!==null?sn.encryptor(v,0):function(A){return A}},output:Bn,getNumberOfPages:Ue,pages:_e,out:Y,f2:R,f3:P,getPageInfo:Vi,getPageInfoByObjId:Bp,getCurrentPageInfo:Up,getPDFVersion:S,Point:co,Rectangle:Ic,Matrix:st,hasHotfix:Cr},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Td(M)},set:function(v){Rd(M,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return ho(M)},set:function(v){Od(M,v)},enumerable:!0,configurable:!0}),(function(v){for(var A=0,W=nt.length;A<W;A++){var ee=sl.call(this,v[A][0],v[A][1],v[A][2],nt[A][3],!0);p===!1&&(g[ee]=!0);var ce=v[A][0].split("-");il({id:ee,fontName:ce[0],fontStyle:ce[1]||""})}Ot.publish("addFonts",{fonts:Ge,dictionary:gt})}).call(f,nt),rt="F1",Ye(i,n),Ot.publish("initialized"),f}El.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},El.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},El.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},El.prototype.processOwnerPassword=function(e,t){return c1(l1(t).substr(0,5),e)},El.prototype.encryptor=function(e,t){var n=l1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return c1(n,r)}},ap.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Ht(e)!==Ht(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},et.API={events:[]},et.version="3.0.3";var jn=et.API,uy=1,rl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_l=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wt=function(e){return e.toFixed(2)},Pa=function(e){return e.toFixed(5)};jn.__acroform__={};var Qr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},tx=function(e){return e*uy},ws=function(e){var t=new Sj,n=ze.internal.getHeight(e)||0,r=ze.internal.getWidth(e)||0;return t.BBox=[0,0,Number(wt(r)),Number(wt(n))],t},r9=jn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},i9=jn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},s9=jn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Fn=jn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return s9(e,t-1)},Dn=jn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return r9(e,t-1)},Mn=jn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return i9(e,t-1)},a9=jn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],o=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(wt(l.lowerLeft_X)),Number(wt(l.lowerLeft_Y)),Number(wt(l.upperRight_X)),Number(wt(l.upperRight_Y))]},o9=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=u1(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+wt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=ws(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},u1=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,a=ze.internal.getHeight(e)||0;a=a<0?-a:a;var o=ze.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(R,P,K){if(R+1<i.length){var G=P+" "+i[R+1][0];return Mh(G,e,K).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,d,p=Mh("3",e,s).height,g=e.multiline?a-s:(a-p)/2,f=g+=2,_=0,S=0,k=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Mh(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",x=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var E=!1;if(i[w].length!==1&&k!==i[w].length-1){if((p+2)*(x+2)+2>a)continue e;y+=i[w][k],E=!0,S=w,w--}else{y=(y+=i[w][k]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var B=parseInt(w),q=l(B,y,s),z=w>=i.length-1;if(q&&!z){y+=" ",k=0;continue}if(q||z){if(z)S=B;else if(e.multiline&&(p+2)*(x+2)+2>a)continue e}else{if(!e.multiline||(p+2)*(x+2)+2>a)continue e;S=B}}for(var F="",I=_;I<=S;I++){var J=i[I];if(e.multiline){if(I===S){F+=J[k]+" ",k=(k+1)%J.length;continue}if(I===_){F+=J[J.length-1]+" ";continue}}F+=J[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,d=Mh(F,e,s).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=wt(c)+" "+wt(f)+` Td
`,t+="("+rl(F)+`) Tj
`,t+=-wt(c)+` 0 Td
`,f=-(s+2),d=0,_=E?S:S+1,x++,y=""}break}return r.text=t,r.fontSize=s,r},Mh=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},l9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},c9=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},u9=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(us.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(l9)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");uy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new kj,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&c9(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=a9(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ze.createDefaultAppearanceStream(o),Ht(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=o9(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var f=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var _=f[a];typeof _=="function"&&(_=_.call(i,o)),p+="/"+a+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=f)=="function"&&(_=_.call(i,o)),p+="/"+a+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&function(S,k){for(var y in S)if(S.hasOwnProperty(y)){var x=y,w=S[y];k.internal.newObjectDeferredBegin(w.objId,!0),Ht(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete S[x]}}(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},_j=jn.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Ht(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+rl(r(e[s].toString()))+")"):i+=e[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},E0=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+rl(r(e))+")"},Ss=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ss.prototype.toString=function(){return this.objId+" 0 R"},Ss.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ss.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:_j(i,this.objId,this.scope)}):i instanceof Ss?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Sj=function(){Ss.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Qr(Sj,Ss);var kj=function(){Ss.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+rl(n(e))+")"}},set:function(n){e=n}})};Qr(kj,Ss);var us=function e(){Ss.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fn(t,3)},set:function(y){y?this.F=Dn(t,3):this.F=Mn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof op)return;s="FieldObject"+e.FieldNum++}var y=function(x){return x};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+rl(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/uy:c},set:function(y){c=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof op||this instanceof Ho))return E0(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=y}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ir==0?E0(g,this.objId,this.scope):g},set:function(y){y=y.toString(),g=this instanceof ir==0?y.substr(0,1)==="("?_l(y.substr(1,y.length-2)):_l(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ir==1?_l(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof ir==1?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ir==0?E0(f,this.objId,this.scope):f},set:function(y){y=y.toString(),f=this instanceof ir==0?y.substr(0,1)==="("?_l(y.substr(1,y.length-2)):_l(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ir==1?_l(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof ir==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(y){y=!!y,S=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(y){_=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,1)},set:function(y){y?this.Ff=Dn(this.Ff,1):this.Ff=Mn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,2)},set:function(y){y?this.Ff=Dn(this.Ff,2):this.Ff=Mn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,3)},set:function(y){y?this.Ff=Dn(this.Ff,3):this.Ff=Mn(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');k=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(k){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Qr(us,Ss);var tc=function(){us.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _j(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,18)},set:function(n){n?this.Ff=Dn(this.Ff,18):this.Ff=Mn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Dn(this.Ff,19):this.Ff=Mn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,20)},set:function(n){n?(this.Ff=Dn(this.Ff,20),t.sort()):this.Ff=Mn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,22)},set:function(n){n?this.Ff=Dn(this.Ff,22):this.Ff=Mn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(n){n?this.Ff=Dn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,27)},set:function(n){n?this.Ff=Dn(this.Ff,27):this.Ff=Mn(this.Ff,27)}}),this.hasAppearanceStream=!1};Qr(tc,us);var nc=function(){tc.call(this),this.fontName="helvetica",this.combo=!1};Qr(nc,tc);var rc=function(){nc.call(this),this.combo=!0};Qr(rc,nc);var mf=function(){rc.call(this),this.edit=!0};Qr(mf,rc);var ir=function(){us.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,15)},set:function(n){n?this.Ff=Dn(this.Ff,15):this.Ff=Mn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,16)},set:function(n){n?this.Ff=Dn(this.Ff,16):this.Ff=Mn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,17)},set:function(n){n?this.Ff=Dn(this.Ff,17):this.Ff=Mn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(n){n?this.Ff=Dn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+rl(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ht(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Qr(ir,us);var gf=function(){ir.call(this),this.pushButton=!0};Qr(gf,ir);var ic=function(){ir.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Qr(ic,ir);var op=function(){var e,t;us.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+rl(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Ht(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Qr(op,us),ic.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ic.prototype.createOption=function(e){var t=new op;return t.Parent=this,t.optionName=e,this.Kids.push(t),d9.call(this.scope,t),t};var vf=function(){ir.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ze.CheckBox.createAppearanceStream()};Qr(vf,ir);var Ho=function(){us.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,13)},set:function(t){t?this.Ff=Dn(this.Ff,13):this.Ff=Mn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,21)},set:function(t){t?this.Ff=Dn(this.Ff,21):this.Ff=Mn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(t){t?this.Ff=Dn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,24)},set:function(t){t?this.Ff=Dn(this.Ff,24):this.Ff=Mn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,25)},set:function(t){t?this.Ff=Dn(this.Ff,25):this.Ff=Mn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(t){t?this.Ff=Dn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Qr(Ho,us);var yf=function(){Ho.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,14)},set:function(e){e?this.Ff=Dn(this.Ff,14):this.Ff=Mn(this.Ff,14)}}),this.password=!0};Qr(yf,Ho);var ze={CheckBox:{createAppearanceStream:function(){return{N:{On:ze.CheckBox.YesNormal},D:{On:ze.CheckBox.YesPushDown,Off:ze.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ws(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=u1(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+wt(ze.internal.getWidth(e))+" "+wt(ze.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+wt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=ws(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=ze.internal.getHeight(e),a=ze.internal.getWidth(e),o=u1(e,e.caption);return i.push("1 g"),i.push("0 0 "+wt(a)+" "+wt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+wt(a-1)+" "+wt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+wt(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ws(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wt(ze.internal.getWidth(e))+" "+wt(ze.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ze.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ze.RadioButton.Circle.YesNormal,t.D[e]=ze.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ws(e);t.scope=e.scope;var n=[],r=ze.internal.getWidth(e)<=ze.internal.getHeight(e)?ze.internal.getWidth(e)/4:ze.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=ze.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Pa(ze.internal.getWidth(e)/2)+" "+Pa(ze.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ws(e);t.scope=e.scope;var n=[],r=ze.internal.getWidth(e)<=ze.internal.getHeight(e)?ze.internal.getWidth(e)/4:ze.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ze.internal.Bezier_C).toFixed(5)),a=Number((r*ze.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pa(ze.internal.getWidth(e)/2)+" "+Pa(ze.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Pa(ze.internal.getWidth(e)/2)+" "+Pa(ze.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ws(e);t.scope=e.scope;var n=[],r=ze.internal.getWidth(e)<=ze.internal.getHeight(e)?ze.internal.getWidth(e)/4:ze.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ze.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pa(ze.internal.getWidth(e)/2)+" "+Pa(ze.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ze.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ze.RadioButton.Cross.YesNormal,t.D[e]=ze.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ws(e);t.scope=e.scope;var n=[],r=ze.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+wt(ze.internal.getWidth(e)-2)+" "+wt(ze.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(wt(r.x1.x)+" "+wt(r.x1.y)+" m"),n.push(wt(r.x2.x)+" "+wt(r.x2.y)+" l"),n.push(wt(r.x4.x)+" "+wt(r.x4.y)+" m"),n.push(wt(r.x3.x)+" "+wt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ws(e);t.scope=e.scope;var n=ze.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+wt(ze.internal.getWidth(e))+" "+wt(ze.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+wt(ze.internal.getWidth(e)-2)+" "+wt(ze.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(wt(n.x1.x)+" "+wt(n.x1.y)+" m"),r.push(wt(n.x2.x)+" "+wt(n.x2.y)+" l"),r.push(wt(n.x4.x)+" "+wt(n.x4.y)+" m"),r.push(wt(n.x3.x)+" "+wt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ws(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wt(ze.internal.getWidth(e))+" "+wt(ze.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};ze.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ze.internal.getWidth(e),n=ze.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},ze.internal.getWidth=function(e){var t=0;return Ht(e)==="object"&&(t=tx(e.Rect[2])),t},ze.internal.getHeight=function(e){var t=0;return Ht(e)==="object"&&(t=tx(e.Rect[3])),t};var d9=jn.addField=function(e){if(u9(this,e),!(e instanceof us))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};jn.AcroFormChoiceField=tc,jn.AcroFormListBox=nc,jn.AcroFormComboBox=rc,jn.AcroFormEditBox=mf,jn.AcroFormButton=ir,jn.AcroFormPushButton=gf,jn.AcroFormRadioButton=ic,jn.AcroFormCheckBox=vf,jn.AcroFormTextField=Ho,jn.AcroFormPasswordField=yf,jn.AcroFormAppearance=ze,jn.AcroForm={ChoiceField:tc,ListBox:nc,ComboBox:rc,EditBox:mf,Button:ir,PushButton:gf,RadioButton:ic,CheckBox:vf,TextField:Ho,PasswordField:yf,Appearance:ze},et.AcroForm={ChoiceField:tc,ListBox:nc,ComboBox:rc,EditBox:mf,Button:ir,PushButton:gf,RadioButton:ic,CheckBox:vf,TextField:Ho,PasswordField:yf,Appearance:ze};function jj(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(R,P){var K,G,Z,le,de,X=n;if((P=P||n)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(q(R))for(de in r)for(Z=r[de],K=0;K<Z.length;K+=1){for(le=!0,G=0;G<Z[K].length;G+=1)if(Z[K][G]!==void 0&&Z[K][G]!==R[G]){le=!1;break}if(le===!0){X=de;break}}else for(de in r)for(Z=r[de],K=0;K<Z.length;K+=1){for(le=!0,G=0;G<Z[K].length;G+=1)if(Z[K][G]!==void 0&&Z[K][G]!==R.charCodeAt(G)){le=!1;break}if(le===!0){X=de;break}}return X===n&&P!==n&&(X=P),X},s=function R(P){for(var K=this.internal.write,G=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:P.width}),le.push({key:"Height",value:P.height}),P.colorSpace===y.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===y.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)&&P.transparency.length>0){for(var de="",X=0,ae=P.transparency.length;X<ae;X++)de+=P.transparency[X]+" "+P.transparency[X]+" ";le.push({key:"Mask",value:"["+de+"]"})}P.sMask!==void 0&&le.push({key:"SMask",value:P.objectId+1+" 0 R"});var re=P.filter!==void 0?["/"+P.filter]:void 0;if(G({data:P.data,additionalKeyValues:le,alreadyAppliedFilters:re,objectId:P.objectId}),K("endobj"),"sMask"in P&&P.sMask!==void 0){var ie,N=(ie=P.sMaskBitsPerComponent)!==null&&ie!==void 0?ie:P.bitsPerComponent,M={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:N,data:P.sMask};"filter"in P&&(M.decodeParameters="/Predictor ".concat(P.predictor," /Colors 1 /BitsPerComponent ").concat(N," /Columns ").concat(P.width),M.filter=P.filter),R.call(this,M)}if(P.colorSpace===y.INDEXED){var $=this.internal.newObject();G({data:F(new Uint8Array(P.palette)),objectId:$}),K("endobj")}},a=function(){var R=this.internal.collections[t+"images"];for(var P in R)s.call(this,R[P])},o=function(){var R,P=this.internal.collections[t+"images"],K=this.internal.write;for(var G in P)K("/I"+(R=P[G]).index,R.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var R=this.internal.collections[t+"images"];return l.call(this),R},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(R){return typeof e["process"+R.toUpperCase()]=="function"},g=function(R){return Ht(R)==="object"&&R.nodeType===1},f=function(R,P){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var K=""+R.getAttribute("src");if(K.indexOf("data:image/")===0)return pf(unescape(K).split("base64,").pop());var G=e.loadFile(K,!0);if(G!==void 0)return G}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var Z;switch(P){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return pf(R.toDataURL(Z,1).split("base64,").pop())}},_=function(R){var P=this.internal.collections[t+"images"];if(P){for(var K in P)if(R===P[K].alias)return P[K]}},S=function(R,P,K){return R||P||(R=-96,P=-96),R<0&&(R=-1*K.width*72/R/this.internal.scaleFactor),P<0&&(P=-1*K.height*72/P/this.internal.scaleFactor),R===0&&(R=P*K.width/K.height),P===0&&(P=R*K.height/K.width),[R,P]},k=function(R,P,K,G,Z,le){var de=S.call(this,K,G,Z),X=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,re=c.call(this);if(K=de[0],G=de[1],re[Z.index]=Z,le){le*=Math.PI/180;var ie=Math.cos(le),N=Math.sin(le),M=function(Q){return Q.toFixed(4)},$=[M(ie),M(N),M(-1*N),M(ie),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,X(R),ae(P+G),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([X(K),"0","0",X(G),"0","0","cm"].join(" "))):this.internal.write([X(K),"0","0",X(G),X(R),ae(P+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(R){var P,K,G=0;if(typeof R=="string")for(K=R.length,P=0;P<K;P++)G=(G<<5)-G+R.charCodeAt(P),G|=0;else if(q(R))for(K=R.byteLength/2,P=0;P<K;P++)G=(G<<5)-G+R[P],G|=0;return G},E=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var P=!0;return R.length===0&&(P=!1),R.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(P=!1),P},B=e.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var P=R.indexOf(",");return P<0?null:R.substring(0,P).trim().endsWith("base64")?R.substring(P+1):null};e.__addimage__.isArrayBuffer=function(R){return R instanceof ArrayBuffer};var q=e.__addimage__.isArrayBufferView=function(R){return R instanceof Int8Array||R instanceof Uint8Array||R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array},z=e.__addimage__.binaryStringToUint8Array=function(R){for(var P=R.length,K=new Uint8Array(P),G=0;G<P;G++)K[G]=R.charCodeAt(G);return K},F=e.__addimage__.arrayBufferToBinaryString=function(R){for(var P="",K=q(R)?R:new Uint8Array(R),G=0;G<K.length;G+=8192)P+=String.fromCharCode.apply(null,K.subarray(G,G+8192));return P};e.addImage=function(){var R,P,K,G,Z,le,de,X,ae;if(typeof arguments[1]=="number"?(P=n,K=arguments[1],G=arguments[2],Z=arguments[3],le=arguments[4],de=arguments[5],X=arguments[6],ae=arguments[7]):(P=arguments[1],K=arguments[2],G=arguments[3],Z=arguments[4],le=arguments[5],de=arguments[6],X=arguments[7],ae=arguments[8]),Ht(R=arguments[0])==="object"&&!g(R)&&"imageData"in R){var re=R;R=re.imageData,P=re.format||P||n,K=re.x||K||0,G=re.y||G||0,Z=re.w||re.width||Z,le=re.h||re.height||le,de=re.alias||de,X=re.compression||X,ae=re.rotation||re.angle||ae}var ie=this.internal.getFilters();if(X===void 0&&ie.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(K)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var N=I.call(this,R,P,de,X);return k.call(this,K,G,Z,le,N,ae),this};var I=function(R,P,K,G){var Z,le,de;if(typeof R=="string"&&i(R)===n){R=unescape(R);var X=J(R,!1);(X!==""||(X=e.loadFile(R,!0))!==void 0)&&(R=X)}if(g(R)&&(R=f(R,P)),P=i(R,P),!p(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((de=K)==null||de.length===0)&&(K=function(ae){return typeof ae=="string"||q(ae)?w(ae):q(ae.data)?w(ae.data):null}(R)),(Z=_.call(this,K))||(R instanceof Uint8Array||P==="RGBA"||(le=R,R=z(R)),Z=this["process"+P.toUpperCase()](R,d.call(this),K,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in e.image_compression?ae:x.NONE}(G),le)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},J=e.__addimage__.convertBase64ToBinaryString=function(R,P){P=typeof P!="boolean"||P;var K,G="";if(typeof R=="string"){var Z;K=(Z=B(R))!==null&&Z!==void 0?Z:R;try{G=pf(K)}catch(le){if(P)throw E(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(R){var P,K,G="";if(g(R)&&(R=f(R)),typeof R=="string"&&i(R)===n&&((G=J(R,!1))===""&&(G=e.loadFile(R)||""),R=G),K=i(R),!p(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(R instanceof Uint8Array||(R=z(R)),!(P=this["process"+K.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=K,P}})(et.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};et.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){r=c[g];var f=this.internal.pdfEscape,_=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(S.objId),x=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+f(y(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(y(x))+") >>",S.content=s;var w=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(S.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var E=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(_(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var B=this.annotations._nameMap[r.options.name];r.options.pageNumber=B.page,r.options.top=B.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var q=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+q+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,o,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(n,o).length;a=Math.ceil(c*d)}else o=l,a=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,o,a,s),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(et.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(S){return t[S.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},o=e.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&i.indexOf(S.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(S){var k=0,y=n,x="",w=0;for(k=0;k<S.length;k+=1)y[S.charCodeAt(k)]!==void 0?(w++,typeof(y=y[S.charCodeAt(k)])=="number"&&(x+=String.fromCharCode(y),y=n,w=0),k===S.length-1&&(y=n,x+=S.charAt(k-(w-1)),k-=w-1,w=0)):(y=n,x+=S.charAt(k-w),k-=w,w=0);return x};e.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(S,k,y){return a(S)?s(S)===!1?-1:!c(S)||!a(k)&&!a(y)||!a(y)&&o(k)||o(S)&&!a(k)||o(S)&&l(k)||o(S)&&o(k)?0:d(S)&&a(k)&&!o(k)&&a(y)&&c(y)?3:o(S)||!a(y)?1:2:-1},f=function(S){var k=0,y=0,x=0,w="",E="",B="",q=(S=S||"").split("\\s+"),z=[];for(k=0;k<q.length;k+=1){for(z.push(""),y=0;y<q[k].length;y+=1)w=q[k][y],E=q[k][y-1],B=q[k][y+1],a(w)?(x=g(w,E,B),z[k]+=x!==-1?String.fromCharCode(t[w.charCodeAt(0)][x]):w):z[k]+=w;z[k]=p(z[k])}return z.join(" ")},_=e.__arabicParser__.processArabic=e.processArabic=function(){var S,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(k)){var x=0;for(y=[],x=0;x<k.length;x+=1)Array.isArray(k[x])?y.push([f(k[x][0]),k[x][1],k[x][2]]):y.push([f(k[x])]);S=y}else S=f(k);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};e.events.push(["preProcessText",_])}(et.API),et.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(et.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(S){_=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,f=0,_=0,S=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,E){return w.concat(k.splitTextToSize(E,y))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)f<(S=this.getStringUnitWidth(l[x],{font:p})*d)&&(f=S);return f!==0&&(_=l.length),{w:f/=g,h:Math.max((_*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,f&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,d,p,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var f,_,S,k,y=[],x=[],w=[],E={},B={},q=[],z=[],F=(g=g||{}).autoSize||!1,I=g.printHeaders!==!1,J=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,R=g.margins||Object.assign({width:this.getPageWidth()},t),P=typeof g.padding=="number"?g.padding:3,K=g.headerBackgroundColor||"#c8c8c8",G=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=G,this.setFontSize(J),p==null)x=y=Object.keys(d[0]),w=y.map(function(){return"left"});else if(Array.isArray(p)&&Ht(p[0])==="object")for(y=p.map(function(re){return re.name}),x=p.map(function(re){return re.prompt||re.name||""}),w=p.map(function(re){return re.align||"left"}),f=0;f<p.length;f+=1)B[p[f].name]=.7499990551181103*p[f].width;else Array.isArray(p)&&typeof p[0]=="string"&&(x=y=p,w=y.map(function(){return"left"}));if(F||Array.isArray(p)&&typeof p[0]=="string")for(f=0;f<y.length;f+=1){for(E[k=y[f]]=d.map(function(re){return re[k]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=E[k],this.setFont(void 0,"normal"),S=0;S<_.length;S+=1)q.push(this.getTextDimensions(_[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[k]=Math.max.apply(null,q)+P+P,q=[]}if(I){var Z={};for(f=0;f<y.length;f+=1)Z[y[f]]={},Z[y[f]].text=x[f],Z[y[f]].align=w[f];var le=o.call(this,Z,B);z=y.map(function(re){return new s(l,c,B[re],le,Z[re].text,void 0,Z[re].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var de=p.reduce(function(re,ie){return re[ie.name]=ie.align,re},{});for(f=0;f<d.length;f+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:f,data:d[f]},this);var X=o.call(this,d[f],B);for(S=0;S<y.length;S+=1){var ae=d[f][y[S]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:f,col:S,data:ae},this),a.call(this,new s(l,c,B[y[S]],X,ae,f+2,de[y[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(f){var _=l[f];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*p/g+d+d},this).reduce(function(f,_){return Math.max(f,_)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(_)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(et.API);var Nj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ej=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],d1=jj(Ej),Aj=[100,200,300,400,500,600,700,800,900],h9=jj(Aj);function A0(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return Nj[s=s||"normal"]?s:"normal"}(e.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(e.weight),i=function(s){return typeof d1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function nx(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var f9={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},rx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ix(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function sx(e){return e.trimLeft()}function p9(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function m9(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Bh,ax,ox,Sl,Uh,lx,cx,ux,dx=["times"];function hx(e,t,n,r,i){var s=4,a=px;switch(i){case et.API.image_compression.FAST:s=1,a=fx;break;case et.API.image_compression.MEDIUM:s=6,a=mx;break;case et.API.image_compression.SLOW:s=9,a=gx}e=function(l,c,d,p){for(var g,f=l.length/c,_=new Uint8Array(l.length+f),S=[g9,fx,px,mx,gx],k=0;k<f;k+=1){var y=k*c,x=l.subarray(y,y+c);if(p)_.set(p(x,d,g),y+k);else{for(var w=S.length,E=[],B=0;B<w;B+=1)E[B]=S[B](x,d,g);var q=y9(E.concat());_.set(E[q],y+k)}g=x}return _}(e,t,Math.ceil(n*r/8),a);var o=i1(e,{level:s});return et.API.__addimage__.arrayBufferToBinaryString(o)}function g9(e){var t=Array.apply([],e);return t.unshift(0),t}function fx(e,t){var n=e.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=e[i-t]||0;r[i+1]=e[i]-s+256&255}return r}function px(e,t,n){var r=e.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var a=n&&n[s]||0;i[s+1]=e[s]-a+256&255}return i}function mx(e,t,n){var r=e.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var a=e[s-t]||0,o=n&&n[s]||0;i[s+1]=e[s]+256-(a+o>>>1)&255}return i}function gx(e,t,n){var r=e.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var a=v9(e[s-t]||0,n&&n[s]||0,n&&n[s-t]||0);i[s+1]=e[s]-a+256&255}return i}function v9(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),s=Math.abs(e+t-n-n);return r<=i&&r<=s?e:i<=s?t:n}function y9(e){var t=e.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function C0(e,t,n){var r=t*n,i=Math.floor(r/8),s=16-(r-8*i+n),a=(1<<n)-1;return Cj(e,i)>>s&a}function vx(e,t,n,r){var i=n*r,s=Math.floor(i/8),a=16-(i-8*s+r),o=(1<<r)-1,l=(t&o)<<a;(function(c,d,p){if(d+1<c.byteLength)c.setUint16(d,p,!1);else{var g=p>>8&255;c.setUint8(d,g)}})(e,s,Cj(e,s)&~(o<<a)&65535|l)}function Cj(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function b9(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<1+(7&i);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=a,t+=3*a);var c=!0,d=[],p=0,g=null,f=0,_=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,_=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var S=e[t++];p=e[t++]|e[t++]<<8,g=e[t++],1&S||(g=null),f=S>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,E=e[t++],B=E>>6&1,q=1<<1+(7&E),z=o,F=l,I=!1;E>>7&&(I=!0,z=t,F=q,t+=3*q);var J=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}d.push({x:k,y,width:x,height:w,has_local_palette:I,palette_offset:z,palette_size:F,data_offset:J,data_length:t-J,transparent_index:g,interlaced:!!B,delay:p,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return _},this.frameInfo=function(P){if(P<0||P>=d.length)throw new Error("Frame index out of range.");return d[P]},this.decodeAndBlitFrameBGRA=function(P,K){var G=this.frameInfo(P),Z=G.width*G.height,le=new Uint8Array(Z);yx(e,G.data_offset,le,Z);var de=G.palette_offset,X=G.transparent_index;X===null&&(X=256);var ae=G.width,re=n-ae,ie=ae,N=4*(G.y*n+G.x),M=4*((G.y+G.height)*n+G.x),$=N,Q=4*re;G.interlaced===!0&&(Q+=4*n*7);for(var te=8,oe=0,me=le.length;oe<me;++oe){var he=le[oe];if(ie===0&&(ie=ae,($+=Q)>=M&&(Q=4*re+4*n*(te-1),$=N+(ae+re)*(te<<1),te>>=1)),he===X)$+=4;else{var ge=e[de+3*he],_e=e[de+3*he+1],Re=e[de+3*he+2];K[$++]=Re,K[$++]=_e,K[$++]=ge,K[$++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(P,K){var G=this.frameInfo(P),Z=G.width*G.height,le=new Uint8Array(Z);yx(e,G.data_offset,le,Z);var de=G.palette_offset,X=G.transparent_index;X===null&&(X=256);var ae=G.width,re=n-ae,ie=ae,N=4*(G.y*n+G.x),M=4*((G.y+G.height)*n+G.x),$=N,Q=4*re;G.interlaced===!0&&(Q+=4*n*7);for(var te=8,oe=0,me=le.length;oe<me;++oe){var he=le[oe];if(ie===0&&(ie=ae,($+=Q)>=M&&(Q=4*re+4*n*(te-1),$=N+(ae+re)*(te<<1),te>>=1)),he===X)$+=4;else{var ge=e[de+3*he],_e=e[de+3*he+1],Re=e[de+3*he+2];K[$++]=ge,K[$++]=_e,K[$++]=Re,K[$++]=255}--ie}}}function yx(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,d=0,p=0,g=0,f=e[t++],_=new Int32Array(4096),S=null;;){for(;d<16&&f!==0;)p|=e[t++]<<d,d+=8,f===1?f=e[t++]:--f;if(d<l)break;var k=p&c;if(p>>=l,d-=l,k!==s){if(k===a)break;for(var y=k<o?k:S,x=0,w=y;w>s;)w=_[w]>>8,++x;var E=w;if(g+x+(y!==k?1:0)>r)return void Jt.log("Warning, gif stream longer than expected.");n[g++]=E;var B=g+=x;for(y!==k&&(n[g++]=E),w=y;x--;)w=_[w],n[--B]=255&w,w>>=8;S!==null&&o<4096&&(_[o++]=S<<8|E,o>=c+1&&l<12&&(++l,c=c<<1|1)),S=k}else o=a+1,c=(1<<(l=i+1))-1,S=null}return g!==r&&Jt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function P0(e){var t,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),f=new Array(64),_=new Array(64),S=[],k=0,y=7,x=new Array(64),w=new Array(64),E=new Array(64),B=new Array(256),q=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(N,M){for(var $=0,Q=0,te=new Array,oe=1;oe<=16;oe++){for(var me=1;me<=N[oe];me++)te[M[Q]]=[],te[M[Q]][0]=$,te[M[Q]][1]=oe,Q++,$++;$*=2}return te}function de(N){for(var M=N[0],$=N[1]-1;$>=0;)M&1<<$&&(k|=1<<y),$--,--y<0&&(k==255?(X(255),X(0)):X(k),y=7,k=0)}function X(N){S.push(N)}function ae(N){X(N>>8&255),X(255&N)}function re(N,M,$,Q,te){for(var oe,me=te[0],he=te[240],ge=function(Ee,Ke){var Oe,ut,Be,Ct,Ne,Me,ot,pt,rt,ct,De=0;for(rt=0;rt<8;++rt){Oe=Ee[De],ut=Ee[De+1],Be=Ee[De+2],Ct=Ee[De+3],Ne=Ee[De+4],Me=Ee[De+5],ot=Ee[De+6];var $t=Oe+(pt=Ee[De+7]),Rt=Oe-pt,Ge=ut+ot,gt=ut-ot,Mt=Be+Me,at=Be-Me,Nt=Ct+Ne,vt=Ct-Ne,pn=$t+Nt,An=$t-Nt,Bt=Ge+Mt,dt=Ge-Mt;Ee[De]=pn+Bt,Ee[De+4]=pn-Bt;var Ot=.707106781*(dt+An);Ee[De+2]=An+Ot,Ee[De+6]=An-Ot;var Ps=.382683433*((pn=vt+at)-(dt=gt+Rt)),Vn=.5411961*pn+Ps,Ui=1.306562965*dt+Ps,Si=.707106781*(Bt=at+gt),st=Rt+Si,qi=Rt-Si;Ee[De+5]=qi+Vn,Ee[De+3]=qi-Vn,Ee[De+1]=st+Ui,Ee[De+7]=st-Ui,De+=8}for(De=0,rt=0;rt<8;++rt){Oe=Ee[De],ut=Ee[De+8],Be=Ee[De+16],Ct=Ee[De+24],Ne=Ee[De+32],Me=Ee[De+40],ot=Ee[De+48];var $i=Oe+(pt=Ee[De+56]),Br=Oe-pt,Ur=ut+ot,Zt=ut-ot,Et=Be+Me,Hn=Be-Me,Ls=Ct+Ne,qr=Ct-Ne,pr=$i+Ls,ti=$i-Ls,ki=Ur+Et,ni=Ur-Et;Ee[De]=pr+ki,Ee[De+32]=pr-ki;var $r=.707106781*(ni+ti);Ee[De+16]=ti+$r,Ee[De+48]=ti-$r;var hs=.382683433*((pr=qr+Hn)-(ni=Zt+Br)),zr=.5411961*pr+hs,Ts=1.306562965*ni+hs,fs=.707106781*(ki=Hn+Zt),ua=Br+fs,Rs=Br-fs;Ee[De+40]=Rs+zr,Ee[De+24]=Rs-zr,Ee[De+8]=ua+Ts,Ee[De+56]=ua-Ts,De++}for(rt=0;rt<64;++rt)ct=Ee[rt]*Ke[rt],f[rt]=ct>0?ct+.5|0:ct-.5|0;return f}(N,M),_e=0;_e<64;++_e)_[z[_e]]=ge[_e];var Re=_[0]-$;$=_[0],Re==0?de(Q[0]):(de(Q[g[oe=32767+Re]]),de(p[oe]));for(var Pe=63;Pe>0&&_[Pe]==0;)Pe--;if(Pe==0)return de(me),$;for(var ve,Y=1;Y<=Pe;){for(var _t=Y;_[Y]==0&&Y<=Pe;)++Y;var He=Y-_t;if(He>=16){ve=He>>4;for(var nt=1;nt<=ve;++nt)de(he);He&=15}oe=32767+_[Y],de(te[(He<<4)+g[oe]]),de(p[oe]),Y++}return Pe!=63&&de(me),$}function ie(N){N=Math.min(Math.max(N,1),100),s!=N&&(function(M){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var te=a(($[Q]*M+50)/100);te=Math.min(Math.max(te,1),255),o[z[Q]]=te}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var he=a((oe[me]*M+50)/100);he=Math.min(Math.max(he,1),255),l[z[me]]=he}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Re=0;Re<8;Re++)for(var Pe=0;Pe<8;Pe++)c[_e]=1/(o[z[_e]]*ge[Re]*ge[Pe]*8),d[_e]=1/(l[z[_e]]*ge[Re]*ge[Pe]*8),_e++}(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),s=N)}this.encode=function(N,M){M&&ie(M),S=new Array,k=0,y=7,ae(65496),ae(65504),ae(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),ae(1),ae(1),X(0),X(0),function(){ae(65499),ae(132),X(0);for(var ut=0;ut<64;ut++)X(o[ut]);X(1);for(var Be=0;Be<64;Be++)X(l[Be])}(),function(ut,Be){ae(65472),ae(17),X(8),ae(Be),ae(ut),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(N.width,N.height),function(){ae(65476),ae(418),X(0);for(var ut=0;ut<16;ut++)X(F[ut+1]);for(var Be=0;Be<=11;Be++)X(I[Be]);X(16);for(var Ct=0;Ct<16;Ct++)X(J[Ct+1]);for(var Ne=0;Ne<=161;Ne++)X(R[Ne]);X(1);for(var Me=0;Me<16;Me++)X(P[Me+1]);for(var ot=0;ot<=11;ot++)X(K[ot]);X(17);for(var pt=0;pt<16;pt++)X(G[pt+1]);for(var rt=0;rt<=161;rt++)X(Z[rt])}(),ae(65498),ae(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var $=0,Q=0,te=0;k=0,y=7,this.encode.displayName="_encode_";for(var oe,me,he,ge,_e,Re,Pe,ve,Y,_t=N.data,He=N.width,nt=N.height,Ee=4*He,Ke=0;Ke<nt;){for(oe=0;oe<Ee;){for(_e=Ee*Ke+oe,Pe=-1,ve=0,Y=0;Y<64;Y++)Re=_e+(ve=Y>>3)*Ee+(Pe=4*(7&Y)),Ke+ve>=nt&&(Re-=Ee*(Ke+1+ve-nt)),oe+Pe>=Ee&&(Re-=oe+Pe-Ee+4),me=_t[Re++],he=_t[Re++],ge=_t[Re++],x[Y]=(q[me]+q[he+256|0]+q[ge+512|0]>>16)-128,w[Y]=(q[me+768|0]+q[he+1024|0]+q[ge+1280|0]>>16)-128,E[Y]=(q[me+1280|0]+q[he+1536|0]+q[ge+1792|0]>>16)-128;$=re(x,c,$,t,r),Q=re(w,d,Q,n,i),te=re(E,d,te,n,i),oe+=32}Ke+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,de(Oe)}return ae(65497),new Uint8Array(S)},e=e||50,function(){for(var N=String.fromCharCode,M=0;M<256;M++)B[M]=N(M)}(),t=le(F,I),n=le(P,K),r=le(J,R),i=le(G,Z),function(){for(var N=1,M=2,$=1;$<=15;$++){for(var Q=N;Q<M;Q++)g[32767+Q]=$,p[32767+Q]=[],p[32767+Q][1]=$,p[32767+Q][0]=Q;for(var te=-(M-1);te<=-N;te++)g[32767+te]=$,p[32767+te]=[],p[32767+te][1]=$,p[32767+te][0]=M-1+te;N<<=1,M<<=1}}(),function(){for(var N=0;N<256;N++)q[N]=19595*N,q[N+256|0]=38470*N,q[N+512|0]=7471*N+32768,q[N+768|0]=-11059*N,q[N+1024|0]=-21709*N,q[N+1280|0]=32768*N+8421375,q[N+1536|0]=-27439*N,q[N+1792|0]=-5329*N}(),ie(e)}/**
* @license
* Copyright (c) 2017 Aras Abbasi
*
* Licensed under the MIT License.
* http://opensource.org/licenses/mit-license
*/function Yi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bx(e){function t(I){if(!I)throw Error("assert :P")}function n(I,J,R){for(var P=0;4>P;P++)if(I[J+P]!=R.charCodeAt(P))return!0;return!1}function r(I,J,R,P,K){for(var G=0;G<K;G++)I[J+G]=R[P+G]}function i(I,J,R,P){for(var K=0;K<P;K++)I[J+K]=R}function s(I){return new Int32Array(I)}function a(I,J){for(var R=[],P=0;P<I;P++)R.push(new J);return R}function o(I,J){var R=[];return function P(K,G,Z){for(var le=Z[G],de=0;de<le&&(K.push(Z.length>G+1?[]:new J),!(Z.length<G+1));de++)P(K[de],G+1,Z)}(R,0,I),R}var l=function(){var I=this;function J(h,m){for(var b=1<<m-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function R(h,m,b,j,C){t(!(j%b));do h[m+(j-=b)]=C;while(0<j)}function P(h,m,b,j,C){if(t(2328>=C),512>=C)var L=s(512);else if((L=s(C))==null)return 0;return function(O,D,U,V,ne,pe){var H,se,ue=D,ye=1<<U,fe=s(16),be=s(16);for(t(ne!=0),t(V!=null),t(O!=null),t(0<U),se=0;se<ne;++se){if(15<V[se])return 0;++fe[V[se]]}if(fe[0]==ne)return 0;for(be[1]=0,H=1;15>H;++H){if(fe[H]>1<<H)return 0;be[H+1]=be[H]+fe[H]}for(se=0;se<ne;++se)H=V[se],0<V[se]&&(pe[be[H]++]=se);if(be[15]==1)return(V=new K).g=0,V.value=pe[0],R(O,ue,1,ye,V),ye;var xe,Ae=-1,Se=ye-1,tt=0,$e=1,kt=1,Xe=1<<U;for(se=0,H=1,ne=2;H<=U;++H,ne<<=1){if($e+=kt<<=1,0>(kt-=fe[H]))return 0;for(;0<fe[H];--fe[H])(V=new K).g=H,V.value=pe[se++],R(O,ue+tt,ne,Xe,V),tt=J(tt,H)}for(H=U+1,ne=2;15>=H;++H,ne<<=1){if($e+=kt<<=1,0>(kt-=fe[H]))return 0;for(;0<fe[H];--fe[H]){if(V=new K,(tt&Se)!=Ae){for(ue+=Xe,xe=1<<(Ae=H)-U;15>Ae&&!(0>=(xe-=fe[Ae]));)++Ae,xe<<=1;ye+=Xe=1<<(xe=Ae-U),O[D+(Ae=tt&Se)].g=xe+U,O[D+Ae].value=ue-D-Ae}V.g=H-U,V.value=pe[se++],R(O,ue+(tt>>U),ne,Xe,V),tt=J(tt,H)}}return $e!=2*be[15]-1?0:ye}(h,m,b,j,C,L)}function K(){this.value=this.g=0}function G(){this.value=this.g=0}function Z(){this.G=a(5,K),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(wo,G)}function le(h,m,b,j){t(h!=null),t(m!=null),t(2147483648>j),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=b,h.Jd=m,h.Yc=b+j,h.Zc=4<=j?b+j-4+1:b,me(h)}function de(h,m){for(var b=0;0<m--;)b|=ge(h,128)<<m;return b}function X(h,m){var b=de(h,m);return he(h)?-b:b}function ae(h,m,b,j){var C,L=0;for(t(h!=null),t(m!=null),t(4294967288>j),h.Sb=j,h.Ra=0,h.u=0,h.h=0,4<j&&(j=4),C=0;C<j;++C)L+=m[b+C]<<8*C;h.Ra=L,h.bb=j,h.oa=m,h.pa=b}function re(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<ma-8>>>0,++h.bb,h.u-=8;Q(h)&&(h.h=1,h.u=0)}function ie(h,m){if(t(0<=m),!h.h&&m<=ii){var b=$(h)&ri[m];return h.u+=m,re(h),b}return h.h=1,h.u=0}function N(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(h){return h.Ra>>>(h.u&ma-1)>>>0}function Q(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>ma}function te(h,m){h.u=m,h.h=Q(h)}function oe(h){h.u>=Bs&&(t(h.u>=Bs),re(h))}function me(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function he(h){return de(h,1)}function ge(h,m){var b=h.Ca;0>h.b&&me(h);var j=h.b,C=b*m>>>8,L=(h.I>>>j>C)+0;for(L?(b-=C,h.I-=C+1<<j>>>0):b=C+1,j=b,C=0;256<=j;)C+=8,j>>=8;return j=7^C+ga[j],h.b-=j,h.Ca=(b<<j)-1,L}function _e(h,m,b){h[m+0]=b>>24&255,h[m+1]=b>>16&255,h[m+2]=b>>8&255,h[m+3]=255&b}function Re(h,m){return h[m+0]|h[m+1]<<8}function Pe(h,m){return Re(h,m)|h[m+2]<<16}function ve(h,m){return Re(h,m)|Re(h,m+2)<<16}function Y(h,m){var b=1<<m;return t(h!=null),t(0<m),h.X=s(b),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function _t(h,m){t(h!=null),t(m!=null),t(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function He(){this.X=[],this.Xa=this.Mb=0}function nt(h,m,b,j){t(b!=null),t(j!=null);var C=b[0],L=j[0];return C==0&&(C=(h*L+m/2)/m),L==0&&(L=(m*C+h/2)/h),0>=C||0>=L?0:(b[0]=C,j[0]=L,1)}function Ee(h,m){return h+(1<<m)-1>>>m}function Ke(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function Oe(h,m){I[m]=function(b,j,C,L,O,D,U){var V;for(V=0;V<O;++V){var ne=I[h](D[U+V-1],C,L+V);D[U+V]=Ke(b[j+V],ne)}}}function ut(){this.ud=this.hd=this.jd=0}function Be(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function Ct(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ne(h,m){return Ct(h+(h-m+.5>>1))}function Me(h,m,b){return Math.abs(m-b)-Math.abs(h-b)}function ot(h,m,b,j,C,L,O){for(j=L[O-1],b=0;b<C;++b)L[O+b]=j=Ke(h[m+b],j)}function pt(h,m,b,j,C){var L;for(L=0;L<b;++L){var O=h[m+L],D=O>>8&255,U=16711935&(U=(U=16711935&O)+((D<<16)+D));j[C+L]=(4278255360&O)+U>>>0}}function rt(h,m){m.jd=255&h,m.hd=h>>8&255,m.ud=h>>16&255}function ct(h,m,b,j,C,L){var O;for(O=0;O<j;++O){var D=m[b+O],U=D>>>8,V=D,ne=255&(ne=(ne=D>>>16)+((h.jd<<24>>24)*(U<<24>>24)>>>5));V=255&(V=(V+=(h.hd<<24>>24)*(U<<24>>24)>>>5)+((h.ud<<24>>24)*(ne<<24>>24)>>>5)),C[L+O]=(4278255360&D)+(ne<<16)+V}}function De(h,m,b,j,C){I[m]=function(L,O,D,U,V,ne,pe,H,se){for(U=pe;U<H;++U)for(pe=0;pe<se;++pe)V[ne++]=C(D[j(L[O++])])},I[h]=function(L,O,D,U,V,ne,pe){var H=8>>L.b,se=L.Ea,ue=L.K[0],ye=L.w;if(8>H)for(L=(1<<L.b)-1,ye=(1<<H)-1;O<D;++O){var fe,be=0;for(fe=0;fe<se;++fe)fe&L||(be=j(U[V++])),ne[pe++]=C(ue[be&ye]),be>>=H}else I["VP8LMapColor"+b](U,V,ue,ye,ne,pe,O,D,se)}}function $t(h,m,b,j,C){for(b=m+b;m<b;){var L=h[m++];j[C++]=L>>16&255,j[C++]=L>>8&255,j[C++]=255&L}}function Rt(h,m,b,j,C){for(b=m+b;m<b;){var L=h[m++];j[C++]=L>>16&255,j[C++]=L>>8&255,j[C++]=255&L,j[C++]=L>>24&255}}function Ge(h,m,b,j,C){for(b=m+b;m<b;){var L=(O=h[m++])>>16&240|O>>12&15,O=240&O|O>>28&15;j[C++]=L,j[C++]=O}}function gt(h,m,b,j,C){for(b=m+b;m<b;){var L=(O=h[m++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;j[C++]=L,j[C++]=O}}function Mt(h,m,b,j,C){for(b=m+b;m<b;){var L=h[m++];j[C++]=255&L,j[C++]=L>>8&255,j[C++]=L>>16&255}}function at(h,m,b,j,C,L){if(L==0)for(b=m+b;m<b;)_e(j,((L=h[m++])[0]>>24|L[1]>>8&65280|L[2]<<8&16711680|L[3]<<24)>>>0),C+=32;else r(j,C,h,m,b)}function Nt(h,m){I[m][0]=I[h+"0"],I[m][1]=I[h+"1"],I[m][2]=I[h+"2"],I[m][3]=I[h+"3"],I[m][4]=I[h+"4"],I[m][5]=I[h+"5"],I[m][6]=I[h+"6"],I[m][7]=I[h+"7"],I[m][8]=I[h+"8"],I[m][9]=I[h+"9"],I[m][10]=I[h+"10"],I[m][11]=I[h+"11"],I[m][12]=I[h+"12"],I[m][13]=I[h+"13"],I[m][14]=I[h+"0"],I[m][15]=I[h+"0"]}function vt(h){return h==tm||h==nm||h==Vd||h==rm}function pn(){this.eb=[],this.size=this.A=this.fb=0}function An(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pn,this.f.kb=new An,this.sd=null}function dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ot(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ps(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Vn(h,m){var b=h.T,j=m.ba.f.RGBA,C=j.eb,L=j.fb+h.ka*j.A,O=Pi[m.ba.S],D=h.y,U=h.O,V=h.f,ne=h.N,pe=h.ea,H=h.W,se=m.cc,ue=m.dc,ye=m.Mc,fe=m.Nc,be=h.ka,xe=h.ka+h.T,Ae=h.U,Se=Ae+1>>1;for(be==0?O(D,U,null,null,V,ne,pe,H,V,ne,pe,H,C,L,null,null,Ae):(O(m.ec,m.fc,D,U,se,ue,ye,fe,V,ne,pe,H,C,L-j.A,C,L,Ae),++b);be+2<xe;be+=2)se=V,ue=ne,ye=pe,fe=H,ne+=h.Rc,H+=h.Rc,L+=2*j.A,O(D,(U+=2*h.fa)-h.fa,D,U,se,ue,ye,fe,V,ne,pe,H,C,L-j.A,C,L,Ae);return U+=h.fa,h.j+xe<h.o?(r(m.ec,m.fc,D,U,Ae),r(m.cc,m.dc,V,ne,Se),r(m.Mc,m.Nc,pe,H,Se),b--):1&xe||O(D,U,null,null,V,ne,pe,H,V,ne,pe,H,C,L+j.A,null,null,Ae),b}function Ui(h,m,b){var j=h.F,C=[h.J];if(j!=null){var L=h.U,O=m.ba.S,D=O==zd||O==Vd;m=m.ba.f.RGBA;var U=[0],V=h.ka;U[0]=h.T,h.Kb&&(V==0?--U[0]:(--V,C[0]-=h.width),h.j+h.ka+h.T==h.o&&(U[0]=h.o-h.j-V));var ne=m.eb;V=m.fb+V*m.A,h=Sy(j,C[0],h.width,L,U,ne,V+(D?0:3),m.A),t(b==U),h&&vt(O)&&Kc(ne,V,D,L,U,m.A)}return 0}function Si(h){var m=h.ma,b=m.ba.S,j=11>b,C=b==qd||b==$d||b==zd||b==em||b==12||vt(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Bc(m.Oa,h,C?11:12))return 0;if(C&&vt(b)&&Id(),h.da)alert("todo:use_scaling");else{if(j){if(m.Ib=Ps,h.Kb){if(b=h.U+1>>1,m.memory=s(h.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=Vn,Id()}}else alert("todo:EmitYUV");C&&(m.Jb=Ui,j&&Ni())}if(j&&!Uy){for(h=0;256>h;++h)S6[h]=89858*(h-128)+Wd>>Hd,N6[h]=-22014*(h-128)+Wd,j6[h]=-45773*(h-128),k6[h]=113618*(h-128)+Wd>>Hd;for(h=Yc;h<am;++h)m=76283*(h-16)+Wd>>Hd,E6[h-Yc]=Cn(m,255),A6[h-Yc]=Cn(m+8>>4,15);Uy=1}return 1}function st(h){var m=h.ma,b=h.U,j=h.T;return t(!(1&h.ka)),0>=b||0>=j?0:(b=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,b),m.Dc+=b,1)}function qi(h){h.ma.memory=null}function $i(h,m,b,j){return ie(h,8)!=47?0:(m[0]=ie(h,14)+1,b[0]=ie(h,14)+1,j[0]=ie(h,1),ie(h,3)!=0?0:!h.h)}function Br(h,m){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+ie(m,b)+1}function Ur(h,m){return 120<m?m-120:1<=(b=((b=c6[m-1])>>4)*h+(8-(15&b)))?b:1;var b}function Zt(h,m,b){var j=$(b),C=h[m+=255&j].g-8;return 0<C&&(te(b,b.u+8),j=$(b),m+=h[m].value,m+=j&(1<<C)-1),te(b,b.u+h[m].g),h[m].value}function Et(h,m,b){return b.g+=h.g,b.value+=h.value<<m>>>0,t(8>=b.g),h.g}function Hn(h,m,b){var j=h.xc;return t((m=j==0?0:h.vc[h.md*(b>>j)+(m>>j)])<h.Wb),h.Ya[m]}function Ls(h,m,b,j){var C=h.ab,L=h.c*m,O=h.C;m=O+m;var D=b,U=j;for(j=h.Ta,b=h.Ua;0<C--;){var V=h.gc[C],ne=O,pe=m,H=D,se=U,ue=(U=j,D=b,V.Ea);switch(t(ne<pe),t(pe<=V.nc),V.hc){case 2:Pn(H,se,(pe-ne)*ue,U,D);break;case 0:var ye=ne,fe=pe,be=U,xe=D,Ae=(Xe=V).Ea;ye==0&&(qc(H,se,null,null,1,be,xe),ot(H,se+1,0,0,Ae-1,be,xe+1),se+=Ae,xe+=Ae,++ye);for(var Se=1<<Xe.b,tt=Se-1,$e=Ee(Ae,Xe.b),kt=Xe.K,Xe=Xe.w+(ye>>Xe.b)*$e;ye<fe;){var Lt=kt,Xn=Xe,jt=1;for(hl(H,se,be,xe-Ae,1,be,xe);jt<Ae;){var Je=(jt&~tt)+Se;Je>Ae&&(Je=Ae),(0,zc[Lt[Xn++]>>8&15])(H,se+ +jt,be,xe+jt-Ae,Je-jt,be,xe+jt),jt=Je}se+=Ae,xe+=Ae,++ye&tt||(Xe+=$e)}pe!=V.nc&&r(U,D-ue,U,D+(pe-ne-1)*ue,ue);break;case 1:for(ue=H,fe=se,Ae=(H=V.Ea)-(xe=H&~(be=(se=1<<V.b)-1)),ye=Ee(H,V.b),Se=V.K,V=V.w+(ne>>V.b)*ye;ne<pe;){for(tt=Se,$e=V,kt=new ut,Xe=fe+xe,Lt=fe+H;fe<Xe;)rt(tt[$e++],kt),Vc(kt,ue,fe,se,U,D),fe+=se,D+=se;fe<Lt&&(rt(tt[$e++],kt),Vc(kt,ue,fe,Ae,U,D),fe+=Ae,D+=Ae),++ne&be||(V+=ye)}break;case 3:if(H==U&&se==D&&0<V.b){for(fe=U,H=ue=D+(pe-ne)*ue-(xe=(pe-ne)*Ee(V.Ea,V.b)),se=U,be=D,ye=[],xe=(Ae=xe)-1;0<=xe;--xe)ye[xe]=se[be+xe];for(xe=Ae-1;0<=xe;--xe)fe[H+xe]=ye[xe];Dd(V,ne,pe,U,ue,U,D)}else Dd(V,ne,pe,H,se,U,D)}D=j,U=b}U!=b&&r(j,b,D,U,L)}function qr(h,m){var b=h.V,j=h.Ba+h.c*h.C,C=m-h.C;if(t(m<=h.l.o),t(16>=C),0<C){var L=h.l,O=h.Ta,D=h.Ua,U=L.width;if(Ls(h,C,b,j),C=D=[D],t((b=h.C)<(j=m)),t(L.v<L.va),j>L.o&&(j=L.o),b<L.j){var V=L.j-b;b=L.j,C[0]+=V*U}if(b>=j?b=0:(C[0]+=4*L.v,L.ka=b-L.j,L.U=L.va-L.v,L.T=j-b,b=1),b){if(D=D[0],11>(b=h.ca).S){var ne=b.f.RGBA,pe=(j=b.S,C=L.U,L=L.T,V=ne.eb,ne.A),H=L;for(ne=ne.fb+h.Ma*ne.A;0<H--;){var se=O,ue=D,ye=C,fe=V,be=ne;switch(j){case Ud:Hc(se,ue,ye,fe,be);break;case qd:va(se,ue,ye,fe,be);break;case tm:va(se,ue,ye,fe,be),Kc(fe,be,0,ye,1,0);break;case Py:xo(se,ue,ye,fe,be);break;case $d:at(se,ue,ye,fe,be,1);break;case nm:at(se,ue,ye,fe,be,1),Kc(fe,be,0,ye,1,0);break;case zd:at(se,ue,ye,fe,be,0);break;case Vd:at(se,ue,ye,fe,be,0),Kc(fe,be,1,ye,1,0);break;case em:ya(se,ue,ye,fe,be);break;case rm:ya(se,ue,ye,fe,be),_y(fe,be,ye,1,0);break;case Ly:ba(se,ue,ye,fe,be);break;default:t(0)}D+=U,ne+=pe}h.Ma+=L}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=b.height)}}h.C=m,t(h.C<=h.i)}function pr(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var b=h.Ya[m].G,j=h.Ya[m].H;if(0<b[1][j[1]+0].g||0<b[2][j[2]+0].g||0<b[3][j[3]+0].g)return 0}return 1}function ti(h,m,b,j,C,L){if(h.Z!=0){var O=h.qd,D=h.rd;for(t(_a[h.Z]!=null);m<b;++m)_a[h.Z](O,D,j,C,j,C,L),O=j,D=C,C+=L;h.qd=O,h.rd=D}}function ki(h,m){var b=h.l.ma,j=b.Z==0||b.Z==1?h.l.j:h.C;if(j=h.C<j?j:h.C,t(m<=h.l.o),m>j){var C=h.l.width,L=b.ca,O=b.tb+C*j,D=h.V,U=h.Ba+h.c*j,V=h.gc;t(h.ab==1),t(V[0].hc==3),gs(V[0],j,m,D,U,L,O),ti(b,j,m,L,O,C)}h.C=h.Ma=m}function ni(h,m,b,j,C,L,O){var D=h.$/j,U=h.$%j,V=h.m,ne=h.s,pe=b+h.$,H=pe;C=b+j*C;var se=b+j*L,ue=280+ne.ua,ye=h.Pb?D:16777216,fe=0<ne.ua?ne.Wa:null,be=ne.wc,xe=pe<se?Hn(ne,U,D):null;t(h.C<L),t(se<=C);var Ae=!1;e:for(;;){for(;Ae||pe<se;){var Se=0;if(D>=ye){var tt=pe-b;t((ye=h).Pb),ye.wd=ye.m,ye.xd=tt,0<ye.s.ua&&_t(ye.s.Wa,ye.s.vb),ye=D+d6}if(U&be||(xe=Hn(ne,U,D)),t(xe!=null),xe.Qb&&(m[pe]=xe.qb,Ae=!0),!Ae)if(oe(V),xe.jc){Se=V,tt=m;var $e=pe,kt=xe.pd[$(Se)&wo-1];t(xe.jc),256>kt.g?(te(Se,Se.u+kt.g),tt[$e]=kt.value,Se=0):(te(Se,Se.u+kt.g-256),t(256<=kt.value),Se=kt.value),Se==0&&(Ae=!0)}else Se=Zt(xe.G[0],xe.H[0],V);if(V.h)break;if(Ae||256>Se){if(!Ae)if(xe.nd)m[pe]=(xe.qb|Se<<8)>>>0;else{if(oe(V),Ae=Zt(xe.G[1],xe.H[1],V),oe(V),tt=Zt(xe.G[2],xe.H[2],V),$e=Zt(xe.G[3],xe.H[3],V),V.h)break;m[pe]=($e<<24|Ae<<16|Se<<8|tt)>>>0}if(Ae=!1,++pe,++U>=j&&(U=0,++D,O!=null&&D<=L&&!(D%16)&&O(h,D),fe!=null))for(;H<pe;)Se=m[H++],fe.X[(506832829*Se&4294967295)>>>fe.Mb]=Se}else if(280>Se){if(Se=Br(Se-256,V),tt=Zt(xe.G[4],xe.H[4],V),oe(V),tt=Ur(j,tt=Br(tt,V)),V.h)break;if(pe-b<tt||C-pe<Se)break e;for($e=0;$e<Se;++$e)m[pe+$e]=m[pe+$e-tt];for(pe+=Se,U+=Se;U>=j;)U-=j,++D,O!=null&&D<=L&&!(D%16)&&O(h,D);if(t(pe<=C),U&be&&(xe=Hn(ne,U,D)),fe!=null)for(;H<pe;)Se=m[H++],fe.X[(506832829*Se&4294967295)>>>fe.Mb]=Se}else{if(!(Se<ue))break e;for(Ae=Se-280,t(fe!=null);H<pe;)Se=m[H++],fe.X[(506832829*Se&4294967295)>>>fe.Mb]=Se;Se=pe,t(!(Ae>>>(tt=fe).Xa)),m[Se]=tt.X[Ae],Ae=!0}Ae||t(V.h==Q(V))}if(h.Pb&&V.h&&pe<C)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&_t(h.s.vb,h.s.Wa);else{if(V.h)break e;O!=null&&O(h,D>L?L:D),h.a=0,h.$=pe-b}return 1}return h.a=3,0}function $r(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,t(h!=null)}function hs(){var h=new Ze;return h==null?null:(h.a=0,h.xb=Oy,Nt("Predictor","VP8LPredictors"),Nt("Predictor","VP8LPredictors_C"),Nt("PredictorAdd","VP8LPredictorsAdd"),Nt("PredictorAdd","VP8LPredictorsAdd_C"),Pn=pt,Vc=ct,Hc=$t,va=Rt,ya=Ge,ba=gt,xo=Mt,I.VP8LMapColor32b=ms,I.VP8LMapColor8b=$c,h)}function zr(h,m,b,j,C){var L=1,O=[h],D=[m],U=j.m,V=j.s,ne=null,pe=0;e:for(;;){if(b)for(;L&&ie(U,1);){var H=O,se=D,ue=j,ye=1,fe=ue.m,be=ue.gc[ue.ab],xe=ie(fe,2);if(ue.Oc&1<<xe)L=0;else{switch(ue.Oc|=1<<xe,be.hc=xe,be.Ea=H[0],be.nc=se[0],be.K=[null],++ue.ab,t(4>=ue.ab),xe){case 0:case 1:be.b=ie(fe,3)+2,ye=zr(Ee(be.Ea,be.b),Ee(be.nc,be.b),0,ue,be.K),be.K=be.K[0];break;case 3:var Ae,Se=ie(fe,8)+1,tt=16<Se?0:4<Se?1:2<Se?2:3;if(H[0]=Ee(be.Ea,tt),be.b=tt,Ae=ye=zr(Se,1,0,ue,be.K)){var $e,kt=Se,Xe=be,Lt=1<<(8>>Xe.b),Xn=s(Lt);if(Xn==null)Ae=0;else{var jt=Xe.K[0],Je=Xe.w;for(Xn[0]=Xe.K[0][0],$e=1;$e<1*kt;++$e)Xn[$e]=Ke(jt[Je+$e],Xn[$e-1]);for(;$e<4*Lt;++$e)Xn[$e]=0;Xe.K[0]=null,Xe.K[0]=Xn,Ae=1}}ye=Ae;break;case 2:break;default:t(0)}L=ye}}if(O=O[0],D=D[0],L&&ie(U,1)&&!(L=1<=(pe=ie(U,4))&&11>=pe)){j.a=3;break e}var Ie;if(Ie=L)t:{var Tn,xt,Tt,an=j,or=O,Pr=D,Sn=pe,gr=b,Lr=an.m,Jn=an.s,It=[null],zt=1,kn=0,Vt=u6[Sn];n:for(;;){if(gr&&ie(Lr,1)){var lr=ie(Lr,3)+2,Wi=Ee(or,lr),Rn=Ee(Pr,lr),Hr=Wi*Rn;if(!zr(Wi,Rn,0,an,It))break n;for(It=It[0],Jn.xc=lr,Tn=0;Tn<Hr;++Tn){var Xt=It[Tn]>>8&65535;It[Tn]=Xt,Xt>=zt&&(zt=Xt+1)}}if(Lr.h)break n;for(xt=0;5>xt;++xt){var Qn=Ty[xt];!xt&&0<Sn&&(Qn+=1<<Sn),kn<Qn&&(kn=Qn)}var ai=a(zt*Vt,K),Tr=zt,oi=a(Tr,Z);if(oi==null)var li=null;else t(65536>=Tr),li=oi;var Wr=s(kn);if(li==null||Wr==null||ai==null){an.a=1;break n}var ci=ai;for(Tn=Tt=0;Tn<zt;++Tn){var tn=li[Tn],ui=tn.G,Ki=tn.H,So=0,$s=1,cr=0;for(xt=0;5>xt;++xt){Qn=Ty[xt],ui[xt]=ci,Ki[xt]=Tt,!xt&&0<Sn&&(Qn+=1<<Sn);i:{var Gd,om=Qn,Yd=an,Xc=Wr,L6=ci,T6=Tt,lm=0,Sa=Yd.m,R6=ie(Sa,1);if(i(Xc,0,0,om),R6){var O6=ie(Sa,1)+1,I6=ie(Sa,1),zy=ie(Sa,I6==0?1:8);Xc[zy]=1,O6==2&&(Xc[zy=ie(Sa,8)]=1);var Xd=1}else{var Vy=s(19),Hy=ie(Sa,4)+4;if(19<Hy){Yd.a=3;var Jd=0;break i}for(Gd=0;Gd<Hy;++Gd)Vy[l6[Gd]]=ie(Sa,3);var cm=void 0,Jc=void 0,Wy=Yd,F6=Vy,Qd=om,Ky=Xc,um=0,ka=Wy.m,Gy=8,Yy=a(128,K);r:for(;P(Yy,0,7,F6,19);){if(ie(ka,1)){var D6=2+2*ie(ka,3);if((cm=2+ie(ka,D6))>Qd)break r}else cm=Qd;for(Jc=0;Jc<Qd&&cm--;){oe(ka);var Xy=Yy[0+(127&$(ka))];te(ka,ka.u+Xy.g);var pl=Xy.value;if(16>pl)Ky[Jc++]=pl,pl!=0&&(Gy=pl);else{var M6=pl==16,Jy=pl-16,B6=a6[Jy],Qy=ie(ka,s6[Jy])+B6;if(Jc+Qy>Qd)break r;for(var U6=M6?Gy:0;0<Qy--;)Ky[Jc++]=U6}}um=1;break r}um||(Wy.a=3),Xd=um}(Xd=Xd&&!Sa.h)&&(lm=P(L6,T6,8,Xc,om)),Xd&&lm!=0?Jd=lm:(Yd.a=3,Jd=0)}if(Jd==0)break n;if($s&&o6[xt]==1&&($s=ci[Tt].g==0),So+=ci[Tt].g,Tt+=Jd,3>=xt){var Qc,dm=Wr[0];for(Qc=1;Qc<Qn;++Qc)Wr[Qc]>dm&&(dm=Wr[Qc]);cr+=dm}}if(tn.nd=$s,tn.Qb=0,$s&&(tn.qb=(ui[3][Ki[3]+0].value<<24|ui[1][Ki[1]+0].value<<16|ui[2][Ki[2]+0].value)>>>0,So==0&&256>ui[0][Ki[0]+0].value&&(tn.Qb=1,tn.qb+=ui[0][Ki[0]+0].value<<8)),tn.jc=!tn.Qb&&6>cr,tn.jc){var Zd,zs=tn;for(Zd=0;Zd<wo;++Zd){var ja=Zd,Na=zs.pd[ja],eh=zs.G[0][zs.H[0]+ja];256<=eh.value?(Na.g=eh.g+256,Na.value=eh.value):(Na.g=0,Na.value=0,ja>>=Et(eh,8,Na),ja>>=Et(zs.G[1][zs.H[1]+ja],16,Na),ja>>=Et(zs.G[2][zs.H[2]+ja],0,Na),Et(zs.G[3][zs.H[3]+ja],24,Na))}}}Jn.vc=It,Jn.Wb=zt,Jn.Ya=li,Jn.yc=ai,Ie=1;break t}Ie=0}if(!(L=Ie)){j.a=3;break e}if(0<pe){if(V.ua=1<<pe,!Y(V.Wa,pe)){j.a=1,L=0;break e}}else V.ua=0;var hm=j,Zy=O,q6=D,fm=hm.s,pm=fm.xc;if(hm.c=Zy,hm.i=q6,fm.md=Ee(Zy,pm),fm.wc=pm==0?-1:(1<<pm)-1,b){j.xb=y6;break e}if((ne=s(O*D))==null){j.a=1,L=0;break e}L=(L=ni(j,ne,0,O,D,D,null))&&!U.h;break e}return L?(C!=null?C[0]=ne:(t(ne==null),t(b)),j.$=0,b||$r(V)):$r(V),L}function Ts(h,m){var b=h.c*h.i,j=b+m+16*m;return t(h.c<=m),h.V=s(j),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+m,1)}function fs(h,m){var b=h.C,j=m-b,C=h.V,L=h.Ba+h.c*b;for(t(m<=h.l.o);0<j;){var O=16<j?16:j,D=h.l.ma,U=h.l.width,V=U*O,ne=D.ca,pe=D.tb+U*b,H=h.Ta,se=h.Ua;Ls(h,O,C,L),ky(H,se,ne,pe,V),ti(D,b,b+O,ne,pe,U),j-=O,C+=O*h.c,b+=O}t(b==m),h.C=h.Ma=m}function ua(){this.ub=this.yd=this.td=this.Rb=0}function Rs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ac(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zi(){this.Yb=function(){var h=[];return function m(b,j,C){for(var L=C[j],O=0;O<L&&(b.push(C.length>j+1?[]:0),!(C.length<j+1));O++)m(b[O],j+1,C)}(h,0,[3,11]),h}()}function il(){this.jb=s(3),this.Wc=o([4,8],zi),this.Xc=o([4,17],zi)}function sl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Le(){this.ld=this.La=this.dd=this.tc=0}function je(){this.Na=this.la=0}function Ye(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function St(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function We(){this.uc=this.M=this.Nb=0,this.wa=Array(new Le),this.Y=0,this.ya=Array(new St),this.aa=0,this.l=new dn}function Ue(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Fe(){this.cb=this.a=0,this.sc="",this.m=new N,this.Od=new ua,this.Kc=new Rs,this.ed=new sl,this.Qa=new Ac,this.Ic=this.$c=this.Aa=0,this.D=new We,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,N),this.ia=0,this.pb=a(4,Ye),this.Pa=new il,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ue),this.Hd=0,this.rb=Array(new je),this.sb=0,this.wa=Array(new Le),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new St),this.L=this.aa=0,this.gd=o([4,2],Le),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function dn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wn(){var h=new Fe;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Gc||(Gc=mn)),h}function Ut(h,m,b){return h.a==0&&(h.a=m,h.sc=b,h.cb=0),0}function Ar(h,m,b){return 3<=b&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function nr(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return Ut(h,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,j=m.w,C=m.ha;if(4>C)return Ut(h,7,"Truncated header.");var L=b[j+0]|b[j+1]<<8|b[j+2]<<16,O=h.Od;if(O.Rb=!(1&L),O.td=L>>1&7,O.yd=L>>4&1,O.ub=L>>5,3<O.td)return Ut(h,3,"Incorrect keyframe parameters.");if(!O.yd)return Ut(h,4,"Frame not displayable.");j+=3,C-=3;var D=h.Kc;if(O.Rb){if(7>C)return Ut(h,7,"cannot parse picture header");if(!Ar(b,j,C))return Ut(h,3,"Bad code word");D.c=16383&(b[j+4]<<8|b[j+3]),D.Td=b[j+4]>>6,D.i=16383&(b[j+6]<<8|b[j+5]),D.Ud=b[j+6]>>6,j+=7,C-=7,h.za=D.c+15>>4,h.Ub=D.i+15>>4,m.width=D.c,m.height=D.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((L=h.Pa).jb,0,255,L.jb.length),t((L=h.Qa)!=null),L.Cb=0,L.Bb=0,L.Fb=1,i(L.Zb,0,0,L.Zb.length),i(L.Lb,0,0,L.Lb)}if(O.ub>C)return Ut(h,7,"bad partition length");le(L=h.m,b,j,O.ub),j+=O.ub,C-=O.ub,O.Rb&&(D.Ld=he(L),D.Kd=he(L)),D=h.Qa;var U,V=h.Pa;if(t(L!=null),t(D!=null),D.Cb=he(L),D.Cb){if(D.Bb=he(L),he(L)){for(D.Fb=he(L),U=0;4>U;++U)D.Zb[U]=he(L)?X(L,7):0;for(U=0;4>U;++U)D.Lb[U]=he(L)?X(L,6):0}if(D.Bb)for(U=0;3>U;++U)V.jb[U]=he(L)?de(L,8):255}else D.Bb=0;if(L.Ka)return Ut(h,3,"cannot parse segment header");if((D=h.ed).zd=he(L),D.Tb=de(L,6),D.wb=de(L,3),D.Pc=he(L),D.Pc&&he(L)){for(V=0;4>V;++V)he(L)&&(D.vd[V]=X(L,6));for(V=0;4>V;++V)he(L)&&(D.od[V]=X(L,6))}if(h.L=D.Tb==0?0:D.zd?1:2,L.Ka)return Ut(h,3,"cannot parse filter header");var ne=C;if(C=U=j,j=U+ne,D=ne,h.Xb=(1<<de(h.m,2))-1,ne<3*(V=h.Xb))b=7;else{for(U+=3*V,D-=3*V,ne=0;ne<V;++ne){var pe=b[C+0]|b[C+1]<<8|b[C+2]<<16;pe>D&&(pe=D),le(h.Jc[+ne],b,U,pe),U+=pe,D-=pe,C+=3}le(h.Jc[+V],b,U,D),b=U<j?0:5}if(b!=0)return Ut(h,b,"cannot parse partitions");for(b=de(U=h.m,7),C=he(U)?X(U,4):0,j=he(U)?X(U,4):0,D=he(U)?X(U,4):0,V=he(U)?X(U,4):0,U=he(U)?X(U,4):0,ne=h.Qa,pe=0;4>pe;++pe){if(ne.Cb){var H=ne.Zb[pe];ne.Fb||(H+=b)}else{if(0<pe){h.pb[pe]=h.pb[0];continue}H=b}var se=h.pb[pe];se.Sc[0]=im[Cn(H+C,127)],se.Sc[1]=sm[Cn(H+0,127)],se.Eb[0]=2*im[Cn(H+j,127)],se.Eb[1]=101581*sm[Cn(H+D,127)]>>16,8>se.Eb[1]&&(se.Eb[1]=8),se.Qc[0]=im[Cn(H+V,117)],se.Qc[1]=sm[Cn(H+U,127)],se.lc=H+U}if(!O.Rb)return Ut(h,4,"Not a key frame.");for(he(L),O=h.Pa,b=0;4>b;++b){for(C=0;8>C;++C)for(j=0;3>j;++j)for(D=0;11>D;++D)V=ge(L,g6[b][C][j][D])?de(L,8):p6[b][C][j][D],O.Wc[b][C].Yb[j][D]=V;for(C=0;17>C;++C)O.Xc[b][C]=O.Wc[b][v6[C]]}return h.kc=he(L),h.kc&&(h.Bd=de(L,8)),h.cb=1}function mn(h,m,b,j,C,L,O){var D=m[C].Yb[b];for(b=0;16>C;++C){if(!ge(h,D[b+0]))return C;for(;!ge(h,D[b+1]);)if(D=m[++C].Yb[0],b=0,C==16)return 16;var U=m[C+1].Yb;if(ge(h,D[b+2])){var V=h,ne=0;if(ge(V,(H=D)[(pe=b)+3]))if(ge(V,H[pe+6])){for(D=0,pe=2*(ne=ge(V,H[pe+8]))+(H=ge(V,H[pe+9+ne])),ne=0,H=h6[pe];H[D];++D)ne+=ne+ge(V,H[D]);ne+=3+(8<<pe)}else ge(V,H[pe+7])?(ne=7+2*ge(V,165),ne+=ge(V,145)):ne=5+ge(V,159);else ne=ge(V,H[pe+4])?3+ge(V,H[pe+5]):2;D=U[2]}else ne=1,D=U[1];U=O+f6[C],0>(V=h).b&&me(V);var pe,H=V.b,se=(pe=V.Ca>>1)-(V.I>>H)>>31;--V.b,V.Ca+=se,V.Ca|=1,V.I-=(pe+1&se)<<H,L[U]=((ne^se)-se)*j[(0<C)+0]}return 16}function ji(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Bn(h,m,b,j,C){C=h[m+b+32*j]+(C>>3),h[m+b+32*j]=-256&C?0>C?0:255:C}function Cr(h,m,b,j,C,L){Bn(h,m,0,b,j+C),Bn(h,m,1,b,j+L),Bn(h,m,2,b,j-L),Bn(h,m,3,b,j-C)}function sn(h){return(20091*h>>16)+h}function Vi(h,m,b,j){var C,L=0,O=s(16);for(C=0;4>C;++C){var D=h[m+0]+h[m+8],U=h[m+0]-h[m+8],V=(35468*h[m+4]>>16)-sn(h[m+12]),ne=sn(h[m+4])+(35468*h[m+12]>>16);O[L+0]=D+ne,O[L+1]=U+V,O[L+2]=U-V,O[L+3]=D-ne,L+=4,m++}for(C=L=0;4>C;++C)D=(h=O[L+0]+4)+O[L+8],U=h-O[L+8],V=(35468*O[L+4]>>16)-sn(O[L+12]),Bn(b,j,0,0,D+(ne=sn(O[L+4])+(35468*O[L+12]>>16))),Bn(b,j,1,0,U+V),Bn(b,j,2,0,U-V),Bn(b,j,3,0,D-ne),L++,j+=32}function Bp(h,m,b,j){var C=h[m+0]+4,L=35468*h[m+4]>>16,O=sn(h[m+4]),D=35468*h[m+1]>>16;Cr(b,j,0,C+O,h=sn(h[m+1]),D),Cr(b,j,1,C+L,h,D),Cr(b,j,2,C-L,h,D),Cr(b,j,3,C-O,h,D)}function Up(h,m,b,j,C){Vi(h,m,b,j),C&&Vi(h,m+16,b,j+4)}function qp(h,m,b,j){_o(h,m+0,b,j,1),_o(h,m+32,b,j+128,1)}function ps(h,m,b,j){var C;for(h=h[m+0]+4,C=0;4>C;++C)for(m=0;4>m;++m)Bn(b,j,m,C,h)}function Ad(h,m,b,j){h[m+0]&&qt(h,m+0,b,j),h[m+16]&&qt(h,m+16,b,j+4),h[m+32]&&qt(h,m+32,b,j+128),h[m+48]&&qt(h,m+48,b,j+128+4)}function Cd(h,m,b,j){var C,L=s(16);for(C=0;4>C;++C){var O=h[m+0+C]+h[m+12+C],D=h[m+4+C]+h[m+8+C],U=h[m+4+C]-h[m+8+C],V=h[m+0+C]-h[m+12+C];L[0+C]=O+D,L[8+C]=O-D,L[4+C]=V+U,L[12+C]=V-U}for(C=0;4>C;++C)O=(h=L[0+4*C]+3)+L[3+4*C],D=L[1+4*C]+L[2+4*C],U=L[1+4*C]-L[2+4*C],V=h-L[3+4*C],b[j+0]=O+D>>3,b[j+16]=V+U>>3,b[j+32]=O-D>>3,b[j+48]=V-U>>3,j+=64}function da(h,m,b){var j,C=m-32,L=si,O=255-h[C-1];for(j=0;j<b;++j){var D,U=L,V=O+h[m-1];for(D=0;D<b;++D)h[m+D]=U[V+h[C+D]];m+=32}}function Cc(h,m){da(h,m,4)}function $p(h,m){da(h,m,8)}function zp(h,m){da(h,m,16)}function Vp(h,m){var b;for(b=0;16>b;++b)r(h,m+32*b,h,m-32,16)}function Pc(h,m){var b;for(b=16;0<b;--b)i(h,m,h[m-1],16),m+=32}function so(h,m,b){var j;for(j=0;16>j;++j)i(m,b+32*j,h,16)}function ha(h,m){var b,j=16;for(b=0;16>b;++b)j+=h[m-1+32*b]+h[m+b-32];so(j>>5,h,m)}function Hp(h,m){var b,j=8;for(b=0;16>b;++b)j+=h[m-1+32*b];so(j>>4,h,m)}function ao(h,m){var b,j=8;for(b=0;16>b;++b)j+=h[m+b-32];so(j>>4,h,m)}function Lc(h,m){so(128,h,m)}function yt(h,m,b){return h+2*m+b+2>>2}function Wp(h,m){var b,j=m-32;for(j=new Uint8Array([yt(h[j-1],h[j+0],h[j+1]),yt(h[j+0],h[j+1],h[j+2]),yt(h[j+1],h[j+2],h[j+3]),yt(h[j+2],h[j+3],h[j+4])]),b=0;4>b;++b)r(h,m+32*b,j,0,j.length)}function Kp(h,m){var b=h[m-1],j=h[m-1+32],C=h[m-1+64],L=h[m-1+96];_e(h,m+0,16843009*yt(h[m-1-32],b,j)),_e(h,m+32,16843009*yt(b,j,C)),_e(h,m+64,16843009*yt(j,C,L)),_e(h,m+96,16843009*yt(C,L,L))}function Gp(h,m){var b,j=4;for(b=0;4>b;++b)j+=h[m+b-32]+h[m-1+32*b];for(j>>=3,b=0;4>b;++b)i(h,m+32*b,j,4)}function Yp(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],L=h[m-1-32],O=h[m+0-32],D=h[m+1-32],U=h[m+2-32],V=h[m+3-32];h[m+0+96]=yt(j,C,h[m-1+96]),h[m+1+96]=h[m+0+64]=yt(b,j,C),h[m+2+96]=h[m+1+64]=h[m+0+32]=yt(L,b,j),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=yt(O,L,b),h[m+3+64]=h[m+2+32]=h[m+1+0]=yt(D,O,L),h[m+3+32]=h[m+2+0]=yt(U,D,O),h[m+3+0]=yt(V,U,D)}function Os(h,m){var b=h[m+1-32],j=h[m+2-32],C=h[m+3-32],L=h[m+4-32],O=h[m+5-32],D=h[m+6-32],U=h[m+7-32];h[m+0+0]=yt(h[m+0-32],b,j),h[m+1+0]=h[m+0+32]=yt(b,j,C),h[m+2+0]=h[m+1+32]=h[m+0+64]=yt(j,C,L),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=yt(C,L,O),h[m+3+32]=h[m+2+64]=h[m+1+96]=yt(L,O,D),h[m+3+64]=h[m+2+96]=yt(O,D,U),h[m+3+96]=yt(D,U,U)}function Is(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],L=h[m-1-32],O=h[m+0-32],D=h[m+1-32],U=h[m+2-32],V=h[m+3-32];h[m+0+0]=h[m+1+64]=L+O+1>>1,h[m+1+0]=h[m+2+64]=O+D+1>>1,h[m+2+0]=h[m+3+64]=D+U+1>>1,h[m+3+0]=U+V+1>>1,h[m+0+96]=yt(C,j,b),h[m+0+64]=yt(j,b,L),h[m+0+32]=h[m+1+96]=yt(b,L,O),h[m+1+32]=h[m+2+96]=yt(L,O,D),h[m+2+32]=h[m+3+96]=yt(O,D,U),h[m+3+32]=yt(D,U,V)}function Xp(h,m){var b=h[m+0-32],j=h[m+1-32],C=h[m+2-32],L=h[m+3-32],O=h[m+4-32],D=h[m+5-32],U=h[m+6-32],V=h[m+7-32];h[m+0+0]=b+j+1>>1,h[m+1+0]=h[m+0+64]=j+C+1>>1,h[m+2+0]=h[m+1+64]=C+L+1>>1,h[m+3+0]=h[m+2+64]=L+O+1>>1,h[m+0+32]=yt(b,j,C),h[m+1+32]=h[m+0+96]=yt(j,C,L),h[m+2+32]=h[m+1+96]=yt(C,L,O),h[m+3+32]=h[m+2+96]=yt(L,O,D),h[m+3+64]=yt(O,D,U),h[m+3+96]=yt(D,U,V)}function Jp(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],L=h[m-1+96];h[m+0+0]=b+j+1>>1,h[m+2+0]=h[m+0+32]=j+C+1>>1,h[m+2+32]=h[m+0+64]=C+L+1>>1,h[m+1+0]=yt(b,j,C),h[m+3+0]=h[m+1+32]=yt(j,C,L),h[m+3+32]=h[m+1+64]=yt(C,L,L),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=L}function al(h,m){var b=h[m-1+0],j=h[m-1+32],C=h[m-1+64],L=h[m-1+96],O=h[m-1-32],D=h[m+0-32],U=h[m+1-32],V=h[m+2-32];h[m+0+0]=h[m+2+32]=b+O+1>>1,h[m+0+32]=h[m+2+64]=j+b+1>>1,h[m+0+64]=h[m+2+96]=C+j+1>>1,h[m+0+96]=L+C+1>>1,h[m+3+0]=yt(D,U,V),h[m+2+0]=yt(O,D,U),h[m+1+0]=h[m+3+32]=yt(b,O,D),h[m+1+32]=h[m+3+64]=yt(j,b,O),h[m+1+64]=h[m+3+96]=yt(C,j,b),h[m+1+96]=yt(L,C,j)}function Tc(h,m){var b;for(b=0;8>b;++b)r(h,m+32*b,h,m-32,8)}function oo(h,m){var b;for(b=0;8>b;++b)i(h,m,h[m-1],8),m+=32}function ol(h,m,b){var j;for(j=0;8>j;++j)i(m,b+32*j,h,8)}function ll(h,m){var b,j=8;for(b=0;8>b;++b)j+=h[m+b-32]+h[m-1+32*b];ol(j>>4,h,m)}function Qp(h,m){var b,j=4;for(b=0;8>b;++b)j+=h[m+b-32];ol(j>>3,h,m)}function Rc(h,m){var b,j=4;for(b=0;8>b;++b)j+=h[m-1+32*b];ol(j>>3,h,m)}function Oc(h,m){ol(128,h,m)}function lo(h,m,b){var j=h[m-b],C=h[m+0],L=3*(C-j)+Zp[1020+h[m-2*b]-h[m+b]],O=Bd[112+(L+4>>3)];h[m-b]=si[255+j+Bd[112+(L+3>>3)]],h[m+0]=si[255+C-O]}function co(h,m,b,j){var C=h[m+0],L=h[m+b];return Ci[255+h[m-2*b]-h[m-b]]>j||Ci[255+L-C]>j}function Ic(h,m,b,j){return 4*Ci[255+h[m-b]-h[m+0]]+Ci[255+h[m-2*b]-h[m+b]]<=j}function cl(h,m,b,j,C){var L=h[m-3*b],O=h[m-2*b],D=h[m-b],U=h[m+0],V=h[m+b],ne=h[m+2*b],pe=h[m+3*b];return 4*Ci[255+D-U]+Ci[255+O-V]>j?0:Ci[255+h[m-4*b]-L]<=C&&Ci[255+L-O]<=C&&Ci[255+O-D]<=C&&Ci[255+pe-ne]<=C&&Ci[255+ne-V]<=C&&Ci[255+V-U]<=C}function Fc(h,m,b,j){var C=2*j+1;for(j=0;16>j;++j)Ic(h,m+j,b,C)&&lo(h,m+j,b)}function uo(h,m,b,j){var C=2*j+1;for(j=0;16>j;++j)Ic(h,m+j*b,1,C)&&lo(h,m+j*b,1)}function Pd(h,m,b,j){var C;for(C=3;0<C;--C)Fc(h,m+=4*b,b,j)}function Ld(h,m,b,j){var C;for(C=3;0<C;--C)uo(h,m+=4,b,j)}function Fs(h,m,b,j,C,L,O,D){for(L=2*L+1;0<C--;){if(cl(h,m,b,L,O))if(co(h,m,b,D))lo(h,m,b);else{var U=h,V=m,ne=b,pe=U[V-2*ne],H=U[V-ne],se=U[V+0],ue=U[V+ne],ye=U[V+2*ne],fe=27*(xe=Zp[1020+3*(se-H)+Zp[1020+pe-ue]])+63>>7,be=18*xe+63>>7,xe=9*xe+63>>7;U[V-3*ne]=si[255+U[V-3*ne]+xe],U[V-2*ne]=si[255+pe+be],U[V-ne]=si[255+H+fe],U[V+0]=si[255+se-fe],U[V+ne]=si[255+ue-be],U[V+2*ne]=si[255+ye-xe]}m+=j}}function Ds(h,m,b,j,C,L,O,D){for(L=2*L+1;0<C--;){if(cl(h,m,b,L,O))if(co(h,m,b,D))lo(h,m,b);else{var U=h,V=m,ne=b,pe=U[V-ne],H=U[V+0],se=U[V+ne],ue=Bd[112+(4+(ye=3*(H-pe))>>3)],ye=Bd[112+(ye+3>>3)],fe=ue+1>>1;U[V-2*ne]=si[255+U[V-2*ne]+fe],U[V-ne]=si[255+pe+ye],U[V+0]=si[255+H-ue],U[V+ne]=si[255+se-fe]}m+=j}}function Td(h,m,b,j,C,L){Fs(h,m,b,1,16,j,C,L)}function Rd(h,m,b,j,C,L){Fs(h,m,1,b,16,j,C,L)}function ho(h,m,b,j,C,L){var O;for(O=3;0<O;--O)Ds(h,m+=4*b,b,1,16,j,C,L)}function Od(h,m,b,j,C,L){var O;for(O=3;0<O;--O)Ds(h,m+=4,1,b,16,j,C,L)}function v(h,m,b,j,C,L,O,D){Fs(h,m,C,1,8,L,O,D),Fs(b,j,C,1,8,L,O,D)}function A(h,m,b,j,C,L,O,D){Fs(h,m,1,C,8,L,O,D),Fs(b,j,1,C,8,L,O,D)}function W(h,m,b,j,C,L,O,D){Ds(h,m+4*C,C,1,8,L,O,D),Ds(b,j+4*C,C,1,8,L,O,D)}function ee(h,m,b,j,C,L,O,D){Ds(h,m+4,1,C,8,L,O,D),Ds(b,j+4,1,C,8,L,O,D)}function ce(){this.ba=new Bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ot,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function we(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ke(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ve(){this.ua=0,this.Wa=new He,this.vb=new He,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new K}function Ze(){this.xb=this.a=0,this.l=new dn,this.ca=new Bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ve,this.ab=0,this.gc=a(4,ke),this.Oc=0}function mt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new dn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function bt(h,m,b,j,C,L,O){for(h=h==null?0:h[m+0],m=0;m<O;++m)C[L+m]=h+b[j+m]&255,h=C[L+m]}function Dt(h,m,b,j,C,L,O){var D;if(h==null)bt(null,null,b,j,C,L,O);else for(D=0;D<O;++D)C[L+D]=h[m+D]+b[j+D]&255}function gn(h,m,b,j,C,L,O){if(h==null)bt(null,null,b,j,C,L,O);else{var D,U=h[m+0],V=U,ne=U;for(D=0;D<O;++D)V=ne+(U=h[m+D])-V,ne=b[j+D]+(-256&V?0>V?0:255:V)&255,V=U,C[L+D]=ne}}function Kn(h,m,b,j){var C=m.width,L=m.o;if(t(h!=null&&m!=null),0>b||0>=j||b+j>L)return null;if(!h.Cc){if(h.ga==null){var O;if(h.ga=new mt,(O=h.ga==null)||(O=m.width*m.o,t(h.Gb.length==0),h.Gb=s(O),h.Uc=0,h.Gb==null?O=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,O=1),O=!O),!O){O=h.ga;var D=h.Fa,U=h.P,V=h.qc,ne=h.mb,pe=h.nb,H=U+1,se=V-1,ue=O.l;if(t(D!=null&&ne!=null&&m!=null),_a[0]=null,_a[1]=bt,_a[2]=Dt,_a[3]=gn,O.ca=ne,O.tb=pe,O.c=m.width,O.i=m.height,t(0<O.c&&0<O.i),1>=V)m=0;else if(O.$a=3&D[U+0],O.Z=D[U+0]>>2&3,O.Lc=D[U+0]>>4&3,U=D[U+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||U)m=0;else if(ue.put=st,ue.ac=Si,ue.bc=qi,ue.ma=O,ue.width=m.width,ue.height=m.height,ue.Da=m.Da,ue.v=m.v,ue.va=m.va,ue.j=m.j,ue.o=m.o,O.$a)e:{t(O.$a==1),m=hs();t:for(;;){if(m==null){m=0;break e}if(t(O!=null),O.mc=m,m.c=O.c,m.i=O.i,m.l=O.l,m.l.ma=O,m.l.width=O.c,m.l.height=O.i,m.a=0,ae(m.m,D,H,se),!zr(O.c,O.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&pr(m.s)?(O.ic=1,D=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(D),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(O.ic=0,m=Ts(m,O.c)),!m))break t;m=1;break e}O.mc=null,m=0}else m=se>=O.c*O.i;O=!m}if(O)return null;h.ga.Lc!=1?h.Ga=0:j=L-b}t(h.ga!=null),t(b+j<=L);e:{if(m=(D=h.ga).c,L=D.l.o,D.$a==0){if(H=h.rc,se=h.Vc,ue=h.Fa,U=h.P+1+b*m,V=h.mb,ne=h.nb+b*m,t(U<=h.P+h.qc),D.Z!=0)for(t(_a[D.Z]!=null),O=0;O<j;++O)_a[D.Z](H,se,ue,U,V,ne,m),H=V,se=ne,ne+=m,U+=m;else for(O=0;O<j;++O)r(V,ne,ue,U,m),H=V,se=ne,ne+=m,U+=m;h.rc=H,h.Vc=se}else{if(t(D.mc!=null),m=b+j,t((O=D.mc)!=null),t(m<=O.i),O.C>=m)m=1;else if(D.ic||Ni(),D.ic){D=O.V,H=O.Ba,se=O.c;var ye=O.i,fe=(ue=1,U=O.$/se,V=O.$%se,ne=O.m,pe=O.s,O.$),be=se*ye,xe=se*m,Ae=pe.wc,Se=fe<xe?Hn(pe,V,U):null;t(fe<=be),t(m<=ye),t(pr(pe));t:for(;;){for(;!ne.h&&fe<xe;){if(V&Ae||(Se=Hn(pe,V,U)),t(Se!=null),oe(ne),256>(ye=Zt(Se.G[0],Se.H[0],ne)))D[H+fe]=ye,++fe,++V>=se&&(V=0,++U<=m&&!(U%16)&&ki(O,U));else{if(!(280>ye)){ue=0;break t}ye=Br(ye-256,ne);var tt,$e=Zt(Se.G[4],Se.H[4],ne);if(oe(ne),!(fe>=($e=Ur(se,$e=Br($e,ne)))&&be-fe>=ye)){ue=0;break t}for(tt=0;tt<ye;++tt)D[H+fe+tt]=D[H+fe+tt-$e];for(fe+=ye,V+=ye;V>=se;)V-=se,++U<=m&&!(U%16)&&ki(O,U);fe<xe&&V&Ae&&(Se=Hn(pe,V,U))}t(ne.h==Q(ne))}ki(O,U>m?m:U);break t}!ue||ne.h&&fe<be?(ue=0,O.a=ne.h?5:3):O.$=fe,m=ue}else m=ni(O,O.V,O.Ba,O.c,O.i,m,fs);if(!m){j=0;break e}}b+j>=L&&(h.Cc=1),j=1}if(!j)return null;if(h.Cc&&((j=h.ga)!=null&&(j.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*C}function en(h,m,b,j,C,L){for(;0<C--;){var O,D=h,U=m+(b?1:0),V=h,ne=m+(b?0:3);for(O=0;O<j;++O){var pe=V[ne+4*O];pe!=255&&(pe*=32897,D[U+4*O+0]=D[U+4*O+0]*pe>>23,D[U+4*O+1]=D[U+4*O+1]*pe>>23,D[U+4*O+2]=D[U+4*O+2]*pe>>23)}m+=L}}function Gn(h,m,b,j,C){for(;0<j--;){var L;for(L=0;L<b;++L){var O=h[m+2*L+0],D=15&(V=h[m+2*L+1]),U=4369*D,V=(240&V|V>>4)*U>>16;h[m+2*L+0]=(240&O|O>>4)*U>>16&240|(15&O|O<<4)*U>>16>>4&15,h[m+2*L+1]=240&V|D}m+=C}}function Un(h,m,b,j,C,L,O,D){var U,V,ne=255;for(V=0;V<C;++V){for(U=0;U<j;++U){var pe=h[m+U];L[O+4*U]=pe,ne&=pe}m+=b,O+=D}return ne!=255}function ar(h,m,b,j,C){var L;for(L=0;L<C;++L)b[j+L]=h[m+L]>>8}function Ni(){Kc=en,_y=Gn,Sy=Un,ky=ar}function Vr(h,m,b){I[h]=function(j,C,L,O,D,U,V,ne,pe,H,se,ue,ye,fe,be,xe,Ae){var Se,tt=Ae-1>>1,$e=D[U+0]|V[ne+0]<<16,kt=pe[H+0]|se[ue+0]<<16;t(j!=null);var Xe=3*$e+kt+131074>>2;for(m(j[C+0],255&Xe,Xe>>16,ye,fe),L!=null&&(Xe=3*kt+$e+131074>>2,m(L[O+0],255&Xe,Xe>>16,be,xe)),Se=1;Se<=tt;++Se){var Lt=D[U+Se]|V[ne+Se]<<16,Xn=pe[H+Se]|se[ue+Se]<<16,jt=$e+Lt+kt+Xn+524296,Je=jt+2*(Lt+kt)>>3;Xe=Je+$e>>1,$e=(jt=jt+2*($e+Xn)>>3)+Lt>>1,m(j[C+2*Se-1],255&Xe,Xe>>16,ye,fe+(2*Se-1)*b),m(j[C+2*Se-0],255&$e,$e>>16,ye,fe+(2*Se-0)*b),L!=null&&(Xe=jt+kt>>1,$e=Je+Xn>>1,m(L[O+2*Se-1],255&Xe,Xe>>16,be,xe+(2*Se-1)*b),m(L[O+2*Se+0],255&$e,$e>>16,be,xe+(2*Se+0)*b)),$e=Lt,kt=Xn}1&Ae||(Xe=3*$e+kt+131074>>2,m(j[C+Ae-1],255&Xe,Xe>>16,ye,fe+(Ae-1)*b),L!=null&&(Xe=3*kt+$e+131074>>2,m(L[O+Ae-1],255&Xe,Xe>>16,be,xe+(Ae-1)*b)))}}function Id(){Pi[Ud]=b6,Pi[qd]=Iy,Pi[Py]=w6,Pi[$d]=Fy,Pi[zd]=Dy,Pi[em]=My,Pi[Ly]=x6,Pi[tm]=Iy,Pi[nm]=Fy,Pi[Vd]=Dy,Pi[rm]=My}function ul(h){return h&~_6?0>h?0:255:h>>By}function fo(h,m){return ul((19077*h>>8)+(26149*m>>8)-14234)}function fa(h,m,b){return ul((19077*h>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function po(h,m){return ul((19077*h>>8)+(33050*m>>8)-17685)}function mo(h,m,b,j,C){j[C+0]=fo(h,b),j[C+1]=fa(h,m,b),j[C+2]=po(h,m)}function go(h,m,b,j,C){j[C+0]=po(h,m),j[C+1]=fa(h,m,b),j[C+2]=fo(h,b)}function mr(h,m,b,j,C){var L=fa(h,m,b);m=L<<3&224|po(h,m)>>3,j[C+0]=248&fo(h,b)|L>>5,j[C+1]=m}function vo(h,m,b,j,C){var L=240&po(h,m)|15;j[C+0]=240&fo(h,b)|fa(h,m,b)>>4,j[C+1]=L}function yo(h,m,b,j,C){j[C+0]=255,mo(h,m,b,j,C+1)}function Dc(h,m,b,j,C){go(h,m,b,j,C),j[C+3]=255}function Mc(h,m,b,j,C){mo(h,m,b,j,C),j[C+3]=255}function Cn(h,m){return 0>h?0:h>m?m:h}function Ms(h,m,b){I[h]=function(j,C,L,O,D,U,V,ne,pe){for(var H=ne+(-2&pe)*b;ne!=H;)m(j[C+0],L[O+0],D[U+0],V,ne),m(j[C+1],L[O+0],D[U+0],V,ne+b),C+=2,++O,++U,ne+=2*b;1&pe&&m(j[C+0],L[O+0],D[U+0],V,ne)}}function dl(h,m,b){return b==0?h==0?m==0?6:5:m==0?4:0:b}function Fd(h,m,b,j,C){switch(h>>>30){case 3:_o(m,b,j,C,0);break;case 2:Ai(m,b,j,C);break;case 1:qt(m,b,j,C)}}function Ei(h,m){var b,j,C=m.M,L=m.Nb,O=h.oc,D=h.pc+40,U=h.oc,V=h.pc+584,ne=h.oc,pe=h.pc+600;for(b=0;16>b;++b)O[D+32*b-1]=129;for(b=0;8>b;++b)U[V+32*b-1]=129,ne[pe+32*b-1]=129;for(0<C?O[D-1-32]=U[V-1-32]=ne[pe-1-32]=129:(i(O,D-32-1,127,21),i(U,V-32-1,127,9),i(ne,pe-32-1,127,9)),j=0;j<h.za;++j){var H=m.ya[m.aa+j];if(0<j){for(b=-1;16>b;++b)r(O,D+32*b-4,O,D+32*b+12,4);for(b=-1;8>b;++b)r(U,V+32*b-4,U,V+32*b+4,4),r(ne,pe+32*b-4,ne,pe+32*b+4,4)}var se=h.Gd,ue=h.Hd+j,ye=H.ad,fe=H.Hc;if(0<C&&(r(O,D-32,se[ue].y,0,16),r(U,V-32,se[ue].f,0,8),r(ne,pe-32,se[ue].ea,0,8)),H.Za){var be=O,xe=D-32+16;for(0<C&&(j>=h.za-1?i(be,xe,se[ue].y[15],4):r(be,xe,se[ue+1].y,0,4)),b=0;4>b;b++)be[xe+128+b]=be[xe+256+b]=be[xe+384+b]=be[xe+0+b];for(b=0;16>b;++b,fe<<=2)be=O,xe=D+qy[b],Hi[H.Ob[b]](be,xe),Fd(fe,ye,16*+b,be,xe)}else if(be=dl(j,C,H.Ob[0]),xa[be](O,D),fe!=0)for(b=0;16>b;++b,fe<<=2)Fd(fe,ye,16*+b,O,D+qy[b]);for(b=H.Gc,be=dl(j,C,H.Dd),qs[be](U,V),qs[be](ne,pe),fe=ye,be=U,xe=V,255&(H=0|b)&&(170&H?vs(fe,256,be,xe):Yt(fe,256,be,xe)),H=ne,fe=pe,255&(b>>=8)&&(170&b?vs(ye,320,H,fe):Yt(ye,320,H,fe)),C<h.Ub-1&&(r(se[ue].y,0,O,D+480,16),r(se[ue].f,0,U,V+224,8),r(se[ue].ea,0,ne,pe+224,8)),b=8*L*h.B,se=h.sa,ue=h.ta+16*j+16*L*h.R,ye=h.qa,H=h.ra+8*j+b,fe=h.Ha,be=h.Ia+8*j+b,b=0;16>b;++b)r(se,ue+b*h.R,O,D+32*b,16);for(b=0;8>b;++b)r(ye,H+b*h.B,U,V+32*b,8),r(fe,be+b*h.B,ne,pe+32*b,8)}}function bo(h,m,b,j,C,L,O,D,U){var V=[0],ne=[0],pe=0,H=U!=null?U.kd:0,se=U??new we;if(h==null||12>b)return 7;se.data=h,se.w=m,se.ha=b,m=[m],b=[b],se.gb=[se.gb];e:{var ue=m,ye=b,fe=se.gb;if(t(h!=null),t(ye!=null),t(fe!=null),fe[0]=0,12<=ye[0]&&!n(h,ue[0],"RIFF")){if(n(h,ue[0]+8,"WEBP")){fe=3;break e}var be=ve(h,ue[0]+4);if(12>be||4294967286<be){fe=3;break e}if(H&&be>ye[0]-8){fe=7;break e}fe[0]=be,ue[0]+=12,ye[0]-=12}fe=0}if(fe!=0)return fe;for(be=0<se.gb[0],b=b[0];;){e:{var xe=h;ye=m,fe=b;var Ae=V,Se=ne,tt=ue=[0];if((Xe=pe=[pe])[0]=0,8>fe[0])fe=7;else{if(!n(xe,ye[0],"VP8X")){if(ve(xe,ye[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var $e=ve(xe,ye[0]+8),kt=1+Pe(xe,ye[0]+12);if(2147483648<=kt*(xe=1+Pe(xe,ye[0]+15))){fe=3;break e}tt!=null&&(tt[0]=$e),Ae!=null&&(Ae[0]=kt),Se!=null&&(Se[0]=xe),ye[0]+=18,fe[0]-=18,Xe[0]=1}fe=0}}if(pe=pe[0],ue=ue[0],fe!=0)return fe;if(ye=!!(2&ue),!be&&pe)return 3;if(L!=null&&(L[0]=!!(16&ue)),O!=null&&(O[0]=ye),D!=null&&(D[0]=0),O=V[0],ue=ne[0],pe&&ye&&U==null){fe=0;break}if(4>b){fe=7;break}if(be&&pe||!be&&!pe&&!n(h,m[0],"ALPH")){b=[b],se.na=[se.na],se.P=[se.P],se.Sa=[se.Sa];e:{$e=h,fe=m,be=b;var Xe=se.gb;Ae=se.na,Se=se.P,tt=se.Sa,kt=22,t($e!=null),t(be!=null),xe=fe[0];var Lt=be[0];for(t(Ae!=null),t(tt!=null),Ae[0]=null,Se[0]=null,tt[0]=0;;){if(fe[0]=xe,be[0]=Lt,8>Lt){fe=7;break e}var Xn=ve($e,xe+4);if(4294967286<Xn){fe=3;break e}var jt=8+Xn+1&-2;if(kt+=jt,0<Xe&&kt>Xe){fe=3;break e}if(!n($e,xe,"VP8 ")||!n($e,xe,"VP8L")){fe=0;break e}if(Lt[0]<jt){fe=7;break e}n($e,xe,"ALPH")||(Ae[0]=$e,Se[0]=xe+8,tt[0]=Xn),xe+=jt,Lt-=jt}}if(b=b[0],se.na=se.na[0],se.P=se.P[0],se.Sa=se.Sa[0],fe!=0)break}b=[b],se.Ja=[se.Ja],se.xa=[se.xa];e:if(Xe=h,fe=m,be=b,Ae=se.gb[0],Se=se.Ja,tt=se.xa,$e=fe[0],xe=!n(Xe,$e,"VP8 "),kt=!n(Xe,$e,"VP8L"),t(Xe!=null),t(be!=null),t(Se!=null),t(tt!=null),8>be[0])fe=7;else{if(xe||kt){if(Xe=ve(Xe,$e+4),12<=Ae&&Xe>Ae-12){fe=3;break e}if(H&&Xe>be[0]-8){fe=7;break e}Se[0]=Xe,fe[0]+=8,be[0]-=8,tt[0]=kt}else tt[0]=5<=be[0]&&Xe[$e+0]==47&&!(Xe[$e+4]>>5),Se[0]=be[0];fe=0}if(b=b[0],se.Ja=se.Ja[0],se.xa=se.xa[0],m=m[0],fe!=0)break;if(4294967286<se.Ja)return 3;if(D==null||ye||(D[0]=se.xa?2:1),O=[O],ue=[ue],se.xa){if(5>b){fe=7;break}D=O,H=ue,ye=L,h==null||5>b?h=0:5<=b&&h[m+0]==47&&!(h[m+4]>>5)?(be=[0],Xe=[0],Ae=[0],ae(Se=new M,h,m,b),$i(Se,be,Xe,Ae)?(D!=null&&(D[0]=be[0]),H!=null&&(H[0]=Xe[0]),ye!=null&&(ye[0]=Ae[0]),h=1):h=0):h=0}else{if(10>b){fe=7;break}D=ue,h==null||10>b||!Ar(h,m+3,b-3)?h=0:(H=h[m+0]|h[m+1]<<8|h[m+2]<<16,ye=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&H||3<(H>>1&7)||!(H>>4&1)||H>>5>=se.Ja||!ye||!h?h=0:(O&&(O[0]=ye),D&&(D[0]=h),h=1))}if(!h||(O=O[0],ue=ue[0],pe&&(V[0]!=O||ne[0]!=ue)))return 3;U!=null&&(U[0]=se,U.offset=m-U.w,t(4294967286>m-U.w),t(U.offset==U.ha-b));break}return fe==0||fe==7&&pe&&U==null?(L!=null&&(L[0]|=se.na!=null&&0<se.na.length),j!=null&&(j[0]=O),C!=null&&(C[0]=ue),0):fe}function Bc(h,m,b){var j=m.width,C=m.height,L=0,O=0,D=j,U=C;if(m.Da=h!=null&&0<h.Da,m.Da&&(D=h.cd,U=h.bd,L=h.v,O=h.j,11>b||(L&=-2,O&=-2),0>L||0>O||0>=D||0>=U||L+D>j||O+U>C))return 0;if(m.v=L,m.j=O,m.va=L+D,m.o=O+U,m.U=D,m.T=U,m.da=h!=null&&0<h.da,m.da){if(!nt(D,U,b=[h.ib],L=[h.hb]))return 0;m.ib=b[0],m.hb=L[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*j/4&&m.hb<3*C/4,m.Kb=0),1}function Uc(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function pa(h,m,b,j){if(j==null||0>=h||0>=m)return 2;if(b!=null){if(b.Da){var C=b.cd,L=b.bd,O=-2&b.v,D=-2&b.j;if(0>O||0>D||0>=C||0>=L||O+C>h||D+L>m)return 2;h=C,m=L}if(b.da){if(!nt(h,m,C=[b.ib],L=[b.hb]))return 2;h=C[0],m=L[0]}}j.width=h,j.height=m;e:{var U=j.width,V=j.height;if(h=j.S,0>=U||0>=V||!(h>=Ud&&13>h))h=2;else{if(0>=j.Rd&&j.sd==null){O=L=C=m=0;var ne=(D=U*$y[h])*V;if(11>h||(L=(V+1)/2*(m=(U+1)/2),h==12&&(O=(C=U)*V)),(V=s(ne+2*L+O))==null){h=1;break e}j.sd=V,11>h?((U=j.f.RGBA).eb=V,U.fb=0,U.A=D,U.size=ne):((U=j.f.kb).y=V,U.O=0,U.fa=D,U.Fd=ne,U.f=V,U.N=0+ne,U.Ab=m,U.Cd=L,U.ea=V,U.W=0+ne+L,U.Db=m,U.Ed=L,h==12&&(U.F=V,U.J=0+ne+2*L),U.Tc=O,U.lb=C)}if(m=1,C=j.S,L=j.width,O=j.height,C>=Ud&&13>C)if(11>C)h=j.f.RGBA,m&=(D=Math.abs(h.A))*(O-1)+L<=h.size,m&=D>=L*$y[C],m&=h.eb!=null;else{h=j.f.kb,D=(L+1)/2,ne=(O+1)/2,U=Math.abs(h.fa),V=Math.abs(h.Ab);var pe=Math.abs(h.Db),H=Math.abs(h.lb),se=H*(O-1)+L;m&=U*(O-1)+L<=h.Fd,m&=V*(ne-1)+D<=h.Cd,m=(m&=pe*(ne-1)+D<=h.Ed)&U>=L&V>=D&pe>=D,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,C==12&&(m&=H>=L,m&=se<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||b!=null&&b.fd&&(h=Uc(j)),h}var wo=64,ri=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ii=24,ma=32,Bs=8,ga=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Oe("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(h){return h},I.Predictor2=function(h,m,b){return m[b+0]},I.Predictor3=function(h,m,b){return m[b+1]},I.Predictor4=function(h,m,b){return m[b-1]},I.Predictor5=function(h,m,b){return Be(Be(h,m[b+1]),m[b+0])},I.Predictor6=function(h,m,b){return Be(h,m[b-1])},I.Predictor7=function(h,m,b){return Be(h,m[b+0])},I.Predictor8=function(h,m,b){return Be(m[b-1],m[b+0])},I.Predictor9=function(h,m,b){return Be(m[b+0],m[b+1])},I.Predictor10=function(h,m,b){return Be(Be(h,m[b-1]),Be(m[b+0],m[b+1]))},I.Predictor11=function(h,m,b){var j=m[b+0];return 0>=Me(j>>24&255,h>>24&255,(m=m[b-1])>>24&255)+Me(j>>16&255,h>>16&255,m>>16&255)+Me(j>>8&255,h>>8&255,m>>8&255)+Me(255&j,255&h,255&m)?j:h},I.Predictor12=function(h,m,b){var j=m[b+0];return(Ct((h>>24&255)+(j>>24&255)-((m=m[b-1])>>24&255))<<24|Ct((h>>16&255)+(j>>16&255)-(m>>16&255))<<16|Ct((h>>8&255)+(j>>8&255)-(m>>8&255))<<8|Ct((255&h)+(255&j)-(255&m)))>>>0},I.Predictor13=function(h,m,b){var j=m[b-1];return(Ne((h=Be(h,m[b+0]))>>24&255,j>>24&255)<<24|Ne(h>>16&255,j>>16&255)<<16|Ne(h>>8&255,j>>8&255)<<8|Ne(255&h,255&j))>>>0};var qc=I.PredictorAdd0;I.PredictorAdd1=ot,Oe("Predictor2","PredictorAdd2"),Oe("Predictor3","PredictorAdd3"),Oe("Predictor4","PredictorAdd4"),Oe("Predictor5","PredictorAdd5"),Oe("Predictor6","PredictorAdd6"),Oe("Predictor7","PredictorAdd7"),Oe("Predictor8","PredictorAdd8"),Oe("Predictor9","PredictorAdd9"),Oe("Predictor10","PredictorAdd10"),Oe("Predictor11","PredictorAdd11"),Oe("Predictor12","PredictorAdd12"),Oe("Predictor13","PredictorAdd13");var hl=I.PredictorAdd2;De("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),De("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Pn,Dd=I.ColorIndexInverseTransform,ms=I.MapARGB,gs=I.VP8LColorIndexInverseTransformAlpha,$c=I.MapAlpha,zc=I.VP8LPredictorsAdd=[];zc.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Vc,Hc,va,ya,ba,xo,wa,_o,Ai,vs,qt,Yt,Ln,Yn,Us,Wc,fl,Md,gy,vy,yy,by,wy,xy,Kc,_y,Sy,ky,jy=s(511),Ny=s(2041),Ey=s(225),Ay=s(767),Cy=0,Zp=Ny,Bd=Ey,si=Ay,Ci=jy,Ud=0,qd=1,Py=2,$d=3,zd=4,em=5,Ly=6,tm=7,nm=8,Vd=9,rm=10,s6=[2,3,7],a6=[3,3,11],Ty=[280,256,256,256,40],o6=[0,1,1,1,0],l6=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],c6=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],u6=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],d6=8,im=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Gc=null,h6=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],f6=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ry=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],p6=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],m6=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],g6=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],v6=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xa=[],Hi=[],qs=[],y6=1,Oy=2,_a=[],Pi=[];Vr("UpsampleRgbLinePair",mo,3),Vr("UpsampleBgrLinePair",go,3),Vr("UpsampleRgbaLinePair",Mc,4),Vr("UpsampleBgraLinePair",Dc,4),Vr("UpsampleArgbLinePair",yo,4),Vr("UpsampleRgba4444LinePair",vo,2),Vr("UpsampleRgb565LinePair",mr,2);var b6=I.UpsampleRgbLinePair,w6=I.UpsampleBgrLinePair,Iy=I.UpsampleRgbaLinePair,Fy=I.UpsampleBgraLinePair,Dy=I.UpsampleArgbLinePair,My=I.UpsampleRgba4444LinePair,x6=I.UpsampleRgb565LinePair,Hd=16,Wd=1<<Hd-1,Yc=-227,am=482,By=6,_6=(256<<By)-1,Uy=0,S6=s(256),k6=s(256),j6=s(256),N6=s(256),E6=s(am-Yc),A6=s(am-Yc);Ms("YuvToRgbRow",mo,3),Ms("YuvToBgrRow",go,3),Ms("YuvToRgbaRow",Mc,4),Ms("YuvToBgraRow",Dc,4),Ms("YuvToArgbRow",yo,4),Ms("YuvToRgba4444Row",vo,2),Ms("YuvToRgb565Row",mr,2);var qy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Kd=[0,2,8],C6=[8,7,6,4,4,2,2,2,1,1,1,1],P6=1;this.WebPDecodeRGBA=function(h,m,b,j,C){var L=qd,O=new ce,D=new Bt;O.ba=D,D.S=L,D.width=[D.width],D.height=[D.height];var U=D.width,V=D.height,ne=new dt;if(ne==null||h==null)var pe=2;else t(ne!=null),pe=bo(h,m,b,ne.width,ne.height,ne.Pd,ne.Qd,ne.format,null);if(pe!=0?U=0:(U!=null&&(U[0]=ne.width[0]),V!=null&&(V[0]=ne.height[0]),U=1),U){D.width=D.width[0],D.height=D.height[0],j!=null&&(j[0]=D.width),C!=null&&(C[0]=D.height);e:{if(j=new dn,(C=new we).data=h,C.w=m,C.ha=b,C.kd=1,m=[0],t(C!=null),((h=bo(C.data,C.w,C.ha,null,null,null,m,null,C))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(t(O!=null),j.data=C.data,j.w=C.w+C.offset,j.ha=C.ha-C.offset,j.put=st,j.ac=Si,j.bc=qi,j.ma=O,C.xa){if((h=hs())==null){O=1;break e}if(function(H,se){var ue=[0],ye=[0],fe=[0];t:for(;;){if(H==null)return 0;if(se==null)return H.a=2,0;if(H.l=se,H.a=0,ae(H.m,se.data,se.w,se.ha),!$i(H.m,ue,ye,fe)){H.a=3;break t}if(H.xb=Oy,se.width=ue[0],se.height=ye[0],!zr(ue[0],ye[0],1,H,null))break t;return 1}return t(H.a!=0),0}(h,j)){if(j=(m=pa(j.width,j.height,O.Oa,O.ba))==0){t:{j=h;n:for(;;){if(j==null){j=0;break t}if(t(j.s.yc!=null),t(j.s.Ya!=null),t(0<j.s.Wb),t((b=j.l)!=null),t((C=b.ma)!=null),j.xb!=0){if(j.ca=C.ba,j.tb=C.tb,t(j.ca!=null),!Bc(C.Oa,b,$d)){j.a=2;break n}if(!Ts(j,b.width)||b.da)break n;if((b.da||vt(j.ca.S))&&Ni(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Ni()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!Y(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!ni(j,j.V,j.Ba,j.c,j.i,b.o,qr))break n;C.Dc=j.Ma,j=1;break t}t(j.a!=0),j=0}j=!j}j&&(m=h.a)}else m=h.a}else{if((h=new Wn)==null){O=1;break e}if(h.Fa=C.na,h.P=C.P,h.qc=C.Sa,nr(h,j)){if((m=pa(j.width,j.height,O.Oa,O.ba))==0){if(h.Aa=0,b=O.Oa,t((C=h)!=null),b!=null){if(0<(U=0>(U=b.Md)?0:100<U?255:255*U/100)){for(V=ne=0;4>V;++V)12>(pe=C.pb[V]).lc&&(pe.ia=U*C6[0>pe.lc?0:pe.lc]>>3),ne|=pe.ia;ne&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=b.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}(function(H,se){if(H==null)return 0;if(se==null)return Ut(H,2,"NULL VP8Io parameter in VP8Decode().");if(!H.cb&&!nr(H,se))return 0;if(t(H.cb),se.ac==null||se.ac(se)){se.ob&&(H.L=0);var ue=Kd[H.L];if(H.L==2?(H.yb=0,H.zb=0):(H.yb=se.v-ue>>4,H.zb=se.j-ue>>4,0>H.yb&&(H.yb=0),0>H.zb&&(H.zb=0)),H.Va=se.o+15+ue>>4,H.Hb=se.va+15+ue>>4,H.Hb>H.za&&(H.Hb=H.za),H.Va>H.Ub&&(H.Va=H.Ub),0<H.L){var ye=H.ed;for(ue=0;4>ue;++ue){var fe;if(H.Qa.Cb){var be=H.Qa.Lb[ue];H.Qa.Fb||(be+=ye.Tb)}else be=ye.Tb;for(fe=0;1>=fe;++fe){var xe=H.gd[ue][fe],Ae=be;if(ye.Pc&&(Ae+=ye.vd[0],fe&&(Ae+=ye.od[0])),0<(Ae=0>Ae?0:63<Ae?63:Ae)){var Se=Ae;0<ye.wb&&(Se=4<ye.wb?Se>>2:Se>>1)>9-ye.wb&&(Se=9-ye.wb),1>Se&&(Se=1),xe.dd=Se,xe.tc=2*Ae+Se,xe.ld=40<=Ae?2:15<=Ae?1:0}else xe.tc=0;xe.La=fe}}}ue=0}else Ut(H,6,"Frame setup failed"),ue=H.a;if(ue=ue==0){if(ue){H.$c=0,0<H.Aa||(H.Ic=P6);t:{ue=H.Ic,ye=4*(Se=H.za);var tt=32*Se,$e=Se+1,kt=0<H.L?Se*(0<H.Aa?2:1):0,Xe=(H.Aa==2?2:1)*Se;if((xe=ye+832+(fe=3*(16*ue+Kd[H.L])/2*tt)+(be=H.Fa!=null&&0<H.Fa.length?H.Kc.c*H.Kc.i:0))!=xe)ue=0;else{if(xe>H.Vb){if(H.Vb=0,H.Ec=s(xe),H.Fc=0,H.Ec==null){ue=Ut(H,1,"no memory during frame initialization.");break t}H.Vb=xe}xe=H.Ec,Ae=H.Fc,H.Ac=xe,H.Bc=Ae,Ae+=ye,H.Gd=a(tt,Ue),H.Hd=0,H.rb=a($e+1,je),H.sb=1,H.wa=kt?a(kt,Le):null,H.Y=0,H.D.Nb=0,H.D.wa=H.wa,H.D.Y=H.Y,0<H.Aa&&(H.D.Y+=Se),t(!0),H.oc=xe,H.pc=Ae,Ae+=832,H.ya=a(Xe,St),H.aa=0,H.D.ya=H.ya,H.D.aa=H.aa,H.Aa==2&&(H.D.aa+=Se),H.R=16*Se,H.B=8*Se,Se=(tt=Kd[H.L])*H.R,tt=tt/2*H.B,H.sa=xe,H.ta=Ae+Se,H.qa=H.sa,H.ra=H.ta+16*ue*H.R+tt,H.Ha=H.qa,H.Ia=H.ra+8*ue*H.B+tt,H.$c=0,Ae+=fe,H.mb=be?xe:null,H.nb=be?Ae:null,t(Ae+be<=H.Fc+H.Vb),ji(H),i(H.Ac,H.Bc,0,ye),ue=1}}if(ue){if(se.ka=0,se.y=H.sa,se.O=H.ta,se.f=H.qa,se.N=H.ra,se.ea=H.Ha,se.Vd=H.Ia,se.fa=H.R,se.Rc=H.B,se.F=null,se.J=0,!Cy){for(ue=-255;255>=ue;++ue)jy[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)Ny[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)Ey[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)Ay[255+ue]=0>ue?0:255<ue?255:ue;Cy=1}wa=Cd,_o=Up,vs=qp,qt=ps,Yt=Ad,Ai=Bp,Ln=Td,Yn=Rd,Us=v,Wc=A,fl=ho,Md=Od,gy=W,vy=ee,yy=Fc,by=uo,wy=Pd,xy=Ld,Hi[0]=Gp,Hi[1]=Cc,Hi[2]=Wp,Hi[3]=Kp,Hi[4]=Yp,Hi[5]=Is,Hi[6]=Os,Hi[7]=Xp,Hi[8]=al,Hi[9]=Jp,xa[0]=ha,xa[1]=zp,xa[2]=Vp,xa[3]=Pc,xa[4]=Hp,xa[5]=ao,xa[6]=Lc,qs[0]=ll,qs[1]=$p,qs[2]=Tc,qs[3]=oo,qs[4]=Rc,qs[5]=Qp,qs[6]=Oc,ue=1}else ue=0}ue&&(ue=function(Lt,Xn){for(Lt.M=0;Lt.M<Lt.Va;++Lt.M){var jt,Je=Lt.Jc[Lt.M&Lt.Xb],Ie=Lt.m,Tn=Lt;for(jt=0;jt<Tn.za;++jt){var xt=Ie,Tt=Tn,an=Tt.Ac,or=Tt.Bc+4*jt,Pr=Tt.zc,Sn=Tt.ya[Tt.aa+jt];if(Tt.Qa.Bb?Sn.$b=ge(xt,Tt.Pa.jb[0])?2+ge(xt,Tt.Pa.jb[2]):ge(xt,Tt.Pa.jb[1]):Sn.$b=0,Tt.kc&&(Sn.Ad=ge(xt,Tt.Bd)),Sn.Za=!ge(xt,145)+0,Sn.Za){var gr=Sn.Ob,Lr=0;for(Tt=0;4>Tt;++Tt){var Jn,It=Pr[0+Tt];for(Jn=0;4>Jn;++Jn){It=m6[an[or+Jn]][It];for(var zt=Ry[ge(xt,It[0])];0<zt;)zt=Ry[2*zt+ge(xt,It[zt])];It=-zt,an[or+Jn]=It}r(gr,Lr,an,or,4),Lr+=4,Pr[0+Tt]=It}}else It=ge(xt,156)?ge(xt,128)?1:3:ge(xt,163)?2:0,Sn.Ob[0]=It,i(an,or,It,4),i(Pr,0,It,4);Sn.Dd=ge(xt,142)?ge(xt,114)?ge(xt,183)?1:3:2:0}if(Tn.m.Ka)return Ut(Lt,7,"Premature end-of-partition0 encountered.");for(;Lt.ja<Lt.za;++Lt.ja){if(Tn=Je,xt=(Ie=Lt).rb[Ie.sb-1],an=Ie.rb[Ie.sb+Ie.ja],jt=Ie.ya[Ie.aa+Ie.ja],or=Ie.kc?jt.Ad:0)xt.la=an.la=0,jt.Za||(xt.Na=an.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var kn,Vt;if(xt=an,an=Tn,or=Ie.Pa.Xc,Pr=Ie.ya[Ie.aa+Ie.ja],Sn=Ie.pb[Pr.$b],Tt=Pr.ad,gr=0,Lr=Ie.rb[Ie.sb-1],It=Jn=0,i(Tt,gr,0,384),Pr.Za)var lr=0,Wi=or[3];else{zt=s(16);var Rn=xt.Na+Lr.Na;if(Rn=Gc(an,or[1],Rn,Sn.Eb,0,zt,0),xt.Na=Lr.Na=(0<Rn)+0,1<Rn)wa(zt,0,Tt,gr);else{var Hr=zt[0]+3>>3;for(zt=0;256>zt;zt+=16)Tt[gr+zt]=Hr}lr=1,Wi=or[0]}var Xt=15&xt.la,Qn=15&Lr.la;for(zt=0;4>zt;++zt){var ai=1&Qn;for(Hr=Vt=0;4>Hr;++Hr)Xt=Xt>>1|(ai=(Rn=Gc(an,Wi,Rn=ai+(1&Xt),Sn.Sc,lr,Tt,gr))>lr)<<7,Vt=Vt<<2|(3<Rn?3:1<Rn?2:Tt[gr+0]!=0),gr+=16;Xt>>=4,Qn=Qn>>1|ai<<7,Jn=(Jn<<8|Vt)>>>0}for(Wi=Xt,lr=Qn>>4,kn=0;4>kn;kn+=2){for(Vt=0,Xt=xt.la>>4+kn,Qn=Lr.la>>4+kn,zt=0;2>zt;++zt){for(ai=1&Qn,Hr=0;2>Hr;++Hr)Rn=ai+(1&Xt),Xt=Xt>>1|(ai=0<(Rn=Gc(an,or[2],Rn,Sn.Qc,0,Tt,gr)))<<3,Vt=Vt<<2|(3<Rn?3:1<Rn?2:Tt[gr+0]!=0),gr+=16;Xt>>=2,Qn=Qn>>1|ai<<5}It|=Vt<<4*kn,Wi|=Xt<<4<<kn,lr|=(240&Qn)<<kn}xt.la=Wi,Lr.la=lr,Pr.Hc=Jn,Pr.Gc=It,Pr.ia=43690&It?0:Sn.ia,or=!(Jn|It)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[jt.$b][jt.Za],Ie.wa[Ie.Y+Ie.ja].La|=!or),Tn.Ka)return Ut(Lt,7,"Premature end-of-file encountered.")}if(ji(Lt),Ie=Xn,Tn=1,jt=(Je=Lt).D,xt=0<Je.L&&Je.M>=Je.zb&&Je.M<=Je.Va,Je.Aa==0)t:{if(jt.M=Je.M,jt.uc=xt,Ei(Je,jt),Tn=1,jt=(Vt=Je.D).Nb,xt=(It=Kd[Je.L])*Je.R,an=It/2*Je.B,zt=16*jt*Je.R,Hr=8*jt*Je.B,or=Je.sa,Pr=Je.ta-xt+zt,Sn=Je.qa,Tt=Je.ra-an+Hr,gr=Je.Ha,Lr=Je.Ia-an+Hr,Qn=(Xt=Vt.M)==0,Jn=Xt>=Je.Va-1,Je.Aa==2&&Ei(Je,Vt),Vt.uc)for(ai=(Rn=Je).D.M,t(Rn.D.uc),Vt=Rn.yb;Vt<Rn.Hb;++Vt){lr=Vt,Wi=ai;var Tr=(oi=(cr=Rn).D).Nb;kn=cr.R;var oi=oi.wa[oi.Y+lr],li=cr.sa,Wr=cr.ta+16*Tr*kn+16*lr,ci=oi.dd,tn=oi.tc;if(tn!=0)if(t(3<=tn),cr.L==1)0<lr&&by(li,Wr,kn,tn+4),oi.La&&xy(li,Wr,kn,tn),0<Wi&&yy(li,Wr,kn,tn+4),oi.La&&wy(li,Wr,kn,tn);else{var ui=cr.B,Ki=cr.qa,So=cr.ra+8*Tr*ui+8*lr,$s=cr.Ha,cr=cr.Ia+8*Tr*ui+8*lr;Tr=oi.ld,0<lr&&(Yn(li,Wr,kn,tn+4,ci,Tr),Wc(Ki,So,$s,cr,ui,tn+4,ci,Tr)),oi.La&&(Md(li,Wr,kn,tn,ci,Tr),vy(Ki,So,$s,cr,ui,tn,ci,Tr)),0<Wi&&(Ln(li,Wr,kn,tn+4,ci,Tr),Us(Ki,So,$s,cr,ui,tn+4,ci,Tr)),oi.La&&(fl(li,Wr,kn,tn,ci,Tr),gy(Ki,So,$s,cr,ui,tn,ci,Tr))}}if(Je.ia&&alert("todo:DitherRow"),Ie.put!=null){if(Vt=16*Xt,Xt=16*(Xt+1),Qn?(Ie.y=Je.sa,Ie.O=Je.ta+zt,Ie.f=Je.qa,Ie.N=Je.ra+Hr,Ie.ea=Je.Ha,Ie.W=Je.Ia+Hr):(Vt-=It,Ie.y=or,Ie.O=Pr,Ie.f=Sn,Ie.N=Tt,Ie.ea=gr,Ie.W=Lr),Jn||(Xt-=It),Xt>Ie.o&&(Xt=Ie.o),Ie.F=null,Ie.J=null,Je.Fa!=null&&0<Je.Fa.length&&Vt<Xt&&(Ie.J=Kn(Je,Ie,Vt,Xt-Vt),Ie.F=Je.mb,Ie.F==null&&Ie.F.length==0)){Tn=Ut(Je,3,"Could not decode alpha data.");break t}Vt<Ie.j&&(It=Ie.j-Vt,Vt=Ie.j,t(!(1&It)),Ie.O+=Je.R*It,Ie.N+=Je.B*(It>>1),Ie.W+=Je.B*(It>>1),Ie.F!=null&&(Ie.J+=Ie.width*It)),Vt<Xt&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=Vt-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=Xt-Vt,Tn=Ie.put(Ie))}jt+1!=Je.Ic||Jn||(r(Je.sa,Je.ta-xt,or,Pr+16*Je.R,xt),r(Je.qa,Je.ra-an,Sn,Tt+8*Je.B,an),r(Je.Ha,Je.Ia-an,gr,Lr+8*Je.B,an))}if(!Tn)return Ut(Lt,6,"Output aborted.")}return 1}(H,se)),se.bc!=null&&se.bc(se),ue&=1}return ue?(H.cb=0,ue):0})(h,j)||(m=h.a)}}else m=h.a}m==0&&O.Oa!=null&&O.Oa.fd&&(m=Uc(O.ba))}O=m}L=O!=0?null:11>L?D.f.RGBA.eb:D.f.kb.y}else L=null;return L};var $y=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(I,J){for(var R="",P=0;P<4;P++)R+=String.fromCharCode(I[J++]);return R}function d(I,J){return I[J+0]|I[J+1]<<8}function p(I,J){return(I[J+0]|I[J+1]<<8|I[J+2]<<16)>>>0}function g(I,J){return(I[J+0]|I[J+1]<<8|I[J+2]<<16|I[J+3]<<24)>>>0}new l;var f=[0],_=[0],S=[],k=new l,y=e,x=function(I,J){var R={},P=0,K=!1,G=0,Z=0;if(R.frames=[],!function(N,M){for(var $=0;$<4;$++)if(N[M+$]!="RIFF".charCodeAt($))return!0;return!1}(I,J)){for(g(I,J+=4),J+=8;J<I.length;){var le=c(I,J),de=g(I,J+=4);J+=4;var X=de+(1&de);switch(le){case"VP8 ":case"VP8L":R.frames[P]===void 0&&(R.frames[P]={}),(ie=R.frames[P]).src_off=K?Z:J-8,ie.src_size=G+de+8,P++,K&&(K=!1,G=0,Z=0);break;case"VP8X":(ie=R.header={}).feature_flags=I[J];var ae=J+4;ie.canvas_width=1+p(I,ae),ae+=3,ie.canvas_height=1+p(I,ae),ae+=3;break;case"ALPH":K=!0,G=X+8,Z=J-8;break;case"ANIM":(ie=R.header).bgcolor=g(I,J),ae=J+4,ie.loop_count=d(I,ae),ae+=2;break;case"ANMF":var re,ie;(ie=R.frames[P]={}).offset_x=2*p(I,J),J+=3,ie.offset_y=2*p(I,J),J+=3,ie.width=1+p(I,J),J+=3,ie.height=1+p(I,J),J+=3,ie.duration=p(I,J),J+=3,re=I[J++],ie.dispose=1&re,ie.blend=re>>1&1}le!="ANMF"&&(J+=X)}return R}}(y,0);x.response=y,x.rgbaoutput=!0,x.dataurl=!1;var w=x.header?x.header:null,E=x.frames?x.frames:null;if(w){w.loop_counter=w.loop_count,f=[w.canvas_height],_=[w.canvas_width];for(var B=0;B<E.length&&E[B].blend!=0;B++);}var q=E[0],z=k.WebPDecodeRGBA(y,q.src_off,q.src_size,_,f);q.rgba=z,q.imgwidth=_[0],q.imgheight=f[0];for(var F=0;F<_[0]*f[0]*4;F++)S[F]=z[F];return this.width=_,this.height=f,this.data=S,this}(function(e){var t,n,r,i,s,a,o,l,c,d=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new l,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new a,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new a,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=N;Object.defineProperty(this,"pdf",{get:function(){return M}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(ve){$=!!ve}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(ve){Q=!!ve}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(ve){isNaN(ve)||(te=ve)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(ve){isNaN(ve)||(oe=ve)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ve){var Y;typeof ve=="number"?Y=[ve,ve,ve,ve]:((Y=new Array(4))[0]=ve[0],Y[1]=ve.length>=2?ve[1]:Y[0],Y[2]=ve.length>=3?ve[2]:Y[0],Y[3]=ve.length>=4?ve[3]:Y[1]),c.margin=Y}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(ve){me=ve}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(ve){he=ve}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(ve){ge=ve}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ve){ve instanceof d&&(c=ve)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ve){c.path=ve}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(ve){_e=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var Y;Y=g(ve),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var Y=g(ve);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Re=null,Pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pe},set:function(ve){Re=null,Pe=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var Y;if(this.ctx.font=ve,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var _t=Y[1];Y[2];var He=Y[3],nt=Y[4];Y[5];var Ee=Y[6],Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(nt)[2];nt=Math.floor(Ke==="px"?parseFloat(nt)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(nt)*this.pdf.getFontSize():parseFloat(nt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(nt);var Oe=function(ct){var De,$t,Rt=[],Ge=ct.trim();if(Ge==="")return dx;if(Ge in rx)return[rx[Ge]];for(;Ge!=="";){switch($t=null,De=(Ge=sx(Ge)).charAt(0)){case'"':case"'":$t=p9(Ge.substring(1),De);break;default:$t=m9(Ge)}if($t===null||(Rt.push($t[0]),(Ge=sx($t[1]))!==""&&Ge.charAt(0)!==","))return dx;Ge=Ge.replace(/^,/,"")}return Rt}(Ee);if(this.fontFaces){var ut=function(ct,De){if(Re===null){var $t=function(Rt){var Ge=[];return Object.keys(Rt).forEach(function(gt){Rt[gt].forEach(function(Mt){var at=null;switch(Mt){case"bold":at={family:gt,weight:"bold"};break;case"italic":at={family:gt,style:"italic"};break;case"bolditalic":at={family:gt,weight:"bold",style:"italic"};break;case"":case"normal":at={family:gt}}at!==null&&(at.ref={name:gt,style:Mt},Ge.push(at))})}),Ge}(ct.getFontList());Re=function(Rt){for(var Ge={},gt=0;gt<Rt.length;++gt){var Mt=A0(Rt[gt]),at=Mt.family,Nt=Mt.stretch,vt=Mt.style,pn=Mt.weight;Ge[at]=Ge[at]||{},Ge[at][Nt]=Ge[at][Nt]||{},Ge[at][Nt][vt]=Ge[at][Nt][vt]||{},Ge[at][Nt][vt][pn]=Mt}return Ge}($t.concat(De))}return Re}(this.pdf,this.fontFaces),Be=Oe.map(function(ct){return{family:ct,stretch:"normal",weight:He,style:_t}}),Ct=function(ct,De,$t){for(var Rt=($t=$t||{}).defaultFontFamily||"times",Ge=Object.assign({},f9,$t.genericFontFamilies||{}),gt=null,Mt=null,at=0;at<De.length;++at)if(Ge[(gt=A0(De[at])).family]&&(gt.family=Ge[gt.family]),ct.hasOwnProperty(gt.family)){Mt=ct[gt.family];break}if(!(Mt=Mt||ct[Rt]))throw new Error("Could not find a font-family for the rule '"+ix(gt)+"' and default family '"+Rt+"'.");if(Mt=function(Nt,vt){if(vt[Nt])return vt[Nt];var pn=d1[Nt],An=pn<=d1.normal?-1:1,Bt=nx(vt,Ej,pn,An);if(!Bt)throw new Error("Could not find a matching font-stretch value for "+Nt);return Bt}(gt.stretch,Mt),Mt=function(Nt,vt){if(vt[Nt])return vt[Nt];for(var pn=Nj[Nt],An=0;An<pn.length;++An)if(vt[pn[An]])return vt[pn[An]];throw new Error("Could not find a matching font-style for "+Nt)}(gt.style,Mt),!(Mt=function(Nt,vt){if(vt[Nt])return vt[Nt];if(Nt===400&&vt[500])return vt[500];if(Nt===500&&vt[400])return vt[400];var pn=h9[Nt],An=nx(vt,Aj,pn,Nt<400?-1:1);if(!An)throw new Error("Could not find a matching font-weight for value "+Nt);return An}(gt.weight,Mt)))throw new Error("Failed to resolve a font for the rule '"+ix(gt)+"'.");return Mt}(ut,Be);this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var Ne="";(He==="bold"||parseInt(He,10)>=700||_t==="bold")&&(Ne="bold"),_t==="italic"&&(Ne+="italic"),Ne.length===0&&(Ne="normal");for(var Me="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pt=0;pt<Oe.length;pt++){if(this.pdf.internal.getFont(Oe[pt],Ne,{noFallback:!0,disableWarning:!0})!==void 0){Me=Oe[pt];break}if(Ne==="bolditalic"&&this.pdf.internal.getFont(Oe[pt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Me=Oe[pt],Ne="bold";else if(this.pdf.internal.getFont(Oe[pt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Me=Oe[pt],Ne="normal";break}}if(Me===""){for(var rt=0;rt<Oe.length;rt++)if(ot[Oe[rt]]){Me=ot[Oe[rt]];break}}Me=Me===""?"Times":Me,this.pdf.setFont(Me,Ne)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};p.prototype.setLineDash=function(N){this.lineDash=N},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){E.call(this,"fill",!1)},p.prototype.stroke=function(){E.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(N,M){if(isNaN(N)||isNaN(M))throw Jt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new a(N,M));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new a(N,M)},p.prototype.closePath=function(){var N=new a(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&Ht(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){N=new a(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(N.x,N.y)},p.prototype.lineTo=function(N,M){if(isNaN(N)||isNaN(M))throw Jt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new a(N,M));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new a($.x,$.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},p.prototype.quadraticCurveTo=function(N,M,$,Q){if(isNaN($)||isNaN(Q)||isNaN(N)||isNaN(M))throw Jt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new a($,Q)),oe=this.ctx.transform.applyToPoint(new a(N,M));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},p.prototype.bezierCurveTo=function(N,M,$,Q,te,oe){if(isNaN(te)||isNaN(oe)||isNaN(N)||isNaN(M)||isNaN($)||isNaN(Q))throw Jt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new a(te,oe)),he=this.ctx.transform.applyToPoint(new a(N,M)),ge=this.ctx.transform.applyToPoint(new a($,Q));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:ge.x,y2:ge.y,x:me.x,y:me.y}),this.ctx.lastPoint=new a(me.x,me.y)},p.prototype.arc=function(N,M,$,Q,te,oe){if(isNaN(N)||isNaN(M)||isNaN($)||isNaN(Q)||isNaN(te))throw Jt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new a(N,M));N=me.x,M=me.y;var he=this.ctx.transform.applyToPoint(new a(0,$)),ge=this.ctx.transform.applyToPoint(new a(0,0));$=Math.sqrt(Math.pow(he.x-ge.x,2)+Math.pow(he.y-ge.y,2))}Math.abs(te-Q)>=2*Math.PI&&(Q=0,te=2*Math.PI),this.path.push({type:"arc",x:N,y:M,radius:$,startAngle:Q,endAngle:te,counterclockwise:oe})},p.prototype.arcTo=function(N,M,$,Q,te){throw new Error("arcTo not implemented.")},p.prototype.rect=function(N,M,$,Q){if(isNaN(N)||isNaN(M)||isNaN($)||isNaN(Q))throw Jt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,M),this.lineTo(N+$,M),this.lineTo(N+$,M+Q),this.lineTo(N,M+Q),this.lineTo(N,M),this.lineTo(N+$,M),this.lineTo(N,M)},p.prototype.fillRect=function(N,M,$,Q){if(isNaN(N)||isNaN(M)||isNaN($)||isNaN(Q))throw Jt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,M,$,Q),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},p.prototype.strokeRect=function(N,M,$,Q){if(isNaN(N)||isNaN(M)||isNaN($)||isNaN(Q))throw Jt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(N,M,$,Q),this.stroke())},p.prototype.clearRect=function(N,M,$,Q){if(isNaN(N)||isNaN(M)||isNaN($)||isNaN(Q))throw Jt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,M,$,Q))},p.prototype.save=function(N){N=typeof N!="boolean"||N;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},p.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(M),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(N){var M,$,Q,te;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))M=0,$=0,Q=0,te=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(oe!==null)M=parseInt(oe[1]),$=parseInt(oe[2]),Q=parseInt(oe[3]),te=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)M=parseInt(oe[1]),$=parseInt(oe[2]),Q=parseInt(oe[3]),te=parseFloat(oe[4]);else{if(te=1,typeof N=="string"&&N.charAt(0)!=="#"){var me=new bj(N);N=me.ok?me.toHex():"#000000"}N.length===4?(M=N.substring(1,2),M+=M,$=N.substring(2,3),$+=$,Q=N.substring(3,4),Q+=Q):(M=N.substring(1,3),$=N.substring(3,5),Q=N.substring(5,7)),M=parseInt(M,16),$=parseInt($,16),Q=parseInt(Q,16)}}return{r:M,g:$,b:Q,a:te,style:N}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(N,M,$,Q){if(isNaN(M)||isNaN($)||typeof N!="string")throw Jt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!f.call(this)){var te=X(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;P.call(this,{text:N,x:M,y:$,scale:oe,angle:te,align:this.textAlign,maxWidth:Q})}},p.prototype.strokeText=function(N,M,$,Q){if(isNaN(M)||isNaN($)||typeof N!="string")throw Jt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){Q=isNaN(Q)?void 0:Q;var te=X(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;P.call(this,{text:N,x:M,y:$,scale:oe,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Q})}},p.prototype.measureText=function(N){if(typeof N!="string")throw Jt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,$=this.pdf.internal.scaleFactor,Q=M.internal.getFontSize(),te=M.getStringUnitWidth(N)*Q/M.internal.scaleFactor;return new function(oe){var me=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:te*=Math.round(96*$/72*1e4)/1e4})},p.prototype.scale=function(N,M){if(isNaN(N)||isNaN(M))throw Jt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new l(N,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply($)},p.prototype.rotate=function(N){if(isNaN(N))throw Jt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new l(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},p.prototype.translate=function(N,M){if(isNaN(N)||isNaN(M))throw Jt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new l(1,0,0,1,N,M);this.ctx.transform=this.ctx.transform.multiply($)},p.prototype.transform=function(N,M,$,Q,te,oe){if(isNaN(N)||isNaN(M)||isNaN($)||isNaN(Q)||isNaN(te)||isNaN(oe))throw Jt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(N,M,$,Q,te,oe);this.ctx.transform=this.ctx.transform.multiply(me)},p.prototype.setTransform=function(N,M,$,Q,te,oe){N=isNaN(N)?1:N,M=isNaN(M)?0:M,$=isNaN($)?0:$,Q=isNaN(Q)?1:Q,te=isNaN(te)?0:te,oe=isNaN(oe)?0:oe,this.ctx.transform=new l(N,M,$,Q,te,oe)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(N,M,$,Q,te,oe,me,he,ge){var _e=this.pdf.getImageProperties(N),Re=1,Pe=1,ve=1,Y=1;Q!==void 0&&he!==void 0&&(ve=he/Q,Y=ge/te,Re=_e.width/Q*he/Q,Pe=_e.height/te*ge/te),oe===void 0&&(oe=M,me=$,M=0,$=0),Q!==void 0&&he===void 0&&(he=Q,ge=te),Q===void 0&&he===void 0&&(he=_e.width,ge=_e.height);for(var _t,He=this.ctx.transform.decompose(),nt=X(He.rotate.shx),Ee=new l,Ke=(Ee=(Ee=(Ee=Ee.multiply(He.translate)).multiply(He.skew)).multiply(He.scale)).applyToRectangle(new o(oe-M*ve,me-$*Y,Q*Re,te*Pe)),Oe=k.call(this,Ke),ut=[],Be=0;Be<Oe.length;Be+=1)ut.indexOf(Oe[Be])===-1&&ut.push(Oe[Be]);if(w(ut),this.autoPaging)for(var Ct=ut[0],Ne=ut[ut.length-1],Me=Ct;Me<Ne+1;Me++){this.pdf.setPage(Me);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=Me===1?this.posY+this.margin[0]:this.margin[0],rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=Me===1?0:rt+(Me-2)*ct;if(this.ctx.clip_path.length!==0){var $t=this.path;_t=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(_t,this.posX+this.margin[3],-De+pt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=$t}var Rt=JSON.parse(JSON.stringify(Ke));Rt=x([Rt],this.posX+this.margin[3],-De+pt+this.ctx.prevPageLastElemOffset)[0];var Ge=(Me>Ct||Me<Ne)&&S.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,ct,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,nt),Ge&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(N,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,nt)};var k=function(N,M,$){var Q=[];M=M||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":Q.push(Math.floor((N.y+te)/$)+1);break;case"arc":Q.push(Math.floor((N.y+te-N.radius)/$)+1),Q.push(Math.floor((N.y+te+N.radius)/$)+1);break;case"qct":var oe=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);Q.push(Math.floor((oe.y+te)/$)+1),Q.push(Math.floor((oe.y+oe.h+te)/$)+1);break;case"bct":var me=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);Q.push(Math.floor((me.y+te)/$)+1),Q.push(Math.floor((me.y+me.h+te)/$)+1);break;case"rect":Q.push(Math.floor((N.y+te)/$)+1),Q.push(Math.floor((N.y+N.h+te)/$)+1)}for(var he=0;he<Q.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<Q[he];)y.call(this);return Q},y=function(){var N=this.fillStyle,M=this.strokeStyle,$=this.font,Q=this.lineCap,te=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=M,this.font=$,this.lineCap=Q,this.lineWidth=te,this.lineJoin=oe},x=function(N,M,$){for(var Q=0;Q<N.length;Q++)switch(N[Q].type){case"bct":N[Q].x2+=M,N[Q].y2+=$;case"qct":N[Q].x1+=M,N[Q].y1+=$;default:N[Q].x+=M,N[Q].y+=$}return N},w=function(N){return N.sort(function(M,$){return M-$})},E=function(N,M){for(var $,Q,te=this.fillStyle,oe=this.strokeStyle,me=this.lineCap,he=this.lineWidth,ge=Math.abs(he*this.ctx.transform.scaleX),_e=this.lineJoin,Re=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),ve=[],Y=0;Y<Pe.length;Y++)if(Pe[Y].x!==void 0)for(var _t=k.call(this,Pe[Y]),He=0;He<_t.length;He+=1)ve.indexOf(_t[He])===-1&&ve.push(_t[He]);for(var nt=0;nt<ve.length;nt++)for(;this.pdf.internal.getNumberOfPages()<ve[nt];)y.call(this);if(w(ve),this.autoPaging)for(var Ee=ve[0],Ke=ve[ve.length-1],Oe=Ee;Oe<Ke+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=te,this.strokeStyle=oe,this.lineCap=me,this.lineWidth=ge,this.lineJoin=_e;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=Oe===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Me=Oe===1?0:Ct+(Oe-2)*Ne;if(this.ctx.clip_path.length!==0){var ot=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x($,this.posX+this.margin[3],-Me+Be+this.ctx.prevPageLastElemOffset),B.call(this,N,!0),this.path=ot}if(Q=JSON.parse(JSON.stringify(Re)),this.path=x(Q,this.posX+this.margin[3],-Me+Be+this.ctx.prevPageLastElemOffset),M===!1||Oe===0){var pt=(Oe>Ee||Oe<Ke)&&S.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Ne,null).clip().discardPath()),B.call(this,N,M),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=ge,B.call(this,N,M),this.lineWidth=he;this.path=Re},B=function(N,M){if((N!=="stroke"||M||!_.call(this))&&(N==="stroke"||M||!f.call(this))){for(var $,Q,te=[],oe=this.path,me=0;me<oe.length;me++){var he=oe[me];switch(he.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:he,deltas:[],abs:[]});break;case"lt":var ge=te.length;if(oe[me-1]&&!isNaN(oe[me-1].x)&&($=[he.x-oe[me-1].x,he.y-oe[me-1].y],ge>0)){for(;ge>=0;ge--)if(te[ge-1].close!==!0&&te[ge-1].begin!==!0){te[ge-1].deltas.push($),te[ge-1].abs.push(he);break}}break;case"bct":$=[he.x1-oe[me-1].x,he.y1-oe[me-1].y,he.x2-oe[me-1].x,he.y2-oe[me-1].y,he.x-oe[me-1].x,he.y-oe[me-1].y],te[te.length-1].deltas.push($);break;case"qct":var _e=oe[me-1].x+2/3*(he.x1-oe[me-1].x),Re=oe[me-1].y+2/3*(he.y1-oe[me-1].y),Pe=he.x+2/3*(he.x1-he.x),ve=he.y+2/3*(he.y1-he.y),Y=he.x,_t=he.y;$=[_e-oe[me-1].x,Re-oe[me-1].y,Pe-oe[me-1].x,ve-oe[me-1].y,Y-oe[me-1].x,_t-oe[me-1].y],te[te.length-1].deltas.push($);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(he)}}Q=M?null:N==="stroke"?"stroke":"fill";for(var He=!1,nt=0;nt<te.length;nt++)if(te[nt].arc)for(var Ee=te[nt].abs,Ke=0;Ke<Ee.length;Ke++){var Oe=Ee[Ke];Oe.type==="arc"?F.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,M,!He):K.call(this,Oe.x,Oe.y),He=!0}else if(te[nt].close===!0)this.pdf.internal.out("h"),He=!1;else if(te[nt].begin!==!0){var ut=te[nt].start.x,Be=te[nt].start.y;G.call(this,te[nt].deltas,ut,Be),He=!0}Q&&I.call(this,Q),M&&J.call(this)}},q=function(N){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-$;case"top":return N+M-$;case"hanging":return N+M-2*$;case"middle":return N+M/2-$;default:return N}},z=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(M,$){this.colorStops.push([M,$])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(N,M,$,Q,te,oe,me,he,ge){for(var _e=le.call(this,$,Q,te,oe),Re=0;Re<_e.length;Re++){var Pe=_e[Re];Re===0&&(ge?R.call(this,Pe.x1+N,Pe.y1+M):K.call(this,Pe.x1+N,Pe.y1+M)),Z.call(this,N,M,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}he?J.call(this):I.call(this,me)},I=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(N,M){this.pdf.internal.out(n(N)+" "+r(M)+" m")},P=function(N){var M;switch(N.align){case"right":case"end":M="right";break;case"center":M="center";break;default:M="left"}var $=this.pdf.getTextDimensions(N.text),Q=q.call(this,N.y),te=z.call(this,Q)-$.h,oe=this.ctx.transform.applyToPoint(new a(N.x,Q)),me=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var ge,_e,Re,Pe=this.ctx.transform.applyToRectangle(new o(N.x,Q,$.w,$.h)),ve=he.applyToRectangle(new o(N.x,te,$.w,$.h)),Y=k.call(this,ve),_t=[],He=0;He<Y.length;He+=1)_t.indexOf(Y[He])===-1&&_t.push(Y[He]);if(w(_t),this.autoPaging)for(var nt=_t[0],Ee=_t[_t.length-1],Ke=nt;Ke<Ee+1;Ke++){this.pdf.setPage(Ke);var Oe=Ke===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],Ct=Be-this.margin[0],Ne=this.pdf.internal.pageSize.width-this.margin[1],Me=Ne-this.margin[3],ot=Ke===1?0:ut+(Ke-2)*Ct;if(this.ctx.clip_path.length!==0){var pt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(ge,this.posX+this.margin[3],-1*ot+Oe),B.call(this,"fill",!0),this.path=pt}var rt=x([JSON.parse(JSON.stringify(ve))],this.posX+this.margin[3],-ot+Oe+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*N.scale),Re=this.lineWidth,this.lineWidth=Re*N.scale);var ct=this.autoPaging!=="text";if(ct||rt.y+rt.h<=Be){if(ct||rt.y>=Oe&&rt.x<=Ne){var De=ct?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||Ne-rt.x)[0],$t=x([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-ot+Oe+this.ctx.prevPageLastElemOffset)[0],Rt=ct&&(Ke>nt||Ke<Ee)&&S.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,Ct,null).clip().discardPath()),this.pdf.text(De,$t.x,$t.y,{angle:N.angle,align:M,renderingMode:N.renderingMode}),Rt&&this.pdf.restoreGraphicsState()}}else rt.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-rt.y);N.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)}else N.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*N.scale),Re=this.lineWidth,this.lineWidth=Re*N.scale),this.pdf.text(N.text,oe.x+this.posX,oe.y+this.posY,{angle:N.angle,align:M,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)},K=function(N,M,$,Q){$=$||0,Q=Q||0,this.pdf.internal.out(n(N+$)+" "+r(M+Q)+" l")},G=function(N,M,$){return this.pdf.lines(N,M,$,null,null)},Z=function(N,M,$,Q,te,oe,me,he){this.pdf.internal.out([t(i($+N)),t(s(Q+M)),t(i(te+N)),t(s(oe+M)),t(i(me+N)),t(s(he+M)),"c"].join(" "))},le=function(N,M,$,Q){for(var te=2*Math.PI,oe=Math.PI/2;M>$;)M-=te;var me=Math.abs($-M);me<te&&Q&&(me=te-me);for(var he=[],ge=Q?-1:1,_e=M;me>1e-5;){var Re=_e+ge*Math.min(me,oe);he.push(de.call(this,N,_e,Re)),me-=Math.abs(Re-_e),_e=Re}return he},de=function(N,M,$){var Q=($-M)/2,te=N*Math.cos(Q),oe=N*Math.sin(Q),me=te,he=-oe,ge=me*me+he*he,_e=ge+me*te+he*oe,Re=4/3*(Math.sqrt(2*ge*_e)-_e)/(me*oe-he*te),Pe=me-Re*he,ve=he+Re*me,Y=Pe,_t=-ve,He=Q+M,nt=Math.cos(He),Ee=Math.sin(He);return{x1:N*Math.cos(M),y1:N*Math.sin(M),x2:Pe*nt-ve*Ee,y2:Pe*Ee+ve*nt,x3:Y*nt-_t*Ee,y3:Y*Ee+_t*nt,x4:N*Math.cos($),y4:N*Math.sin($)}},X=function(N){return 180*N/Math.PI},ae=function(N,M,$,Q,te,oe){var me=N+.5*($-N),he=M+.5*(Q-M),ge=te+.5*($-te),_e=oe+.5*(Q-oe),Re=Math.min(N,te,me,ge),Pe=Math.max(N,te,me,ge),ve=Math.min(M,oe,he,_e),Y=Math.max(M,oe,he,_e);return new o(Re,ve,Pe-Re,Y-ve)},re=function(N,M,$,Q,te,oe,me,he){var ge,_e,Re,Pe,ve,Y,_t,He,nt,Ee,Ke,Oe,ut,Be,Ct=$-N,Ne=Q-M,Me=te-$,ot=oe-Q,pt=me-te,rt=he-oe;for(_e=0;_e<41;_e++)nt=(_t=(Re=N+(ge=_e/40)*Ct)+ge*((ve=$+ge*Me)-Re))+ge*(ve+ge*(te+ge*pt-ve)-_t),Ee=(He=(Pe=M+ge*Ne)+ge*((Y=Q+ge*ot)-Pe))+ge*(Y+ge*(oe+ge*rt-Y)-He),_e==0?(Ke=nt,Oe=Ee,ut=nt,Be=Ee):(Ke=Math.min(Ke,nt),Oe=Math.min(Oe,Ee),ut=Math.max(ut,nt),Be=Math.max(Be,Ee));return new o(Math.round(Ke),Math.round(Oe),Math.round(ut-Ke),Math.round(Be-Oe))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,M,$=(N=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:M}));this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(et.API),function(e){var t=function(a){var o,l,c,d,p,g,f,_,S,k;for(l=[],c=0,d=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;d>c;c+=4)(p=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(k=p%85))/85)-(S=p%85))/85)-(_=p%85))/85)-(f=p%85))/85)%85,l.push(g+33,f+33,_+33,S+33,k+33)):l.push(122);return function(y,x){for(var w=x;w>0;w--)y.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(a){var o,l,c,d,p,g=String,f="length",_=255,S="charCodeAt",k="slice",y="replace";for(a[k](-2),a=a[k](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),c=[],d=0,p=(a+=o="uuuuu"[k](a[f]%5||5))[f];p>d;d+=5)l=52200625*(a[S](d)-33)+614125*(a[S](d+1)-33)+7225*(a[S](d+2)-33)+85*(a[S](d+3)-33)+(a[S](d+4)-33),c.push(_&l>>24,_&l>>16,_&l>>8,_&l);return function(x,w){for(var E=w;E>0;E--)x.pop()}(c,o[f]),g.fromCharCode.apply(g,c)},r=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=i1(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(a,o){var l=0,c=a||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(et.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,d){var p=new XMLHttpRequest,g=0,f=function(_){var S=_.length,k=[],y=String.fromCharCode;for(g=0;g<S;g+=1)k.push(y(255&_.charCodeAt(g)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(f(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return f(p.responseText)}(i,s,a)}catch{}return o}(t,n,r)},e.loadImageFile=e.loadFile}(et.API),function(e){function t(){return(ft.html2canvas?Promise.resolve(ft.html2canvas):Pu(()=>Kh(()=>Wh(()=>Hh(()=>import("./html2canvas.esm-e0a7d97b-57644866-118b3ec4-118b3ec4.js"),[]),[]),[]),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ft.DOMPurify?Promise.resolve(ft.DOMPurify):Pu(()=>Kh(()=>Wh(()=>Hh(()=>import("./purify.es-96e69d58-f294671e-2caca07f-af2f78f2.js"),[]),[]),[]),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=Ht(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},s=function o(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(o(p,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return(d=d.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var _=d[f],S=_.src.find(function(k){return k.format==="truetype"});S&&c.addFont(S.url,_.ref.name,_.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,p){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,d),g}).then(d,p).then(function(g){return c.updateProgress(1),g})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:a.convert(Object.assign({},d),Promise.prototype),g=c.call(p,o,l);return a.convert(g,d.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,et.getPageSize=function(o,l,c){if(Ht(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var _,S=0,k=0;if(f.hasOwnProperty(g))S=f[g][1]/p,k=f[g][0]/p;else try{S=c[1],k=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",k>S&&(_=k,k=S,S=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",S>k&&(_=k,k=S,S=_)}return{width:k,height:S,unit:l,k:p,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(A0):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(et.API),et.API.addJS=function(e){return ox=e,this.internal.events.subscribe("postPutResources",function(){Bh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Bh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ax=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ox+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Bh!==void 0&&ax!==void 0&&this.internal.out("/Names <</JavaScript "+Bh+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var g=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(et.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(p){for(var g,f=256*p.charCodeAt(4)+p.charCodeAt(5),_=p.length,S={width:0,height:0,numcomponents:1},k=4;k<_;k+=2){if(k+=f,t.indexOf(p.charCodeAt(k+1))!==-1){g=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),S={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:g,numcomponents:p.charCodeAt(k+9)};break}f=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(et.API),et.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,s=QF(e,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,c=s.palette,d=s.depth;i=c&&l===1?function(F){for(var I=F.width,J=F.height,R=F.data,P=F.palette,K=F.depth,G=!1,Z=[],le=[],de=void 0,X=!1,ae=0,re=0;re<P.length;re++){var ie=dw(P[re],4),N=ie[0],M=ie[1],$=ie[2],Q=ie[3];Z.push(N,M,$),Q!=null&&(Q===0?(ae++,le.length<1&&le.push(re)):Q<255&&(X=!0))}if(X||ae>1){G=!0,le=void 0;var te=I*J;de=new Uint8Array(te);for(var oe=new DataView(R.buffer),me=0;me<te;me++){var he=C0(oe,me,K),ge=dw(P[he],4)[3];de[me]=ge}}else ae===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:R,alphaBytes:de,needSMask:G,palette:Z,mask:le}}(s):l===2||l===4?function(F){for(var I=F.data,J=F.width,R=F.height,P=F.channels,K=F.depth,G=P===2?"DeviceGray":"DeviceRGB",Z=P-1,le=J*R,de=Z,X=le*de,ae=1*le,re=Math.ceil(X*K/8),ie=Math.ceil(ae*K/8),N=new Uint8Array(re),M=new Uint8Array(ie),$=new DataView(I.buffer),Q=new DataView(N.buffer),te=new DataView(M.buffer),oe=!1,me=0;me<le;me++){for(var he=me*P,ge=0;ge<de;ge++)vx(Q,C0($,he+ge,K),me*de+ge,K);var _e=C0($,he+de,K);_e<(1<<K)-1&&(oe=!0),vx(te,_e,1*me,K)}return{colorSpace:G,colorsPerPixel:Z,sMaskBitsPerComponent:oe?K:void 0,colorBytes:N,alphaBytes:M,needSMask:oe}}(s):function(F){var I=F.data,J=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:J,colorsPerPixel:J==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(R){for(var P=R.length,K=new Uint8Array(2*P),G=new DataView(K.buffer,K.byteOffset,K.byteLength),Z=0;Z<P;Z++)G.setUint16(2*Z,R[Z],!1);return K}(I):I,needSMask:!1}}(s);var p,g,f,_=i,S=_.colorSpace,k=_.colorsPerPixel,y=_.sMaskBitsPerComponent,x=_.colorBytes,w=_.alphaBytes,E=_.needSMask,B=_.palette,q=_.mask,z=null;return r!==et.API.image_compression.NONE&&typeof i1=="function"?(z=function(F){var I;switch(F){case et.API.image_compression.FAST:I=11;break;case et.API.image_compression.MEDIUM:I=13;break;case et.API.image_compression.SLOW:I=14;break;default:I=12}return I}(r),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(z," /Colors ").concat(k," /BitsPerComponent ").concat(d," /Columns ").concat(a),e=hx(x,Math.ceil(a*k*d/8),k,d,r),E&&(f=hx(w,Math.ceil(a*y/8),1,y,r))):(p=void 0,g=void 0,e=x,E&&(f=w)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:e,index:t,filter:p,decodeParameters:g,transparency:q,palette:B,sMask:f,predictor:z,width:a,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:S}}},function(e){e.processGIF89A=function(t,n,r,i){var s=new b9(t),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},d=new P0(100).encode(c,100);return e.processJPEG.call(this,d,n,r,i)},e.processGIF87A=e.processGIF89A}(et.API),Yi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Yi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Jt.log("bit decode error:"+n)}},Yi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Yi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Yi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Yi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=e}},Yi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Yi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Yi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Yi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new Yi(t,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new P0(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(et.API),bx.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new bx(t),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new P0(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(et.API),et.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],g=r[c+2],f=r[c+3];s[o++]=d,s[o++]=p,s[o++]=g,a[l++]=f}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},et.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Sl=et.API,Uh=Sl.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=t.doKerning!==!1,g=0,f=e.length,_=0,S=o[0]||l,k=[];for(n=0;n<f;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(g=p&&Ht(c[r])==="object"&&!isNaN(parseInt(c[r][_],10))?c[r][_]/d:0,k.push((o[r]||S)/l+g)),_=r;return k},lx=Sl.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Sl.processArabic&&(e=Sl.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Uh.apply(this,arguments).reduce(function(s,a){return s+a},0)},cx=function(e,t,n,r){for(var i=[],s=0,a=e.length,o=0;s!==a&&o+t[s]<n;)o+=t[s],s++;i.push(e.slice(0,s));var l=s;for(o=0;s!==a;)o+t[s]>r&&(i.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&i.push(e.slice(l,s)),i},ux=function(e,t,n){n||(n={});var r,i,s,a,o,l,c,d=[],p=[d],g=n.textIndent||0,f=0,_=0,S=e.split(" "),k=Uh.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),x=[];S.map(function(E){(E=E.split(/\s*\n/)).length>1?x=x.concat(E.map(function(B,q){return(q&&B.length?`
`:"")+B})):x.push(E[0])}),S=x,l=lx.apply(this,[y,n])}for(s=0,a=S.length;s<a;s++){var w=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),w=1),g+f+(_=(i=Uh.apply(this,[r,n])).reduce(function(E,B){return E+B},0))>t||w){if(_>t){for(o=cx.apply(this,[r,i,t-(g+f),t]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);_=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(E,B){return E+B},0)}else d=[r];p.push(d),g=_+l,f=k}else d.push(r),g+=f+_,f=k}return c=l?function(E,B){return(B?y:"")+E.join(" ")}:function(E){return E.join(" ")},p.map(c)},Sl.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(ux.apply(this,[r[o],a,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=t[s],i[t[s]]=n[s];var a=function(g){return"0x"+parseInt(g,10).toString(16)},o=e.__fontmetrics__.compress=function(g){var f,_,S,k,y=["{"];for(var x in g){if(f=g[x],isNaN(parseInt(x,10))?_="'"+x+"'":(x=parseInt(x,10),_=(_=a(x).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof f=="number")f<0?(S=a(f).slice(3),k="-"):(S=a(f).slice(2),k=""),S=k+S.slice(0,-1)+i[S.slice(-1)];else{if(Ht(f)!=="object")throw new Error("Don't know what to do with value type "+Ht(f)+".");S=o(f)}y.push(_+S)}return y.push("}"),y.join("")},l=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,_,S,k,y={},x=1,w=y,E=[],B="",q="",z=g.length-1,F=1;F<z;F+=1)(k=g[F])=="'"?f?(S=f.join(""),f=void 0):f=[]:f?f.push(k):k=="{"?(E.push([w,S]),w={},S=void 0):k=="}"?((_=E.pop())[0][_[1]]=w,S=void 0,w=_[0]):k=="-"?x=-1:S===void 0?r.hasOwnProperty(k)?(B+=r[k],S=parseInt(B,16)*x,x=1,B=""):B+=k:r.hasOwnProperty(k)?(q+=r[k],w[S]=parseInt(q,16)*x,x=1,S=void 0,q=""):q+=k;return y},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var f=g.font,_=p.Unicode[f.postScriptName];_&&(f.metadata.Unicode={},f.metadata.Unicode.widths=_.widths,f.metadata.Unicode.kerning=_.kerning);var S=d.Unicode[f.postScriptName];S&&(f.metadata.Unicode.encoding=S,f.encoding=S.codePages[0])}])}(et.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(pf(o)),a.metadata=e.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(et),et.API.addSvgAsImage=function(e,t,n,r,i,s,a,o){if(isNaN(t)||isNaN(n))throw Jt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Jt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(ft.canvg?Promise.resolve(ft.canvg):Pu(()=>Kh(()=>Wh(()=>Hh(()=>import("./index.es-82fdd07e-73e64b34-2cf4d182-f0fa01dd.js"),[]),[]),[]),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),t,n,r,i,a,o)})},et.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},et.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,d=0,p=0;function g(_,S){var k,y=!1;for(k=0;k<_.length;k+=1)_[k]===S&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=o.length;for(p=0;p<f;p+=1)n[o[p]].value=n[o[p]].defaultValue,n[o[p]].explicitSet=!1}if(Ht(e)==="object"){for(i in e)if(s=e[i],g(o,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&g(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,S=[];for(_ in n)n[_].explicitSet===!0&&(n[_].type==="name"?S.push("/"+_+" /"+n[_].value):S.push("/"+_+" "+n[_].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(et.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,g=s.length;p<g;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},r=function(s){var a,o,l,c,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(s).sort(function(f,_){return f-_})).length;p<g;p++)a=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",_=0;_<g.length;_++)f+=String.fromCharCode(g[_]);var S=c();d({data:f,addLength1:!0,objectId:S}),l("endobj");var k=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Al(o.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Al(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+e.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+Al(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",f=0;f<p.length;f++)g+=String.fromCharCode(p[f]);var _=c();d({data:g,addLength1:!0,objectId:_}),l("endobj");var S=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var k=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Al(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Al(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},g=p.pdfEscape,f=p.activeFontKey,_=p.fonts,S=f,k="",y=0,x="",w=_[S].encoding;if(_[S].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:p};for(x=o,S=f,Array.isArray(o)&&(x=o[0]),y=0;y<x.length;y+=1)_[S].metadata.hasOwnProperty("cmap")&&(a=_[S].metadata.cmap.unicode.codeMap[x[y].charCodeAt(0)]),a||x[y].charCodeAt(0)<256&&_[S].metadata.hasOwnProperty("Unicode")?k+=x[y]:k+="";var E="";return parseInt(S.slice(1))<14||w==="WinAnsiEncoding"?E=g(k,S).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(E=n(k,_[S])),p.isHex=!0,{text:E,x:l,y:c,options:d,mutex:p}};t.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(i(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(et),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(et.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,o,l,c,d,p=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,w=0;this.__bidiEngine__={};var E=function(R){var P=R.charCodeAt(),K=P>>8,G=S[K];return G!==void 0?p[256*G+(255&P)]:K===252||K===253?"AL":y.test(K)?"L":K===8?"R":"N"},B=function(R){for(var P,K=0;K<R.length;K++){if((P=E(R.charAt(K)))==="L")return!1;if(P==="R")return!0}return!1},q=function(R,P,K,G){var Z,le,de,X,ae=P[G];switch(ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(ae="AN");break;case"AL":x=!0,ae="R";break;case"WS":case"BN":ae="N";break;case"CS":G<1||G+1>=P.length||(Z=K[G-1])!=="EN"&&Z!=="AN"||(le=P[G+1])!=="EN"&&le!=="AN"?ae="N":x&&(le="AN"),ae=le===Z?le:"N";break;case"ES":ae=(Z=G>0?K[G-1]:"B")==="EN"&&G+1<P.length&&P[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&K[G-1]==="EN"){ae="EN";break}if(x){ae="N";break}for(de=G+1,X=P.length;de<X&&P[de]==="ET";)de++;ae=de<X&&P[de]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(X=P.length,de=G+1;de<X&&P[de]==="NSM";)de++;if(de<X){var re=R[G],ie=re>=1425&&re<=2303||re===64286;if(Z=P[de],ie&&(Z==="R"||Z==="AL")){ae="R";break}}}ae=G<1||(Z=P[G-1])==="B"?"N":K[G-1];break;case"B":x=!1,i=!0,ae=w;break;case"S":s=!0,ae="N"}return ae},z=function(R,P,K){var G=R.split("");return K&&F(G,K,{hiLevel:w}),G.reverse(),P&&P.reverse(),G.join("")},F=function(R,P,K){var G,Z,le,de,X,ae=-1,re=R.length,ie=0,N=[],M=w?f:g,$=[];for(x=!1,i=!1,s=!1,Z=0;Z<re;Z++)$[Z]=E(R[Z]);for(le=0;le<re;le++){if(X=ie,N[le]=q(R,$,N,le),G=240&(ie=M[X][_[N[le]]]),ie&=15,P[le]=de=M[ie][5],G>0)if(G===16){for(Z=ae;Z<le;Z++)P[Z]=1;ae=-1}else ae=-1;if(M[ie][6])ae===-1&&(ae=le);else if(ae>-1){for(Z=ae;Z<le;Z++)P[Z]=de;ae=-1}$[le]==="B"&&(P[le]=0),K.hiLevel|=de}s&&function(Q,te,oe){for(var me=0;me<oe;me++)if(Q[me]==="S"){te[me]=w;for(var he=me-1;he>=0&&Q[he]==="WS";he--)te[he]=w}}($,P,re)},I=function(R,P,K,G,Z){if(!(Z.hiLevel<R)){if(R===1&&w===1&&!i)return P.reverse(),void(K&&K.reverse());for(var le,de,X,ae,re=P.length,ie=0;ie<re;){if(G[ie]>=R){for(X=ie+1;X<re&&G[X]>=R;)X++;for(ae=ie,de=X-1;ae<de;ae++,de--)le=P[ae],P[ae]=P[de],P[de]=le,K&&(le=K[ae],K[ae]=K[de],K[de]=le);ie=X}ie++}}},J=function(R,P,K){var G=R.split(""),Z={hiLevel:w};return K||(K=[]),F(G,K,Z),function(le,de,X){if(X.hiLevel!==0&&d)for(var ae,re=0;re<le.length;re++)de[re]===1&&(ae=k.indexOf(le[re]))>=0&&(le[re]=k[ae+1])}(G,K,Z),I(2,G,P,K,Z),I(1,G,P,K,Z),G.join("")};return this.__bidiEngine__.doBidiReorder=function(R,P,K){if(function(Z,le){if(le)for(var de=0;de<Z.length;de++)le[de]=de;o===void 0&&(o=B(Z)),c===void 0&&(c=B(Z))}(R,P),a||!l||c)if(a&&l&&o^c)w=o?1:0,R=z(R,P,K);else if(!a&&l&&c)w=o?1:0,R=J(R,P,K),R=z(R,P);else if(!a||o||l||c){if(a&&!l&&o^c)R=z(R,P),o?(w=0,R=J(R,P,K)):(w=1,R=J(R,P,K),R=z(R,P));else if(a&&o&&!l&&c)w=1,R=J(R,P,K),R=z(R,P);else if(!a&&!l&&o^c){var G=d;o?(w=1,R=J(R,P,K),w=0,d=!1,R=J(R,P,K),d=G):(w=0,R=J(R,P,K),R=z(R,P),w=1,d=!1,R=J(R,P,K),d=G,R=z(R,P))}}else w=0,R=J(R,P,K);else w=o?1:0,R=J(R,P,K);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,l=R.isOutputVisual,o=R.isInputRtl,c=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([n.doBidiReorder(i[o])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(et),et.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Qa(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new O9(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new w9(this.contents),this.head=new _9(this),this.name=new E9(this),this.cmap=new Pj(this),this.toUnicode={},this.hhea=new S9(this),this.maxp=new A9(this),this.hmtx=new C9(this),this.post=new j9(this),this.os2=new k9(this),this.loca=new R9(this),this.glyf=new P9(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,o;for(a=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var ds,Qa=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,o,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),w9=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,o,l,c,d,p,g,f,_,S;for(S in f=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(f)/l),a=Math.floor(p/l),d=16*f-p,(i=new Qa).writeInt(this.scalarType),i.writeShort(f),i.writeShort(p),i.writeShort(a),i.writeShort(d),s=16*f,c=i.pos+s,o=null,_=[],n)for(g=n[S],i.writeString(S),i.writeInt(e(g)),i.writeInt(c),i.writeInt(g.length),_=_.concat(g),S==="head"&&(o=c),c+=g.length;c%4;)_.push(0),c++;return i.write(_),r=2981146554-e(i.data),i.pos=o+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=Lj.call(n);n.length%4;)n.push(0);for(s=new Qa(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),x9={}.hasOwnProperty,Cs=function(e,t){for(var n in t)x9.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};ds=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var _9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Qa).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),wx=function(){function e(t,n){var r,i,s,a,o,l,c,d,p,g,f,_,S,k,y,x,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(f=t.readUInt16(),g=f/2,t.pos+=6,s=function(){var E,B;for(B=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)B.push(t.readUInt16());return B}(),t.pos+=2,S=function(){var E,B;for(B=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)B.push(t.readUInt16());return B}(),c=function(){var E,B;for(B=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)B.push(t.readUInt16());return B}(),d=function(){var E,B;for(B=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)B.push(t.readUInt16());return B}(),i=(this.length-t.pos+this.offset)/2,o=function(){var E,B;for(B=[],l=E=0;0<=i?E<i:E>i;l=0<=i?++E:--E)B.push(t.readUInt16());return B}(),l=y=0,w=s.length;y<w;l=++y)for(k=s[l],r=x=_=S[l];_<=k?x<=k:x>=k;r=_<=k?++x:--x)d[l]===0?a=r+c[l]:(a=o[d[l]/2+(r-_)-(g-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}t.pos=p}return e.encode=function(t,n){var r,i,s,a,o,l,c,d,p,g,f,_,S,k,y,x,w,E,B,q,z,F,I,J,R,P,K,G,Z,le,de,X,ae,re,ie,N,M,$,Q,te,oe,me,he,ge,_e,Re;switch(G=new Qa,a=Object.keys(t).sort(function(Pe,ve){return Pe-ve}),n){case"macroman":for(S=0,k=function(){var Pe=[];for(_=0;_<256;++_)Pe.push(0);return Pe}(),x={0:0},s={},Z=0,ae=a.length;Z<ae;Z++)x[he=t[i=a[Z]]]==null&&(x[he]=++S),s[i]={old:t[i],new:x[t[i]]},k[i]=x[t[i]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(k),{charMap:s,subtable:G.data,maxGlyphID:S+1};case"unicode":for(P=[],p=[],w=0,x={},r={},y=c=null,le=0,re=a.length;le<re;le++)x[B=t[i=a[le]]]==null&&(x[B]=++w),r[i]={old:B,new:x[B]},o=x[B]-i,y!=null&&o===c||(y&&p.push(y),P.push(i),c=o),y=i;for(y&&p.push(y),p.push(65535),P.push(65535),J=2*(I=P.length),F=2*Math.pow(Math.log(I)/Math.LN2,2),g=Math.log(F/2)/Math.LN2,z=2*I-F,l=[],q=[],f=[],_=de=0,ie=P.length;de<ie;_=++de){if(R=P[_],d=p[_],R===65535){l.push(0),q.push(0);break}if(R-(K=r[R].new)>=32768)for(l.push(0),q.push(2*(f.length+I-_)),i=X=R;R<=d?X<=d:X>=d;i=R<=d?++X:--X)f.push(r[i].new);else l.push(K-R),q.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*I+2*f.length),G.writeUInt16(0),G.writeUInt16(J),G.writeUInt16(F),G.writeUInt16(g),G.writeUInt16(z),oe=0,N=p.length;oe<N;oe++)i=p[oe],G.writeUInt16(i);for(G.writeUInt16(0),me=0,M=P.length;me<M;me++)i=P[me],G.writeUInt16(i);for(ge=0,$=l.length;ge<$;ge++)o=l[ge],G.writeUInt16(o);for(_e=0,Q=q.length;_e<Q;_e++)E=q[_e],G.writeUInt16(E);for(Re=0,te=f.length;Re<te;Re++)S=f[Re],G.writeUInt16(S);return{charMap:r,subtable:G.data,maxGlyphID:w+1}}},e}(),Pj=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new wx(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,i;return n==null&&(n="macroman"),r=wx.encode(t,n),(i=new Qa).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},e}(),S9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),k9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),j9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(t.readUInt32());return l}).call(this)}},e}(),N9=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},E9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,i,s,a,o,l,c,d,p,g;for(t.pos=this.offset,t.readShort(),n=t.readShort(),o=t.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(l={},s=d=0,p=r.length;d<p;s=++d)i=r[s],t.pos=i.offset,c=t.readString(i.length),a=new N9(c,i),l[g=i.nameID]==null&&(l[g]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),A9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),C9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,i,s,a,o,l;for(t.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)d.push(t.readInt16());return d}(),this.widths=(function(){var c,d,p,g;for(g=[],c=0,d=(p=this.metrics).length;c<d;c++)s=p[c],g.push(s.advance);return g}).call(this),r=this.widths[this.widths.length-1],l=[],n=a=0;0<=i?a<i:a>i;n=0<=i?++a:--a)l.push(this.widths.push(r));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Lj=[].slice,P9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,i,s,a,o,l,c,d,p;return t in this.cache?this.cache[t]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,a=(o=new Qa(n.read(i))).readShort(),c=o.readShort(),p=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[t]=a===-1?new T9(o,c,p,l,d):new L9(o,a,c,p,l,d),this.cache[t]))},e.prototype.encode=function(t,n,r){var i,s,a,o,l;for(a=[],s=[],o=0,l=n.length;o<l;o++)i=t[n[o]],s.push(a.length),i&&(a=a.concat(i.encode(r)));return s.push(a.length),{table:a,offsets:s}},e}(),L9=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),T9=function(){function e(t,n,r,i,s){var a,o;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Qa(Lj.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),R9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Cs(e,ds),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<r.length;++a)if(r[a]=i,s<n.length&&n[s]==a){++s,r[a]=i;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(i+=l)}for(var c=new Array(4*r.length),d=0;d<r.length;++d)c[4*d+3]=255&r[d],c[4*d+2]=(65280&r[d])>>8,c[4*d+1]=(16711680&r[d])>>16,c[4*d]=(4278190080&r[d])>>24;return c},e}(),O9=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,o,l;for(i={},a=0,o=t.length;a<o;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,o,l,c,d,p,g,f,_,S,k,y;for(i in r=Pj.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),f={0:0},y=r.charMap)f[(l=y[i]).old]=l.new;for(_ in g=r.maxGlyphID,a)_ in f||(f[_]=g++);return d=function(x){var w,E;for(w in E={},x)E[x[w]]=w;return E}(f),p=Object.keys(d).sort(function(x,w){return x-w}),S=function(){var x,w,E;for(E=[],x=0,w=p.length;x<w;x++)o=p[x],E.push(d[o]);return E}(),s=this.font.glyf.encode(a,S,f),c=this.font.loca.encode(s.offsets,S),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e}();et.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var o,l,c;for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(t.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();async function I9(e,t){try{const n={id:e,prenom:t.firstName,nom:t.lastName},{data:r,error:i}=await Pt.from("profiles").upsert(n,{onConflict:"id",returning:"representation"}).select().single();if(i)throw new Error(`Erreur mise  jour profil: ${i.message}`);return r}catch(n){throw n}}async function F9(e){var t,n,r,i;try{const{data:s,error:a}=await Pt.from("profiles").select("prenom, nom").eq("id",e.id).single(),o={id:e.id,email:e.email,prenom:(s==null?void 0:s.prenom)||((t=e.user_metadata)==null?void 0:t.firstName)||((n=e.user_metadata)==null?void 0:n.prenom)||null,nom:(s==null?void 0:s.nom)||((r=e.user_metadata)==null?void 0:r.lastName)||((i=e.user_metadata)==null?void 0:i.nom)||null,last_login:new Date().toISOString()},{data:l,error:c}=await Pt.from("profiles").upsert(o,{onConflict:"id",returning:"representation"}).select().single();if(c)throw new Error(`Erreur sync profil: ${c.message}`);return l}catch(s){throw s}}function dy(){const[e,t]=T.useState(null),[n,r]=T.useState(!0);return T.useEffect(()=>{const i=async()=>{try{const{data:{session:a}}=await Pt.auth.getSession();if(!(a!=null&&a.user)){t(null),r(!1);return}try{await F9(a.user)}catch{}const o=a.user.email.split("@")[0],l={id:a.user.id,email:a.user.email,firstName:o,lastName:"",name:o},{data:c,error:d}=await Pt.from("profiles").select("*").eq("id",a.user.id).single();if(c){const p={...l,firstName:c.prenom||l.firstName,lastName:c.nom||"",name:`${c.prenom||l.firstName} ${c.nom||""}`.trim(),profile:c};t(p)}else t(l)}catch{t(null)}finally{r(!1)}};i();const{data:{subscription:s}}=Pt.auth.onAuthStateChange(async(a,o)=>{a==="SIGNED_IN"?i():a==="SIGNED_OUT"&&(t(null),r(!1))});return()=>s==null?void 0:s.unsubscribe()},[]),{user:e,loading:n}}function xx(e){return e.includes("security purposes")&&e.includes("request this")||e.includes("only request this after")?"Pour des raisons de scurit, vous ne pouvez faire cette demande que toutes les 60 secondes.":e.includes("Invalid email")?"Adresse email invalide.":e.includes("User not found")?"Aucun compte trouv avec cette adresse email.":e.includes("Too many requests")?"Trop de tentatives. Veuillez ressayer dans quelques minutes.":e}async function D9({email:e}){try{const{error:t}=await Pt.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});return t?{error:{message:xx(t.message)}}:{data:{message:"Email de rinitialisation envoy avec succs"}}}catch(t){return{error:{message:"Erreur lors de l'envoi de l'email de rinitialisation: "+xx(t.message)}}}}const bf=(e,t=null)=>{if(!e||!e.trim())return;const n=t?`email_history_${t}`:"email_history_guest",r=localStorage.getItem(n);let i=[];if(r)try{i=JSON.parse(r)}catch{}const s=[e,...i.filter(a=>a!==e)].slice(0,5);localStorage.setItem(n,JSON.stringify(s))},M9=e=>{const[t,n]=T.useState([]),[r,i]=T.useState(!1),[s,a]=T.useState([]);return T.useEffect(()=>{const o=e!=null&&e.id?`email_history_${e.id}`:"email_history_guest",l=localStorage.getItem(o);if(l)try{const c=JSON.parse(l);n(c)}catch{}},[e]),{showSuggestions:r,filteredEmails:s,saveEmail:o=>{if(!o||!o.trim())return;const l=e!=null&&e.id?`email_history_${e.id}`:"email_history_guest",c=[o,...t.filter(d=>d!==o)].slice(0,5);n(c),localStorage.setItem(l,JSON.stringify(c))},removeEmail:o=>{const l=e!=null&&e.id?`email_history_${e.id}`:"email_history_guest",c=t.filter(d=>d!==o);n(c),localStorage.setItem(l,JSON.stringify(c)),a(d=>d.filter(p=>p!==o))},filterEmails:o=>{if(!o||o.length<1){a([]),i(!1);return}const l=t.filter(c=>c.toLowerCase().startsWith(o.toLowerCase()));a(l),i(l.length>0)},hideSuggestions:()=>i(!1)}},Kl=({value:e,onChange:t,placeholder:n,required:r,disabled:i,user:s,onEmailSubmit:a})=>{const{showSuggestions:o,filteredEmails:l,saveEmail:c,removeEmail:d,filterEmails:p,hideSuggestions:g}=M9(s),[f,_]=T.useState(e||""),[S,k]=T.useState(-1),y=T.useRef(null),x=T.useRef(null);T.useEffect(()=>{_(e||"")},[e]),T.useEffect(()=>{const q=z=>{x.current&&!x.current.contains(z.target)&&(g(),k(-1))};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[g]);const w=q=>{const z=q.target.value;_(z),t(q),p(z),k(-1)},E=q=>{var z;_(q),t({target:{value:q}}),g(),k(-1),(z=y.current)==null||z.focus()},B=q=>{if(!o||l.length===0){q.key==="Enter"&&a&&(c(f),a());return}switch(q.key){case"ArrowDown":q.preventDefault(),k(z=>z<l.length-1?z+1:z);break;case"ArrowUp":q.preventDefault(),k(z=>z>0?z-1:-1);break;case"Enter":q.preventDefault(),S>=0&&S<l.length?E(l[S]):a&&(c(f),a());break;case"Escape":g(),k(-1);break}};return u.jsxs("div",{className:"email-input-container",ref:x,children:[u.jsx("input",{ref:y,type:"email",value:f,onChange:w,onKeyDown:B,placeholder:n,required:r,disabled:i,autoComplete:"off"}),o&&l.length>0&&u.jsx("div",{className:"email-suggestions google-style",children:l.map((q,z)=>u.jsxs("div",{className:`email-suggestion-item ${z===S?"selected":""}`,onMouseEnter:()=>k(z),children:[u.jsx("div",{className:"email-suggestion-content",onClick:()=>E(q),children:q}),u.jsx("button",{type:"button",className:"email-suggestion-remove",onClick:F=>{F.stopPropagation(),d(q)},onMouseEnter:F=>F.stopPropagation(),title:"Supprimer cet email",children:""})]},z))})]})},B9=({isLoggedIn:e,onLogin:t,onLogout:n,onRegister:r,onOpenHistory:i,onOpenSubscription:s})=>{var a,o,l,c,d;const[p,g]=T.useState(!1),[f,_]=T.useState(!1),[S,k]=T.useState(!1),[y,x]=T.useState(!1),[w,E]=T.useState(""),[B,q]=T.useState(""),[z,F]=T.useState(""),[I,J]=T.useState(""),[R,P]=T.useState(""),[K,G]=T.useState(!1),{user:Z,loading:le}=dy(),de=!!Z&&!le,X=T.useRef(null),[ae,re]=T.useState(""),[ie,N]=T.useState(""),[M,$]=T.useState("");T.useState(!1),T.useState("");const[Q,te]=T.useState(!1),[oe,me]=T.useState(!1),[he,ge]=T.useState(""),[_e,Re]=T.useState(!1),[Pe,ve]=T.useState(!1),[Y,_t]=T.useState(!1),[He,nt]=T.useState(!1);T.useEffect(()=>{(async()=>{if(!Z||!Z.id){ve(!1);return}try{const{data:Ne,error:Me}=await Pt.from("profiles").select("role").eq("id",Z.id).single();if(Me){ve(!1);return}const ot=(Ne==null?void 0:Ne.role)==="admin"||(Ne==null?void 0:Ne.role)==="super_admin";ve(ot)}catch{ve(!1)}})()},[Z]);const Ee=()=>Pe,Ke=async Ne=>{Ne.preventDefault(),P(""),G(!0);try{const{data:Me,error:ot}=await Pt.auth.signInWithPassword({email:w.trim(),password:B.trim()});if(ot){P(ot.message==="Invalid login credentials"?"Email ou mot de passe incorrect":ot.message);return}Me!=null&&Me.user&&(bf(w.trim()),_(!1),g(!1),E(""),q(""),t&&t(Me.user))}catch{P("Erreur de connexion. Vrifiez vos identifiants.")}finally{G(!1)}},Oe=async Ne=>{Ne.preventDefault(),P(""),G(!0);try{const{data:Me,error:ot}=await Pt.auth.signUp({email:w.trim(),password:B.trim(),options:{data:{firstName:z.trim(),lastName:I.trim(),name:`${z.trim()} ${I.trim()}`}}});if(ot){P(ot.message==="User already registered"?"Un compte existe dj avec cet email":ot.message);return}Me!=null&&Me.user&&(bf(w.trim()),Me.session?(k(!1),g(!1),E(""),q(""),F(""),J(""),r&&r(Me.user)):P("Un email de confirmation a t envoy. Vrifiez votre bote mail."))}catch{P("Erreur d'inscription. Ressayez plus tard.")}finally{G(!1)}},ut=async()=>{try{const{error:Ne}=await Pt.auth.signOut();if(Ne){P("Erreur lors de la dconnexion");return}g(!1),x(!1),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("friday_supabase_user"),n&&n(),window.location.reload()}catch{P("Erreur lors de la dconnexion")}},Be=async Ne=>{Ne.preventDefault(),P(""),Re(!0),P(""),bf(he.trim());try{const{data:Me,error:ot}=await D9({email:he.trim()});if(ot){Re(!1),P(ot.message||"Erreur lors de l'envoi de l'email");return}}catch{Re(!1),P("Erreur lors de l'envoi de l'email de rinitialisation")}},Ct=async()=>{if(!(!Z||!Z.id))try{const{data:Ne,error:Me}=await Pt.from("profiles").select("*").eq("id",Z.id).single();!Me&&Ne&&($(Ne.email||Z.email||""),re(Ne.prenom||""),N(Ne.nom||""))}catch{}};return T.useEffect(()=>{var Ne,Me;Z&&($(Z.email||""),re(Z.firstName||((Ne=Z.user_metadata)==null?void 0:Ne.firstName)||""),N(Z.lastName||((Me=Z.user_metadata)==null?void 0:Me.lastName)||""))},[Z]),T.useEffect(()=>{const Ne=Me=>{X.current&&!X.current.contains(Me.target)&&(g(!1),_(!1),k(!1),x(!1),me(!1),P(""))};return document.addEventListener("mousedown",Ne),()=>{document.removeEventListener("mousedown",Ne)}},[]),le?u.jsx("div",{className:"user-account",ref:X,children:u.jsx("div",{className:"user-avatar",children:u.jsx("span",{children:""})})}):u.jsx("div",{className:"user-account",ref:X,children:de?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"user-avatar",onClick:()=>g(!p),children:u.jsx("span",{className:"user-initial",children:((o=(a=Z==null?void 0:Z.firstName)==null?void 0:a.charAt(0))==null?void 0:o.toUpperCase())||((c=(l=Z==null?void 0:Z.email)==null?void 0:l.charAt(0))==null?void 0:c.toUpperCase())||""})}),u.jsx(Fi,{children:p&&u.jsxs(Te.div,{className:"user-dropdown",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[u.jsxs("div",{className:"user-info",children:[u.jsx("div",{className:"user-name",children:(Z==null?void 0:Z.firstName)||(Z==null?void 0:Z.name)||((d=Z==null?void 0:Z.email)==null?void 0:d.split("@")[0])}),u.jsx("div",{className:"user-email",children:Z==null?void 0:Z.email})]}),u.jsxs("div",{className:"dropdown-actions",children:[Ee()&&u.jsx("button",{onClick:()=>{window.open("/ilmysv6iepwepoa4tj2k?auth=auto","_blank")},children:" Administration"}),u.jsx("button",{onClick:()=>{g(!1),x(!0)},children:"Mon profil"}),u.jsx("button",{onClick:()=>{g(!1),i&&i()},children:"Mon historique"}),u.jsx("button",{onClick:()=>{g(!1),s&&s()},children:"Mon abonnement"}),u.jsx("button",{onClick:ut,className:"logout-button",children:"Se dconnecter"})]})]})}),u.jsx(Fi,{children:y&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>x(!1),children:u.jsxs(Te.div,{className:"auth-form profile-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ne=>Ne.stopPropagation(),children:[u.jsx("h3",{children:"Mon profil"}),u.jsxs("form",{onSubmit:async Ne=>{Ne.preventDefault(),P("");try{await I9(Z.id,{firstName:ae.trim(),lastName:ie.trim()}),await Ct(),te(!0),setTimeout(()=>te(!1),3e3)}catch(Me){console.error("Erreur mise  jour profil:",Me),P("Erreur lors de la mise  jour du profil")}},children:[u.jsx(Kl,{value:M,onChange:Ne=>$(Ne.target.value),placeholder:"Email",disabled:!0,user:Z,onEmailSubmit:()=>{}}),u.jsx("input",{type:"text",placeholder:"Prnom",value:ae,onChange:Ne=>re(Ne.target.value)}),u.jsx("input",{type:"text",placeholder:"Nom",value:ie,onChange:Ne=>N(Ne.target.value)}),R&&u.jsx("div",{className:"error-message",children:R}),Q&&u.jsx("div",{className:"success-message",children:"Profil mis  jour avec succs !"}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>x(!1),children:"Fermer"}),u.jsx("button",{type:"submit",children:"Mettre  jour"})]})]})]})})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"user-avatar",onClick:()=>g(!p),children:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),u.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),u.jsx(Fi,{children:p&&u.jsx(Te.div,{className:"user-dropdown",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:u.jsxs("div",{className:"dropdown-actions",children:[u.jsx("button",{onClick:()=>{g(!1),_(!0),P("")},children:"Se connecter"}),u.jsx("button",{onClick:()=>{g(!1),k(!0),P("")},children:"Crer un compte"})]})})}),u.jsxs(Fi,{children:[f&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>_(!1),children:u.jsxs(Te.div,{className:"auth-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ne=>Ne.stopPropagation(),children:[u.jsx("h3",{children:"Connexion"}),u.jsxs("form",{onSubmit:Ke,children:[u.jsx(Kl,{value:w,onChange:Ne=>E(Ne.target.value),placeholder:"Email",required:!0,disabled:K,user:null,onEmailSubmit:()=>{}}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:Y?"text":"password",placeholder:"Mot de passe",value:B,onChange:Ne=>q(Ne.target.value),required:!0,disabled:K,className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>_t(!Y),disabled:K,"aria-label":Y?"Masquer le mot de passe":"Afficher le mot de passe",children:Y?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),R&&u.jsx("div",{className:"error-message",children:R}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>{_(!1),k(!0),P("")},disabled:K,children:"Crer un compte"}),u.jsx("button",{type:"submit",disabled:K,children:K?"Connexion...":"Se connecter"})]}),u.jsx("button",{type:"button",className:"forgot-password-link",onClick:()=>{_(!1),me(!0),P("")},disabled:K,children:"Mot de passe oubli ?"})]})]})}),S&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>k(!1),children:u.jsxs(Te.div,{className:"auth-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ne=>Ne.stopPropagation(),children:[u.jsx("h3",{children:"Crer un compte"}),u.jsxs("form",{onSubmit:Oe,children:[u.jsx("input",{type:"text",placeholder:"Prnom",value:z,onChange:Ne=>F(Ne.target.value),required:!0,disabled:K}),u.jsx("input",{type:"text",placeholder:"Nom",value:I,onChange:Ne=>J(Ne.target.value),required:!0,disabled:K}),u.jsx(Kl,{value:w,onChange:Ne=>E(Ne.target.value),placeholder:"Email",required:!0,disabled:K,user:null,onEmailSubmit:()=>{}}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:He?"text":"password",placeholder:"Mot de passe (min 6 caractres)",value:B,onChange:Ne=>q(Ne.target.value),required:!0,minLength:6,disabled:K,className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>nt(!He),disabled:K,"aria-label":He?"Masquer le mot de passe":"Afficher le mot de passe",children:He?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),R&&u.jsx("div",{className:"error-message",children:R}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>{k(!1),_(!0),P("")},disabled:K,children:"Dj un compte ?"}),u.jsx("button",{type:"submit",disabled:K,children:K?"Cration...":"Crer le compte"})]})]})]})}),oe&&u.jsx(Te.div,{className:"auth-form-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:()=>me(!1),children:u.jsxs(Te.div,{className:"auth-form",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},onClick:Ne=>Ne.stopPropagation(),children:[u.jsx("h3",{children:"Rinitialiser le mot de passe"}),_e?u.jsxs("div",{className:"success-message",children:[u.jsxs("p",{children:["Un email de rinitialisation a t envoy  ",he]}),u.jsx("button",{onClick:()=>{me(!1),_(!0),Re(!1),ge("")},children:"Retour  la connexion"})]}):u.jsxs("form",{onSubmit:Be,children:[u.jsx(Kl,{value:he,onChange:Ne=>ge(Ne.target.value),placeholder:"Votre email",required:!0,user:null,onEmailSubmit:()=>{}}),R&&u.jsx("div",{className:"error-message",children:R}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"button",onClick:()=>{me(!1),_(!0),P("")},children:"Retour  la connexion"}),u.jsx("button",{type:"submit",children:"Envoyer le lien"})]})]})]})})]})]})})},U9=({isLoggedIn:e,onLogin:t,onLogout:n,onRegister:r,onOpenHistory:i,userId:s,onOpenSubscription:a})=>u.jsxs("header",{className:"header",children:[u.jsxs("div",{className:"header-content",children:[u.jsx(Te.div,{className:"logo",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.1},children:u.jsx("h1",{children:"HERBBIE"})}),u.jsx(Te.h2,{className:"tagline",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:"Offrez  vos enfants des crations ludiques et imaginatives personnalises !"})]}),u.jsx("div",{className:"user-account-container",children:u.jsx(B9,{isLoggedIn:e,onLogin:t,onLogout:n,onRegister:r,onOpenHistory:i,onOpenSubscription:a})})]}),q9="/api/features";let lp=null,hy=0;const $9=3e3,z9={animation:{enabled:!0,name:"Dessin anim",icon:"",description:"Gnration de dessins anims personnaliss avec IA"},comic:{enabled:!0,name:"Bande dessine",icon:"",description:"Cration de bandes dessines avec bulles de dialogue"},coloring:{enabled:!0,name:"Coloriage",icon:"",description:"Pages de coloriage  imprimer pour les enfants"},histoire:{enabled:!0,name:"Histoire",icon:"",description:"Histoires avec possibilit d'ajouter une narration audio"},audio:{enabled:!0,name:"Histoire",icon:"",description:"Histoires avec possibilit d'ajouter une narration audio"},rhyme:{enabled:!0,name:"Comptine",icon:"",description:"Comptines musicales avec paroles et mlodies"}},Tj=async()=>{try{const e=await fetch(q9,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();return lp=t,hy=Date.now(),t}else throw console.error("Erreur API lors du chargement des fonctionnalits:",e.status),new Error(`Erreur API: ${e.status}`)}catch(e){throw console.error("Erreur lors du chargement depuis l'API:",e),e}},V9=async()=>{try{const e=Date.now();return lp&&e-hy<$9?lp:await Tj()}catch(e){return console.error("Erreur lors de la rcupration des fonctionnalits:",e),z9}},H9=async()=>{try{const e=await V9();return Object.entries(e).filter(([t,n])=>n.enabled).reduce((t,[n,r])=>(t[n]=r,t),{})}catch(e){return console.warn("Erreur lors de la rcupration des fonctionnalits actives:",e),{}}},W9=()=>{lp=null,hy=0},K9=e=>{let t=null;const n=async()=>{try{W9();const i=await Tj();JSON.stringify(i)!==JSON.stringify(t)&&e&&typeof e=="function"&&(t=i,e(i))}catch(i){console.error("Erreur lors de la vrification des changements:",i)}},r=setInterval(n,5e3);return n(),()=>{clearInterval(r)}},G9=({contentType:e,setContentType:t})=>{const[n,r]=T.useState({}),[i,s]=T.useState(!0);T.useEffect(()=>(a(),K9(async c=>{const d=Object.entries(c).filter(([p,g])=>g.enabled).reduce((p,[g,f])=>(p[g]=f,p),{});if(r(d),!d[e]&&e!=="animation"){const p=Object.keys(d).find(g=>d[g].enabled);p&&t(p==="audio"?"histoire":p)}})),[e,t]);const a=async()=>{try{s(!0);const c=await H9();e==="audio"&&t("histoire"),r(c)}catch(c){console.error("Erreur lors du chargement des fonctionnalits:",c)}finally{s(!1)}},o=c=>{t(c)},l=Object.keys(n).length>0;return i?u.jsxs("div",{className:"content-type-selector",children:[u.jsx("h3",{children:"1. Choisissez le type de contenu"}),u.jsx("div",{className:"loading-message",children:u.jsx("p",{children:"Chargement des fonctionnalits..."})})]}):u.jsxs("div",{className:"content-type-selector",children:[u.jsx("h3",{children:"1. Choisissez le type de contenu"}),l?u.jsxs("div",{className:"content-type-options",children:[n.animation&&u.jsxs(Te.div,{className:`content-type-option animation-full-width ${e==="animation"?"selected":""}`,onClick:()=>o("animation"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Dessin anim"}),u.jsx("p",{children:"Crez un vritable dessin anim fluide et cohrent avec l'IA"})]})]}),n.comic&&u.jsxs(Te.div,{className:`content-type-option ${e==="comic"?"selected":""}`,onClick:()=>o("comic"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Bande dessine"}),u.jsx("p",{children:"Crez une vraie BD avec histoire cohrente et bulles de dialogue"})]})]}),n.coloring&&u.jsxs(Te.div,{className:`content-type-option ${e==="coloring"?"selected":""}`,onClick:()=>o("coloring"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Coloriage"}),u.jsx("p",{children:"Crez des dessins  colorier personnaliss en noir et blanc"})]})]}),(n.histoire||n.audio)&&u.jsxs(Te.div,{className:`content-type-option ${e==="histoire"?"selected":""}`,onClick:()=>o("histoire"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Histoire"}),u.jsx("p",{children:"Crez une histoire avec possibilit d'ajouter une narration audio"})]})]}),n.rhyme&&u.jsxs(Te.div,{className:`content-type-option ${e==="rhyme"?"selected":""}`,onClick:()=>o("rhyme"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"content-type-icon",children:""}),u.jsxs("div",{className:"content-type-details",children:[u.jsx("h4",{children:"Comptine"}),u.jsx("p",{children:"Crez une comptine musicale avec paroles et mlodie"})]})]})]}):u.jsx("div",{className:"no-features-message",children:u.jsx("p",{children:"Aucune fonctionnalit n'est actuellement disponible."})})]})},Y9=[{id:"lullaby",title:"Berceuse douce",description:"Mlodie apaisante pour s'endormir",emoji:"",musicStyle:"gentle lullaby"},{id:"animal",title:"Comptine animalire",description:"Animaux et leurs sons en musique",emoji:"",musicStyle:"playful with animal sounds"},{id:"counting",title:"Comptine  compter",description:"Apprendre les chiffres en chanson",emoji:"",musicStyle:"upbeat educational"},{id:"colors",title:"Comptine des couleurs",description:"Dcouvrir les couleurs en musique",emoji:"",musicStyle:"cheerful and colorful"},{id:"alphabet",title:"Comptine de l'alphabet",description:"Apprendre les lettres en chantant",emoji:"",musicStyle:"educational and catchy"},{id:"family",title:"Comptine familiale",description:"Chanson sur la famille et l'amour",emoji:"",musicStyle:"warm and loving"},{id:"nature",title:"Comptine de la nature",description:"Explorer plantes, arbres et fleurs",emoji:"",musicStyle:"peaceful and natural"},{id:"seasonal",title:"Comptine saisonnire",description:"Clbrer saisons et merveilles",emoji:"",musicStyle:"festive and warm"},{id:"movement",title:"Comptine de mouvement",description:"Bouger, sauter et danser",emoji:"",musicStyle:"energetic dance rhythm"},{id:"emotions",title:"Comptine des motions",description:"Comprendre et exprimer sentiments",emoji:"",musicStyle:"expressive and gentle"},{id:"shapes",title:"Comptine des formes",description:"Apprendre les formes gomtriques",emoji:"",musicStyle:"playful educational"}],X9=({selectedRhyme:e,setSelectedRhyme:t,customRhyme:n,setCustomRhyme:r})=>{const i=s=>{t(e===s?"":s)};return u.jsxs("div",{className:"musical-rhyme-selector",children:[u.jsx("h3",{children:"2. Choisissez un type de comptine"}),u.jsxs("div",{className:"rhyme-grid",children:[u.jsxs("div",{className:"rhyme-slot",children:[u.jsxs(Te.div,{className:`rhyme-card custom-rhyme ${e==="custom"?"selected":""}`,onClick:()=>i("custom"),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"rhyme-emoji",children:""}),u.jsx("h4",{children:"Personnalis"}),u.jsx("p",{children:"Comptine avec prnom ou thme perso"})]}),e==="custom"&&u.jsx(Te.div,{className:"custom-rhyme-input inline-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("textarea",{id:"customRhyme",value:n,onChange:s=>r(s.target.value),placeholder:"Dcrivez votre type de comptine personnalise...",className:"custom-textarea"})})]}),Y9.map(s=>u.jsx("div",{className:"rhyme-slot",children:u.jsxs(Te.div,{className:`rhyme-card ${e===s.id?"selected":""}`,onClick:()=>i(s.id),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"rhyme-emoji",children:s.emoji}),u.jsx("h4",{children:s.title}),u.jsx("p",{children:s.description})]})},s.id))]})]})},J9=[{id:"magic",title:"Monde magique",description:"Fes, sorciers, cratures enchantes",emoji:""},{id:"dinosaurs",title:"Temps des dinosaures",description:"Dinosaures gentils, voyages dans le temps",emoji:""},{id:"space",title:"Voyage spatial",description:"Plantes, fuses, aliens sympathiques",emoji:""},{id:"adventure",title:"Aventure fantastique",description:"Rebondissements, magie, dcouvertes",emoji:""},{id:"animals",title:"Amis animaux",description:"Animaux qui parlent, aventures sauvages",emoji:""},{id:"underwater",title:"Monde sous-marin",description:"Ocans, cratures marines, trsors",emoji:""},{id:"forest",title:"Fort enchante",description:"Fort mystrieuse, surprises magiques",emoji:""},{id:"funny",title:"Histoire drle",description:"Contes amusants, rires garantis",emoji:""},{id:"mystery",title:"Petit mystre",description:"nigmes pour enfants, investigations",emoji:""},{id:"friendship",title:"Belle amiti",description:"Histoire sur l'amiti, entraide",emoji:""},{id:"learning",title:"Conte ducatif",description:"Leons importantes, apprentissage",emoji:""},{id:"bedtime",title:"Histoire du soir",description:"Contes apaisants, sommeil doux",emoji:""},{id:"robots",title:"Robots amis",description:"Robots gentils, inventions magiques",emoji:""},{id:"pirates",title:"Pirates courageux",description:"Bateaux pirates, trsors cachs",emoji:""}],Q9=[{id:"female",name:"Voix fminine"},{id:"male",name:"Voix masculine"}],Z9=({selectedAudioStory:e,setSelectedAudioStory:t,customAudioStory:n,setCustomAudioStory:r,selectedVoice:i,setSelectedVoice:s})=>{const[a,o]=T.useState(!1),l=f=>{e===f?(t(""),o(!1)):(t(f),f!=="custom"&&o(!1))},c=()=>{e==="custom"?(t(""),o(!1)):(t("custom"),o(!0))},d=[{id:"custom",title:"Personnalis",description:"Crez votre propre type d'histoire unique",emoji:"",isCustom:!0},...J9],p=f=>{r(f.target.value)},g=f=>{s(i===f?null:f)};return u.jsxs("div",{className:"audio-story-selector",children:[u.jsx("h3",{children:"2. Choisissez un type d'histoire"}),u.jsx("div",{className:"audio-story-grid",children:d.map(f=>u.jsxs("div",{className:"audio-story-slot",children:[u.jsxs(Te.div,{className:`audio-story-card ${f.isCustom?"custom-audio-story":""} ${e===f.id?"selected":""}`,onClick:()=>f.isCustom?c():l(f.id),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"audio-story-emoji",children:f.emoji}),u.jsx("h4",{children:f.title}),u.jsx("p",{children:f.description})]}),f.isCustom&&a&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input inline-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx(Te.textarea,{id:"customAudioStory",value:n,onChange:p,placeholder:"Ex: Un conte qui se droule dans un monde sous-marin avec des cratures magiques...",className:"custom-input",whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300,damping:10}})})]},f.id))}),u.jsxs("div",{className:"voice-selector-section",children:[u.jsx("h3",{children:"3. Choisissez une narration (optionnel)"}),u.jsx("div",{className:"voice-options",children:Q9.map(f=>u.jsxs(Te.div,{className:`voice-option ${i===f.id?"selected":""}`,onClick:()=>g(f.id),whileHover:{scale:1.03},whileTap:{scale:.98},children:[u.jsx("div",{className:"voice-icon",children:f.id==="female"?"":""}),u.jsx("div",{className:"voice-details",children:u.jsx("h4",{children:f.name})})]},f.id))})]})]})},eD=[{id:"space",title:"Aventure spatiale",description:"Une exploration de l'espace et des plantes lointaines",emoji:""},{id:"ocean",title:"Sous l'ocan",description:"Une aventure sous-marine avec des cratures fantastiques",emoji:""},{id:"dinosaur",title:"Monde des dinosaures",description:"Un voyage dans le temps  l'poque des dinosaures",emoji:""},{id:"fairy",title:"Conte de fes",description:"Une histoire magique avec des fes et des cratures enchantes",emoji:""},{id:"superhero",title:"Super-hros",description:"Une aventure o votre enfant devient un super-hros",emoji:""},{id:"jungle",title:"Aventure dans la jungle",description:"Une exploration de la jungle et ses animaux sauvages",emoji:""}],tD=({selectedStory:e,setSelectedStory:t,customStory:n,setCustomStory:r})=>{const[i,s]=T.useState(!1),a=c=>{t(c),c!=="custom"&&s(!1)},o=()=>{t("custom"),s(!0)},l=c=>{r(c.target.value)};return u.jsxs("div",{className:"story-selector",children:[u.jsx("h3",{children:"4. Choisissez un type d'histoire"}),u.jsxs("div",{className:"story-grid",children:[u.jsxs(Te.div,{className:`story-card custom-story ${e==="custom"?"selected":""}`,onClick:o,whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"story-emoji",children:""}),u.jsx("h4",{children:"Personnalis"}),u.jsx("p",{children:"Crez votre propre type d'histoire unique"})]}),eD.map(c=>u.jsxs(Te.div,{className:`story-card ${e===c.id?"selected":""}`,onClick:()=>a(c.id),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"story-emoji",children:c.emoji}),u.jsx("h4",{children:c.title}),u.jsx("p",{children:c.description})]},c.id))]}),i&&u.jsxs(Te.div,{className:"custom-story-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:[u.jsx("label",{htmlFor:"customStory",children:"Dcrivez votre type d'histoire"}),u.jsx(Te.textarea,{id:"customStory",value:n,onChange:l,placeholder:"Ex: Une aventure dans un monde de bonbons o les arbres sont en chocolat...",whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300,damping:10}})]})]})},qn={}.VITE_API_BASE_URL||"",qh={}.VITE_ANIMATION_API_BASE_URL||"https://da-production-6222.up.railway.app",nD=({selectedTheme:e,setSelectedTheme:t,selectedDuration:n,setSelectedDuration:r,selectedStyle:i,setSelectedStyle:s,customStory:a,setCustomStory:o,characterImage:l,setCharacterImage:c})=>{const[d,p]=T.useState([]),[g,f]=T.useState([]);T.useEffect(()=>{p([{id:"custom",name:"Personnalis",description:"crivez votre propre histoire",emoji:""},{id:"space",name:"Espace",description:"Voyages spatiaux",emoji:""},{id:"ocean",name:"Sous-marin",description:"Exploration sous-marine",emoji:""},{id:"nature",name:"Nature",description:"Monde naturel",emoji:""},{id:"adventure",name:"Aventure",description:"Voyages et explorations",emoji:""},{id:"animals",name:"Animaux",description:"Histoires d'animaux mignons",emoji:""},{id:"magic",name:"Magie",description:"Monde magique et sortilges",emoji:""},{id:"friendship",name:"Amiti",description:"Histoires d'amiti",emoji:""},{id:"circus",name:"Cirque",description:"Spectacle de cirque magique",emoji:""}]),f([{value:30,label:"30 secondes"},{value:60,label:"1 minute"},{value:120,label:"2 minutes"},{value:180,label:"3 minutes"},{value:240,label:"4 minutes"},{value:300,label:"5 minutes"}])},[]);const _=[{id:"3d",name:"3D",description:"Animation 3D moderne",emoji:""},{id:"realistic",name:"Raliste",description:"Style cinmatographique",emoji:""},{id:"cartoon",name:"Cartoon",description:"Style dessin anim color",emoji:""},{id:"anime",name:"Anime",description:"Style manga japonais",emoji:"",useImage:!0,imagePath:"/assets/japan-flag.png"}],S=x=>{t(e===x?null:x)},k=x=>{r(n===x?null:x)},y=x=>{s(i===x?null:x)};return u.jsxs("div",{className:"animation-selector",children:[u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"2. Choisissez un thme pour votre dessin anim"}),u.jsx("div",{className:"themes-grid",children:d.map(x=>u.jsxs("div",{children:[u.jsxs(Te.div,{className:`theme-card ${e===x.id?"selected":""} ${x.id==="custom"?"custom-animation":""}`,onClick:()=>S(x.id),whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsx("div",{className:"theme-emoji",children:x.emoji}),u.jsxs("div",{className:"theme-content",children:[u.jsx("h5",{children:x.name}),u.jsx("p",{children:x.description})]})]}),x.id==="custom"&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("textarea",{className:"custom-story-textarea",value:a,onChange:w=>o(w.target.value),placeholder:"Il tait une fois... Racontez votre histoire ici. Plus elle est dtaille, plus l'animation sera riche et personnalise !",rows:4})})]},x.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"2. Choisissez la dure de l'animation"}),u.jsx("div",{className:"duration-options",children:g.map(x=>u.jsx(Te.div,{className:`duration-option ${n===x.value?"selected":""}`,onClick:()=>k(x.value),whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx("div",{className:"duration-label",children:x.label})},x.value))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"3. Choisissez un style visuel"}),u.jsx("div",{className:"style-options",children:_.map(x=>u.jsxs(Te.div,{className:`style-option ${i===x.id?"selected":""}`,onClick:()=>y(x.id),whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsxs("div",{className:"style-emoji",children:[x.useImage?u.jsx("img",{src:x.imagePath,alt:x.name,className:"style-flag-image",onError:w=>{w.target.style.display="none",w.target.nextSibling.style.display="block"}}):null,u.jsx("span",{style:{display:x.useImage?"none":"block"},children:x.emoji})]}),u.jsxs("div",{className:"style-content",children:[u.jsx("h5",{children:x.name}),u.jsx("p",{children:x.description})]})]},x.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h4",{children:"4. Personnage principal (optionnel)"}),u.jsx("p",{className:"section-description",children:"Uploadez une photo pour crer un personnage personnalis dans votre dessin anim"}),u.jsx("div",{className:"character-upload-container",children:l?u.jsxs("div",{className:"character-preview",children:[u.jsx("img",{src:l,alt:"Personnage",className:"character-image"}),u.jsx(Te.button,{className:"remove-character-btn",onClick:()=>c(null),whileHover:{scale:1.1},whileTap:{scale:.9},children:" Supprimer"})]}):u.jsxs(Te.label,{className:"character-upload-zone",whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsx("input",{type:"file",accept:"image/*",onChange:x=>{const w=x.target.files[0];if(w){const E=new FileReader;E.onloadend=()=>{c(E.result)},E.readAsDataURL(w)}},style:{display:"none"}}),u.jsx("div",{className:"upload-icon",children:""}),u.jsxs("div",{className:"upload-text",children:[u.jsx("strong",{children:"Cliquez pour uploader une photo"}),u.jsx("span",{children:"ou glissez-dposez une image ici"})]})]})})]})]})},rD=({animationResult:e,onClose:t})=>{var n,r,i,s;const[a,o]=T.useState("video"),[l,c]=T.useState(null);if(!e)return null;const{status:d,clips:p=[],video_urls:g=[],scenes:f=[],generation_time:_,total_duration:S,successful_clips:k=0,fallback_clips:y=0,pipeline_type:x,scenes_count:w=0,video_count:E=0}=e,B=p.length>0?p:g.map((P,K)=>({clip_url:P,status:"success",prompt:`Scne ${K+1}`,duration:8})),q=B.some(P=>P.status==="success")||d==="completed"&&(e.final_video_url||((n=e.result)==null?void 0:n.final_video_url)),z=f||e.scenes_details||[],F=B.length||w||E,I=P=>{if(!P||isNaN(P))return"---";const K=Math.floor(P/60),G=P%60;return K>0?`${K}m ${G}s`:`${G}s`},J=P=>{switch(P){case"success":return"#4CAF50";case"fallback":return"#FF9800";case"error":return"#F44336";default:return"#9E9E9E"}},R=P=>{switch(P){case"success":return"";case"fallback":return"";case"error":return"";default:return""}};return u.jsx(Te.div,{className:"animation-viewer-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:u.jsxs(Te.div,{className:"animation-viewer",initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},onClick:P=>P.stopPropagation(),transition:{type:"spring",damping:20,stiffness:300},children:[u.jsxs("div",{className:"viewer-header",children:[u.jsx("h2",{children:" Votre dessin anim IA"}),d&&u.jsxs("div",{className:"status-badge",style:{backgroundColor:J(d)},children:[R(d)," ",d==="generating_idea"?"Cration de l'ide...":d==="creating_scenes"?"Cration des scnes...":d==="generating_clips"?"Gnration vido...":d==="completed"?"Termin !":d==="failed"?"chou":d]}),u.jsx("button",{className:"close-button",onClick:t,children:""})]}),u.jsxs("div",{className:"animation-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Dure: ",I(S||e.duration)]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:[F," scnes"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:[k||F," russies"]})]}),y>0&&u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:[y," fallback"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Gnr en ",_?Math.round(_)+"s":"En cours..."]})]})]}),u.jsxs("div",{className:"viewer-tabs",children:[u.jsx("button",{className:`tab ${a==="video"?"active":""}`,onClick:()=>o("video"),children:" Vido"}),u.jsx("button",{className:`tab ${a==="scenes"?"active":""}`,onClick:()=>o("scenes"),children:" Scnes"}),u.jsx("button",{className:`tab ${a==="details"?"active":""}`,onClick:()=>o("details"),children:" Dtails"})]}),u.jsx("div",{className:"viewer-content",children:u.jsxs(Fi,{mode:"wait",children:[a==="video"&&u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"video-tab",children:q?u.jsx("div",{className:"video-player",children:e.final_video_url||(r=e.result)!=null&&r.final_video_url?u.jsxs("div",{className:"final-animation",children:[u.jsx("div",{className:"video-icon",children:""}),u.jsxs("h3",{children:[" ",e.title||"Votre dessin anim est prt !"]}),u.jsxs("p",{children:["Animation complte de ",I(S||e.duration)," avec ",k||F," scnes."]}),u.jsx("div",{className:"main-video-container",children:u.jsx("video",{src:e.final_video_url||((i=e.result)==null?void 0:i.final_video_url),className:"final-animation-video",controls:!0,autoPlay:!0,loop:!0,muted:!0,preload:"metadata",style:{width:"100%",maxWidth:"600px",height:"auto",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",margin:"1rem 0"},onLoadedData:()=>{},onError:P=>{P.target.style.display="none"}})}),u.jsx("div",{className:"video-controls",children:u.jsx("button",{className:"play-btn",onClick:()=>{var P;return window.open(e.final_video_url||((P=e.result)==null?void 0:P.final_video_url),"_blank")},style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},children:" Ouvrir en plein cran"})})]}):u.jsxs("div",{className:"animation-gallery",children:[u.jsx("div",{className:"video-icon",children:""}),u.jsx("h3",{children:" Votre dessin anim est prt !"}),u.jsxs("p",{children:["Animation de ",I(S)," gnre avec succs.",k>0&&` ${k} scnes cres avec l'IA.`]}),u.jsxs("div",{className:"scenes-gallery",children:[u.jsx("h4",{children:" Votre dessin anim en images :"}),u.jsx("div",{className:"gallery-grid",children:B.map((P,K)=>{let G=null,Z=!1;return P.video_url&&P.type==="real_video"?(G=/^https?:\/\//i.test(P.video_url)?P.video_url:`${qh}${P.video_url}`,Z=!0):P.demo_image_url?G=/^https?:\/\//i.test(P.demo_image_url)?P.demo_image_url:`${qh}${P.demo_image_url}`:P.image_url?G=/^https?:\/\//i.test(P.image_url)?P.image_url:`${qh}${P.image_url}`:P.video_url&&(G=/^https?:\/\//i.test(P.video_url)?P.video_url:`${qh}${P.video_url}`),u.jsxs("div",{className:"scene-media-card",children:[Z?u.jsx("video",{src:G,className:"scene-video",controls:!0,loop:!0,muted:!0,preload:"metadata",onLoadedData:()=>{},onError:le=>{le.target.style.display="none",le.target.nextSibling.style.display="flex"}}):u.jsx("img",{src:G,alt:`Scne ${P.scene_number}`,className:"scene-image",onLoad:()=>{},onError:le=>{le.target.style.display="none",le.target.nextSibling.style.display="flex"}}),u.jsxs("div",{className:"scene-placeholder",style:{display:"none"},children:[u.jsx("span",{children:""}),u.jsxs("p",{children:["Scne ",P.scene_number]}),u.jsx("small",{children:P.type||"En cours..."})]}),u.jsxs("div",{className:"scene-info",children:[u.jsxs("span",{children:["Scne ",P.scene_number]}),u.jsx("span",{children:I(P.duration)}),P.type==="real_video"&&u.jsx("span",{className:"clip-type real",children:" Vido"}),P.type==="demo"&&u.jsx("span",{className:"clip-type demo",children:" Dmo"}),P.status==="success"&&u.jsx("span",{className:"clip-status success",children:""}),P.status==="fallback"&&u.jsx("span",{className:"clip-status fallback",children:""})]})]},K)})}),u.jsx("div",{className:"gallery-summary",children:u.jsxs("p",{children:[u.jsx("strong",{children:" Votre animation complte :"}),F," scnes illustres reprsentant votre histoire. Chaque image correspond  un moment cl de votre rcit gnr par l'IA."]})})]}),B.filter(P=>P.status==="success").length>0&&u.jsxs("div",{className:"video-clips-list",children:[u.jsx("h4",{children:" Toutes les scnes gnres :"}),B.filter(P=>P.status==="success").map((P,K)=>u.jsxs("div",{className:"clip-item",children:[u.jsxs("span",{children:[" Scne ",P.scene_number]}),u.jsx("span",{children:I(P.duration)}),P.type==="image"&&u.jsx("span",{className:"clip-type",children:" Image"})]},K))]}),u.jsxs("div",{className:"video-actions",children:[u.jsx("button",{className:"download-btn",children:" Tlcharger"}),u.jsx("button",{className:"share-btn",children:" Partager"})]})]})}):u.jsxs("div",{className:"no-video",children:[u.jsx("div",{className:"no-video-icon",children:d==="completed"?"":""}),u.jsx("h3",{children:d==="completed"?"Animation termine !":"Gnration en cours..."}),u.jsx("p",{children:d==="completed"?"Votre animation a t gnre avec succs ! Thme: "+(e.theme||"N/A"):"La gnration vido peut prendre quelques minutes. Certaines scnes utilisent des modes de fallback."}),d==="completed"&&(e.final_video_url||((s=e.result)==null?void 0:s.final_video_url))&&u.jsx("div",{className:"video-controls",children:u.jsx("button",{className:"play-btn",onClick:()=>{var P;return window.open(e.final_video_url||((P=e.result)==null?void 0:P.final_video_url),"_blank")},children:" Voir l'animation"})})]})},"video"),a==="scenes"&&u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"scenes-tab",children:u.jsx("div",{className:"scenes-list",children:z.map((P,K)=>{const G=B.find(Z=>Z.scene_number===P.scene_number);return u.jsxs(Te.div,{className:`scene-card ${l===K?"selected":""}`,onClick:()=>c(l===K?null:K),whileHover:{scale:1.02},whileTap:{scale:.98},children:[u.jsxs("div",{className:"scene-header",children:[u.jsxs("span",{className:"scene-number",children:["Scne ",P.scene_number]}),u.jsxs("div",{className:"scene-status",children:[u.jsx("span",{className:"status-icon",style:{color:J((G==null?void 0:G.status)||"pending")},children:R((G==null?void 0:G.status)||"pending")}),u.jsx("span",{className:"status-text",children:(G==null?void 0:G.status)||"pending"})]})]}),u.jsx("h4",{children:P.description}),u.jsxs("p",{children:[u.jsx("strong",{children:"Action:"})," ",P.action]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Dcor:"})," ",P.setting]}),u.jsxs("div",{className:"scene-duration",children:["Dure: ",I(P.duration)]}),l===K&&G&&u.jsx(Te.div,{className:"scene-details",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:G.video_url&&u.jsx("div",{className:"clip-preview",children:u.jsxs("span",{children:[" Fichier: ",G.video_url]})})})]},P.scene_number)})})},"scenes"),a==="details"&&u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"details-tab",children:u.jsxs("div",{className:"technical-details",children:[u.jsx("h4",{children:" Dtails techniques"}),u.jsxs("div",{className:"detail-grid",children:[u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Pipeline:"}),u.jsx("span",{children:x||"custom_animation_ai"})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Statut:"}),u.jsx("span",{className:`status ${d}`,children:d})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Temps de gnration:"}),u.jsxs("span",{children:[Math.round(_),"s"]})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Scnes totales:"}),u.jsx("span",{children:F})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Scnes russies:"}),u.jsx("span",{children:k})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("strong",{children:"Dure totale:"}),u.jsx("span",{children:I(S)})]})]}),e.note&&u.jsxs("div",{className:"generation-note",children:[u.jsx("h5",{children:" Note de gnration"}),u.jsx("p",{children:e.note})]})]})},"details")]})})]})})},iD=({customRequest:e,setCustomRequest:t})=>u.jsxs("div",{className:"custom-request",children:[u.jsx("h3",{children:"Demandes spcifiques (optionnel)"}),u.jsx("div",{className:"request-form",children:u.jsxs("div",{className:"input-group",children:[u.jsx("label",{htmlFor:"customRequest",children:"Avez-vous des demandes particulires ?"}),u.jsx(Te.textarea,{id:"customRequest",value:e,onChange:n=>t(n.target.value),placeholder:"Ex: En anglais, avec un chien bleu, inclure un message sur l'amiti...",rows:3,whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300,damping:10}})]})})]}),sD=({onGenerate:e,isGenerating:t,isDisabled:n,contentType:r,buttonText:i})=>{const s=()=>t?r==="rhyme"?"Cration de la comptine en cours...":r==="coloring"?"Cration du coloriage en cours...":r==="comic"?"Cration de la BD en cours...":r==="animation"?"Cration du dessin anim en cours...":"Cration du contenu en cours...":i||(r==="rhyme"?"Crer ma comptine":r==="coloring"?"Crer mon coloriage":r==="comic"?"Crer ma bande dessine":r==="animation"?"Crer mon dessin anim":r==="audio"?"Crer mon histoire":"Crer mon contenu");return u.jsxs("div",{className:"generate-button-container",children:[u.jsxs(Te.button,{className:"generate-button",onClick:e,disabled:n||t,whileHover:!n&&!t?{scale:1.03}:{},whileTap:!n&&!t?{scale:.98}:{},initial:{opacity:.9},animate:{opacity:n?.6:1,y:[0,t?-5:0,0]},transition:{duration:t?.5:.2,repeat:t?1/0:0},children:[t&&u.jsxs("div",{className:"button-loading-dots",children:[u.jsx("div",{className:"button-dot"}),u.jsx("div",{className:"button-dot"}),u.jsx("div",{className:"button-dot"})]}),u.jsx("span",{children:s()})]}),n&&!t&&u.jsx("p",{className:"generate-button-hint",children:r==="story"?"Veuillez remplir tous les champs requis pour crer votre BD":r==="rhyme"?"Veuillez slectionner un type de comptine pour continuer":r==="coloring"?"Veuillez slectionner un thme de coloriage pour continuer":r==="comic"?"Veuillez slectionner un thme, un style et un nombre de pages pour votre BD":r==="animation"?"Veuillez slectionner un thme et configurer votre animation":"Veuillez slectionner un type d'histoire (et une voix) pour continuer"})]})};async function aD(){var e;try{const{data:{session:t},error:n}=await Pt.auth.getSession();if((e=t==null?void 0:t.user)!=null&&e.id)return t.user.id;const r=localStorage.getItem("friday_user_cache");if(r){const i=JSON.parse(r);if(i.id)return i.id}return null}catch(t){return console.error("Erreur rcupration ID utilisateur:",t),null}}async function _x({type:e,title:t,data:n}){const r=await aD();if(!r)throw new Error("Utilisateur non connect");try{const i={user_id:r,type:e,title:t,data:{...n,created_via:"friday_web",timestamp:new Date().toISOString()}},{data:s,error:a}=await Pt.from("creations").insert([i]).select().single();if(a)throw console.error("Erreur Supabase lors de la cration:",a),new Error(`Erreur base de donnes: ${a.message}`);return s}catch(i){throw console.error("Erreur lors de la sauvegarde:",i),i}}async function oD(e){try{const{error:t}=await Pt.from("creations").delete().eq("id",e);if(t)throw console.error("Erreur Supabase lors de la suppression:",t),new Error(`Erreur base de donnes: ${t.message}`);return!0}catch(t){throw console.error("Erreur lors de la suppression:",t),t}}async function lD(e){return new Promise((t,n)=>{const r=new window.Image;r.crossOrigin="Anonymous",r.onload=function(){const i=document.createElement("canvas");i.width=r.width,i.height=r.height,i.getContext("2d").drawImage(r,0,0);const s=i.toDataURL("image/png");t({width:r.width,height:r.height,dataUrl:s})},r.onerror=n,r.src=e})}function cD(e,t=""){return(!e||e.trim()==="")&&(e={coloriage:"coloriage",comic:"bande_dessinee",comptine:"comptine",histoire:"histoire",animation:"animation"}[t]||"creation"),String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/gi,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").toLowerCase()}async function fy(e,t="coloriages"){const n=new et({orientation:"portrait",unit:"px",format:"a4"}),r=n.internal.pageSize.getWidth(),i=n.internal.pageSize.getHeight(),s=40,a=r-2*s,o=i-2*s,l=await Promise.all(e.map(async d=>{try{const p=d.image_url||d;return await lD(p)}catch(p){return console.warn("Erreur chargement image pour le PDF :",d,p),null}}));let c=!0;for(let d=0;d<l.length;d++){if(!l[d])continue;c||n.addPage(),c=!1;const{dataUrl:p,width:g,height:f}=l[d],_=g/f;let S=a,k=a/_;k>o&&(k=o,S=o*_);const y=(r-S)/2,x=(i-k)/2;n.addImage(p,"PNG",y,x,S,k)}n.save(`${cD(t)}.pdf`)}function uD(e){const[t,n]=T.useState([]),[r,i]=T.useState(!1),[s,a]=T.useState(null);return T.useEffect(()=>{if(!e){n([]),i(!1);return}(async()=>{i(!0);try{const{data:o,error:l}=await Pt.from("creations").select("*").eq("user_id",e).order("created_at",{ascending:!1});l?(console.error("Erreur rcupration crations:",l),a(l.message),n([])):(n(o||[]),a(null))}catch(o){console.error("Erreur critique rcupration crations:",o),a(o.message),n([])}finally{i(!1)}})()},[e]),{creations:t,loading:r,error:s,refreshCreations:async()=>{if(e){i(!0);try{const{data:o,error:l}=await Pt.from("creations").select("*").eq("user_id",e).order("created_at",{ascending:!1});l?a(l.message):(n(o||[]),a(null))}catch(o){a(o.message)}finally{i(!1)}}}}}const dD=({onClose:e,onSelect:t})=>{const{user:n}=dy(),{creations:r,loading:i,refreshCreations:s}=uD(n==null?void 0:n.id),a=async p=>{if(window.confirm("Supprimer cette cration ?"))try{const{error:g}=await oD(p);if(g){alert("Erreur lors de la suppression !");return}s()}catch(g){console.error("Erreur lors de la suppression:",g),alert("Erreur lors de la suppression !")}},o=p=>{const g=new Date(p);return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(g)},l=p=>{switch(p){case"story":return"";case"rhyme":return"";case"audio":return"";case"coloring":return"";case"crewai_animation":return"";case"animation":return"";default:return""}},c=p=>{switch(p){case"story":return"Bande dessine";case"rhyme":return"Comptine";case"audio":return"Histoire";case"coloring":return"Coloriage";case"crewai_animation":return"Dessin anim";case"animation":return"Dessin anim";default:return"Cration"}},d=p=>{var g;const f=p.content||((g=p.data)==null?void 0:g.content)||"";if(!f||typeof f!="string"){console.error(" Contenu invalide ou manquant pour le PDF.");return}const _=new et({orientation:"p",unit:"mm",format:"a4"}),S=40,k=210,y=297,x=12,w=Math.floor((y-S*2)/x),E=13;let B=p.title,q=f;f.startsWith("**")&&f.includes("**",2)&&(B=f.split("**")[1].trim(),q=f.replace(`**${B}**`,"").trim());const z=F=>new Promise(I=>{const J=new Image;J.crossOrigin="anonymous",J.src=F,J.onload=()=>I(J)});(async()=>{try{const F="/assets/fond.png?v=1";let I=null;try{I=await z(F)}catch{console.log(" Image de fond non disponible, PDF sans fond")}const J=_.splitTextToSize(q,150);let R=0;for(let P=0;R<J.length;P++){P>0&&_.addPage(),I&&_.addImage(I,"PNG",0,0,k,y,void 0,"FAST"),P===0&&(_.setFont("courier","bold"),_.setFontSize(22),_.setTextColor(110,50,230),_.text(B,k/2,S-20,{align:"center"})),_.setFont("courier","bold"),_.setFontSize(E),_.setTextColor(25,25,112);for(let K=0;K<w&&R<J.length;K++,R++){const G=S+K*x;_.text(J[R],k/2,G,{align:"center"})}_.setFontSize(11),_.setTextColor(106,90,205),_.text(`Page ${P+1}`,k-15,290,{align:"right"})}}catch(F){console.error(" Erreur lors de la gnration du PDF:",F),_.setFontSize(22),_.setTextColor(110,50,230),_.setFont("courier","bold"),_.text(B,k/2,S-20,{align:"center"}),_.setFontSize(E),_.setTextColor(25,25,112),_.setFont("courier","bold");const I=_.splitTextToSize(q,150);for(let J=0;J<I.length;J++){const R=S+J*x;_.text(I[J],k/2,R,{align:"center"})}}})().then(()=>{const F=B.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),I=_.output("blob"),J=URL.createObjectURL(I),R=document.createElement("a");R.href=J,R.download=`${F}.pdf`,R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R),setTimeout(()=>{URL.revokeObjectURL(J)},100)})};return u.jsxs(Te.div,{className:"history-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},onClick:p=>p.stopPropagation(),children:[u.jsxs("div",{className:"history-header",children:[u.jsx("h2",{children:"Historique de vos crations"}),u.jsx("button",{className:"close-button",onClick:e,children:""})]}),u.jsx("div",{className:"history-content",children:n?r.length===0&&!i?u.jsxs("div",{className:"empty-history",children:[u.jsx("p",{children:"Vous n'avez pas encore de crations"}),u.jsx("p",{className:"empty-subtext",children:"Vos crations apparatront ici une fois gnres"})]}):u.jsx("div",{className:"creations-list",children:r.map(p=>{var g,f,_,S,k,y,x,w,E,B,q,z,F,I,J;const R=!!(p.audio_path||(g=p.data)!=null&&g.audio_path),P=!!(p.content||(f=p.data)!=null&&f.content),K=["creation-item",R?"has-audio":"",P?"has-text":""].filter(Boolean).join(" ");return u.jsxs(Te.div,{className:K,onClick:()=>t({...p,action:p.type==="coloring"?"showColoring":"showStory"}),whileHover:{scale:1.01},transition:{duration:.2},children:[u.jsx("div",{className:"creation-icon",children:l(p.type)}),"                  ",u.jsxs("div",{className:"creation-details",children:[u.jsx("h3",{children:p.title}),u.jsxs("div",{className:"creation-meta",children:[u.jsx("span",{className:"creation-type",children:c(p.type)}),u.jsx("span",{className:"creation-date",children:o(p.created_at)})]}),"                  ",(p.audio_path||((_=p.data)==null?void 0:_.audio_path))&&u.jsx("audio",{controls:!0,className:"creation-audio",src:`${qn}/${p.audio_path||((S=p.data)==null?void 0:S.audio_path)}`}),u.jsxs("div",{className:"creation-actions",children:[p.type==="rhyme"&&(p.audio_path||((k=p.data)==null?void 0:k.audio_path))&&u.jsx("button",{className:"btn-pdf",onClick:async G=>{var Z,le;G.stopPropagation();try{const de=`${qn}/${p.audio_path||((Z=p.data)==null?void 0:Z.audio_path)}`,X=await(await fetch(de)).blob(),ae=URL.createObjectURL(X);let re=p.title||"Comptine";const ie=p.content||((le=p.data)==null?void 0:le.content)||"";ie&&ie.startsWith("**")&&ie.includes("**",2)&&(re=ie.split("**")[1].trim());const N=re.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=document.createElement("a");M.href=ae,M.download=`${N}.mp3`,M.style.display="none",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(ae)}catch(de){console.error("Erreur lors du tlchargement de la comptine:",de),alert("Erreur lors du tlchargement. Veuillez ressayer.")}},children:" Tlcharger la comptine"}),p.type==="audio"&&(p.content||((y=p.data)==null?void 0:y.content))&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-pdf",onClick:G=>{G.stopPropagation(),d(p)},children:" Tlcharger le PDF"}),(p.audio_path||((x=p.data)==null?void 0:x.audio_path))&&(p.audio_generated||((w=p.data)==null?void 0:w.audio_generated))&&u.jsx("button",{className:"btn-audio",onClick:async G=>{var Z,le;G.stopPropagation();try{const de=`${qn}/${p.audio_path||((Z=p.data)==null?void 0:Z.audio_path)}`,X=await(await fetch(de)).blob(),ae=URL.createObjectURL(X);let re=p.title||"Histoire";const ie=p.content||((le=p.data)==null?void 0:le.content)||"";ie&&ie.startsWith("**")&&ie.includes("**",2)&&(re=ie.split("**")[1].trim());const N=re.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=document.createElement("a");M.href=ae,M.download=`${N}.mp3`,M.style.display="none",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(ae)}catch(de){console.error("Erreur lors du tlchargement audio:",de),alert("Erreur lors du tlchargement. Veuillez ressayer.")}},children:" Tlcharger l'audio"})]}),(p.audio_path||((E=p.data)==null?void 0:E.audio_path))&&(p.audio_generated||((B=p.data)==null?void 0:B.audio_generated))&&p.type!=="rhyme"&&p.type!=="audio"&&u.jsx("a",{className:"btn-audio",href:`${qn}/${p.audio_path||((q=p.data)==null?void 0:q.audio_path)}`,download:!0,onClick:G=>G.stopPropagation(),children:" Tlcharger l'audio"}),p.type==="coloring"&&(p.images||((z=p.data)==null?void 0:z.images))&&(((F=p.images)==null?void 0:F.length)>0||((J=(I=p.data)==null?void 0:I.images)==null?void 0:J.length)>0)&&u.jsx("button",{className:"btn-pdf",onClick:G=>{var Z;G.stopPropagation();const le=p.title||(p.theme?`coloriages_${p.theme}`:"coloriages"),de=p.images||((Z=p.data)==null?void 0:Z.images)||[];fy(de,le)},children:" Tlcharger le coloriage"}),u.jsx("button",{className:"btn-delete",onClick:G=>{G.stopPropagation(),a(p.id)},children:" Supprimer"})]})]})]},p.id)})}):u.jsx("div",{className:"empty-history",children:u.jsx("p",{children:"Connexion en cours..."})})})]})},hD=({title:e,content:t,onClose:n,children:r})=>{const[i,s]=T.useState(!1),a=T.useRef(null),o=()=>{var c;document.fullscreenElement?(document.exitFullscreen(),s(!1)):((c=a.current)==null||c.requestFullscreen(),s(!0))},l=c=>{c.target.classList.contains("story-popup-overlay")&&n()};return u.jsx("div",{className:"story-popup-overlay",onClick:l,children:u.jsxs("div",{className:"story-popup-content",ref:a,children:[u.jsx("div",{className:"story-background"}),u.jsx("button",{className:"story-close-btn",onClick:n,children:""}),u.jsx("button",{className:"story-fullscreen-btn",onClick:o,children:i?" Quitter le plein cran":" Plein cran"}),u.jsxs("div",{className:"story-scroll",children:[e&&u.jsx("h2",{className:"story-title",children:e}),t&&typeof t=="string"?u.jsx("div",{className:"story-text",children:t}):r]})]})})},fD=({selectedTheme:e,setSelectedTheme:t,customColoringTheme:n,setCustomColoringTheme:r,uploadedPhoto:i,setUploadedPhoto:s,withColoredModel:a,setWithColoredModel:o})=>{const[l,c]=T.useState(!1),[d,p]=T.useState(!1),[g,f]=T.useState(null),_=[{value:"upload_photo",label:"Ma Photo",icon:"",description:"Transformez votre photo en coloriage !",special:!0},{value:"custom",label:"Personnalis",icon:"",description:"Crez votre propre thme de coloriage"},{value:"animals",label:"Animaux",icon:"",description:"Chats, chiens, lions, lphants..."},{value:"dinosaurs",label:"Dinosaures",icon:"",description:"T-Rex, Triceratops, volcans..."},{value:"dragons",label:"Dragons",icon:"",description:"Dragons mignons, chevaliers..."},{value:"farm",label:"Ferme",icon:"",description:"Vache, cochon, poule, tracteur..."},{value:"fairies",label:"Fes & Licornes",icon:"",description:"Fes, licornes, chteaux magiques..."},{value:"princess",label:"Princesses",icon:"",description:"Princesses, robes, diadmes..."},{value:"mermaids",label:"Sirnes",icon:"",description:"Sirnes, coquillages, palais sous-marin..."},{value:"pirates",label:"Pirates",icon:"",description:"Bateaux pirates, trsors, perroquets..."},{value:"superheroes",label:"Super-hros",icon:"",description:"Hros masqus, super-pouvoirs..."},{value:"space",label:"Espace",icon:"",description:"Fuses, plantes, astronautes..."},{value:"robots",label:"Robots",icon:"",description:"Robots futuristes, androdes..."},{value:"vehicles",label:"Vhicules",icon:"",description:"Voitures, avions, trains, bateaux..."},{value:"nature",label:"Nature",icon:"",description:"Fleurs, arbres, papillons, paysages..."},{value:"ocean",label:"Ocan",icon:"",description:"Poissons, dauphins, coraux, tortues..."},{value:"seasons",label:"Saisons",icon:"",description:"Automne, hiver, printemps, t..."},{value:"sports",label:"Sports",icon:"",description:"Football, basketball, natation..."},{value:"fruits",label:"Fruits & Lgumes",icon:"",description:"Fruits rigolos, lgumes souriants..."},{value:"professions",label:"Mtiers",icon:"",description:"Mdecins, pompiers, cuisiniers..."},{value:"emotions",label:"motions",icon:"",description:"Visages joyeux, tristes, surpris..."}],S=w=>{e===w?(t(""),c(!1),p(!1)):(t(w),c(w==="custom"),p(w==="upload_photo"))},k=w=>{const E=w.target.files[0];if(E){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(E.type)){alert("Format de fichier non support. Utilisez JPG, PNG, GIF ou WebP.");return}if(E.size>5*1024*1024){alert("La photo est trop grande. Taille maximale : 5 MB");return}const B=new FileReader;B.onloadend=()=>{f(B.result)},B.readAsDataURL(E),s(E)}},y=w=>{o(a===w?null:w)},x=()=>{s(null),f(null);const w=document.getElementById("photo-upload-input");w&&(w.value="")};return u.jsxs("div",{className:"coloring-selector",children:[u.jsx("h3",{children:"2. Choisissez un thme pour vos coloriages"}),u.jsx("div",{className:"theme-grid",children:_.map((w,E)=>u.jsxs("div",{className:"theme-slot",children:[u.jsxs(Te.div,{className:`theme-option ${w.special?"photo-upload-option":""} ${w.value==="custom"?"custom-coloring":""} ${e===w.value?"selected":""}`,onClick:()=>S(w.value),whileHover:{y:-5},whileTap:{scale:.98},children:[u.jsx("div",{className:"theme-icon",children:w.icon}),u.jsxs("div",{className:"theme-info",children:[u.jsx("h4",{children:w.label}),u.jsx("p",{children:w.description})]})]}),w.special&&d&&e==="upload_photo"&&u.jsxs(Te.div,{className:"photo-upload-container inline-upload",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:[u.jsxs("div",{className:"upload-section",children:[u.jsx("p",{className:"upload-hint",children:"Formats accepts : JPG, PNG, GIF, WebP (max 5 MB)"}),u.jsx("input",{type:"file",id:"photo-upload-input",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:k,style:{display:"none"}}),g?u.jsx("div",{className:"photo-preview-container",children:u.jsx("img",{src:g,alt:"Aperu",className:"photo-preview"})}):u.jsxs("label",{htmlFor:"photo-upload-input",className:"upload-button",children:[u.jsx("span",{className:"upload-icon",children:""}),u.jsx("span",{children:"Choisir une photo"})]})]}),g&&u.jsx(Te.div,{className:"remove-photo-section",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:u.jsx("button",{onClick:x,className:"remove-photo-button",children:" Supprimer la photo"})})]}),w.value==="custom"&&l&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input inline-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("input",{type:"text",placeholder:"Dcrivez votre thme de coloriage personnalis...",value:n,onChange:B=>r(B.target.value),className:"custom-input"})})]},w.value))}),u.jsxs("div",{className:"model-choice-section",children:[u.jsx("h3",{children:"3. Voulez-vous un modle ?"}),u.jsxs("div",{className:"model-buttons",children:[u.jsxs(Te.button,{className:`model-btn ${a===!0?"active":""}`,onClick:()=>y(!0),whileHover:{y:-3},whileTap:{scale:.98},children:[u.jsx("span",{className:"model-icon",children:""}),u.jsx("span",{className:"model-label",children:"Avec modle"}),u.jsx("span",{className:"model-desc",children:"Inclut un exemple color en coin"})]}),u.jsxs(Te.button,{className:`model-btn ${a===!1?"active":""}`,onClick:()=>y(!1),whileHover:{y:-3},whileTap:{scale:.98},children:[u.jsx("span",{className:"model-icon",children:""}),u.jsx("span",{className:"model-label",children:"Sans modle"}),u.jsx("span",{className:"model-desc",children:"Coloriage pur, libert crative"})]})]})]})]})},Rj=({imageUrl:e,theme:t,onClose:n,onSave:r})=>{const i=T.useRef(null),[s,a]=T.useState(null),[o,l]=T.useState("#FF6B6B"),[c,d]=T.useState("bucket"),[p,g]=T.useState(!1),[f,_]=T.useState(1),[S,k]=T.useState(!1),[y,x]=T.useState(null),[w,E]=T.useState(null),B=["#FF6B6B","#FF4757","#FF6348","#FFA07A","#FF85C0","#FFB6C1","#FF1493","#DC143C","#F8B739","#FFA500","#FFD700","#F7DC6F","#FFDAB9","#FFE4B5","#F4A460","#FDB813","#52C41A","#98D8C8","#81C784","#00C853","#20B2AA","#3CB371","#90EE90","#7FFF00","#4ECDC4","#45B7D1","#85C1E9","#A8DADC","#00BFFF","#1E90FF","#4169E1","#6495ED","#BB8FCE","#9B59B6","#8B008B","#DA70D6","#E6E6FA","#DDA0DD","#BA55D3","#9370DB","#DDA15E","#BC6C25","#D2691E","#CD853F","#8B4513","#A0522D","#F5DEB3","#FAEBD7","#95A5A6","#7F8C8D","#BDC3C7","#ECF0F1","#D3D3D3","#C0C0C0","#A9A9A9","#808080","#E07A5F","#FF6B9D","#00D9FF","#FFEB3B","#FF5722","#8BC34A","#00BCD4","#E91E63"];T.useEffect(()=>{const re=i.current;if(!re)return;const ie=re.getContext("2d",{willReadFrequently:!0});a(ie);const N=new Image;N.crossOrigin="anonymous",N.onload=()=>{const M=window.innerWidth*.9,$=window.innerHeight*.7;let Q=N.width,te=N.height;Q>M&&(te=M/Q*te,Q=M),te>$&&(Q=$/te*Q,te=$),re.width=Q,re.height=te,ie.drawImage(N,0,0,Q,te),x(ie.getImageData(0,0,Q,te));const oe=ie.createImageData(Q,te);E(oe),k(!0)},N.onerror=()=>{console.error("Erreur de chargement de l'image")},N.src=e},[e]);const q=(re,ie,N)=>{if(!s||!y)return;const M=i.current,$=s.getImageData(0,0,M.width,M.height),Q=$.data,te=F(Q,re,ie,M.width),oe=J(N);if(R(te,oe))return;const me=[[re,ie]],he=new Set;for(;me.length>0;){const[ge,_e]=me.pop(),Re=`${ge},${_e}`;if(he.has(Re)||ge<0||ge>=M.width||_e<0||_e>=M.height)continue;const Pe=F(Q,ge,_e,M.width);P(Pe)||R(Pe,te)&&(he.add(Re),I(Q,ge,_e,M.width,oe),me.push([ge+1,_e]),me.push([ge-1,_e]),me.push([ge,_e+1]),me.push([ge,_e-1]))}s.putImageData($,0,0)},z=(re,ie)=>{if(!s||!y)return;const N=i.current,M=s.getImageData(0,0,N.width,N.height),$=M.data,Q=y.data,te=F($,re,ie,N.width);if(K(te))return;const oe=[[re,ie]],me=new Set;for(;oe.length>0;){const[he,ge]=oe.pop(),_e=`${he},${ge}`;if(me.has(_e)||he<0||he>=N.width||ge<0||ge>=N.height)continue;const Re=F($,he,ge,N.width);if(P(Re)||!R(Re,te))continue;me.add(_e);const Pe=(ge*N.width+he)*4;$[Pe]=Q[Pe],$[Pe+1]=Q[Pe+1],$[Pe+2]=Q[Pe+2],$[Pe+3]=Q[Pe+3],oe.push([he+1,ge]),oe.push([he-1,ge]),oe.push([he,ge+1]),oe.push([he,ge-1])}s.putImageData(M,0,0)},F=(re,ie,N,M)=>{const $=(N*M+ie)*4;return{r:re[$],g:re[$+1],b:re[$+2],a:re[$+3]}},I=(re,ie,N,M,$)=>{const Q=(N*M+ie)*4;re[Q]=$.r,re[Q+1]=$.g,re[Q+2]=$.b,re[Q+3]=255},J=re=>{const ie=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(re);return ie?{r:parseInt(ie[1],16),g:parseInt(ie[2],16),b:parseInt(ie[3],16),a:255}:{r:0,g:0,b:0,a:255}},R=(re,ie,N=10)=>Math.abs(re.r-ie.r)<=N&&Math.abs(re.g-ie.g)<=N&&Math.abs(re.b-ie.b)<=N,P=(re,ie=50)=>re.r<ie&&re.g<ie&&re.b<ie,K=(re,ie=240)=>re.r>ie&&re.g>ie&&re.b>ie||re.a<10,G=re=>{if(!S)return;const ie=i.current,N=ie.getBoundingClientRect(),M=Math.floor((re.clientX-N.left)*(ie.width/N.width)),$=Math.floor((re.clientY-N.top)*(ie.height/N.height));c==="bucket"?q(M,$,o):c==="eraser"&&z(M,$)},Z=()=>{i.current.toBlob(re=>{const ie=URL.createObjectURL(re),N=document.createElement("a");N.href=ie;const M=(t||"coloriage").replace(/[^a-z0-9]/gi,"_").toLowerCase();N.download=`coloriages_${M}_colorie.png`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(ie)})},le=re=>{re.target.classList.contains("coloring-canvas-overlay")&&n()},de=()=>{!s||!y||s.putImageData(y,0,0)},X=()=>{_(re=>Math.min(re+.5,3)),g(!0)},ae=()=>{f>1&&(_(re=>Math.max(re-.5,1)),f-.5<=1&&g(!1))};return u.jsx("div",{className:"coloring-canvas-overlay",onClick:le,children:u.jsxs("div",{className:"coloring-canvas-container",children:[u.jsxs("div",{className:"coloring-toolbar-top",children:[u.jsx("h2",{className:"coloring-canvas-title",children:" Coloriez votre dessin"}),u.jsxs("div",{className:"coloring-zoom-controls",children:[u.jsx("button",{className:"coloring-zoom-btn",onClick:ae,disabled:f<=1,title:"Zoom arrire",children:""}),u.jsxs("span",{style:{color:"white",fontWeight:"bold",minWidth:"60px",textAlign:"center"},children:[Math.round(f*100),"%"]}),u.jsx("button",{className:"coloring-zoom-btn",onClick:X,disabled:f>=3,title:"Zoom avant",children:"+"})]}),u.jsxs("div",{className:"coloring-toolbar-actions",children:[u.jsx("button",{className:"coloring-btn coloring-reset-btn",onClick:de,title:"Rinitialiser",children:" Rinitialiser"}),u.jsx("button",{className:"coloring-btn coloring-save-btn",onClick:Z,title:"Tlcharger",children:" Tlcharger"}),u.jsx("button",{className:"coloring-btn coloring-close-btn-top",onClick:n,title:"Fermer",children:""})]})]}),u.jsxs("div",{className:"coloring-canvas-wrapper",children:[u.jsx("canvas",{ref:i,onClick:G,className:`coloring-canvas ${p?"zoomed":""}`,style:{transform:`scale(${f})`}}),!S&&u.jsxs("div",{className:"coloring-loading",children:[u.jsx("div",{className:"coloring-spinner"}),u.jsx("p",{children:"Chargement du coloriage..."})]})]}),u.jsxs("div",{className:"coloring-toolbar-bottom",children:[u.jsxs("div",{className:"coloring-tools",children:[u.jsx("button",{className:`coloring-tool-btn ${c==="bucket"?"active":""}`,onClick:()=>d("bucket"),title:"Seau de peinture",children:""}),u.jsx("button",{className:`coloring-tool-btn ${c==="eraser"?"active":""}`,onClick:()=>d("eraser"),title:"Gomme",children:""})]}),u.jsx("div",{className:"coloring-palette",children:B.map((re,ie)=>u.jsx("button",{className:`coloring-color-btn ${o===re&&c==="bucket"?"active":""}`,style:{backgroundColor:re},onClick:()=>{l(re),d("bucket")},title:re},ie))})]})]})})},pD=({coloringResult:e,onClose:t,selectedTheme:n})=>{const[r,i]=T.useState(!1),[s,a]=T.useState(!1),o=T.useRef(null),l=()=>{var _;document.fullscreenElement?(document.exitFullscreen(),i(!1)):((_=o.current)==null||_.requestFullscreen(),i(!0))},c=_=>{_.target.classList.contains("coloring-popup-overlay")&&t()},d=()=>{if(e!=null&&e.images&&e.images.length>0){const _=e.title||(n?`coloriages_${n}`:"coloriages");fy(e.images,_)}else console.warn("Aucune image disponible pour le tlchargement PDF")};if(!e||!e.images||e.images.length===0)return null;const p=e.images[0],g=p.image_url||p,f=()=>{a(!0)};return u.jsx(u.Fragment,{children:s?u.jsx(Rj,{imageUrl:g,onClose:()=>a(!1)}):u.jsx("div",{className:"coloring-popup-overlay",onClick:c,children:u.jsxs("div",{className:"coloring-popup-content",ref:o,children:[u.jsx("div",{className:"coloring-background"}),u.jsx("button",{className:"coloring-close-btn",onClick:t,children:""}),u.jsx("button",{className:"coloring-fullscreen-btn",onClick:l,children:r?" Quitter le plein cran":" Plein cran"}),u.jsxs("div",{className:"coloring-container",children:[u.jsx("h2",{className:"coloring-title",children:" Votre coloriage"}),u.jsx("div",{className:"coloring-image-wrapper",children:u.jsx("img",{src:g,alt:"Coloriage",className:"coloring-popup-image"})}),u.jsxs("div",{className:"coloring-popup-actions",children:[u.jsx("button",{className:"coloring-open-btn",onClick:f,children:" Colorier maintenant"}),u.jsx("button",{className:"coloring-download-btn",onClick:d,children:" Tlcharger le coloriage"})]})]})]})})})},mD=({selectedTheme:e,setSelectedTheme:t,selectedStyle:n,setSelectedStyle:r,numPages:i,setNumPages:s,customStory:a,setCustomStory:o,characterPhoto:l,setCharacterPhoto:c,onCharacterPhotoUpload:d})=>{const[p,g]=T.useState(!1),f=[{id:"custom",name:"Personnalis",icon:"",description:"Votre propre histoire"},{id:"espace",name:"Espace",icon:"",description:"Aventures spatiales"},{id:"pirates",name:"Pirates",icon:"",description:"Trsors et mers"},{id:"princesses",name:"Princesses",icon:"",description:"Chteaux magiques"},{id:"dinosaures",name:"Dinosaures",icon:"",description:"Monde prhistorique"},{id:"animaux",name:"Animaux",icon:"",description:"Animaux mignons"},{id:"superheros",name:"Super-hros",icon:"",description:"Pouvoirs incroyables"},{id:"foret",name:"Fort Magique",icon:"",description:"Fort enchante"},{id:"ecole",name:"cole",icon:"",description:"Aventures scolaires"}],_=[{id:"3d",name:"3D",icon:"",description:"Effets 3D modernes"},{id:"cartoon",name:"Cartoon",icon:"",description:"Color et enfantin"},{id:"manga",name:"Manga",icon:"",description:"Style japonais"},{id:"comics",name:"Comics Marvel",icon:"",description:"Style amricain"},{id:"realistic",name:"Raliste",icon:"",description:"Dtaill et raliste"},{id:"watercolor",name:"Aquarelle",icon:"",description:"Doux et artistique"}],S=[1,2,3,4,5],k=async y=>{const x=y.target.files[0];if(x){g(!0);try{await d(x)}catch(w){console.error("Erreur upload:",w),alert("Erreur lors de l'upload de la photo")}finally{g(!1)}}};return u.jsxs("div",{className:"comics-selector",children:[u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"2. Choisissez un thme pour votre bande dessine"}),u.jsx("div",{className:"theme-grid",children:f.map(y=>u.jsxs("div",{className:"theme-slot",children:[u.jsxs(Te.div,{className:`theme-card ${e===y.id?"selected":""} ${y.id==="custom"?"custom-theme":""}`,onClick:()=>t(e===y.id?null:y.id),whileHover:{scale:1.03},whileTap:{scale:.98},transition:{duration:.2},children:[u.jsx("div",{className:"theme-icon",children:y.icon}),u.jsx("div",{className:"theme-name",children:y.name}),u.jsx("div",{className:"theme-description",children:y.description})]}),y.id==="custom"&&e==="custom"&&u.jsx(Te.div,{className:"custom-theme-input",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:u.jsx("textarea",{className:"custom-input",placeholder:"Dcrivez votre histoire personnalise... (ex: Une petite fille qui dcouvre un monde magique dans son jardin)",value:a,onChange:x=>o(x.target.value),rows:3})})]},y.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"3. Choisissez un style de dessin"}),u.jsx("div",{className:"style-grid",children:_.map(y=>u.jsxs(Te.div,{className:`style-card ${n===y.id?"selected":""}`,onClick:()=>r(n===y.id?null:y.id),whileHover:{scale:1.03},whileTap:{scale:.98},transition:{duration:.2},children:[u.jsx("div",{className:"style-icon",children:y.icon}),u.jsx("div",{className:"style-name",children:y.name}),u.jsx("div",{className:"style-description",children:y.description})]},y.id))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"4. Nombre de pages"}),u.jsx("div",{className:"pages-selector",children:S.map(y=>u.jsxs(Te.button,{className:`page-btn ${i===y?"selected":""}`,onClick:()=>s(i===y?null:y),whileHover:{scale:1.03},whileTap:{scale:.98},transition:{duration:.2},children:[y," ",y===1?"page":"pages",u.jsxs("span",{className:"cases-info",children:["(",y*4," cases)"]})]},y))})]}),u.jsxs("div",{className:"selector-section",children:[u.jsx("h3",{children:"5. Personnage principal (optionnel)"}),u.jsxs("div",{className:"character-upload-section",children:[u.jsx("p",{className:"character-description",children:"Uploadez une photo pour crer un personnage ressemblant ! L'IA analysera la photo et crera un personnage de BD similaire."}),u.jsxs("div",{className:"upload-area",children:[u.jsx("input",{type:"file",id:"character-photo-upload",accept:"image/*",onChange:k,className:"file-input",disabled:p}),!l&&u.jsx("label",{htmlFor:"character-photo-upload",className:"upload-label",children:p?u.jsxs("div",{className:"uploading-state",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{children:"Upload en cours..."})]}):u.jsxs("div",{className:"upload-prompt",children:[u.jsx("span",{className:"upload-icon",children:""}),u.jsxs("div",{className:"upload-text",children:[u.jsx("strong",{children:"Cliquez pour uploader une photo"}),u.jsx("span",{children:"ou glissez-dposez une image ici"})]})]})})]}),l&&u.jsxs("div",{className:"photo-preview",children:[u.jsx("img",{src:l.url,alt:"Personnage upload"}),u.jsxs("div",{className:"photo-actions",children:[u.jsx("button",{className:"change-photo-btn",onClick:()=>document.getElementById("character-photo-upload").click(),children:" Changer"}),u.jsx("button",{className:"remove-photo-btn",onClick:()=>c(null),children:" Retirer"})]})]})]})]})]})},gD=({comic:e,onClose:t,baseUrl:n})=>{const[r,i]=T.useState(0),[s,a]=T.useState(!1);if(!e||!e.pages||e.pages.length===0)return null;const o=e.pages[r],l=e.pages.length,c=()=>{r<l-1&&i(r+1)},d=()=>{r>0&&i(r-1)},p=()=>{const _=`${n}${o.image_url}`,S=document.createElement("a");S.href=_;const k=(e.title||"bande_dessinee").replace(/[^a-z0-9]/gi,"_").toLowerCase();S.download=`${k}_page_${r+1}.png`,document.body.appendChild(S),S.click(),document.body.removeChild(S)},g=()=>{e.pages.forEach((_,S)=>{setTimeout(()=>{const k=`${n}${_.image_url}`,y=document.createElement("a");y.href=k;const x=(e.title||"bande_dessinee").replace(/[^a-z0-9]/gi,"_").toLowerCase();y.download=`${x}_page_${S+1}.png`,document.body.appendChild(y),y.click(),document.body.removeChild(y)},S*500)})},f=()=>{a(!s)};return u.jsx(Fi,{children:u.jsx(Te.div,{className:"comics-popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:u.jsxs(Te.div,{className:`comics-popup-container ${s?"fullscreen":""}`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:_=>_.stopPropagation(),children:[u.jsxs("div",{className:"comics-popup-header",children:[u.jsxs("div",{className:"comic-title-section",children:[u.jsx("h2",{className:"comic-title",children:e.title}),u.jsx("p",{className:"comic-synopsis",children:e.synopsis}),u.jsxs("div",{className:"comic-meta",children:[u.jsxs("span",{className:"meta-item",children:[u.jsx("span",{className:"meta-icon",children:""}),e.art_style]}),u.jsxs("span",{className:"meta-item",children:[u.jsx("span",{className:"meta-icon",children:""}),l," ",l===1?"planche":"planches"]}),u.jsxs("span",{className:"meta-item",children:[u.jsx("span",{className:"meta-icon",children:""}),l*4," cases"]})]})]}),u.jsx("button",{className:"close-btn",onClick:t,children:""})]}),u.jsxs("div",{className:"comics-viewer",children:[u.jsx(Fi,{mode:"wait",children:u.jsxs(Te.div,{className:"page-display",initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},children:[u.jsx("img",{src:`${n}${o.image_url}`,alt:`Planche ${r+1}`,className:"page-image",onClick:f}),u.jsxs("div",{className:"page-info",children:["Planche ",r+1," / ",l]})]},r)}),l>1&&u.jsxs("div",{className:"page-navigation",children:[u.jsx("button",{className:"nav-btn prev-btn",onClick:d,disabled:r===0,children:" Prcdent"}),u.jsx("div",{className:"page-dots",children:e.pages.map((_,S)=>u.jsx("button",{className:`page-dot ${S===r?"active":""}`,onClick:()=>i(S),"aria-label":`Aller  la planche ${S+1}`},S))}),u.jsx("button",{className:"nav-btn next-btn",onClick:c,disabled:r===l-1,children:"Suivant "})]})]}),u.jsxs("div",{className:"comics-actions",children:[u.jsxs("button",{className:"action-btn secondary-btn",onClick:f,children:[u.jsx("span",{className:"btn-icon",children:s?"":""}),s?"Rduire":"Plein cran"]}),u.jsxs("button",{className:"action-btn primary-btn",onClick:p,children:[u.jsx("span",{className:"btn-icon",children:""}),"Tlcharger cette planche"]}),l>1&&u.jsxs("button",{className:"action-btn primary-btn",onClick:g,children:[u.jsx("span",{className:"btn-icon",children:""}),"Tlcharger toutes les planches"]})]}),l>1&&u.jsxs("div",{className:"thumbnails-section",children:[u.jsx("h4",{children:"Toutes les planches"}),u.jsx("div",{className:"thumbnails-grid",children:e.pages.map((_,S)=>u.jsxs(Te.div,{className:`thumbnail ${S===r?"active":""}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(S),children:[u.jsx("img",{src:`${n}${_.image_url}`,alt:`Miniature planche ${S+1}`}),u.jsxs("div",{className:"thumbnail-label",children:["Planche ",S+1]})]},S))})]})]})})})},vD=async(e,t,n,r={})=>{try{if(n==="fredagathe77@gmail.com")return{hasPermission:!0,reason:"admin_access",userRole:"admin",isAdmin:!0};const{data:i,error:s}=await Pt.from("profiles").select("role").eq("id",t).single();if((i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="free")return{hasPermission:!0,reason:(i==null?void 0:i.role)==="admin"?"admin_access":"free_access",userRole:i==null?void 0:i.role,isAdmin:(i==null?void 0:i.role)==="admin"};const{data:a,error:o}=await Pt.functions.invoke("check-permission",{body:{contentType:e,userId:t,userEmail:n,selectedDuration:r.duration,numPages:r.pages,selectedVoice:r.voice}});return o?(console.error("Erreur check-permission:",o),{hasPermission:!1,reason:"error",error:o,isAdmin:!1}):{...a,isAdmin:!1}}catch(i){return{hasPermission:!1,reason:"error",error:i,isAdmin:!1}}},yD=async(e,t,n,r={})=>{try{const i=Dp(e==="audio"?"histoire":e,r),{data:s,error:a}=await Pt.functions.invoke("create-payment",{body:{contentType:e,userId:t,userEmail:n,amount:i.amount,selectedDuration:r.duration,numPages:r.pages,selectedVoice:r.voice}});if(a)throw a;return s}catch(i){throw i}},Dp=(e,t={})=>{console.log(" getContentPrice appel:",{contentType:e,options:t}),console.log(" options.voice:",t.voice,"Type:",typeof t.voice);const n={comptine:{amount:149,name:"Comptine Musicale",currency:"EUR",display:"1,49"},histoire:{amount:49,name:"Histoire Texte",currency:"EUR",display:"0,49"},audio:{amount:79,name:"Histoire Audio",currency:"EUR",display:"0,79"},coloriage:{amount:99,name:"Coloriage Personnalis",currency:"EUR",display:"0,99"},coloring:{amount:99,name:"Coloriage personnalis",currency:"EUR",display:"0,99"},bd:{amount:149,name:"Page de Bande Dessine",currency:"EUR",display:"1,49"},comic:{amount:149,name:"Page de Bande Dessine",currency:"EUR",display:"1,49"},story:{amount:49,name:"Histoire Texte",currency:"EUR",display:"0,49"},rhyme:{amount:149,name:"Comptine musicale",currency:"EUR",display:"1,49"},animation:{amount:1299,name:"Animation IA 30s",currency:"EUR",display:"12,99"}};if(e==="histoire"||e==="story"||e==="audio")return{amount:79,name:"Histoire",currency:"EUR",display:"0,79"};if(e==="animation"&&t.duration){const r={30:{amount:1299,name:"Animation IA 30s",display:"12,99"},60:{amount:1999,name:"Animation IA 1min",display:"19,99"},120:{amount:2499,name:"Animation IA 2min",display:"24,99"},180:{amount:2999,name:"Animation IA 3min",display:"29,99"},240:{amount:3499,name:"Animation IA 4min",display:"34,99"},300:{amount:3999,name:"Animation IA 5min",display:"39,99"}},i=t.duration;if(r[i])return{...n[e],...r[i],currency:"EUR"}}if((e==="bd"||e==="comic")&&t.pages){const r=n[e].amount*t.pages,i=(r/100).toFixed(2).replace(".",",")+"";return{...n[e],amount:r,name:`${t.pages} page${t.pages>1?"s":""} de Bande Dessine`,display:i}}return n[e]||{amount:149,name:"Contenu Cratif",currency:"EUR",display:"1,49"}},Oj=async(e,t)=>{try{if(t==="fredagathe77@gmail.com")return!0;const{data:n,error:r}=await Pt.from("profiles").select("role").eq("id",e).single();return r?!1:(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="free"}catch{return!1}},bD=async e=>{try{const{data:t,error:n}=await Pt.from("profiles").select("role").eq("id",e).single();return(t==null?void 0:t.role)||"user"}catch{return"user"}},Ij=async(e,t,n,r)=>{try{const{data:i,error:s}=await Pt.from("generation_permissions").upsert({user_id:e,content_type:t,stripe_payment_intent_id:n,amount:r,status:"completed",created_at:new Date().toISOString()});if(s)throw s;return i}catch(i){throw i}},Fj=async()=>{try{const{data:e,error:t}=await Pt.functions.invoke("manage-subscription",{body:{action:"get_plans"}});if(t)throw t;return e.plans||[]}catch(e){return console.error("Erreur rcupration plans:",e),[]}},Dj=async e=>{try{const{data:t,error:n}=await Pt.functions.invoke("manage-subscription",{body:{action:"get_subscription",userId:e}});if(n)throw n;return t.subscription}catch(t){return console.error("Erreur rcupration abonnement:",t),null}},Mj=async(e,t,n,r)=>{try{const{data:i,error:s}=await Pt.functions.invoke("manage-subscription",{body:{action:"create_subscription",planId:e,userId:t,paymentMethodId:n,userEmail:r}});if(s)throw s;return i}catch(i){throw console.error("Erreur cration abonnement:",i),i}},Bj=async e=>{try{const{data:t,error:n}=await Pt.functions.invoke("manage-subscription",{body:{action:"cancel_subscription",userId:e}});if(n)throw n;return t}catch(t){throw console.error("Erreur annulation abonnement:",t),t}},wD=async(e,t,n,r={})=>{try{const{data:i,error:s}=await Pt.functions.invoke("deduct-tokens",{body:{userId:e,contentType:t,tokensUsed:n,selectedDuration:r.duration,numPages:r.pages,selectedVoice:r.voice,transactionId:r.transactionId||`txn_${Date.now()}`}});if(s)throw s;return i}catch(i){throw console.error("Erreur dduction tokens:",i),i}},Uj=async e=>{try{const{data:t,error:n}=await Pt.from("user_tokens").select("*").eq("user_id",e).is("used_at",null).or("expires_at.is.null,expires_at.gte."+new Date().toISOString()).order("created_at",{ascending:!1});if(n)throw n;return{totalTokens:t.reduce((r,i)=>r+i.tokens_amount,0),tokens:t}}catch(t){return console.error("Erreur rcupration tokens:",t),{totalTokens:0,tokens:[]}}},xD=(e,t={},n=null)=>{var r;let i=1;if(n){const s=(r=n.subscription_plans)==null?void 0:r.name,a={Dcouverte:{histoire:3,audio:3,coloriage:2,bd:4,comptine:5,animation:10},Famille:{histoire:3,audio:3,coloriage:2,bd:3,comptine:4,animation:8},Cratif:{histoire:2,audio:2,coloriage:1,bd:2,comptine:3,animation:5},Institut:{histoire:1,audio:1,coloriage:1,bd:1,comptine:2,animation:3}};s&&a[s]&&(i=a[s][e]||1)}else i={histoire:1,audio:1,coloriage:1,bd:4,comptine:5,animation:10}[e]||1;if(e==="animation"&&t.duration){const s=t.duration;s===60?i=Math.ceil(i*1.5):s===120?i=Math.ceil(i*2.5):s===180?i=Math.ceil(i*4):s===240?i=Math.ceil(i*5):s===300&&(i=Math.ceil(i*6))}return(e==="bd"||e==="comic")&&t.pages&&(i=i*t.pages),i},_D=async(e,t=50)=>{try{const{data:n,error:r}=await Pt.from("user_tokens").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(r)throw r;return n||[]}catch(n){return console.error("Erreur rcupration historique tokens:",n),[]}},SD=Object.freeze(Object.defineProperty({__proto__:null,calculateTokenCost:xD,cancelSubscription:Bj,checkPaymentPermission:vD,createPaymentSession:yD,createSubscription:Mj,deductTokens:wD,getContentPrice:Dp,getSubscriptionPlans:Fj,getTokenHistory:_D,getUserRole:bD,getUserSubscription:Dj,getUserTokens:Uj,grantPermission:Ij,hasFreeAccess:Oj},Symbol.toStringTag,{value:"Module"}));var qj="clover",kD=function(e){return e===3?"v3":e},$j="https://js.stripe.com",jD="".concat($j,"/").concat(qj,"/stripe.js"),ND=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ED=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Sx="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",AD=function(e){return ND.test(e)||ED.test(e)},CD=function(){for(var e=document.querySelectorAll('script[src^="'.concat($j,'"]')),t=0;t<e.length;t++){var n=e[t];if(AD(n.src))return n}return null},kx=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(jD).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},PD=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.3.0",startTime:t})},du=null,$h=null,zh=null,LD=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},TD=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},RD=function(e){return du!==null?du:(du=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(Sx),window.Stripe){t(window.Stripe);return}try{var r=CD();if(r&&e)console.warn(Sx);else if(!r)r=kx(e);else if(r&&zh!==null&&$h!==null){var i;r.removeEventListener("load",zh),r.removeEventListener("error",$h),(i=r.parentNode)===null||i===void 0||i.removeChild(r),r=kx(e)}zh=TD(t,n),$h=LD(n),r.addEventListener("load",zh),r.addEventListener("error",$h)}catch(s){n(s);return}}),du.catch(function(t){return du=null,Promise.reject(t)}))},OD=function(e,t,n){if(e===null)return null;var r=t[0],i=r.match(/^pk_test/),s=kD(e.version),a=qj;i&&s!==a&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("8.3.0"," expected Stripe.js@").concat(a,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var o=e.apply(void 0,t);return PD(o,n),o},Vh,zj=!1,Vj=function(){return Vh||(Vh=RD(null).catch(function(e){return Vh=null,Promise.reject(e)}),Vh)};Promise.resolve().then(function(){return Vj()}).catch(function(e){zj||console.warn(e)});var Hj=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];zj=!0;var r=Date.now();return Vj().then(function(i){return OD(i,t,r)})},Wj={exports:{}},ID="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",FD=ID,DD=FD;function Kj(){}function Gj(){}Gj.resetWarningCache=Kj;var MD=function(){function e(r,i,s,a,o,l){if(l!==DD){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Gj,resetWarningCache:Kj};return n.PropTypes=n,n};Wj.exports=MD();var BD=Wj.exports;const Qt=p1(BD);function jx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jx(Object(n),!0).forEach(function(r){Yj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wf(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wf=function(t){return typeof t}:wf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function Yj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UD(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function qD(e,t){if(e==null)return{};var n=UD(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xj(e,t){return $D(e)||zD(e,t)||VD(e,t)||HD()}function $D(e){if(Array.isArray(e))return e}function zD(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],i=!0,s=!1,a,o;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw o}}return r}}function VD(e,t){if(e){if(typeof e=="string")return Ex(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ex(e,t)}}function Ex(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rr=function(e,t,n){var r=!!n,i=Gt.useRef(n);Gt.useEffect(function(){i.current=n},[n]),Gt.useEffect(function(){if(!r||!e)return function(){};var s=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,s),function(){e.off(t,s)}},[r,t,e,i])},h1=function(e){var t=Gt.useRef(e);return Gt.useEffect(function(){t.current=e},[e]),t.current},gc=function(e){return e!==null&&wf(e)==="object"},WD=function(e){return gc(e)&&typeof e.then=="function"},KD=function(e){return gc(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Ax="[object Object]",GD=function e(t,n){if(!gc(t)||!gc(n))return t===n;var r=Array.isArray(t),i=Array.isArray(n);if(r!==i)return!1;var s=Object.prototype.toString.call(t)===Ax,a=Object.prototype.toString.call(n)===Ax;if(s!==a)return!1;if(!s&&!r)return t===n;var o=Object.keys(t),l=Object.keys(n);if(o.length!==l.length)return!1;for(var c={},d=0;d<o.length;d+=1)c[o[d]]=!0;for(var p=0;p<l.length;p+=1)c[l[p]]=!0;var g=Object.keys(c);if(g.length!==o.length)return!1;var f=t,_=n,S=function(k){return e(f[k],_[k])};return g.every(S)},Jj=function(e,t,n){return gc(e)?Object.keys(e).reduce(function(r,i){var s=!gc(t)||!GD(e[i],t[i]);return n.includes(i)?(s&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):s?Nx(Nx({},r||{}),{},Yj({},i,e[i])):r},null):null},Qj="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Cx=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qj;if(e===null||KD(e))return e;throw new Error(t)},YD=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qj;if(WD(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(r){return Cx(r,t)})};var n=Cx(e,t);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},XD=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},Mp=Gt.createContext(null);Mp.displayName="ElementsContext";var Zj=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},py=function(e){var t=e.stripe,n=e.options,r=e.children,i=Gt.useMemo(function(){return YD(t)},[t]),s=Gt.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),a=Xj(s,2),o=a[0],l=a[1];Gt.useEffect(function(){var p=!0,g=function(f){l(function(_){return _.stripe?_:{stripe:f,elements:f.elements(n)}})};return i.tag==="async"&&!o.stripe?i.stripePromise.then(function(f){f&&p&&g(f)}):i.tag==="sync"&&!o.stripe&&g(i.stripe),function(){p=!1}},[i,o,n]);var c=h1(t);Gt.useEffect(function(){c!==null&&c!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,t]);var d=h1(n);return Gt.useEffect(function(){if(o.elements){var p=Jj(n,d,["clientSecret","fonts"]);p&&o.elements.update(p)}},[n,d,o.elements]),Gt.useEffect(function(){XD(o.stripe)},[o.stripe]),Gt.createElement(Mp.Provider,{value:o},r)};py.propTypes={stripe:Qt.any,options:Qt.object};var JD=function(e){var t=Gt.useContext(Mp);return Zj(t,e)},e6=function(){var e=JD("calls useElements()"),t=e.elements;return t};Qt.func.isRequired;var t6=Gt.createContext(null);t6.displayName="CheckoutContext";Qt.any,Qt.shape({clientSecret:Qt.oneOfType([Qt.string,Qt.instanceOf(Promise)]).isRequired,elementsOptions:Qt.object}).isRequired;var f1=function(e){var t=Gt.useContext(t6),n=Gt.useContext(Mp);if(t){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}else return Zj(n,e)},QD=["mode"],ZD=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Zr=function(e,t){var n="".concat(ZD(e),"Element"),r=function(a){var o=a.id,l=a.className,c=a.options,d=c===void 0?{}:c,p=a.onBlur,g=a.onFocus,f=a.onReady,_=a.onChange,S=a.onEscape,k=a.onClick,y=a.onLoadError,x=a.onLoaderStart,w=a.onNetworksChange,E=a.onConfirm,B=a.onCancel,q=a.onShippingAddressChange,z=a.onShippingRateChange,F=a.onSavedPaymentMethodRemove,I=a.onSavedPaymentMethodUpdate,J=f1("mounts <".concat(n,">")),R="elements"in J?J.elements:null,P="checkoutState"in J?J.checkoutState:null,K=(P==null?void 0:P.type)==="success"||(P==null?void 0:P.type)==="loading"?P.sdk:null,G=Gt.useState(null),Z=Xj(G,2),le=Z[0],de=Z[1],X=Gt.useRef(null),ae=Gt.useRef(null);Rr(le,"blur",p),Rr(le,"focus",g),Rr(le,"escape",S),Rr(le,"click",k),Rr(le,"loaderror",y),Rr(le,"loaderstart",x),Rr(le,"networkschange",w),Rr(le,"confirm",E),Rr(le,"cancel",B),Rr(le,"shippingaddresschange",q),Rr(le,"shippingratechange",z),Rr(le,"savedpaymentmethodremove",F),Rr(le,"savedpaymentmethodupdate",I),Rr(le,"change",_);var re;f&&(e==="expressCheckout"?re=f:re=function(){f(le)}),Rr(le,"ready",re),Gt.useLayoutEffect(function(){if(X.current===null&&ae.current!==null&&(R||K)){var N=null;if(K)switch(e){case"payment":N=K.createPaymentElement(d);break;case"address":if("mode"in d){var M=d.mode,$=qD(d,QD);if(M==="shipping")N=K.createShippingAddressElement($);else if(M==="billing")N=K.createBillingAddressElement($);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":N=K.createExpressCheckoutElement(d);break;case"currencySelector":N=K.createCurrencySelectorElement();break;case"taxId":N=K.createTaxIdElement(d);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(N=R.create(e,d));X.current=N,de(N),N&&N.mount(ae.current)}},[R,K,d]);var ie=h1(d);return Gt.useEffect(function(){if(X.current){var N=Jj(d,ie,["paymentRequest"]);N&&"update"in X.current&&X.current.update(N)}},[d,ie]),Gt.useLayoutEffect(function(){return function(){if(X.current&&typeof X.current.destroy=="function")try{X.current.destroy(),X.current=null}catch{}}},[]),Gt.createElement("div",{id:o,className:l,ref:ae})},i=function(a){f1("mounts <".concat(n,">"));var o=a.id,l=a.className;return Gt.createElement("div",{id:o,className:l})},s=t?i:r;return s.propTypes={id:Qt.string,className:Qt.string,onChange:Qt.func,onBlur:Qt.func,onFocus:Qt.func,onReady:Qt.func,onEscape:Qt.func,onClick:Qt.func,onLoadError:Qt.func,onLoaderStart:Qt.func,onNetworksChange:Qt.func,onConfirm:Qt.func,onCancel:Qt.func,onShippingAddressChange:Qt.func,onShippingRateChange:Qt.func,onSavedPaymentMethodRemove:Qt.func,onSavedPaymentMethodUpdate:Qt.func,options:Qt.object},s.displayName=n,s.__elementType=e,s},ei=typeof window>"u",eM=Gt.createContext(null);eM.displayName="EmbeddedCheckoutProviderContext";var n6=function(){var e=f1("calls useStripe()"),t=e.stripe;return t};Zr("auBankAccount",ei);var Px=Zr("card",ei),Lx=Zr("cardNumber",ei),tM=Zr("cardExpiry",ei),nM=Zr("cardCvc",ei);Zr("iban",ei);Zr("payment",ei);Zr("expressCheckout",ei);Zr("paymentRequestButton",ei);Zr("linkAuthentication",ei);Zr("address",ei);Zr("shippingAddress",ei);Zr("paymentMethodMessaging",ei);Zr("taxId",ei);const rM={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_STRIPE_PUBLISHABLE_KEY&&typeof{}.VITE_STRIPE_PUBLISHABLE_KEY=="string"&&{}.VITE_STRIPE_PUBLISHABLE_KEY.length>0?Hj({}.VITE_STRIPE_PUBLISHABLE_KEY):Promise.resolve(null),iM=({contentType:e,userId:t,userEmail:n,onSuccess:r,onCancel:i,priceInfo:s})=>{const a=n6(),o=e6(),[l,c]=T.useState(!1),[d,p]=T.useState(null),[g,f]=T.useState(""),[_,S]=T.useState("");T.useEffect(()=>{a&&(async()=>{try{const{data:x,error:w}=await Pt.functions.invoke("create-payment",{body:{contentType:e,userId:t,userEmail:n,amount:s.amount,selectedDuration,numPages,selectedVoice}});if(w)throw console.error("Erreur Edge Function:",w),new Error("Erreur lors de la cration du paiement");if(!x.client_secret)throw new Error("Client secret manquant dans la rponse");f(x.client_secret)}catch(x){console.error(" Erreur cration Payment Intent:",x),p(x.message||"Erreur lors de l'initialisation du paiement")}})()},[e,s.amount,t,n,a]);const k=async x=>{if(x.preventDefault(),!a||!o){p("Stripe n'est pas encore charg. Veuillez patienter.");return}const w=o.getElement(Lx);if(!w){p("lment numro de carte non trouv");return}c(!0),p(null);try{if(console.log(" Traitement paiement Stripe pour:",{contentType:e,userId:t,userEmail:n,amount:s.amount}),!_.trim())throw new Error("Veuillez saisir le nom du titulaire de la carte");const{error:E,paymentIntent:B}=await a.confirmCardPayment(g,{payment_method:{card:w,billing_details:{name:_.trim(),email:n}},return_url:window.location.origin});if(E)throw console.error("Erreur Stripe:",E),new Error(E.message||"Erreur lors du paiement");if(B.status==="succeeded"){console.log(" Paiement Stripe russi:",B);try{await Ij(t,e,B.id,s.amount/100)}catch(q){console.error("Erreur lors de l'enregistrement de la permission:",q)}r({success:!0,contentType:e,amount:s.amount/100,paymentIntentId:B.id,stripePayment:!0})}else throw B.status==="requires_action"?new Error("Authentification supplmentaire requise. Veuillez ressayer."):new Error("Paiement non finalis. Veuillez vrifier votre carte.")}catch(E){console.error(" Erreur paiement Stripe:",E),p(E.message||"Erreur lors du paiement. Veuillez ressayer.")}finally{c(!1)}},y={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"},fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased"},invalid:{color:"#9e2146"}}};return u.jsxs("form",{onSubmit:k,className:"payment-form",children:[u.jsxs("div",{className:"payment-summary",children:[u.jsx("h3",{children:"Rcapitulatif de votre commande"}),u.jsxs("div",{className:"order-item",children:[u.jsx("span",{className:"item-name",children:s.name}),u.jsx("span",{className:"item-price",children:s.display})]}),u.jsxs("div",{className:"order-total",children:[u.jsx("span",{className:"total-label",children:"Total  payer :"}),u.jsx("span",{className:"total-amount",children:s.display})]})]}),u.jsxs("div",{className:"payment-method",children:[u.jsx("h3",{children:"Informations de paiement"}),u.jsxs("div",{className:"card-field",children:[u.jsx("label",{htmlFor:"cardholder-name",children:"Nom du titulaire"}),u.jsx("input",{id:"cardholder-name",type:"text",placeholder:"Jean Dupont",className:"card-input",value:_,onChange:x=>S(x.target.value),required:!0})]}),u.jsxs("div",{className:"card-field",children:[u.jsx("label",{children:"Numro de carte"}),u.jsx("div",{className:"card-element-container",children:u.jsx(Lx,{options:y,className:"card-element"})})]}),u.jsxs("div",{className:"card-row",children:[u.jsxs("div",{className:"card-field",children:[u.jsx("label",{children:"Date d'expiration"}),u.jsx("div",{className:"card-element-container small",children:u.jsx(tM,{options:y,className:"card-element"})})]}),u.jsxs("div",{className:"card-field",children:[u.jsx("label",{children:"Code de scurit (CVC)"}),u.jsx("div",{className:"card-element-container small",children:u.jsx(nM,{options:y,className:"card-element"})})]})]})]}),d&&u.jsxs("div",{className:"payment-error",children:[u.jsx("span",{className:"error-icon",children:""}),d]}),u.jsxs("div",{className:"payment-actions",children:[u.jsx("button",{type:"button",onClick:i,className:"cancel-button",disabled:l,children:"Annuler"}),u.jsx("button",{type:"submit",className:"pay-button",disabled:!a||l,children:l?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"loading-spinner"}),"Traitement en cours..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"lock-icon",children:""}),"Payer ",s.display]})})]}),u.jsx("div",{className:"payment-security",children:u.jsxs("div",{className:"security-info",children:[u.jsx("span",{className:"security-icon",children:""}),u.jsx("small",{children:"Paiement scuris par Stripe"})]})})]})},sM=({contentType:e,selectedDuration:t,numPages:n,selectedVoice:r,userId:i,userEmail:s,onSuccess:a,onCancel:o})=>{let l={};e==="animation"?l.duration=t:(e==="comic"||e==="bd")&&(l.pages=n||1);const c=Dp(e==="audio"?"histoire":e,l),d=p=>{p.target===p.currentTarget&&o()};return T.useEffect(()=>{setTimeout(()=>{const p=document.querySelector(".stripe-payment-modal");p&&(p.style.overflowY="scroll",p.style.scrollbarWidth="auto",p.style.scrollbarColor="#6B4EFF transparent",p.style.setProperty("overflow-y","scroll","important"),p.style.setProperty("-webkit-overflow-scrolling","touch","important"))},100)},[]),u.jsx("div",{className:"payment-modal-overlay",onClick:d,children:u.jsxs(Te.div,{className:"payment-modal stripe-payment-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},children:[u.jsxs("div",{className:"payment-header",children:[u.jsx("h2",{children:" Paiement scuris"}),u.jsx("button",{className:"close-button",onClick:o,"aria-label":"Fermer",children:""})]}),u.jsx(py,{stripe:rM,children:u.jsx(iM,{contentType:e,userId:i,userEmail:s,onSuccess:a,onCancel:o,priceInfo:c})})]})})},aM={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_STRIPE_PUBLISHABLE_KEY&&typeof{}.VITE_STRIPE_PUBLISHABLE_KEY=="string"&&{}.VITE_STRIPE_PUBLISHABLE_KEY.length>0?Hj({}.VITE_STRIPE_PUBLISHABLE_KEY):Promise.resolve(null),oM=({onSelectPlan:e,currentSubscription:t})=>{const[n,r]=T.useState([]),[i,s]=T.useState(!0);T.useEffect(()=>{a()},[]);const a=async()=>{try{const l=await Fj();r(l)}catch(l){console.error("Erreur chargement plans:",l)}finally{s(!1)}},o=l=>({Dcouverte:{tokens:"40 tokens/mois",features:["Histoires & Audio: 4 tokens","Coloriages: 3 tokens","BD: 5 tokens/page","Comptines: 6 tokens","Animations 30s: 12 tokens","Animations 1min: 18 tokens"],ideal:"Parfait pour dcouvrir Herbbie",economy:"conomisez jusqu' 85%"},Famille:{tokens:"120 tokens/mois",features:["Histoires & Audio: 4 tokens","Coloriages: 3 tokens","BD: 4 tokens/page","Comptines: 5 tokens","Animations 30s: 10 tokens","Animations 1min: 15 tokens"],ideal:"Pour les familles actives",economy:"conomisez jusqu' 87%"},Cratif:{tokens:"300 tokens/mois",features:["Histoires & Audio: 3 tokens","Coloriages: 2 tokens","BD: 3 tokens/page","Comptines: 4 tokens","Animations 30s: 8 tokens","Animations 1min: 12 tokens"],ideal:"Pour les crateurs intensifs",economy:"conomisez jusqu' 90%"},Institut:{tokens:"900 tokens/mois",features:["Histoires & Audio: 2 tokens","Coloriages: 1 token","BD: 2 tokens/page","Comptines: 3 tokens","Animations 30s: 6 tokens","Animations 1min: 9 tokens"],ideal:"Pour les coles et institutions",economy:"conomisez jusqu' 95%"}})[l]||{};return i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-600"})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(l=>{var c,d;const p=o(l.name),g=((c=t==null?void 0:t.subscription_plans)==null?void 0:c.name)===l.name;return u.jsxs(Te.div,{className:`relative bg-white rounded-xl p-6 border-2 transition-all duration-300 ${g?"border-violet-500 shadow-lg shadow-violet-200":"border-gray-200 hover:border-violet-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[g&&u.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:u.jsx("span",{className:"bg-violet-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Plan actuel"})}),u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l.name}),u.jsxs("div",{className:"text-3xl font-bold text-violet-600 mb-1",children:[(l.price_monthly/100).toFixed(2).replace(".",","),""]}),u.jsx("div",{className:"text-sm text-gray-500",children:"par mois"}),u.jsx("div",{className:"text-lg font-semibold text-gray-700 mt-2",children:p.tokens})]}),u.jsx("div",{className:"space-y-2 mb-6",children:(d=p.features)==null?void 0:d.map((f,_)=>u.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[u.jsx("span",{className:"text-green-500 mr-2",children:""}),f]},_))}),u.jsx("div",{className:"text-center mb-4",children:u.jsx("div",{className:"text-xs text-gray-500 italic",children:p.ideal})}),!g&&u.jsx("button",{onClick:()=>e(l),className:"w-full bg-violet-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-violet-700 transition-colors duration-200",children:"Choisir ce plan"}),g&&u.jsx("div",{className:"w-full bg-gray-100 text-gray-600 py-3 px-4 rounded-lg font-medium text-center",children:"Plan actif"})]},l.id)})})},lM=({selectedPlan:e,onSuccess:t,onCancel:n,userId:r,userEmail:i})=>{const s=n6(),a=e6(),[o,l]=T.useState(!1),[c,d]=T.useState(""),[p,g]=T.useState(null),f=async S=>{if(S.preventDefault(),!s||!a){g("Stripe n'est pas charg");return}if(!c.trim()){g("Le nom du titulaire de la carte est requis");return}l(!0),g(null);try{const k=a.getElement(Px),{error:y,paymentMethod:x}=await s.createPaymentMethod({type:"card",card:k,billing_details:{name:c.trim(),email:i}});if(y){g(y.message);return}const w=await Mj(e.id,r,x.id,i);if(w.success){if(w.clientSecret){const{error:E}=await s.confirmCardPayment(w.clientSecret);if(E){g(E.message);return}}t()}else g(w.error||"Erreur lors de la cration de l'abonnement")}catch(k){console.error("Erreur abonnement:",k),g("Erreur lors de la cration de l'abonnement")}finally{l(!1)}},_={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"},fontFamily:"Inter, system-ui, sans-serif"},invalid:{color:"#9e2146"}}};return u.jsxs("form",{onSubmit:f,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["S'abonner  ",e.name]}),u.jsxs("div",{className:"bg-violet-50 p-4 rounded-lg mb-6",children:[u.jsxs("div",{className:"text-lg font-semibold text-violet-800",children:[(e.price_monthly/100).toFixed(2).replace(".",","),"/mois"]}),u.jsx("div",{className:"text-sm text-violet-600",children:"Factur mensuellement  Annulable  tout moment"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du titulaire de la carte"}),u.jsx("input",{type:"text",value:c,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500",placeholder:"Jean Dupont",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Informations de carte bancaire"}),u.jsx("div",{className:"border border-gray-300 rounded-md p-3 focus-within:ring-2 focus-within:ring-violet-500 focus-within:border-violet-500",children:u.jsx(Px,{options:_})})]}),p&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:u.jsx("div",{className:"text-red-800 text-sm",children:p})}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{type:"button",onClick:n,className:"flex-1 bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors duration-200",disabled:o,children:"Annuler"}),u.jsx("button",{type:"submit",className:"flex-1 bg-violet-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-violet-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o||!s,children:o?u.jsxs("div",{className:"flex items-center justify-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Traitement..."]}):`S'abonner pour ${(e.price_monthly/100).toFixed(2).replace(".",",")}/mois`})]}),u.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Vos informations de paiement sont scurises et cryptes. Vous pouvez annuler votre abonnement  tout moment."})]})},cM=({subscription:e,onCancel:t,onClose:n})=>{const[r,i]=T.useState(!1),[s,a]=T.useState(null);T.useEffect(()=>{o()},[]);const o=async()=>{try{const{totalTokens:d}=await Uj(e.user_id);a({totalTokens:d})}catch(d){console.error("Erreur chargement tokens:",d)}},l=async()=>{if(confirm("tes-vous sr de vouloir annuler votre abonnement ? Il restera actif jusqu' la fin de la priode en cours.")){i(!0);try{await Bj(e.user_id),alert("Votre abonnement a t annul. Il restera actif jusqu' la fin de la priode en cours."),t()}catch(d){console.error("Erreur annulation:",d),alert("Erreur lors de l'annulation de l'abonnement")}finally{i(!1)}}},c=d=>new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Gestion de l'abonnement"}),u.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[u.jsxs("div",{className:"text-green-800 font-medium",children:["Plan ",e.subscription_plans.name," actif"]}),u.jsxs("div",{className:"text-green-600 text-sm mt-1",children:["Prochaine facturation: ",c(e.current_period_end)]})]})]}),s&&u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[u.jsxs("div",{className:"text-blue-800 font-medium",children:["Tokens disponibles: ",s.totalTokens]}),u.jsxs("div",{className:"text-blue-600 text-sm mt-1",children:["Tokens utiliss ce mois: ",e.tokens_used_this_month||0]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Dtails de l'abonnement"}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[u.jsxs("div",{children:["Prix: ",(e.subscription_plans.price_monthly/100).toFixed(2).replace(".",","),"/mois"]}),u.jsxs("div",{children:["Dbut de priode: ",c(e.current_period_start)]}),u.jsxs("div",{children:["Fin de priode: ",c(e.current_period_end)]}),u.jsxs("div",{children:["Status: ",e.status==="active"?"Actif":e.status]})]})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors duration-200",children:"Fermer"}),u.jsx("button",{onClick:l,className:"flex-1 bg-red-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r||e.cancel_at_period_end,children:r?"Annulation...":"Annuler l'abonnement"})]}),e.cancel_at_period_end&&u.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:u.jsxs("div",{className:"text-orange-800 text-sm",children:[" Votre abonnement sera annul le ",c(e.current_period_end)]})})]})},uM=({isOpen:e,onClose:t,userId:n,userEmail:r})=>{const[i,s]=T.useState("plans"),[a,o]=T.useState(null),[l,c]=T.useState(null),[d,p]=T.useState(!0);T.useEffect(()=>{e&&n&&g()},[e,n]);const g=async()=>{try{const x=await Dj(n);c(x)}catch(x){console.error("Erreur chargement abonnement:",x)}finally{p(!1)}},f=x=>{o(x),s("payment")},_=()=>{s("plans"),o(null),g(),alert(" Flicitations ! Votre abonnement a t activ avec succs.")},S=()=>{s("plans"),o(null)},k=()=>{s("plans"),o(null),t()};if(!e)return null;const y=u.jsx("div",{className:"subscription-modal-overlay",children:u.jsxs(Te.div,{className:"subscription-modal-content",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},children:[u.jsxs("div",{className:"subscription-modal-header",children:[u.jsx("h2",{children:l?"Mon abonnement":"Choisir un abonnement"}),u.jsx("button",{onClick:k,className:"subscription-modal-close","aria-label":"Fermer",children:""})]}),d?u.jsx("div",{className:"subscription-modal-loading",children:u.jsx("div",{className:"subscription-modal-spinner"})}):u.jsxs(u.Fragment,{children:[i==="plans"&&u.jsx(oM,{onSelectPlan:f,currentSubscription:l}),i==="payment"&&a&&u.jsx(py,{stripe:aM,children:u.jsx(lM,{selectedPlan:a,onSuccess:_,onCancel:S,userId:n,userEmail:r})}),i==="management"&&l&&u.jsx(cM,{subscription:l,onCancel:g,onClose:k}),l&&i==="plans"&&u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:u.jsx("div",{className:"text-center",children:u.jsx("button",{onClick:()=>s("management"),className:"bg-violet-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-violet-700 transition-colors duration-200",children:"Grer mon abonnement"})})})]})]})});return SA.createPortal(y,document.body)},dM=({onLegalClick:e})=>u.jsx("footer",{className:"app-footer",children:u.jsxs("div",{className:"footer-content",children:[u.jsx("div",{className:"ai-notice",children:u.jsx("p",{children:"Les crations sont gnres par IA et peuvent contenir des erreurs."})}),u.jsxs("div",{className:"footer-links",children:[u.jsx("button",{className:"footer-link",onClick:()=>e("mentions"),children:"Mentions lgales"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("privacy"),children:"Confidentialit"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("cookies"),children:"Cookies"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("terms"),children:"CGU"}),u.jsx("span",{className:"separator",children:""}),u.jsx("button",{className:"footer-link",onClick:()=>e("contact"),children:"Contact"})]}),u.jsx("div",{className:"footer-info",children:u.jsxs("p",{children:[" ",new Date().getFullYear()," HERBBIE"]})})]})}),hM=({onClose:e,initialSection:t="mentions"})=>{const[n,r]=T.useState(t),[i,s]=T.useState({firstName:"",lastName:"",email:"",subject:"",message:""}),[a,o]=T.useState(!1),[l,c]=T.useState(""),d=[{id:"mentions",title:"Mentions Lgales",icon:""},{id:"privacy",title:"Confidentialit",icon:""},{id:"cookies",title:"Cookies",icon:""},{id:"terms",title:"Conditions d'utilisation",icon:""},{id:"contact",title:"Contact",icon:""}],p=()=>{switch(n){case"mentions":return g();case"privacy":return f();case"cookies":return _();case"terms":return S();case"contact":return x();default:return g()}},g=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Mentions Lgales"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Hbergement"}),u.jsxs("div",{className:"info-block",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Hbergeur :"})," Railway"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Adresse :"})," Railway, 1 Sentry Way, San Francisco, CA 94103, tats-Unis"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Site web :"})," ",u.jsx("a",{href:"https://railway.app",target:"_blank",rel:"noopener noreferrer",children:"railway.app"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Proprit intellectuelle"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"L'ensemble du contenu de ce site (textes, images, vidos, lments graphiques, logos, icnes, sons, logiciels) est la proprit exclusive de HERBBIE ou de ses partenaires, sauf mention contraire."}),u.jsx("p",{children:"Toute reproduction, distribution, modification ou exploitation commerciale, mme partielle, sans autorisation pralable crite de HERBBIE est strictement interdite et constituerait une contrefaon sanctionne par les articles L.335-2 et suivants du Code de la proprit intellectuelle."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Responsabilit"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE s'efforce d'assurer l'exactitude et la mise  jour des informations diffuses sur ce site, dont elle se rserve le droit de corriger,  tout moment et sans pravis, le contenu."}),u.jsx("p",{children:"Toutefois, HERBBIE ne peut garantir l'exactitude, la prcision ou l'exhaustivit des informations mises  disposition sur ce site. En consquence, HERBBIE dcline toute responsabilit :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Pour toute imprcision, inexactitude ou omission portant sur des informations disponibles sur le site"}),u.jsx("li",{children:"Pour tous dommages rsultant d'une intrusion frauduleuse d'un tiers ayant entran une modification des informations mises  disposition sur le site"}),u.jsx("li",{children:"Et plus gnralement pour tous dommages, directs ou indirects, quelles qu'en soient les causes, origines, natures ou consquences, provoqus  raison de l'accs de quiconque au site ou de l'impossibilit d'y accder"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Donnes personnelles"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Conformment  la loi n78-17 du 6 janvier 1978 relative  l'informatique, aux fichiers et aux liberts, vous disposez d'un droit d'accs, de rectification et de suppression des donnes vous concernant."}),u.jsxs("p",{children:["Pour exercer ce droit, vous pouvez nous contacter par email  l'adresse : ",u.jsx("span",{className:"email-protected personal-data",children:"contact@herbbie.com"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Cookies"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Le site HERBBIE utilise des cookies pour amliorer votre exprience utilisateur et raliser des statistiques de visite."}),u.jsx("p",{children:"Conformment  la rglementation, vous pouvez refuser le dpt de cookies en configurant votre navigateur."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"diteur du site"}),u.jsxs("div",{className:"info-block personal-data",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Dnomination sociale :"})," ",u.jsx("span",{className:"protect-personal-info",children:"HERBBIE"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Forme juridique :"})," ",u.jsx("span",{className:"protect-personal-info",children:"Auto-entreprise (en cours d'immatriculation)"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Adresse du sige social :"})," ",u.jsx("span",{className:"address-protected personal-data",children:"10 bis rue Flix Arnaudin, 40100 Dax"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Numro SIRET :"})," ",u.jsx("span",{className:"protect-personal-info",children:"En cours d'attribution"})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Directeur de la publication :"})," ",u.jsx("span",{className:"name-protected personal-data",children:"Adrien Gaulin"})]})]})]})]}),f=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Politique de Confidentialit"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"1. Collecte des donnes personnelles"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Lors de votre utilisation du service HERBBIE, nous pouvons collecter les informations suivantes :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes de compte :"})," adresse email, nom d'utilisateur (si inscription)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes d'utilisation :"})," historique des crations, prfrences, statistiques d'usage"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes techniques :"})," adresse IP, type de navigateur, systme d'exploitation"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Contenu gnr :"})," les crations ralises via notre service (histoires, coloriages, etc.)"]})]}),u.jsx("p",{children:"La collecte de ces donnes est ncessaire pour :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Fournir nos services de gnration de contenu cratif"}),u.jsx("li",{children:"Amliorer la qualit de nos services"}),u.jsx("li",{children:"Assurer la scurit de la plateforme"}),u.jsx("li",{children:"Respecter nos obligations lgales"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"2. Utilisation des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Les donnes collectes sont utilises pour :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Fournir le service :"})," gnration de contenu personnalis, sauvegarde des crations"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Amlioration :"})," analyse des usages pour optimiser l'exprience utilisateur"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Communication :"})," envoi d'informations relatives au service, support client"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Scurit :"})," dtection et prvention des fraudes et activits malveillantes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Obligations lgales :"})," conservation des donnes requises par la loi"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"3. Partage des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE s'engage  ne pas vendre, louer ou commercialiser vos donnes personnelles."}),u.jsx("p",{children:"Les donnes peuvent tre partages uniquement dans les cas suivants :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Fournisseurs de services :"})," hbergeurs, prestataires techniques (sous contrat de confidentialit)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Obligations lgales :"})," sur demande des autorits comptentes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Protection des droits :"})," en cas de litige ou contentieux"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"4. Conservation des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Les donnes sont conserves pendant la dure ncessaire aux finalits pour lesquelles elles ont t collectes :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes de compte :"})," tant que le compte est actif + 3 ans aprs inactivation"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes d'utilisation :"})," 2 ans  compter de la collecte"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Contenu gnr :"})," tant que le compte est actif"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Donnes de facturation :"})," 10 ans (obligation lgale)"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"5. Scurit des donnes"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE met en uvre des mesures techniques et organisationnelles appropries pour protger vos donnes personnelles contre :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"L'accs non autoris"}),u.jsx("li",{children:"L'utilisation illgitime"}),u.jsx("li",{children:"La perte ou destruction accidentelle"}),u.jsx("li",{children:"Toute forme de traitement illicite"})]}),u.jsx("p",{children:"Ces mesures incluent le chiffrement des donnes, des contrles d'accs stricts et des audits rguliers de scurit."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"6. Vos droits"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Conformment au RGPD, vous disposez des droits suivants :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Droit d'accs :"})," demander l'accs  vos donnes personnelles"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit de rectification :"})," demander la correction de donnes inexactes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit  l'effacement :"})," demander la suppression de vos donnes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit  la limitation :"})," demander la limitation du traitement"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit  la portabilit :"})," demander la rcupration de vos donnes"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Droit d'opposition :"})," vous opposer au traitement de vos donnes"]})]}),u.jsxs("p",{children:["Pour exercer ces droits, contactez-nous  : ",u.jsx("span",{className:"email-protected personal-data",children:"contact@herbbie.com"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"7. Cookies et technologies similaires"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE utilise uniquement des cookies strictement essentiels au fonctionnement du service :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de session :"})," Maintien de votre connexion et scurit"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies d'authentification :"})," Mmorisation de votre identit"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de scurit :"})," Protection contre les menaces"]})]}),u.jsx("h4",{children:"Stockage et scurit des cookies :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Emplacement :"})," Stocks localement dans le navigateur (localStorage)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Dure de vie :"})," Sessions temporaires (supprims  la dconnexion)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Scurit :"})," Chiffrs et protgs contre les attaques CSRF"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Serveur :"})," Gestion automatique par Supabase avec scurit renforce"]})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Note :"})," Aucun cookie de fonctionnalit, analytique, de personnalisation ou publicitaire n'est utilis."]}),u.jsx("p",{children:"Les cookies essentiels sont automatiquement grs et exempts de consentement selon le RGPD."})]})]})]}),_=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Politique des Cookies"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"1. Qu'est-ce qu'un cookie ?"}),u.jsx("div",{className:"info-block",children:u.jsx("p",{children:"Un cookie est un petit fichier texte dpos sur votre terminal (ordinateur, tablette, smartphone) lors de la visite d'un site internet. Il permet de stocker des informations relatives  votre navigation et d'amliorer votre exprience utilisateur."})})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"2. Cookies utiliss par HERBBIE"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:u.jsx("strong",{children:"Conformment  la rglementation RGPD, HERBBIE utilise uniquement des cookies strictement essentiels ncessaires au fonctionnement du service."})}),u.jsx("h4",{children:"Cookies essentiels (obligatoires) :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de session :"})," Maintien de votre connexion et scurit pendant votre visite"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies d'authentification :"})," Mmorisation de votre identit pour viter de vous reconnecter"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de scurit :"})," Protection contre les attaques CSRF et autres menaces"]})]}),u.jsxs("div",{className:"alert alert-info",children:[u.jsx("strong",{children:"Note :"})," Aucun cookie de fonctionnalit, analytique, de personnalisation ou publicitaire n'est utilis sur ce site."]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"3. Gestion des cookies"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Les cookies essentiels utiliss par HERBBIE sont automatiquement grs et ne ncessitent pas d'action de votre part."}),u.jsx("h4",{children:"Via votre navigateur :"}),u.jsx("p",{children:"Si vous souhaitez supprimer les cookies essentiels (ce qui peut affecter le fonctionnement du site) :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Chrome :"})," Paramtres  Confidentialit et scurit  Cookies"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Firefox :"})," Prfrences  Vie prive et scurit  Cookies"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Safari :"})," Prfrences  Confidentialit  Grer les cookies"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Edge :"})," Paramtres  Cookies et autorisations de site"]})]}),u.jsx("h4",{children:"Dure de conservation :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies de session :"})," Supprims automatiquement  la fermeture du navigateur"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cookies d'authentification :"})," Conservs pendant votre session active (maximum 24h)"]})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"4. Finalits des cookies"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE utilise uniquement des cookies essentiels pour :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Fonctionnement du service :"})," Maintien de la session utilisateur"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Scurit :"})," Scurisation des transactions et protection contre les menaces"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Prfrences essentielles :"})," Mmorisation des paramtres de base (langue)"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Performance :"})," Optimisation du fonctionnement du site"]})]}),u.jsxs("div",{className:"alert alert-info",children:[u.jsx("strong",{children:"Note :"})," Aucun cookie n'est utilis pour l'analyse d'audience, le suivi utilisateur ou la personnalisation avance."]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"5. Cookies tiers"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE n'utilise pas de cookies tiers pour l'analyse, le suivi ou la publicit."}),u.jsx("p",{children:"Les services externes utiliss (comme les APIs d'IA) ne dposent pas de cookies sur votre navigateur."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"6. Consentement"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:u.jsx("strong",{children:"Conformment  la rglementation RGPD, les cookies essentiels utiliss par HERBBIE ne ncessitent pas de consentement explicite car ils sont strictement ncessaires au fonctionnement du service."})}),u.jsx("p",{children:"Ces cookies sont automatiquement activs pour garantir la scurit et le bon fonctionnement du site."}),u.jsx("p",{children:"Note : La dsactivation de ces cookies essentiels peut gravement affecter le fonctionnement du service."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"7. Mise  jour"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Cette politique des cookies peut tre mise  jour rgulirement pour reflter les volutions de nos services ou de la rglementation."}),u.jsx("p",{children:"La date de dernire modification est indique en bas de cette page."}),u.jsx("p",{children:"En cas de modification substantielle, nous vous en informerons via une notification sur le site."})]})]})]}),S=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Conditions d'utilisation"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"1. Objet du service"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE est une plateforme de gnration de contenu cratif destine aux enfants, utilisant l'intelligence artificielle pour crer :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Des histoires personnalises et ducatives"}),u.jsx("li",{children:"Des coloriages et activits cratives"}),u.jsx("li",{children:"Du contenu pdagogique adapt  chaque ge"}),u.jsx("li",{children:"Des expriences d'apprentissage ludiques"})]}),u.jsx("p",{children:"Le service est conu pour stimuler l'imagination et la crativit des enfants de manire scurise et ducative."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"2. Conditions d'accs"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"ge minimum :"}),u.jsx("p",{children:"Le service HERBBIE est accessible aux enfants de tous ges. Pour les enfants de moins de 13 ans, l'utilisation doit se faire sous la supervision d'un adulte responsable."}),u.jsx("h4",{children:"Inscription :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Les utilisateurs peuvent crer un compte gratuit"}),u.jsx("li",{children:"L'inscription ncessite une adresse email valide"}),u.jsx("li",{children:"Les mots de passe doivent tre scuriss"}),u.jsx("li",{children:"Une seule inscription par personne est autorise"})]}),u.jsx("h4",{children:"Utilisation acceptable :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Respect des autres utilisateurs"}),u.jsx("li",{children:"Utilisation dans un cadre ducatif et ludique"}),u.jsx("li",{children:"Interdiction de gnrer du contenu inappropri"}),u.jsx("li",{children:"Respect des droits d'auteur et proprit intellectuelle"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"3. Services et fonctionnalits"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Services gratuits :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Accs  un nombre limit de gnration par jour"}),u.jsx("li",{children:"Fonctionnalits de base de cration de contenu"}),u.jsx("li",{children:"Sauvegarde des crations pendant 30 jours"}),u.jsx("li",{children:"Support communautaire"})]}),u.jsx("h4",{children:"Services premium (optionnels) :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Gnrations illimites"}),u.jsx("li",{children:"Sauvegarde permanente des crations"}),u.jsx("li",{children:"Fonctionnalits avances"}),u.jsx("li",{children:"Support prioritaire"}),u.jsx("li",{children:"Contenu personnalis avanc"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"4. Rgles de conduite"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Interdictions :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Gnrer du contenu violent, haineux ou inappropri"}),u.jsx("li",{children:"Utiliser le service pour harceler ou intimider"}),u.jsx("li",{children:"Tenter de contourner les limitations techniques"}),u.jsx("li",{children:"Partager des informations personnelles d'autrui"}),u.jsx("li",{children:"Utiliser le service  des fins commerciales sans autorisation"}),u.jsx("li",{children:"Copier ou reproduire le contenu gnr par d'autres utilisateurs"})]}),u.jsx("h4",{children:"Obligations des utilisateurs :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Fournir des informations exactes lors de l'inscription"}),u.jsx("li",{children:"Respecter les droits d'auteur et la proprit intellectuelle"}),u.jsx("li",{children:"Signaler tout contenu inappropri"}),u.jsx("li",{children:"Maintenir la confidentialit de leurs identifiants"}),u.jsx("li",{children:"Utiliser le service de manire responsable"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"5. Proprit intellectuelle"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Contenu gnr :"}),u.jsx("p",{children:"Le contenu cr via HERBBIE appartient  l'utilisateur qui l'a gnr. L'utilisateur peut :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Tlcharger et utiliser ses crations  des fins personnelles"}),u.jsx("li",{children:"Partager ses crations dans un cadre familial ou ducatif"}),u.jsx("li",{children:"Modifier ses propres crations"})]}),u.jsx("h4",{children:"Plateforme HERBBIE :"}),u.jsx("p",{children:"Tous les lments de la plateforme (interface, algorithmes, design, etc.) restent la proprit exclusive de HERBBIE."}),u.jsx("h4",{children:"Contenu tiers :"}),u.jsx("p",{children:"Certains lments peuvent tre soumis  des licences tierces (polices, images, sons). L'utilisation doit respecter ces licences."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"6. Limitation de responsabilit"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE s'efforce de fournir un service de qualit, mais ne peut garantir :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"La disponibilit permanente du service (maintenance, pannes)"}),u.jsx("li",{children:"L'absence totale de bugs ou erreurs"}),u.jsx("li",{children:"L'adquation du contenu gnr  tous les besoins"}),u.jsx("li",{children:"La scurit absolue contre les cyberattaques"})]}),u.jsx("p",{children:"En aucun cas HERBBIE ne pourra tre tenu responsable :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Des dommages indirects ou conscutifs  l'utilisation du service"}),u.jsx("li",{children:"De la perte de donnes ou de crations"}),u.jsx("li",{children:"Des interruptions de service non planifies"}),u.jsx("li",{children:"Des actes de tiers (piratage, virus, etc.)"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"7. Rsiliation"}),u.jsxs("div",{className:"info-block",children:[u.jsx("h4",{children:"Par l'utilisateur :"}),u.jsx("p",{children:"L'utilisateur peut rsilier son compte  tout moment via les paramtres de son profil."}),u.jsx("h4",{children:"Par HERBBIE :"}),u.jsx("p",{children:"HERBBIE peut suspendre ou rsilier un compte en cas de :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Violation grave des conditions d'utilisation"}),u.jsx("li",{children:"Utilisation abusive du service"}),u.jsx("li",{children:"Non-paiement des services premium"}),u.jsx("li",{children:"Inactivit prolonge (plus de 2 ans)"})]}),u.jsx("h4",{children:"Consquences de la rsiliation :"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Accs immdiat au service suspendu"}),u.jsx("li",{children:"Conservation des donnes pendant 30 jours"}),u.jsx("li",{children:"Suppression dfinitive aprs ce dlai"}),u.jsx("li",{children:"Possibilit de ractivation sous conditions"})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"8. Modification des conditions"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"HERBBIE se rserve le droit de modifier ces conditions d'utilisation  tout moment."}),u.jsx("p",{children:"Les modifications seront notifies aux utilisateurs par email ou notification sur le site."}),u.jsx("p",{children:"La poursuite de l'utilisation du service aprs notification vaut acceptation des nouvelles conditions."}),u.jsx("p",{children:"En cas de dsaccord avec les modifications, l'utilisateur peut rsilier son compte."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"9. Droit applicable"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Ces conditions d'utilisation sont rgies par le droit franais."}),u.jsx("p",{children:"Tout litige relatif  l'interprtation ou l'excution de ces conditions sera soumis aux tribunaux comptents du ressort de Paris."}),u.jsx("p",{children:"En cas de traduction de ces conditions, seule la version franaise fait foi."})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"10. Contact"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Pour toute question relative  ces conditions d'utilisation :"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Email :"})," ",u.jsx("span",{className:"email-protected personal-data",children:"contact@herbbie.com"})]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Objet :"}),' "Question CGU"']}),u.jsxs("li",{children:[u.jsx("strong",{children:"Dlai de rponse :"})," 48-72 heures"]})]})]})]})]}),k=(w,E)=>{s(B=>({...B,[w]:E}))},y=async w=>{w.preventDefault(),o(!0),c("");try{const E=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:i.firstName,lastName:i.lastName,email:i.email,subject:i.subject,message:i.message})});if(!E.ok){const q=await E.json();throw new Error(q.detail||"Erreur lors de l'envoi du message")}const B=await E.json();c(" Votre message a t envoy avec succs ! Nous vous rpondrons dans les plus brefs dlais."),s({firstName:"",lastName:"",email:"",subject:"",message:""})}catch(E){c(` Erreur lors de l'envoi : ${E.message}`)}finally{o(!1)}},x=()=>u.jsxs("div",{className:"legal-content",children:[u.jsx("h2",{children:" Contact"}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:" Formulaire de contact"}),u.jsxs("div",{className:"info-block",children:[u.jsx("p",{children:"Vous pouvez nous contacter directement en remplissant le formulaire ci-dessous :"}),u.jsxs("form",{className:"contact-form",onSubmit:y,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-firstName",children:"Prnom *"}),u.jsx("input",{type:"text",id:"contact-firstName",value:i.firstName,onChange:w=>k("firstName",w.target.value),required:!0,placeholder:"Votre prnom"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-lastName",children:"Nom *"}),u.jsx("input",{type:"text",id:"contact-lastName",value:i.lastName,onChange:w=>k("lastName",w.target.value),required:!0,placeholder:"Votre nom de famille"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-email",children:"Email *"}),u.jsx(Kl,{value:i.email,onChange:w=>k("email",w.target.value),placeholder:"votre.email@exemple.com",required:!0,user:null,onEmailSubmit:()=>{}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-subject",children:"Sujet *"}),u.jsxs("select",{id:"contact-subject",value:i.subject,onChange:w=>k("subject",w.target.value),required:!0,children:[u.jsx("option",{value:"",children:"Choisissez un sujet"}),u.jsx("option",{value:"Support technique",children:" Support technique"}),u.jsx("option",{value:"Question gnrale",children:" Question gnrale"}),u.jsx("option",{value:"Partenariat",children:" Partenariat"}),u.jsx("option",{value:"Signaler un bug",children:" Signaler un bug"}),u.jsx("option",{value:"Suggestion",children:" Suggestion"}),u.jsx("option",{value:"Autre",children:" Autre"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contact-message",children:"Message *"}),u.jsx("textarea",{id:"contact-message",value:i.message,onChange:w=>k("message",w.target.value),required:!0,placeholder:"Dcrivez votre demande en dtail...",rows:"5"})]}),l&&u.jsx("div",{className:`submit-message ${l.includes("")?"success":"error"}`,children:l}),u.jsx("button",{type:"submit",className:"contact-submit-btn",disabled:a,children:a?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"spinner"}),"Envoi en cours..."]}):u.jsx(u.Fragment,{children:" Envoyer l'email"})})]})]})]}),u.jsxs("div",{className:"legal-section",children:[u.jsx("h3",{children:"Informations de contact"}),u.jsxs("div",{className:"info-block personal-data",children:[u.jsxs("p",{children:[u.jsx("strong",{children:" Email :"})," ",u.jsx("a",{href:"mailto:contact@herbbie.com",className:"email-protected",children:u.jsx("span",{className:"personal-data",children:"contact@herbbie.com"})})]}),u.jsxs("p",{children:[u.jsx("strong",{children:" Nom de l'entreprise :"})," ",u.jsx("span",{className:"protect-personal-info",children:"HERBBIE"})]})]})]})]});return u.jsx(Te.div,{className:"legal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:e,children:u.jsxs(Te.div,{className:"legal-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.3},onClick:w=>w.stopPropagation(),children:[u.jsxs("div",{className:"legal-header",children:[u.jsx("h1",{children:" Informations Lgales"}),u.jsx("button",{className:"close-button",onClick:e,children:""})]}),u.jsxs("div",{className:"legal-body",children:[u.jsx("nav",{className:"legal-nav",children:d.map(w=>u.jsxs("button",{className:`nav-item ${n===w.id?"active":""}`,onClick:()=>r(w.id),children:[u.jsx("span",{className:"nav-icon",children:w.icon}),u.jsx("span",{className:"nav-title",children:w.title})]},w.id))}),u.jsx("div",{className:"legal-main",children:u.jsx(Fi,{mode:"wait",children:u.jsx(Te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:p()},n)})})]})]})})},fM=()=>{const[e,t]=T.useState([]);return T.useEffect(()=>{const n=r=>{const i=Math.random()*1799.5+.5;setTimeout(()=>{const s={id:Date.now()+r,index:r,duration:Math.random()*2+1};t(a=>[...a,s]),setTimeout(()=>{t(a=>a.filter(o=>o.id!==s.id))},s.duration*1e3),n(r)},i*1e3)};for(let r=0;r<10;r++)setTimeout(()=>n(r),Math.random()*5e3);return()=>{t([])}},[]),u.jsx("section",{className:"shooting-stars-container",children:e.map(n=>u.jsx("span",{className:`shooting-star star-${n.index+1}`,style:{animationDuration:`${n.duration}s`}},n.id))})},kl=(e,t,n="")=>{const r={comptine:{animaux:["Les Amis de la Fort","La Danse des Animaux","Mes Amis les Animaux","Le Grand Bal des Animaux"],nature:["Les Fleurs Magiques","L'Aventure dans les Bois","Les Secrets du Jardin","La Fte de la Nature"],transport:["Le Train des Copains","L'Aventure en Voiture","Le Voyage Fantastique","En Route pour l'Aventure"],couleurs:["L'Arc-en-Ciel Magique","Le Monde des Couleurs","La Danse des Couleurs","Mon Joli Tableau"],famille:["Ma Famille d'Amour","Tous Ensemble","Les Clins de Famille","Mon Coeur de Famille"],default:["Ma Jolie Comptine","Chanson du Bonheur","Ma Petite Mlodie","Comptine Rigolote"]},histoire:{aventure:["La Grande Aventure","Voyage Extraordinaire","Mission Secrte","L'Aventure Fantastique"],animaux:["Les Amis de la Fort","L'Histoire des Petits Animaux","Mes Copains Animaux","La Famille Animaux"],magie:["Le Monde Magique","L'Aventure Enchante","Le Secret Magique","La Fe et ses Amis"],amiti:["Les Meilleurs Amis","Une Belle Amiti","Copains pour la Vie","L'Amiti Magique"],espace:["Voyage dans les toiles","L'Aventure Spatiale","Les Amis de l'Espace","Mission sur la Lune"],default:["Mon Belle Histoire","Conte Merveilleux","Histoire Fantastique","Rcit d'Aventure"]},coloriage:{animaux:["Mes Amis Animaux","Zoo Rigolo","Famille Animaux","Copains de la Fort"],licorne:["Licorne Magique","Princesse Licorne","Pays des Licornes","Licorne Arc-en-Ciel"],dinosaures:["Dino Rigolo","Mes Amis Dinosaures","Parc des Dinosaures","T-Rex et ses Copains"],nature:["Jardin Fleuri","Fort Enchante","Promenade Nature","Fleurs et Papillons"],espace:["Voyage Spatial","Plantes Rigolotes","Astronaute en Mission","toiles et Fuses"],vhicules:["Mes Voitures","Garage Rigolo","Course Automobile","Train et Avions"],default:["Mon Coloriage","Dessin Rigolo","Art Cratif","Belle Image"]},animation:{aventure:["Mon Dessin Anim","Animation Magique","Film d'Aventure","Cinma Fantastique"],animaux:["Mes Amis Anims","Zoo en Mouvement","Aventures Animales","Cirque des Animaux"],magie:["Monde Enchant","Magie en Mouvement","Film de Fe","Animation Magique"],espace:["Voyage Anim","Aventure Spatiale","Film de l'Espace","Mission Animation"],nature:["Fort Anime","Jardin en Mouvement","Nature Vivante","Fleurs Dansantes"],default:["Mon Film IA","Dessin Anim IA","Animation Crative","Film Personnalis"]}},i=r[e]||r.histoire,s=i[t]||i.default||i.aventure,a=Math.floor(Math.random()*s.length);return s[a]};function pM(e,t=600){const n=e.split(new RegExp("(?<=[.?!])\\s+")),r=[];let i="";for(const s of n)(i+s).length>t?(r.push(i.trim()),i=s+" "):i+=s+" ";return i.trim()&&r.push(i.trim()),r}function mM(){const[e,t]=T.useState("animation"),n=Le=>{const je=Le==="audio"?"histoire":Le;console.log(" setContentType:",Le,"",je),t(je)};T.useEffect(()=>{e==="audio"&&(console.log(' contentType est "audio", normalisation force  "histoire"'),t("histoire"))},[e]);const[r,i]=T.useState(null),[s,a]=T.useState(""),[o,l]=T.useState(!0),[c,d]=T.useState(""),[p,g]=T.useState(""),[f,_]=T.useState(null),[S,k]=T.useState(""),[y,x]=T.useState(null),[w,E]=T.useState(""),[B,q]=T.useState(!1),[z,F]=T.useState(null);T.useState(!1);const[I,J]=T.useState(!1),[R,P]=T.useState(!1),[K,G]=T.useState(!1),[Z,le]=T.useState(!1),[de,X]=T.useState(null),[ae,re]=T.useState(""),[ie,N]=T.useState(null),[M,$]=T.useState(null),[Q,te]=T.useState(null),[oe,me]=T.useState(null),[he,ge]=T.useState(null),[_e,Re]=T.useState(null),[Pe,ve]=T.useState(""),[Y,_t]=T.useState(null),[He,nt]=T.useState(null),[Ee,Ke]=T.useState(!1);T.useEffect(()=>{e==="comic"&&(ge(null),Re(null))},[e]);const[Oe,ut]=T.useState(null),[Be,Ct]=T.useState(30),[Ne,Me]=T.useState(null),[ot,pt]=T.useState(""),[rt,ct]=T.useState(null),[De,$t]=T.useState(null),[Rt,Ge]=T.useState(null),[gt,Mt]=T.useState(!1),[at,Nt]=T.useState(!1),[vt,pn]=T.useState(null);T.useState("user"),T.useState(!1);const[An,Bt]=T.useState("Gnrer"),[dt,Ot]=T.useState(!1),[Ps,Vn]=T.useState(!1),[Ui,Si]=T.useState("mentions"),st=Le=>new Promise(je=>setTimeout(je,Le)),qi=async(Le,{intervalMs:je=5e3,maxAttempts:Ye=240}={})=>{let St=0;for(;St<Ye;){try{const We=await fetch(`${qn}/status/${Le}`);if(We.ok){const Ue=await We.json();if((Ue==null?void 0:Ue.type)==="result"){const Fe=Ue.data;if((Fe==null?void 0:Fe.status)==="completed"&&Fe!=null&&Fe.clips&&Fe.clips.length>0)return Fe;if((Fe==null?void 0:Fe.status)==="failed")throw new Error((Fe==null?void 0:Fe.error_message)||"Gnration choue")}}}catch{}St+=1,await st(je)}throw new Error("Timeout de gnration de l'animation")},$i=async(Le,{intervalMs:je=5e3,maxAttempts:Ye=180}={})=>{let St=0;for(;St<Ye;){try{const We=await fetch(`${qn}/status_comic/${Le}`);if(We.ok){const Ue=await We.json();if((Ue==null?void 0:Ue.type)==="result"){const Fe=Ue.data;if(((Fe==null?void 0:Fe.status)==="completed"||(Fe==null?void 0:Fe.status)==="success")&&Fe!=null&&Fe.pages&&Fe.pages.length>0)return Fe;if((Fe==null?void 0:Fe.status)==="failed")throw new Error((Fe==null?void 0:Fe.error)||"Gnration choue")}}}catch{}St+=1,await st(je)}throw new Error("Timeout de gnration de la BD")},Br=async Le=>{try{const je=new FormData;je.append("file",Le);const Ye=await fetch(`${qn}/upload_character_photo/`,{method:"POST",body:je});if(!Ye.ok)throw new Error(`Erreur upload : ${Ye.status}`);const St=await Ye.json();return _t(St),St}catch(je){throw je}},[Ur,Zt]=T.useState(null),{user:Et,loading:Hn}=dy(),[Ls,qr]=T.useState(!1),[pr,ti]=T.useState(!1);T.useMemo(()=>(e==="histoire"||e==="audio")&&z!=null&&z.content?pM(z.content):[],[z,e]);const[ki,ni]=T.useState(0);T.useEffect(()=>{window.location.hash==="#historique"&&qr(!0);const Le=()=>{qr(window.location.hash==="#historique")};return window.addEventListener("hashchange",Le),()=>window.removeEventListener("hashchange",Le)},[]),T.useEffect(()=>{(async()=>{if(Et){const Le=await Oj(Et.id,Et.email);ti(Le),zr(Le)}else ti(!1),zr(!1)})()},[Et,e]),T.useEffect(()=>{i(null),a(""),l(!0),d(""),g(""),_(null),k(""),x(null),X(null),re(""),N(null),te(null),me(null),ge(null),Re(null),ve(""),_t(null),nt(null),ut(null),Ct(30),Me(null),pt(""),$t(null),F(null),$(null),Ge(null),Zt(null)},[e]);const $r=async Le=>{le(!1),setTimeout(()=>{le(!0),q(!1)},5e4)};T.useEffect(()=>{e==="animation"&&!Oe&&ut(null)},[e,Oe]);const hs=Oe||"space",zr=Le=>{if(console.log(" updateButtonText appel:",{adminStatus:Le,contentType:e,selectedVoice:y,selectedDuration:Be,numPages:_e}),Le)Bt("Gnrer Gratuitement");else{let je={};e==="animation"?je.duration=Be:e==="comic"||e==="bd"?je.pages=_e||1:(e==="histoire"||e==="story"||e==="audio")&&(je.voice=y);const Ye=e==="audio"?"histoire":e;console.log(" Options pour getContentPrice:",{contentType:e,normalizedContentType:Ye,options:je});const St=Dp(Ye,je);console.log(" Prix calcul:",St),Bt(`Acheter pour ${St.display}`)}};T.useEffect(()=>{zr(pr)},[y,Be,_e,e,pr]);const Ts=async()=>{if(!Et){alert("Vous devez tre connect pour gnrer du contenu");return}if(pr){fs();return}try{const Le={};e==="animation"?Le.selectedDuration=Be:e==="comic"||e==="bd"?Le.numPages=_e||1:(e==="histoire"||e==="story"||e==="audio")&&(Le.selectedVoice=y);const{data:je,error:Ye}=await Pt.functions.invoke("check-permission",{body:{contentType:e,userId:Et.id,userEmail:Et.email,...Le}});if(Ye){console.error("Erreur vrification permission:",Ye),alert("Erreur lors de la vrification des permissions. Veuillez ressayer.");return}if(je.hasPermission)fs();else{pn(e),Nt(!0);return}}catch(Le){console.error("Erreur lors de l'appel  check-permission:",Le),alert("Erreur de vrification des permissions. Veuillez ressayer.");return}},fs=async()=>{var Le;if(q(!0),F(null),!Hn)try{let je=null;if(e==="rhyme"){const We={theme:r==="custom"?s:r,custom_request:w,language:"fr"},Ue=await fetch(`${qn}/generate_rhyme/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(We)});if(!Ue.ok)throw new Error(`Erreur HTTP : ${Ue.status}`);je=await Ue.json()}else if(e==="histoire"||e==="audio"){const We={story_type:f==="custom"?S:f,voice:y,custom_request:w},Ue=await fetch(`${qn}/generate_audio_story/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(We)});if(!Ue.ok)throw new Error(`Erreur HTTP : ${Ue.status}`);je=await Ue.json()}else if(e==="histoire"){let We;if(De&&De!=="custom"?We={space:"Une aventure spatiale extraordinaire o un enfant explore les plantes lointaines et rencontre des aliens amicaux.",ocean:"Une exploration sous-marine magique avec des cratures marines colores et des trsors cachs au fond de l'ocan.",dinosaur:"Un voyage dans le temps  l'poque des dinosaures o un enfant devient ami avec un dinosaure gentil et dcouvre un monde prhistorique.",fairy:"Un conte de fes enchanteur avec des fes bienveillantes, des chteaux magiques et des aventures pleines de poussire de fe.",superhero:"Une histoire de super-hros o un enfant dcouvre ses pouvoirs extraordinaires et sauve la ville avec courage et bont.",jungle:"Une aventure dans la jungle tropicale remplie d'animaux exotiques, de plantes mystrieuses et de dcouvertes passionnantes."}[De]||`Une belle histoire sur le thme ${De}`:We=ot,!We||We.trim().length<10)throw new Error("L'histoire doit contenir au moins 10 caractres");const Ue={story_type:De==="custom"?"custom":De,content:We,custom_request:w},Fe=await fetch(`${qn}/generate_story/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ue)});if(!Fe.ok)throw new Error(`Erreur HTTP : ${Fe.status}`);je=await Fe.json()}else if(e==="coloring")if(ie){const We=new FormData;We.append("file",ie);const Ue=await fetch(`${qn}/upload_photo_for_coloring/`,{method:"POST",body:We});if(!Ue.ok)throw new Error(`Erreur upload : ${Ue.status}`);const Fe={photo_path:(await Ue.json()).file_path,with_colored_model:Q},dn=await fetch(`${qn}/convert_photo_to_coloring/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(!dn.ok)throw new Error(`Erreur conversion : ${dn.status}`);const Wn=await dn.json();$(Wn),je=Wn}else{const We={theme:de,with_colored_model:Q};de==="custom"&&ae.trim()&&(We.custom_prompt=ae.trim());const Ue=await fetch(`${qn}/generate_coloring/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(We)});if(!Ue.ok)throw new Error(`Erreur HTTP : ${Ue.status}`);const Fe=await Ue.json();$(Fe),je=Fe}else if(e==="comic"){const We={theme:oe==="custom"?Pe:oe,art_style:he||"cartoon",num_pages:_e||1};oe==="custom"&&Pe.trim()&&(We.custom_prompt=Pe.trim()),Y&&Y.file_path&&(We.character_photo_path=Y.file_path);const Ue=await fetch(`${qn}/generate_comic/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(We)});if(!Ue.ok)throw new Error(`Erreur HTTP : ${Ue.status}`);const Fe=await Ue.json();let dn=Fe;const Wn=Fe==null?void 0:Fe.task_id,Ut=(Fe==null?void 0:Fe.status)==="success"&&(Fe==null?void 0:Fe.pages)&&Fe.pages.length>0;Wn&&!Ut&&(dn=await $i(Wn)),dn!=null&&dn.pages&&dn.pages.length>0&&(nt(dn),je=dn)}else if(e==="animation"){let We;const Ue=Oe||"space";if(Ue&&Ue!=="custom"?We={magie:"Une histoire magique avec des cratures fantastiques dans un monde enchant",aventure:"Une grande aventure pleine de dcouvertes et de rebondissements",animaux:"Une histoire mettant en scne des animaux adorables et leurs aventures",espace:"Un voyage extraordinaire  travers les toiles et les plantes",nature:"Une exploration merveilleuse de la nature et de ses secrets",amiti:"Une belle histoire d'amiti et de solidarit",famille:"Une histoire touchante sur les liens familiaux"}[Ue]||`Une belle histoire sur le thme ${Ue}`:We=ot,!We||We.trim().length<10)throw new Error("L'histoire doit contenir au moins 10 caractres");const Fe={magie:"magic",aventure:"adventure",animaux:"animals",espace:"space",nature:"nature",amiti:"friendship",famille:"friendship"}[Ue]||Ue||"adventure",dn={theme:Fe,duration:Number(Be),custom_prompt:We||void 0},Wn=Be||30,Ut=`${qn}/generate-quick?theme=${encodeURIComponent(Fe)}&duration=${Wn}&style=${Ne||"cartoon"}&custom_prompt=${encodeURIComponent(We||"")}`,Ar=await fetch(Ut,{method:"GET",headers:{Accept:"application/json"}});if(!Ar.ok){const Cr=await Ar.text();throw new Error(`Erreur HTTP ${Ar.status}: ${Cr}`)}const nr=await Ar.json();let mn=nr;const ji=nr==null?void 0:nr.task_id,Bn=(nr==null?void 0:nr.status)==="completed"&&((nr==null?void 0:nr.final_video_url)||(((Le=nr==null?void 0:nr.clips)==null?void 0:Le.length)||0)>0);ji&&!Bn&&(mn=await qi(ji)),(mn==null?void 0:mn.status)==="completed"&&mn!=null&&mn.clips&&mn.clips.length>0&&(Ge(mn),Mt(!0),je=mn)}if(F(je),ni(0),e==="rhyme"&&je.task_id){sl(je.task_id);return}let Ye;e==="rhyme"?je.title&&!je.title.includes("gnre")?Ye=je.title+(je.has_music?" ":""):Ye=kl("comptine",r==="custom"?"default":r)+(je.has_music?" ":""):e==="histoire"||e==="audio"?je.title&&!je.title.includes("gnre")?Ye=je.title:Ye=kl("histoire",f==="custom"?"default":f):e==="coloring"?Ye=(je==null?void 0:je.title)||kl("coloriage",de):e==="comic"?Ye=(He==null?void 0:He.title)||"Ma Bande Dessine ":e==="animation"?Ye=(je==null?void 0:je.title)||kl("animation",hs||"aventure"):e==="histoire"&&(Ye=(je==null?void 0:je.title)||kl("histoire",De==="custom"?"default":De)),Zt(Ye);let St;e==="coloring"?St={id:Date.now().toString(),type:e,title:Ye,createdAt:new Date().toISOString(),content:je?`${je.total_images} coloriage(s) gnr(s)`:"Coloriage gnr",theme:de,images:(je==null?void 0:je.images)||[],metadata:(je==null?void 0:je.metadata)||{}}:e==="comic"?St={id:Date.now().toString(),type:e,title:Ye,createdAt:new Date().toISOString(),content:He?`BD de ${He.total_pages} planche(s) - ${He.total_pages*4} cases`:"Bande dessine gnre",theme:oe,pages:(He==null?void 0:He.pages)||[],comic_data:He||{}}:e==="animation"?St={id:Date.now().toString(),type:e,title:Ye,createdAt:new Date().toISOString(),content:je?`Animation de ${je.actual_duration}s avec ${je.total_scenes} scnes`:"Animation gnre",theme:hs,clips:(je==null?void 0:je.clips)||[],animation_data:je||{}}:e==="histoire"?St={id:Date.now().toString(),type:e,title:Ye,createdAt:new Date().toISOString(),content:(je==null?void 0:je.content)||je||"Histoire gnre...",story_type:De==="custom"?"custom":De}:St={id:Date.now().toString(),type:e,title:Ye,createdAt:new Date().toISOString(),content:(je==null?void 0:je.content)||je||"Contenu gnr...",audio_path:(je==null?void 0:je.audio_path)||null};try{await _x({type:e,title:Ye,data:St})}catch{}if(!pr&&je)try{const{calculateTokenCost:We,deductTokens:Ue}=await Pu(()=>Promise.resolve().then(()=>SD),void 0);let Fe={};e==="animation"?Fe.duration=Be:(e==="comic"||e==="bd")&&(Fe.pages=_e||1),(e==="audio"||e==="histoire"&&y)&&(Fe.voice=y);const dn=We(e,Fe),Wn=await Ue(Et.id,e,dn,{...Fe,transactionId:`gen_${Date.now()}_${e}`});console.log(" Tokens dduits avec succs:",Wn)}catch(We){console.error(" Erreur lors de la dduction des tokens:",We)}q(!1)}catch(je){alert(` Erreur lors de la gnration : ${je.message}

 Conseil : Vrifiez que les cls API sont configures dans le fichier .env du serveur.`),q(!1)}},ua=Le=>{var je,Ye,St,We,Ue;Le.action==="showStory"?(F({title:Le.title,content:Le.content||((je=Le.data)==null?void 0:je.content)||"",type:Le.type}),J(!0)):Le.action==="showColoring"?($({success:!0,theme:Le.theme||((Ye=Le.data)==null?void 0:Ye.theme)||"coloriage",images:Le.images||((St=Le.data)==null?void 0:St.images)||[],total_images:(Le.images||((We=Le.data)==null?void 0:We.images)||[]).length,metadata:Le.metadata||((Ue=Le.data)==null?void 0:Ue.metadata)||{}}),P(!0)):(qr(!1),window.location.hash="")},Rs=()=>{qr(!1),window.location.hash=""},Ac=()=>{if(e==="rhyme"){if(!r||r==="custom"&&!s.trim())return!1}else if(e==="histoire"||e==="audio"){if(!f||f==="custom"&&!S.trim())return!1}else if(e==="coloring"){if(!de&&!ie||de==="custom"&&!ae.trim()||Q===null)return!1}else if(e==="comic"){if(!oe||!he||!_e||oe==="custom"&&!Pe.trim())return!1}else if(e==="animation"){if(!Oe&&!ot.trim()||Oe==="custom"&&!ot.trim()||Oe==="custom"&&ot.trim().length<10)return!1}else if(e==="histoire"&&(!De||De==="custom"&&!ot.trim()||De==="custom"&&ot.trim().length<10))return!1;return!0},zi={hidden:{opacity:0,height:0,marginBottom:0},visible:{opacity:1,height:"auto",marginBottom:"1rem"},exit:{opacity:0,height:0,marginBottom:0}},il=async(Le,je)=>{if(!(!je||typeof je!="string"))try{const Ye=new et({orientation:"p",unit:"mm",format:"a4"}),St=50,We=210,Ue=297,Fe=6,dn=Math.floor((Ue-St-30)/Fe),Wn=Bn=>new Promise((Cr,sn)=>{const Vi=new Image;Vi.crossOrigin="anonymous",Vi.onload=()=>Cr(Vi),Vi.onerror=()=>sn(new Error("Impossible de charger l'image de fond")),Vi.src=Bn});let Ut=null;try{Ut=await Wn("/assets/fond.png?v=1")}catch{}let Ar=Le;je.startsWith("**")&&je.includes("**",2)&&(Ar=je.split("**")[1].trim(),je=je.replace(`**${Ar}**`,"").trim());const nr=Ye.splitTextToSize(je,150);let mn=0;for(let Bn=0;mn<nr.length;Bn++){if(Bn>0&&Ye.addPage(),Ut)try{Ye.addImage(Ut,"PNG",0,0,We,Ue,void 0,"FAST")}catch{}Bn===0&&(Ye.setFont("courier","bold"),Ye.setFontSize(18),Ye.setTextColor(110,50,230),Ye.text(Ar,We/2,St-20,{align:"center"})),Ye.setFont("courier","bold"),Ye.setFontSize(10),Ye.setTextColor(25,25,112);for(let Cr=0;Cr<dn&&mn<nr.length;Cr++,mn++){const sn=St+Cr*Fe;Ye.text(nr[mn],We/2,sn,{align:"center"})}Ye.setFontSize(8),Ye.setTextColor(106,90,205),Ye.text(`Page ${Bn+1}`,We-15,Ue-10,{align:"right"})}const ji=Ar.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");Ye.save(`${ji}.pdf`)}catch{alert("Erreur lors de la gnration du PDF. Veuillez ressayer.")}},sl=async(Le,je=40,Ye=5e3)=>{let St=0;const We=async()=>{try{const Ue=await(await fetch(`${qn}/check_task_status/${Le}`)).json();return Ue.status==="completed"?(F(Fe=>{const dn={...Fe,audio_path:Ue.audio_path,suno_url:Ue.suno_url,title:Ue.title||Fe.title,has_music:!0,service:"suno"},Wn=Ue.title||Fe.title||kl("comptine",r==="custom"?"default":r)+" ";Zt(Wn);const Ut={id:Date.now().toString(),type:"rhyme",title:Wn,createdAt:new Date().toISOString(),content:Fe.content||Fe.rhyme||"Comptine gnre",audio_path:Ue.audio_path,suno_url:Ue.suno_url};return _x({type:"rhyme",title:Wn,data:Ut}).catch(Ar=>{}),dn}),Ue.suno_url?($r(Ue.suno_url),!0):(q(!1),!0)):Ue.status==="failed"?(F(Fe=>({...Fe,music_error:Ue.error,has_music:!1})),q(!1),!0):Ue.status!=="processing"&&St>=je-1?(q(!1),alert(" La gnration de musique prend plus de temps que prvu. Veuillez vrifier votre historique dans quelques minutes."),!0):(St++,setTimeout(We,Ye),!1)}catch{return St++,St<je&&setTimeout(We,Ye),!1}};await We()};return u.jsxs("div",{className:"app-container",children:[u.jsx(U9,{isLoggedIn:!!Et,onOpenHistory:()=>qr(!0),userId:Et==null?void 0:Et.id,onOpenSubscription:()=>Ot(!0)}),u.jsx(fM,{}),u.jsx("main",{className:"main-content",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs(Te.div,{className:"creation-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["          ",u.jsx(G9,{contentType:e,setContentType:n}),"          ",u.jsx(Fi,{mode:"wait",children:e==="rhyme"?u.jsx(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{width:"100%"},children:u.jsx(X9,{selectedRhyme:r,setSelectedRhyme:i,customRhyme:s,setCustomRhyme:a})},"rhyme-selector"):e==="histoire"||e==="audio"?u.jsx(Te.div,{variants:zi,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(Z9,{selectedAudioStory:f,setSelectedAudioStory:_,customAudioStory:S,setCustomAudioStory:k,selectedVoice:y,setSelectedVoice:x})},"audio-story-selector"):e==="coloring"?u.jsxs(Te.div,{variants:zi,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:["                ",u.jsx(fD,{selectedTheme:de,setSelectedTheme:X,customColoringTheme:ae,setCustomColoringTheme:re,uploadedPhoto:ie,setUploadedPhoto:N,withColoredModel:Q,setWithColoredModel:te})]},"coloring-selector"):e==="comic"?u.jsx(Te.div,{variants:zi,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(mD,{selectedTheme:oe,setSelectedTheme:me,selectedStyle:he,setSelectedStyle:ge,numPages:_e,setNumPages:Re,customStory:Pe,setCustomStory:ve,characterPhoto:Y,setCharacterPhoto:_t,onCharacterPhotoUpload:Br})},"comics-selector"):e==="animation"?u.jsx(Te.div,{variants:zi,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(nD,{selectedTheme:Oe,setSelectedTheme:ut,selectedDuration:Be,setSelectedDuration:Ct,selectedStyle:Ne,setSelectedStyle:Me,customStory:ot,setCustomStory:pt,characterImage:rt,setCharacterImage:ct})},"animation-selector"):e==="histoire"?u.jsx(Te.div,{variants:zi,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.3},children:u.jsx(tD,{selectedStory:De,setSelectedStory:$t,customStory:ot,setCustomStory:pt})},"story-selector"):null}),"          ",u.jsx(iD,{customRequest:w,setCustomRequest:E,stepNumber:e==="coloring"?4:3}),u.jsx(sD,{onGenerate:Ts,isGenerating:B,isDisabled:!Ac(),contentType:e,buttonText:An})]}),u.jsx("div",{className:"preview-column",children:u.jsx(Te.div,{className:"preview-panel",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:u.jsx("div",{className:"preview-container",children:u.jsx("div",{className:`preview ${z?"":"empty"}`,children:u.jsx(Fi,{mode:"wait",children:B?u.jsxs(Te.div,{className:"generating-animation",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[u.jsxs("div",{className:"loading-dots",children:[u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"}),u.jsx("div",{className:"dot"})]}),"      ",u.jsxs("p",{children:["        ",e==="rhyme"?"Votre comptine est en cours de cration...":e==="histoire"||e==="audio"?"Cration de l'histoire en cours...":e==="histoire"?"Cration de votre histoire en cours...":e==="coloring"?"Votre coloriage est en cours de cration...":e==="comic"?"Cration de votre bande dessine en cours...":e==="animation"?"Cration de votre dessin anim en cours...":"Gnration en cours..."]})]},"generating"):M&&e==="coloring"?u.jsxs(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[u.jsx("button",{onClick:()=>P(!0),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Ouvrir le coloriage"}),u.jsx("button",{onClick:()=>G(!0),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Colorier maintenant"}),u.jsx("button",{onClick:()=>{if(M!=null&&M.images){const Le=`coloriages_${M.theme||de||"generes"}`;fy(M.images,Le)}},style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Tlcharger le coloriage"})]},"coloring-result"):He&&e==="comic"?u.jsxs(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem",padding:"1rem"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[u.jsx("h3",{style:{color:"var(--primary)",marginBottom:"0.5rem"},children:He.title||"Votre Bande Dessine"}),u.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[He.total_pages," ",He.total_pages===1?"planche":"planches","  ",He.total_pages*4," cases"]})]}),u.jsx("button",{onClick:()=>Ke(!0),style:{padding:"0.8rem 2rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",boxShadow:"0 4px 12px rgba(245, 240, 255, 0.3)",transition:"all 0.2s ease"},onMouseOver:Le=>Le.target.style.transform="translateY(-2px)",onMouseOut:Le=>Le.target.style.transform="translateY(0)",children:" Lire la bande dessine"})]},"comics-result"):z&&e==="rhyme"&&z.suno_url&&Z?u.jsx(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs("div",{style:{height:"300px",maxWidth:"500px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.8rem",padding:"0.5rem",overflowY:"auto"},children:[z.suno_url&&Z&&u.jsx(u.Fragment,{children:u.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"15px",border:"2px solid #dee2e6",width:"100%",maxWidth:"100%",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",overflow:"hidden"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"9px 50px 0px"},children:u.jsx("h4",{style:{margin:0,fontSize:"15px",color:"#333",fontWeight:"600"},children:"Votre comptine est prte !"})}),u.jsx("audio",{controls:!0,preload:"metadata",controlsList:"nodownload",style:{width:"100%",outline:"none"},src:z.suno_url,children:"Votre navigateur ne supporte pas l'lment audio."})]})}),z.suno_url&&Z&&u.jsx(u.Fragment,{children:u.jsx("button",{onClick:async()=>{if(z.suno_url&&Z)try{const Le=await fetch(z.suno_url);if(!Le.ok)throw new Error(`Erreur HTTP: ${Le.status}`);const je=await Le.blob();if(je.size===0)throw new Error("Fichier audio indisponible");const Ye=window.URL.createObjectURL(je),St=(Ur||z.title||"comptine").replace(/[^a-z0-9]/gi,"_").toLowerCase(),We=document.createElement("a");We.href=Ye,We.download=`${St}.mp3`,We.style.display="none",document.body.appendChild(We),We.click(),document.body.removeChild(We),setTimeout(()=>window.URL.revokeObjectURL(Ye),100)}catch(Le){alert(`Erreur lors du tlchargement: ${Le.message}`)}},disabled:!Z,style:{padding:"0.8rem 2rem",backgroundColor:Z?"#6B4EFF":"#ccc",color:Z?"#fff":"#666",border:"none",borderRadius:"10px",cursor:Z?"pointer":"not-allowed",fontWeight:"600",fontSize:"14px",marginTop:"0.8rem",boxShadow:Z?"0 4px 12px rgba(245, 240, 255, 0.3)":"none",transition:"all 0.3s ease"},onMouseOver:Le=>Z&&(Le.target.style.transform="translateY(-2px)"),onMouseOut:Le=>Z&&(Le.target.style.transform="translateY(0)"),children:Z?" Tlcharger":" Prparation du tlchargement..."})})]})},"rhyme-result"):z&&(e==="histoire"||e==="audio")?u.jsx(Te.div,{className:"generated-result",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs("div",{style:{height:"300px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",padding:"1rem",overflowY:"auto"},children:[z.audio_path&&u.jsx("div",{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",padding:"22px",borderRadius:"15px",border:"2px solid #dee2e6",width:"100%",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:u.jsx("audio",{controls:!0,preload:"metadata",controlsList:"nodownload",style:{width:"100%",height:"40px",outline:"none"},src:`${qn}/audio/${z.audio_path.split("/").pop()}`,children:"Votre navigateur ne supporte pas l'lment audio."})}),u.jsxs("div",{style:{display:"flex",gap:"1rem",width:"100%",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>J(!0),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Ouvrir l'histoire"}),u.jsx("button",{onClick:()=>il(z.title,z.content),style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Tlcharger l'histoire"}),z.audio_path&&u.jsx("button",{onClick:async()=>{try{const Le=z.audio_path.split("/").pop(),je=`${qn}/audio/${Le}?download=true`,Ye=(z.title||"Histoire").replace(/[^a-z0-9]/gi,"_").toLowerCase(),St=await fetch(je);if(!St.ok)throw new Error(`Erreur HTTP: ${St.status}`);const We=await St.blob(),Ue=window.URL.createObjectURL(We),Fe=document.createElement("a");Fe.href=Ue,Fe.download=`${Ye}.mp3`,document.body.appendChild(Fe),Fe.click(),document.body.removeChild(Fe),setTimeout(()=>{window.URL.revokeObjectURL(Ue)},100)}catch{try{const Le=z.audio_path.split("/").pop(),je=`${qn}/audio/${Le}?download=true`;window.open(je,"_blank")}catch{alert("Erreur lors du tlchargement. Veuillez ressayer.")}}},style:{padding:"0.6rem 1.4rem",backgroundColor:"#6B4EFF",color:"#fff",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:" Tlcharger l'audio"})]})]})},"audio-story-result"):u.jsxs(Te.div,{className:"preview-placeholder",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:["  ",!(z!=null&&z.content)&&!M&&u.jsxs("div",{className:"empty-preview",children:["    ",u.jsx("p",{children:e==="rhyme"?"Votre comptine apparatra ici":e==="histoire"||e==="audio"||e==="histoire"?"Votre histoire apparatra ici":e==="coloring"?"Votre coloriage apparatra ici":e==="comic"?"Votre bande dessine apparatra ici":e==="animation"?"Votre dessin anim apparatra ici":"Votre contenu apparatra ici"})]})]},"placeholder")})})})})})]})}),u.jsx(Fi,{children:Ls&&u.jsx(Te.div,{className:"history-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:Rs,children:u.jsx(dD,{onClose:Rs,onSelect:ua})})}),I&&u.jsx(hD,{title:z.title,content:z.content,onClose:()=>J(!1)}),"    ",R&&u.jsx(pD,{coloringResult:M,selectedTheme:de,onClose:()=>P(!1)}),K&&u.jsx(Rj,{imageUrl:(()=>{var Le;const je=(Le=M==null?void 0:M.images)==null?void 0:Le[0];return je?je.image_url||je:void 0})(),theme:(M==null?void 0:M.theme)||de,onClose:()=>G(!1)}),Ee&&u.jsx(gD,{comic:He,onClose:()=>Ke(!1),baseUrl:qn}),gt&&u.jsx(rD,{animationResult:Rt,onClose:()=>Mt(!1)}),at&&u.jsx(sM,{contentType:vt,selectedDuration:Be,numPages:_e,selectedVoice:y,userId:Et==null?void 0:Et.id,userEmail:Et==null?void 0:Et.email,onSuccess:Le=>{Nt(!1),setTimeout(()=>{fs()},500)},onCancel:()=>{Nt(!1)}}),dt&&u.jsx(uM,{isOpen:dt,onClose:()=>Ot(!1),userId:Et==null?void 0:Et.id,userEmail:Et==null?void 0:Et.email}),u.jsx(dM,{onLegalClick:Le=>{Vn(!0),Si(Le)}}),u.jsx(Fi,{children:Ps&&u.jsx(hM,{onClose:()=>Vn(!1),initialSection:Ui})})]})}const Tx=["fredagathe77@gmail.com","admin@herbbie.com"],hu="herbbie_admin_session",Eo={initAuthListener(e){const t=()=>{const r=this.getStoredSession();r&&r.user?e({user:r.user,isAdmin:r.isAdmin,session:r}):e(null)};t();const n=r=>{r.key===hu&&t()};return window.addEventListener("storage",n),{unsubscribe:()=>{window.removeEventListener("storage",n)}}},async signIn(e,t){try{if(!Tx.includes(e))throw new Error("Accs refus. Seuls les administrateurs peuvent accder  ce panneau.");const n={id:"admin-"+Date.now(),email:e,user_metadata:{full_name:e==="fredagathe77@gmail.com"?"Admin Principal":"Administrateur"}},r={user:n,access_token:"admin-token-"+Date.now(),token_type:"bearer",expires_at:Date.now()+24*60*60*1e3};return this.storeSession({user:n,isAdmin:!0,session:r}),{user:n,session:r,isAdmin:!0}}catch(n){throw console.error("Erreur de connexion:",n),n}},async signOut(){try{localStorage.removeItem(hu)}catch(e){throw console.error("Erreur de dconnexion:",e),e}},async getCurrentUser(){try{const e=this.getStoredSession();return e&&e.user?{user:e.user,isAdmin:e.isAdmin}:null}catch(e){return console.error("Erreur lors de la rcupration de l'utilisateur:",e),null}},async checkUserIsAdmin(e){try{return!e||!e.email?!1:Tx.includes(e.email)}catch(t){return console.error("Erreur lors de la vrification du rle admin:",t),!1}},async authenticateWithToken(e){try{if(!e||!e.includes("admin"))return console.warn("Token invalide"),!1;const t={id:"admin-auto-"+Date.now(),email:"admin@herbbie.com",user_metadata:{full_name:"Administrateur Auto"}},n={user:t,access_token:e,token_type:"bearer",expires_at:Date.now()+24*60*60*1e3};return this.storeSession({user:t,isAdmin:!0,session:n}),{user:t,isAdmin:!0,session:n}}catch(t){return console.error("Erreur authentification automatique:",t),!1}},async getCurrentSession(){try{return this.getStoredSession()}catch(e){return console.error("Erreur lors de la rcupration de la session:",e),null}},storeSession(e){try{localStorage.setItem(hu,JSON.stringify(e))}catch(t){console.error("Erreur lors du stockage de la session:",t)}},getStoredSession(){try{const e=localStorage.getItem(hu);if(e){const t=JSON.parse(e);if(t.session&&t.session.expires_at>Date.now())return t;localStorage.removeItem(hu)}}catch(e){console.error("Erreur lors de la rcupration de la session:",e)}return null}},r6=T.createContext(),i6=()=>{const e=T.useContext(r6);if(!e)throw new Error("useAuth doit tre utilis dans un AuthProvider");return e},gM=({children:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(!1),[s,a]=T.useState(!0),[o,l]=T.useState(null);T.useEffect(()=>{let d;return(async()=>{try{const p=await Eo.getCurrentSession();if(p!=null&&p.user){const g=await Eo.checkUserIsAdmin(p.user);n(p.user),i(g),l(p)}}catch(p){console.error("Erreur lors de l'initialisation de l'authentification:",p)}finally{a(!1)}d=Eo.initAuthListener(async p=>{p?(n(p.user),i(p.isAdmin),l(p.session)):(n(null),i(!1),l(null)),a(!1)})})(),()=>{d&&d.unsubscribe()}},[]);const c={user:t,isAdmin:r,loading:s,session:o,signIn:async(d,p)=>{a(!0);try{const g=await Eo.signIn(d,p);return g&&(n(g.user),i(g.isAdmin),l(g.session)),g}catch(g){throw g}finally{a(!1)}},signOut:async()=>{a(!0);try{await Eo.signOut(),n(null),i(!1),l(null)}catch(d){throw console.error("Erreur lors de la dconnexion:",d),d}finally{a(!1)}},authenticateWithToken:Eo.authenticateWithToken.bind(Eo),isAuthenticated:!!t&&r};return u.jsx(r6.Provider,{value:c,children:e})},vM=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(""),[i,s]=T.useState(""),[a,o]=T.useState(!1),[l,c]=T.useState(!1),{signIn:d}=i6(),p=async g=>{g.preventDefault(),s(""),o(!0);try{await d(e,n),bf(e.trim())}catch(f){s(f.message||"Erreur de connexion")}finally{o(!1)}};return u.jsx("div",{className:"login-container",children:u.jsxs(Te.div,{className:"login-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"login-header",children:[u.jsx("div",{className:"login-logo",children:u.jsxs("div",{className:"login-logo-text",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("span",{children:"Administration"})]})}),u.jsx("h2",{children:"Connexion Administrateur"}),u.jsx("p",{children:"Accs rserv aux administrateurs HERBBIE"})]}),u.jsxs("form",{className:"login-form",onSubmit:p,children:[i&&u.jsxs(Te.div,{className:"login-error",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:[u.jsx("span",{children:""})," ",i]}),u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"email",children:"Email administrateur"}),u.jsx(Kl,{value:e,onChange:g=>t(g.target.value),placeholder:"admin@herbbie.com",required:!0,disabled:a,user:null,onEmailSubmit:()=>{}})]}),u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"password",children:"Mot de passe"}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:g=>r(g.target.value),placeholder:"",required:!0,disabled:a,autoComplete:"current-password",className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>c(!l),disabled:a,"aria-label":l?"Masquer le mot de passe":"Afficher le mot de passe",children:l?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),u.jsx("button",{type:"submit",className:"login-button",disabled:a||!e||!n,children:a?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"login-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),u.jsx("div",{className:"login-footer",children:u.jsx("p",{children:" Accs scuris - Seuls les administrateurs peuvent se connecter"})})]})})},my="/api/features",yM=async()=>{try{const e=await fetch(my,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok)return await e.json();throw console.error("Erreur lors de la rcupration des fonctionnalits:",e.statusText),new Error(`Erreur API: ${e.status}`)}catch(e){throw console.error("Erreur lors de la rcupration des fonctionnalits:",e),e}},bM=async(e,t)=>{try{const n=await fetch(`${my}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})});if(n.ok)return(await n.json()).features;throw console.error("Erreur lors de la mise  jour:",n.statusText),new Error(`Erreur API: ${n.status}`)}catch(n){throw console.error("Erreur lors de la mise  jour de la fonctionnalit:",n),n}},wM=async()=>{try{const e=await fetch(`${my}/reset`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok)return(await e.json()).features;throw console.error("Erreur lors de la rinitialisation:",e.statusText),new Error(`Erreur API: ${e.status}`)}catch(e){throw console.error("Erreur lors de la rinitialisation:",e),e}},xM=async()=>{try{return await yM()}catch(e){throw e}},_M=async(e,t)=>{try{const n=await bM(e,t);return window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:n})),n}catch(n){throw n}},SM=async()=>{try{const e=await wM();return window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:e})),e}catch(e){throw console.error("Erreur lors de la rinitialisation des fonctionnalits:",e),e}},kM=()=>{const[e,t]=T.useState({}),[n,r]=T.useState(!0),[i,s]=T.useState(null);T.useEffect(()=>{a()},[]);const a=async()=>{try{r(!0);const g=await xM();t(g)}catch(g){console.error("Erreur lors du chargement des fonctionnalits:",g),c("Erreur lors du chargement des fonctionnalits","error")}finally{r(!1)}},o=async g=>{var f,_;try{const S=((f=e[g])==null?void 0:f.enabled)||!1,k=await _M(g,!S);if(k){t(k),window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:k}));const y=S?"dsactive":"active";c(`Fonctionnalit ${(_=e[g])==null?void 0:_.name} ${y}`,"success")}else c("Erreur lors de la mise  jour","error")}catch(S){console.error("Erreur lors de la mise  jour:",S),c("Erreur lors de la mise  jour","error")}},l=async()=>{try{const g=await SM();g?(t(g),window.dispatchEvent(new CustomEvent("featuresUpdated",{detail:g})),c("Toutes les fonctionnalits ont t rinitialises","success")):c("Erreur lors de la rinitialisation","error")}catch(g){console.error("Erreur lors de la rinitialisation:",g),c("Erreur lors de la rinitialisation","error")}},c=(g,f="info")=>{s({message:g,type:f}),setTimeout(()=>s(null),3e3)},d=()=>Object.values(e).filter(g=>g.enabled).length,p=()=>Object.keys(e).length;return n?u.jsxs("div",{className:"admin-loading",children:[u.jsx("div",{className:"admin-loading-spinner"}),u.jsx("span",{children:"Chargement des fonctionnalits..."})]}):u.jsxs("div",{className:"feature-manager-container",children:[i&&u.jsx(Te.div,{className:`admin-notification ${i.type} show`,initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},children:i.message}),u.jsxs("div",{className:"feature-manager-header",children:[u.jsxs("div",{className:"feature-manager-stats",children:[u.jsxs("div",{className:"feature-stat",children:[u.jsx("span",{className:"feature-stat-number",children:d()}),u.jsx("span",{className:"feature-stat-label",children:"Actives"})]}),u.jsxs("div",{className:"feature-stat",children:[u.jsx("span",{className:"feature-stat-number",children:p()}),u.jsx("span",{className:"feature-stat-label",children:"Total"})]}),u.jsxs("div",{className:"feature-stat",children:[u.jsxs("span",{className:"feature-stat-number",children:[Math.round(d()/p()*100),"%"]}),u.jsx("span",{className:"feature-stat-label",children:"Taux d'activation"})]})]}),u.jsx("div",{className:"feature-manager-actions",children:u.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:l,children:" Rinitialiser"})})]}),u.jsx("div",{className:"feature-manager-grid",children:Object.entries(e).map(([g,f])=>u.jsxs(Te.div,{className:"feature-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[u.jsxs("div",{className:"feature-card-header",children:[u.jsxs("div",{className:"feature-info",children:[u.jsx("span",{className:"feature-icon",children:jM(g)}),u.jsxs("div",{className:"feature-details",children:[u.jsx("h3",{className:"feature-name",children:f.name}),u.jsx("span",{className:`feature-status ${f.enabled?"enabled":"disabled"}`,children:f.enabled?"Active":"Dsactive"})]})]}),u.jsxs("label",{className:"feature-toggle",children:[u.jsx("input",{type:"checkbox",checked:f.enabled,onChange:()=>o(g)}),u.jsx("span",{className:"toggle-slider"})]})]}),u.jsx("div",{className:"feature-card-body",children:u.jsx("p",{className:"feature-description",children:NM(g)})})]},g))}),u.jsx("div",{className:"feature-manager-info",children:u.jsxs("div",{className:"admin-card",children:[u.jsx("div",{className:"admin-card-header",children:u.jsx("h3",{children:" Informations"})}),u.jsxs("div",{className:"admin-card-body",children:[u.jsx("p",{children:"Les fonctionnalits actives sont visibles pour tous les utilisateurs de HERBBIE. Les modifications sont appliques immdiatement."}),u.jsxs("ul",{className:"feature-info-list",children:[u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Dessin anim"})," : Gnration de vidos animes"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Bande dessine"})," : Cration de BD avec bulles"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Coloriage"})," : Pages de coloriage  imprimer"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Histoire"})," : Contes audio avec narration"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Comptine"})," : Chansons avec musique gnre"]})]})]})]})})]})},jM=e=>({animation:"",comic:"",coloring:"",audio:"",rhyme:""})[e]||"",NM=e=>({animation:"Gnration de dessins anims personnaliss avec IA",comic:"Cration de bandes dessines avec bulles de dialogue",coloring:"Pages de coloriage  imprimer pour les enfants",audio:"Histoires audio avec narration automatique",rhyme:"Comptines musicales avec paroles et mlodies"})[e]||"Fonctionnalit de cration de contenu",EM=()=>{const{user:e,isAdmin:t,loading:n,signOut:r}=i6(),[i]=H8(),s=uv(),a=i.get("auth"),[o,l]=Gt.useState(!1);return T.useEffect(()=>{a==="auto"?(l(!0),window.history.replaceState({},"","/ilmysv6iepwepoa4tj2k")):!a&&!o&&localStorage.removeItem("herbbie_admin_session")},[a]),T.useEffect(()=>{const c=document.title;return document.title="HERBBIE - Administration",()=>{document.title=c}},[]),T.useEffect(()=>{const c=()=>{l(!1),localStorage.removeItem("herbbie_admin_session"),document.title="HERBBIE"};return window.addEventListener("beforeunload",c),()=>{window.removeEventListener("beforeunload",c)}},[]),n&&!o?u.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:u.jsx("div",{children:"Chargement..."})}):o||e&&t?u.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"40px 20px"},children:u.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[u.jsx("h1",{style:{color:"white",textAlign:"center",marginBottom:"40px",fontSize:"2.5em"},children:" Gestion des Fonctionnalits Herbbie"}),u.jsx(kM,{}),u.jsxs("div",{style:{marginTop:"40px",textAlign:"center",display:"flex",gap:"15px",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx("a",{href:"/",onClick:c=>{c.preventDefault(),localStorage.removeItem("herbbie_admin_session"),window.location.href="/"},style:{color:"white",textDecoration:"none",padding:"12px 30px",background:"rgba(255,255,255,0.2)",borderRadius:"25px",display:"inline-block",transition:"all 0.3s ease",cursor:"pointer"},children:" Retour  Herbbie"}),u.jsx("button",{onClick:async()=>{await r(),localStorage.removeItem("herbbie_admin_session"),s("/ilmysv6iepwepoa4tj2k")},style:{color:"white",border:"none",padding:"12px 30px",background:"rgba(255,0,0,0.3)",borderRadius:"25px",cursor:"pointer",fontSize:"16px",fontWeight:"500",transition:"all 0.3s ease"},children:" Dconnexion"})]})]})}):u.jsx(vM,{})},AM=()=>u.jsx(gM,{children:u.jsx(EM,{})}),CM=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(""),[i,s]=T.useState(""),[a,o]=T.useState(!1),[l,c]=T.useState(!1),[d,p]=T.useState(!1),[g,f]=T.useState(!1),[_,S]=T.useState(!1),[k,y]=T.useState(!1);T.useEffect(()=>{let w,E;return(async()=>{await new Promise(z=>setTimeout(z,500));const{data:{session:B}}=await Pt.auth.getSession();if(B){p(!0);return}w=setTimeout(async()=>{const{data:{session:z}}=await Pt.auth.getSession();z||f(!0)},15e3);const{data:{subscription:q}}=Pt.auth.onAuthStateChange(async(z,F)=>{(z==="PASSWORD_RECOVERY"||z==="SIGNED_IN"||z==="INITIAL_SESSION")&&F&&(p(!0),f(!1),w&&clearTimeout(w))});E=q})(),()=>{w&&clearTimeout(w),E&&E.unsubscribe()}},[]);const x=async w=>{if(w.preventDefault(),s(""),c(!0),e.length<6){s("Le mot de passe doit contenir au moins 6 caractres"),c(!1);return}if(e!==n){s("Les mots de passe ne correspondent pas"),c(!1);return}try{const{error:E}=await Pt.auth.updateUser({password:e});E?s(E.message):(o(!0),setTimeout(()=>{window.location.href="/"},3e3))}catch{s("Une erreur est survenue lors de la mise  jour du mot de passe")}c(!1)};return a?u.jsx("div",{className:"reset-password-page",children:u.jsx(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:u.jsxs("div",{className:"success-message",children:[u.jsx("div",{className:"success-icon",children:""}),u.jsx("h2",{children:"Mot de passe mis  jour !"}),u.jsx("p",{children:"Votre mot de passe a t chang avec succs."}),u.jsx("p",{children:"Vous serez redirig vers la page d'accueil dans quelques secondes..."})]})})}):g?u.jsx("div",{className:"reset-password-page",children:u.jsxs(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"reset-password-header",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("h2",{children:"Erreur de lien"})]}),u.jsxs("div",{className:"error-message",children:[u.jsx("div",{className:"error-icon",children:""}),u.jsx("h3",{children:"Lien de rinitialisation invalide"}),u.jsx("p",{children:"Ce lien de rinitialisation de mot de passe n'est pas valide ou a expir."}),u.jsx("p",{children:"Veuillez demander un nouveau lien de rinitialisation."})]}),u.jsx("div",{className:"reset-password-footer",children:u.jsx("a",{href:"/",children:"Retour  l'accueil"})})]})}):d?u.jsx("div",{className:"reset-password-page",children:u.jsxs(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"reset-password-header",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("h2",{children:"Rinitialiser votre mot de passe"})]}),u.jsxs("form",{onSubmit:x,className:"reset-password-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"newPassword",children:"Nouveau mot de passe"}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:_?"text":"password",id:"newPassword",value:e,onChange:w=>t(w.target.value),placeholder:"Entrez votre nouveau mot de passe",required:!0,minLength:"6",className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>S(!_),"aria-label":_?"Masquer le mot de passe":"Afficher le mot de passe",children:_?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),u.jsxs("div",{className:"password-input-container",children:[u.jsx("input",{type:k?"text":"password",id:"confirmPassword",value:n,onChange:w=>r(w.target.value),placeholder:"Confirmez votre nouveau mot de passe",required:!0,minLength:"6",className:"password-input"}),u.jsx("button",{type:"button",className:"password-toggle-btn",onClick:()=>y(!k),"aria-label":k?"Masquer le mot de passe":"Afficher le mot de passe",children:k?u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):u.jsxs("svg",{className:"password-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),i&&u.jsx("div",{className:"error-message",children:i}),u.jsx("button",{type:"submit",className:"reset-button",disabled:l,children:l?"Mise  jour...":"Mettre  jour le mot de passe"})]}),u.jsx("div",{className:"reset-password-footer",children:u.jsx("a",{href:"/",children:"Retour  l'accueil"})})]})}):u.jsx("div",{className:"reset-password-page",children:u.jsxs(Te.div,{className:"reset-password-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs("div",{className:"reset-password-header",children:[u.jsx("h1",{children:"HERBBIE"}),u.jsx("h2",{children:"Rinitialiser votre mot de passe"})]}),u.jsxs("div",{className:"waiting-message",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Vrification de votre lien de rinitialisation..."}),u.jsx("p",{className:"waiting-subtitle",children:"Si cette page ne se met pas  jour automatiquement, assurez-vous d'avoir cliqu sur le lien complet dans votre email."})]}),u.jsx("div",{className:"reset-password-footer",children:u.jsx("a",{href:"/",children:"Retour  l'accueil"})})]})})};L0.createRoot(document.getElementById("root")).render(u.jsx(Gt.StrictMode,{children:u.jsx(U8,{children:u.jsxs(m8,{children:[u.jsx(of,{path:"/",element:u.jsx(mM,{})}),u.jsx(of,{path:"/ilmysv6iepwepoa4tj2k",element:u.jsx(AM,{})}),u.jsx(of,{path:"/reset-password",element:u.jsx(CM,{})})]})})}));export{PM as N,Ht as W,p1 as f};
