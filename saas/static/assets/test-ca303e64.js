import{X as d,V as i,Q as l,J as u,H as p,G as m,D as h,z as j,j as g,F as E,_ as S}from"./preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c-64720a0e-5001a445-022f988f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const e of c)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(c){const e={};return c.integrity&&(e.integrity=c.integrity),c.referrerPolicy&&(e.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?e.credentials="include":c.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(c){if(c.ep)return;c.ep=!0;const e=n(c);fetch(c.href,e)}})();const y="modulepreload",$=function(t){return"/"+t},T={},C=function(t,n,r){if(!n||n.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(n.map(e=>{if(e=$(e),e in T)return;T[e]=!0;const a=e.endsWith(".css"),w=a?'[rel="stylesheet"]':"";if(r)for(let f=c.length-1;f>=0;f--){const b=c[f];if(b.href===e&&(!a||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${w}`))return;const o=document.createElement("link");if(o.rel=a?"stylesheet":y,a||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),a)return new Promise((f,b)=>{o.addEventListener("load",f),o.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>t()).catch(e=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=e,window.dispatchEvent(a),!a.defaultPrevented)throw e})},_=document.getElementById("results");function s(t,n="info"){const r=document.createElement("div");r.className=`test-result ${n}`,r.innerHTML=`<strong>${new Date().toLocaleTimeString()}</strong> ${t}`,_.appendChild(r),console.log(`[${n.toUpperCase()}] ${t}`)}function A(){_.innerHTML=""}async function L(){A(),s("ğŸ” DÃ‰BUT DES TESTS SUPABASE","info");try{s("ğŸ” Test 1: VÃ©rification des variables d'environnement...","info");const t={}.VITE_SUPABASE_URL,n={}.VITE_SUPABASE_ANON_KEY;t?s(`âœ… VITE_SUPABASE_URL: ${t}`,"success"):s("âŒ VITE_SUPABASE_URL non dÃ©finie","error"),n?s(`âœ… VITE_SUPABASE_ANON_KEY prÃ©sente (${n.substring(0,20)}...)`,"success"):s("âŒ VITE_SUPABASE_ANON_KEY non dÃ©finie","error"),s("ğŸ” Test 2: Import du client Supabase...","info");let r;try{r=(await C(()=>d(()=>i(()=>l(()=>u(()=>p(()=>m(()=>h(()=>j(()=>g(()=>E(()=>S(()=>import("./supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547-c44cc2cb-909411fe-a37f4b7e.js"),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547-c44cc2cb-909411fe-a37f4b7e.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c-64720a0e-5001a445-022f988f.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547-c44cc2cb-909411fe.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c-64720a0e-5001a445.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547-c44cc2cb.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c-64720a0e.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750.js","assets/preload-helper-8235fac6-22690dc2-043ba328.js"]),["assets/supabaseClient-54ee3b77-fe605a77-169cacbb.js","assets/preload-helper-8235fac6-22690dc2.js"]),["assets/supabaseClient-54ee3b77-fe605a77.js","assets/preload-helper-8235fac6.js"]).then(e=>e.a),["assets/supabaseClient-54ee3b77.js","assets/preload-helper-8235fac6.js"])).supabase,s("âœ… Client Supabase importÃ© avec succÃ¨s","success")}catch(e){s(`âŒ Erreur d'import: ${e.message}`,"error");return}s("ğŸ” Test 3: Test de connexion Ã  Supabase...","info");try{const{data:e,error:a}=await r.from("profiles").select("count",{count:"exact",head:!0});a?(s(`âŒ Erreur de connexion: ${a.message}`,"error"),a.message.includes("CORS")?s("ğŸ’¡ SOLUTION: Ajoutez votre domaine Railway dans les origines autorisÃ©es de Supabase","warning"):a.message.includes("JWT")||a.message.includes("invalid")?s("ğŸ’¡ SOLUTION: VÃ©rifiez que VITE_SUPABASE_ANON_KEY est correcte","warning"):(a.message.includes("relation")||a.message.includes("does not exist"))&&s("ğŸ’¡ SOLUTION: CrÃ©ez la table profiles dans Supabase ou vÃ©rifiez les permissions","warning")):s("âœ… Connexion Supabase rÃ©ussie !","success")}catch(e){s(`âŒ Erreur rÃ©seau: ${e.message}`,"error")}s("ğŸ” Test 4: Test d'authentification...","info");try{const{data:{user:e},error:a}=await r.auth.getUser();a?(s(`âš ï¸ Erreur auth: ${a.message}`,"warning"),s("â„¹ï¸ Aucun utilisateur connectÃ© (normal si pas d'authentification)","info")):e?s(`âœ… Utilisateur connectÃ©: ${e.email}`,"success"):s("â„¹ï¸ Aucun utilisateur connectÃ©","info")}catch(e){s(`âŒ Erreur auth: ${e.message}`,"error")}s("ğŸ” Test 5: Test des tables...","info");const c=["profiles","creations"];for(const e of c)try{const{error:a}=await r.from(e).select("*",{count:"exact",head:!0});a?a.code==="PGRST116"?s(`âš ï¸ Table ${e}: RLS actif (normal)`,"warning"):s(`âŒ Table ${e}: ${a.message}`,"error"):s(`âœ… Table ${e}: Accessible`,"success")}catch(a){s(`âŒ Erreur table ${e}: ${a.message}`,"error")}s("ğŸ” Test 6: Test de crÃ©ation (mode test)...","info");try{const e={type:"test",title:"Test de connexion",data:{test:!0,timestamp:new Date().toISOString()}},a=await(await C(()=>d(()=>i(()=>l(()=>u(()=>p(()=>m(()=>h(()=>j(()=>g(()=>E(()=>S(()=>import("./creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4-fb9da603-7a804bad-172c0182-6cb8bfea-069a7d47-67fbfefe.js"),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4-fb9da603-7a804bad-172c0182-6cb8bfea-069a7d47-67fbfefe.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547-c44cc2cb-909411fe-a37f4b7e.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c-64720a0e-5001a445-022f988f.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4-fb9da603-7a804bad-172c0182-6cb8bfea-069a7d47.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547-c44cc2cb-909411fe.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c-64720a0e-5001a445.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4-fb9da603-7a804bad-172c0182-6cb8bfea.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547-c44cc2cb.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c-64720a0e.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4-fb9da603-7a804bad-172c0182.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c-98388547.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf-99b8e84c.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4-fb9da603-7a804bad.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149-ff91d07c.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2-25d9b1bf.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4-fb9da603.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb-ee770149.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf-302bc4f2.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70-f6d243a4.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211-3c7772fb.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f-7c1ccedf.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85-fd865f70.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750-126d9211.js","assets/preload-helper-8235fac6-22690dc2-043ba328-a5c7143f.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56-8574fd85.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb-35b87750.js","assets/preload-helper-8235fac6-22690dc2-043ba328.js"]),["assets/creations-4ab0b6d9-8e2aae55-c49f5e56.js","assets/supabaseClient-54ee3b77-fe605a77-169cacbb.js","assets/preload-helper-8235fac6-22690dc2.js"]),["assets/creations-4ab0b6d9-8e2aae55.js","assets/supabaseClient-54ee3b77-fe605a77.js","assets/preload-helper-8235fac6.js"]),["assets/creations-4ab0b6d9.js","assets/supabaseClient-54ee3b77.js","assets/preload-helper-8235fac6.js"])).addCreation(e);a.error?(s(`âš ï¸ CrÃ©ation test: ${a.error} (probablement mode localStorage)`,"warning"),s("â„¹ï¸ C'est normal si Supabase n'est pas configurÃ© - l'app utilise localStorage","info")):(s("âœ… CrÃ©ation test rÃ©ussie !","success"),s("ğŸ‰ Supabase fonctionne parfaitement !","success"))}catch(e){s(`âŒ Erreur test crÃ©ation: ${e.message}`,"error")}}catch(t){s(`ğŸ’¥ Erreur gÃ©nÃ©rale: ${t.message}`,"error")}s("ğŸ TESTS TERMINÃ‰S","info"),s("ğŸ“‹ Consultez la console pour plus de dÃ©tails","info")}window.runTests=L;window.clearResults=A;s('ğŸ”„ Page chargÃ©e - Cliquez sur "Lancer les tests" pour commencer',"info");export{C as T};
