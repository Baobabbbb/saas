<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synchronisation des fonctionnalit√©s - HERBBIE</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            color: #e0e0e0;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .status {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.1em;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .feature-item:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
        }
        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .feature-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .feature-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .enabled {
            background: #4caf50;
            color: white;
        }
        .disabled {
            background: #f44336;
            color: white;
        }
        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .success {
            background: linear-gradient(45deg, #4caf50, #45a049);
        }
        .info {
            background: linear-gradient(45deg, #2196f3, #1976d2);
        }
        .warning {
            background: linear-gradient(45deg, #ff9800, #f57c00);
        }
        .step {
            text-align: left;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .step h3 {
            color: #ffd700;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ Synchronisation HERBBIE</h1>
        <p class="subtitle">Synchroniser les fonctionnalit√©s entre le panneau d'administration et HERBBIE</p>

        <div class="step">
            <h3>üìã √âtape 1 : V√©rifier la configuration actuelle</h3>
            <div id="current-status" class="status">
                <p>Chargement...</p>
            </div>
            <button onclick="loadCurrentFeatures()" class="info">üîÑ Actualiser</button>
        </div>

        <div class="step">
            <h3>‚öôÔ∏è √âtape 2 : Configuration du panneau d'administration</h3>
            <p>Allez dans le panneau d'administration et configurez les fonctionnalit√©s comme souhait√©.</p>
        </div>

        <div class="step">
            <h3>üîó √âtape 3 : Synchronisation manuelle</h3>
            <p>Copiez la configuration depuis le panneau d'administration et collez-la ici :</p>
            <textarea id="features-input" placeholder="Collez ici la configuration JSON des fonctionnalit√©s depuis le panneau d'administration" rows="10" style="width: 100%; padding: 10px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3);"></textarea>
            <br><br>
            <button onclick="applyFeatures()" class="success">‚úÖ Appliquer la configuration</button>
        </div>

        <div class="step">
            <h3>üì± √âtape 4 : Test sur HERBBIE</h3>
            <p>Ouvrez HERBBIE dans un nouvel onglet et v√©rifiez que les boutons correspondent √† votre configuration.</p>
            <button onclick="openHerbbie()" class="warning">üåê Ouvrir HERBBIE</button>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'herbbie_features_config';

        // Configuration par d√©faut
        const DEFAULT_FEATURES = {
            animation: { enabled: true, name: 'Dessin anim√©', icon: 'üé¨', description: 'G√©n√©ration de dessins anim√©s personnalis√©s avec IA' },
            comic: { enabled: true, name: 'Bande dessin√©e', icon: 'üí¨', description: 'Cr√©ation de bandes dessin√©es avec bulles de dialogue' },
            coloring: { enabled: true, name: 'Coloriage', icon: 'üé®', description: 'Pages de coloriage √† imprimer pour les enfants' },
            audio: { enabled: true, name: 'Histoire', icon: 'üìñ', description: 'Histoires audio avec narration automatique' },
            rhyme: { enabled: true, name: 'Comptine', icon: 'üéµ', description: 'Comptines musicales avec paroles et m√©lodies' }
        };

        function loadCurrentFeatures() {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                let features = DEFAULT_FEATURES;

                if (stored) {
                    features = { ...DEFAULT_FEATURES, ...JSON.parse(stored) };
                }

                displayFeatures(features);
                document.getElementById('current-status').innerHTML = '<p>‚úÖ Configuration actuelle charg√©e</p>';
            } catch (error) {
                document.getElementById('current-status').innerHTML = '<p>‚ùå Erreur lors du chargement</p>';
                console.error('Erreur:', error);
            }
        }

        function displayFeatures(features) {
            const container = document.getElementById('current-features');
            if (!container) {
                const statusDiv = document.getElementById('current-status');
                const featuresDiv = document.createElement('div');
                featuresDiv.className = 'features-grid';
                featuresDiv.id = 'current-features';

                Object.entries(features).forEach(([key, feature]) => {
                    const item = document.createElement('div');
                    item.className = 'feature-item';
                    item.innerHTML = `
                        <div class="feature-icon">${feature.icon}</div>
                        <div class="feature-name">${feature.name}</div>
                        <div class="feature-status ${feature.enabled ? 'enabled' : 'disabled'}">
                            ${feature.enabled ? 'Activ√©' : 'D√©sactiv√©'}
                        </div>
                    `;
                    featuresDiv.appendChild(item);
                });

                statusDiv.appendChild(featuresDiv);
            } else {
                // Mettre √† jour les √©l√©ments existants
                const items = container.querySelectorAll('.feature-item');
                let i = 0;
                Object.entries(features).forEach(([key, feature]) => {
                    if (items[i]) {
                        items[i].querySelector('.feature-status').className = `feature-status ${feature.enabled ? 'enabled' : 'disabled'}`;
                        items[i].querySelector('.feature-status').textContent = feature.enabled ? 'Activ√©' : 'D√©sactiv√©';
                    }
                    i++;
                });
            }
        }

        function applyFeatures() {
            try {
                const input = document.getElementById('features-input').value.trim();

                if (!input) {
                    alert('Veuillez coller la configuration JSON depuis le panneau d'administration');
                    return;
                }

                const features = JSON.parse(input);

                // Fusionner avec les valeurs par d√©faut
                const mergedFeatures = { ...DEFAULT_FEATURES, ...features };

                // Sauvegarder dans localStorage
                localStorage.setItem(STORAGE_KEY, JSON.stringify(mergedFeatures));

                // Afficher les nouvelles fonctionnalit√©s
                displayFeatures(mergedFeatures);

                document.getElementById('current-status').innerHTML = '<p>‚úÖ Configuration appliqu√©e avec succ√®s !</p>';

                // D√©clencher un √©v√©nement pour notifier les autres composants
                window.dispatchEvent(new CustomEvent('featuresUpdated', {
                    detail: mergedFeatures
                }));

                // Vider le textarea
                document.getElementById('features-input').value = '';

                alert('Configuration appliqu√©e ! Vous pouvez maintenant tester sur HERBBIE.');

            } catch (error) {
                document.getElementById('current-status').innerHTML = '<p>‚ùå Erreur lors de l\'application : ' + error.message + '</p>';
                alert('Erreur : ' + error.message);
            }
        }

        function openHerbbie() {
            window.open('https://herbbie.com', '_blank');
        }

        // Charger les fonctionnalit√©s au d√©marrage
        window.onload = function() {
            loadCurrentFeatures();
        };
    </script>
</body>
</html>

